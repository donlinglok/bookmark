<!DOCTYPE html>
<!-- saved from url=(0048)https://juejin.im/entry/5aa9ed73518825558b3da65e -->
<html lang="zh-CN" class="cye-disabled cye-nm gr__juejin_im"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,viewport-fit=cover"><meta name="google-site-verification" content="cCHsgG9ktuCTgWgYfqCJql8AeR4gAne4DTZqztPoirE"><meta name="apple-itunes-app" content="app-id=987739104"><meta name="baidu-site-verification" content="qiK2a1kcFc"><meta name="360-site-verification" content="4c3c7d57d59f0e1a308462fbc7fd7e51"><meta name="sogou_site_verification" content="c49WUDZczQ"><style>body {
        font-size: 16px;
        line-height: 2;
      }
      a, button, input {
        margin: 1rem 1.5rem;
      }
      img {
        width: 0;
        height: 0;
      }
      #juejin {
        overflow-x: hidden;
      }</style><style id="nightModeStyle">
html.cye-enabled.cye-nm:not(*:-webkit-full-screen) body,
 html.cye-enabled.cye-nm:not(*:-webkit-full-screen) #cye-workaround-body {-webkit-filter:contrast(91%) brightness(84%) invert(1);}</style><style id="cyebody">html.cye-enabled.cye-lm body{background-color:#c9e5cc !important;border-color:rgb(50, 57, 51) !important;color:#000000  !important}</style><style id="cyediv">html.cye-enabled.cye-lm div{background-color:#c9e5cc !important;border-color:rgb(50, 57, 51) !important;color:#000000  !important}</style><style id="cyetable">html.cye-enabled.cye-lm th{background-color:#c9e5cc !important;border-color:rgb(50, 57, 51) !important;color:#000000  !important}html.cye-enabled.cye-lm td{background-color:#c9e5cc !important;border-color:rgb(50, 57, 51) !important;color:#000000  !important}</style><style id="cyetextInput">html.cye-enabled.cye-lm input[type=text]{background-color:#c9e5cc !important;border-color:rgb(50, 57, 51) !important;color:#000000  !important}html.cye-enabled.cye-lm textarea{background-color:#c9e5cc !important;border-color:rgb(50, 57, 51) !important;color:#000000  !important}</style><style id="cyeselect">html.cye-enabled.cye-lm select{background-color:#c9e5cc !important;border-color:rgb(50, 57, 51) !important;color:#000000  !important}</style><style id="cyeul">html.cye-enabled.cye-lm ul{background-color:#c9e5cc !important;border-color:rgb(50, 57, 51) !important;color:#000000  !important}</style><style id="cyeChangeByClick">html.cye-enabled.cye-lm .cye-lm-tag,html.cye-enabled.cye-lm.cye-lm-tag{background-color:#c9e5cc !important;border-color:rgb(50, 57, 51) !important;color:#000000  !important}</style><meta data-vue-meta="true" data-vmid="keywords" name="keywords" content="后端,MySQL"><meta data-vue-meta="true" data-vmid="description" name="description" content="相关文章： 深入理解Mysql——高性能索引与高性能SQL 深入理解Mysql——锁、事务与并发控制(辟谣) 深入理解Mysql——schema设计与大表alter操作 mysql explain-output 译文 本文对锁、事"><title data-vue-meta="true">深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金</title><link rel="apple-touch-icon" sizes="180x180" href="https://b-gold-cdn.xitu.io/favicons/v2/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://b-gold-cdn.xitu.io/favicons/v2/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://b-gold-cdn.xitu.io/favicons/v2/favicon-16x16.png"><link rel="manifest" href="https://b-gold-cdn.xitu.io/favicons/v2/manifest.json"><link rel="mask-icon" href="https://b-gold-cdn.xitu.io/favicons/v2/safari-pinned-tab.svg" color="#5bbad5"><link rel="shortcut icon" href="https://b-gold-cdn.xitu.io/favicons/v2/favicon.ico"><meta name="msapplication-config" content="https://b-gold-cdn.xitu.io/favicons/v2/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="search" title="掘金" href="https://b-gold-cdn.xitu.io/conf/search.xml" type="application/opensearchdescription+xml"><link rel="stylesheet" href="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/ionicons.min.css"><link rel="stylesheet" href="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/iconfont.css"><link href="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/0.1060394bf447d7838315.css" rel="stylesheet"><script async="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/hm.js"></script><script async="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/analytics.js"></script><script type="text/javascript" async="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/vds.js"></script><script charset="utf-8" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/8.36eb96721d0be689a47d.js"></script></head><div id="cyeBlackMaskLayer" style="background-color: rgb(19, 19, 19); position: fixed; width: 1980px; height: 1080px; z-index: -2147483648;"></div><body data-gr-c-s-loaded="true" style=""><div id="juejin" data-v-514f306c=""><div class="global-component-box" data-v-514f306c=""><!----><div data-v-31a87b17="" data-v-514f306c="" class="alert-list alert-list"></div><div data-v-1c64242a="" data-v-514f306c="" class="suspension-panel suspension-panel"><button data-v-1c64242a="" title="回到顶部" class="btn to-top-btn" style=""><i data-v-1c64242a="" class="ion-android-arrow-dropup"></i></button><button data-v-1c64242a="" title="建议反馈" class="btn meiqia-btn" style=""><i data-v-1c64242a="" class="ion-chatbubble-working"></i></button></div><!----><!----><div class="emoji-barrage" data-v-2375059e="" data-v-514f306c=""><!----></div><div class="book-new-user-award-popup" style="display:none;" data-v-7164508e="" data-v-514f306c=""><div class="content-box" style="display:;" data-v-7164508e=""><div class="close ion-close-round" data-v-7164508e=""></div><div class="header" data-v-7164508e=""><div class="icon" data-v-7164508e=""><img src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/icon.a87e5ae.svg" data-v-7164508e=""></div><div class="txt" data-v-7164508e="">新人专享好礼</div></div><div class="desc" data-v-7164508e="">凡未购买过小册的用户，均可领取三张 5 折新人专享券，购买小册时自动使用专享券，最高可节省 45 元。</div><div class="tickets" data-v-7164508e=""><div class="ticket" data-v-7164508e=""><div class="ticket__inner" data-v-7164508e=""><div class="enjoy" data-v-7164508e=""><span class="new-title" data-v-7164508e="">小册新人 5 折券</span></div><div class="sale" data-v-7164508e="">最高可省 15 元</div></div></div><div class="ticket" data-v-7164508e=""><div class="ticket__inner" data-v-7164508e=""><div class="enjoy" data-v-7164508e=""><span class="new-title" data-v-7164508e="">小册新人 5 折券</span></div><div class="sale" data-v-7164508e="">最高可省 15 元</div></div></div><div class="ticket" data-v-7164508e=""><div class="ticket__inner" data-v-7164508e=""><div class="enjoy" data-v-7164508e=""><span class="new-title" data-v-7164508e="">小册新人 5 折券</span></div><div class="sale" data-v-7164508e="">最高可省 15 元</div></div></div></div><div class="remark" data-v-7164508e="">注：专享券的使用期限在领券的七天内。</div><div class="submit-btn" data-v-7164508e="">一键领取</div></div><div class="model success" style="display:none;" data-v-7164508e=""><div class="heading" data-v-7164508e="">领取成功</div><div class="content-text" data-v-7164508e="">购买小册时自动使用专享券</div><div class="btn-success-footer" data-v-7164508e=""><div class="btn-ok" data-v-7164508e="">知道了</div><div class="btn-ok btn-link" data-v-7164508e="">前往小册首页</div></div></div><div class="model fail" style="display:none;" data-v-7164508e=""><div class="heading" data-v-7164508e="">领取失败</div><div class="content-text" data-v-7164508e="">本活动仅适用于小册新用户</div><div class="btn-ok" data-v-7164508e="">知道了</div></div></div><!----></div><!----><div data-v-f6fdafdc="" data-v-91ebd2e4="" data-v-514f306c="" class="view-container"><div data-v-f6fdafdc="" class="main-header-box"><header data-v-f74d91b0="" data-v-f6fdafdc="" class="main-header main-header unauthorized"><div data-v-f74d91b0="" class="container"><a data-v-f74d91b0="" href="https://juejin.im/" class="logo"><img data-v-f74d91b0="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/logo.a7995ad.svg" alt="掘金" class="logo-img"></a><nav data-v-f74d91b0="" role="navigation" class="main-nav"><ul data-v-f74d91b0="" class="nav-list"><li data-v-f74d91b0="" class="main-nav-list"><div data-v-f74d91b0="" class="phone-show-menu"><span data-v-f74d91b0="">首页</span><div data-v-f74d91b0="" class="icon ion-arrow-down-b"></div></div><ul data-v-f74d91b0="" class="phone-hide"><li data-v-f74d91b0="" class="nav-item link-item route-active"><a data-v-f74d91b0="" href="https://juejin.im/">首页</a></li><li data-v-f74d91b0="" class="nav-item link-item activities"><a data-v-f74d91b0="" href="https://juejin.im/activities">动态</a></li><li data-v-f74d91b0="" class="nav-item link-item"><a data-v-f74d91b0="" href="https://juejin.im/topics">话题</a></li><li data-v-f74d91b0="" class="nav-item link-item book"><a data-v-f74d91b0="" href="https://juejin.im/books">小册</a></li><li data-v-f74d91b0="" class="nav-item link-item"><a data-v-f74d91b0="" href="https://juejin.im/events/all">活动</a></li></ul></li><li data-v-f74d91b0="" class="nav-item search"><form data-v-f74d91b0="" role="search" class="search-form"><input data-v-f74d91b0="" maxlength="32" placeholder="搜索更新啦" class="search-input"><img data-v-f74d91b0="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/juejin-search-icon.6f8ba1b.svg" alt="搜索" class="search-icon"></form></li><!----><!----><!----><li data-v-f74d91b0="" class="nav-item submit"><img data-v-f74d91b0="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/submit-icon.53f4253.svg" class="icon"><span data-v-f74d91b0="">写文章</span><!----></li><li data-v-f74d91b0="" class="nav-item auth"><span data-v-f74d91b0="" class="login">登录</span><span data-v-f74d91b0="" class="register">注册</span></li></ul></nav></div></header></div><main data-v-f6fdafdc="" class="container main-container"><div data-v-91ebd2e4="" data-v-f6fdafdc="" class="view entry-public-view"><div data-v-91ebd2e4="" data-v-f6fdafdc="" class="entry-public-main shadow"><!----><!----><article data-v-91ebd2e4="" itemscope="itemscope" itemtype="http://schema.org/Article" class="entry-content-box" data-v-f6fdafdc=""><meta itemprop="url" content="https://juejin.im/entry/5aa9ed73518825558b3da65e"><meta itemprop="headline" content="深入理解Mysql——锁、事务与并发控制"><meta itemprop="keywords" content="后端,MySQL"><meta itemprop="datePublished" content="2018-03-15T05:52:51.476Z"><meta itemprop="image" content="https://b-gold-cdn.xitu.io/icon/icon-128.png"><div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="song2song"><meta itemprop="url" content="https://juejin.im/user/5a57684df265da3e4f0a171a"></div><div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="掘金"><div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://b-gold-cdn.xitu.io/icon/icon-white-180.png"><meta itemprop="width" content="180"><meta itemprop="height" content="180"></div></div><h1 data-v-91ebd2e4="">深入理解Mysql——锁、事务与并发控制</h1><div data-v-91ebd2e4="" class="entry-public-info"><div data-v-91ebd2e4="" class="text-muted info-item">阅读 3956</div><div data-v-91ebd2e4="" class="text-muted info-item">收藏 354</div><div data-v-91ebd2e4="" class="text-muted info-item">2018-03-15</div></div><div data-v-91ebd2e4="" class="originalUrl">原文链接：<a data-v-91ebd2e4="" st:name="originLink" href="https://link.juejin.im/?target=http%3A%2F%2Fblog.csdn.net%2Flemon89%2Farticle%2Fdetails%2F51477497" rel="nofollow noopener noreferrer" target="_blank">blog.csdn.net</a></div><a data-v-91ebd2e4="" class="banner" href="https://www.teambition.com/agile?utm_source=juejin&amp;utm_term=dev" rel="nofollow noopener noreferrer" target="_blank"><span data-v-91ebd2e4="" class="text">Teambition，敏捷团队首选的研发管理工具，10人以下团队免费使用！</span><span data-v-91ebd2e4="" class="link">www.teambition.com</span></a><div data-v-91ebd2e4="" itemprop="articleBody" class="entry-content article-content"><p>相关文章： <br> <a href="https://link.juejin.im/?target=http%3A%2F%2Fblog.csdn.net%2Flemon89%2Farticle%2Fdetails%2F50193891" target="_blank" rel="nofollow noopener noreferrer">深入理解Mysql——高性能索引与高性能SQL</a> <br> <a href="https://link.juejin.im/?target=http%3A%2F%2Fblog.csdn.net%2Flemon89%2Farticle%2Fdetails%2F51477497" target="_blank" rel="nofollow noopener noreferrer">深入理解Mysql——锁、事务与并发控制(辟谣)</a> <br> <a href="https://link.juejin.im/?target=http%3A%2F%2Fblog.csdn.net%2Flemon89%2Farticle%2Fdetails%2F76651189" target="_blank" rel="nofollow noopener noreferrer">深入理解Mysql——schema设计与大表alter操作</a>        <br> <a href="https://link.juejin.im/?target=http%3A%2F%2Fblog.csdn.net%2Flemon89%2Farticle%2Fdetails%2F78357988" target="_blank" rel="nofollow noopener noreferrer">mysql explain-output 译文</a></p>
    <p><strong>本文对锁、事务、并发控制做一个总结，看了网上很多文章，描述非常不准确。如有与您观点不一致，欢迎有理有据的拍砖！</strong></p>
    <h1 id="mysql服务器逻辑架构" data-id="heading-0"><a></a>mysql服务器逻辑架构</h1>
    <p><img alt="这里写图片描述" title="" class="lazyload inited loaded" data-src="https://user-gold-cdn.xitu.io/2018/3/15/16227c7a03a4d637?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" data-width="800" data-height="385" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/16227c7a03a4d637"></p>
    <p>每个连接都会在mysql服务端产生一个线程（内部通过线程池管理线程），比如一个select语句进入，mysql首先会在查询缓存中查找是否缓存了这个select的结果集，如果没有则继续执行 解析、优化、执行的过程；否则会之间从缓存中获取结果集。</p>
    <h1 id="mysql并发控制共享锁排他锁" data-id="heading-1"><a></a>mysql并发控制——共享锁、排他锁</h1>
    <h2 id="共享锁" data-id="heading-2"><a></a>共享锁</h2>
    <p>共享锁也称为读锁，读锁允许多个连接可以同一时刻并发的读取同一资源,互不干扰；</p>
    <h2 id="排他锁" data-id="heading-3"><a></a>排他锁</h2>
    <p>排他锁也称为写锁，一个写锁会阻塞其他的写锁或读锁，保证同一时刻只有一个连接可以写入数据，同时防止其他用户对这个数据的读写。</p>
    <h2 id="锁策略" data-id="heading-4"><a></a>锁策略</h2>
    <p>锁的开销是较为昂贵的，锁策略其实就是保证了线程安全的同时获取最大的性能之间的平衡策略。</p>
    <ul>
        <li><strong>mysql锁策略：talbe lock(表锁)</strong></li>
    </ul>
    <p>表锁是mysql最基本的锁策略，也是开销最小的锁，它会锁定整个表；</p>
    <p>具体情况是：若一个用户正在执行写操作，会获取排他的“写锁”，这可能会锁定整个表，阻塞其他用户的读、写操作；</p>
    <p>若一个用户正在执行读操作，会先获取共享锁“读锁”，这个锁运行其他读锁并发的对这个表进行读取，互不干扰。只要没有写锁的进入，读锁可以是并发读取统一资源的。</p>
    <p>通常发生在DDL语句\DML不走索引的语句中，比如这个DML update table set columnA=”A” where columnB=“B”. 如果columnB字段不存在索引（或者不是组合索引前缀），会锁住所有记录也就是锁表。如果语句的执行能够执行一个columnB字段的索引，那么会锁住满足where的行(行锁)。</p>
    <ul>
        <li><strong>mysql锁策略：row lock(行锁)</strong></li>
    </ul>
    <p>行锁可以最大限度的支持并发处理，当然也带来了最大开销，顾名思义，行锁的粒度实在每一条行数据。</p>
    <h1 id="事务" data-id="heading-5"><a></a>事务</h1>
    <p><strong>事务就是一组原子性的sql，或者说一个独立的工作单元。</strong> <br> <strong>事务就是说，要么mysql引擎会全部执行这一组sql语句，要么全部都不执行（比如其中一条语句失败的话）。</strong></p>
    <p>比如，tim要给bill转账100块钱： <br> 1.检查tim的账户余额是否大于100块； <br> 2.tim的账户减少100块； <br> 3.bill的账户增加100块； <br> 这三个操作就是一个事务，必须打包执行，要么全部成功，要么全部不执行，其中任何一个操作的失败都会导致所有三个操作“不执行”——回滚。</p>
    <pre><code>CREATE DATABASE IF NOT EXISTS employees;
USE employees;

CREATE TABLE `employees`.`account` (
  `id` BIGINT (11) NOT NULL AUTO_INCREMENT,
  `p_name` VARCHAR (4),
  `p_money` DECIMAL (10, 2) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`)
) ;
INSERT INTO `employees`.`account` (`id`, `p_name`, `p_money`) VALUES ('1', 'tim', '200'); 
INSERT INTO `employees`.`account` (`id`, `p_name`, `p_money`) VALUES ('2', 'bill', '200'); 

START TRANSACTION;
SELECT p_money FROM account WHERE p_name="tim";-- step1
UPDATE account SET p_money=p_money-100 WHERE p_name="tim";-- step2
UPDATE account SET p_money=p_money+100 WHERE p_name="bill";-- step3
COMMIT;</code></pre>
    <p>一个良好的事务系统，必须满足ACID特点：</p>
    <h2 id="事务的acid" data-id="heading-6"><a></a>事务的ACID</h2>
    <ul>
        <li>
            <p><strong>A:atomiciy原子性</strong> <br> <strong>一个事务必须保证其中的操作要么全部执行，要么全部回滚，不可能存在只执行了一部分这种情况出现。</strong></p>
        </li>
        <li>
            <p><strong>C:consistency一致性</strong> <br> <strong>数据必须保证从一种一致性的状态转换为另一种一致性状态</strong>。 <br> 比如上一个事务中执行了第二步时系统崩溃了，数据也不会出现bill的账户少了100块，但是tim的账户没变的情况。要么维持原装（全部回滚），要么bill少了100块同时tim多了100块，只有这两种一致性状态的</p>
        </li>
        <li>
            <p><strong>I：isolation隔离性</strong> <br> <strong>在一个事务未执行完毕时，通常会保证其他Session 无法看到这个事务的执行结果</strong></p>
        </li>
        <li>
            <p><strong>D:durability持久性</strong> <br> <strong>事务一旦commit，则数据就会保存下来，即使提交完之后系统崩溃，数据也不会丢失。</strong></p>
        </li>
    </ul>
    <h1 id="隔离级别" data-id="heading-7"><a></a>隔离级别</h1>
    <p><img alt="这里写图片描述" title="" class="lazyload inited loaded" data-src="https://user-gold-cdn.xitu.io/2018/3/15/16227c7a03ba06f6?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" data-width="906" data-height="205" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/16227c7a03ba06f6"></p>
    <pre><code>查看系统隔离级别：
select @@global.tx_isolation;
查看当前会话隔离级别
select @@tx_isolation;
设置当前会话隔离级别
SET session TRANSACTION ISOLATION LEVEL serializable;
设置全局系统隔离级别
SET GLOBAL TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;</code></pre>
    <hr>
    <h2 id="read-uncommitted未提交读可脏读" data-id="heading-8"><a></a>READ UNCOMMITTED(未提交读,可脏读)</h2>
    <p><strong>事务中的修改，即使没有提交，对其他会话也是可见的。</strong> <br> <strong>可以读取未提交的数据</strong>——<strong>脏读</strong>。脏读会导致很多问题，一般不适用这个隔离级别。 <br> 实例：</p>
    <pre><code>-- ------------------------- read-uncommitted实例 ------------------------------
-- 设置全局系统隔离级别
SET GLOBAL TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
-- Session A
START TRANSACTION;
SELECT * FROM USER;
UPDATE USER SET NAME="READ UNCOMMITTED";
-- commit;

-- Session B
SELECT * FROM USER;

//SessionB Console 可以看到Session A未提交的事物处理，在另一个Session 中也看到了，这就是所谓的脏读
id  name
2   READ UNCOMMITTED
34  READ UNCOMMITTED
</code></pre>
    <hr>
    <h2 id="read-committed提交读或不可重复读幻读" data-id="heading-9"><a></a>READ COMMITTED(提交读或不可重复读，幻读)</h2>
    <p>一般数据库都默认使用这个隔离级别（mysql不是），<strong>这个隔离级别保证了一个事务如果没有完全成功（commit执行完），事务中的操作对其他会话是不可见的</strong>。</p>
    <pre><code>-- ------------------------- read-cmmitted实例 ------------------------------
-- 设置全局系统隔离级别
SET GLOBAL TRANSACTION ISOLATION LEVEL READ  COMMITTED;
-- Session A
START TRANSACTION;
SELECT * FROM USER;
UPDATE USER SET NAME="READ COMMITTED";
-- COMMIT;

-- Session B
SELECT * FROM USER;

//Console OUTPUT:
id  name
2   READ UNCOMMITTED
34  READ UNCOMMITTED


---------------------------------------------------
-- 当 Session  A执行了commit，Session B得到如下结果：
id  name
2   READ COMMITTED
34  READ COMMITTED</code></pre>
    <p>也就验证了<strong>read committed</strong>级别在事物未完成commit操作之前修改的数据对其他Session 不可见，执行了commit之后才会对其他Session 可见。 <br> 我们可以看到Session B两次查询得到了不同的数据。</p>
    <p><strong>read committed隔离级别解决了脏读的问题，但是会对其他Session 产生两次不一致的读取结果（因为另一个Session 执行了事务，一致性变化）。</strong></p>
    <hr>
    <h2 id="repeatable-read可重复读" data-id="heading-10"><a></a>REPEATABLE READ(可重复读)</h2>
    <p>一个事务中多次执行统一读SQL,返回结果一样。 <br> 这个隔离级别解决了脏读的问题，幻读问题。这里指的是innodb的rr级别，innodb中使用next-key锁对”当前读”进行加锁，锁住行以及可能产生幻读的插入位置，阻止新的数据插入产生幻行。 <br> 下文中详细分析。</p>
    <p>具体请参考mysql手册</p>
    <blockquote>
        <p><a href="https://link.juejin.im/?target=https%3A%2F%2Fdev.mysql.com%2Fdoc%2Frefman%2F5.7%2Fen%2Finnodb-storage-engine.html" target="_blank" rel="nofollow noopener noreferrer">dev.mysql.com/doc/refman/…</a></p>
    </blockquote>
    <hr>
    <h2 id="serializable可串行化" data-id="heading-11"><a></a>SERIALIZABLE(可串行化)</h2>
    <p>最强的隔离级别，通过给事务中每次读取的行加锁，写加写锁，保证不产生幻读问题，但是会导致大量超时以及锁争用问题。</p>
    <h1 id="多版本并发控制-mvcc" data-id="heading-12"><a></a>多版本并发控制-MVCC</h1>
    <p>MVCC(multiple-version-concurrency-control）是个<strong>行级锁</strong>的变种，它在<strong>普通读情况下避免了加锁操作，因此开销更低</strong>。 <br> 虽然实现不同，但通常都是实现<strong>非阻塞读</strong>，对于<strong>写操作只锁定必要的行</strong>。</p>
    <ul>
        <li><strong>一致性读 （就是读取快照）</strong> <br> select * from table ….;</li>
        <li><strong>当前读(就是读取实际的持久化的数据)</strong> <br> 特殊的读操作，插入/更新/删除操作，属于当前读，处理的都是当前的数据，需要加锁。 <br> select * from table where ? lock in share mode; <br> select * from table where ? for update; <br> insert; <br> update ; <br> delete;</li>
    </ul>
    <p><strong>注意：select …… from where…… （没有额外加锁后缀）使用MVCC，保证了读快照(mysql称为consistent read)，所谓一致性读或者读快照就是读取当前事务开始之前的数据快照，在这个事务开始之后的更新不会被读到。详细情况下文select的详述。</strong></p>
    <p><strong>对于加锁读SELECT with FOR UPDATE(排他锁) or LOCK IN SHARE MODE(共享锁)、update、delete语句，要考虑是否是唯一索引的等值查询。</strong></p>
    <h2 id="写锁-recordlockgaplocknext-key-lock" data-id="heading-13"><a></a>写锁-recordLock,gapLock,next key lock</h2>
    <p><strong>对于使用到唯一索引 等值查询：比如，where columnA=”…” ，如果columnA上的索引被使用到，</strong> <br> <strong>那么会在满足where的记录上加行锁(for update是排他锁,lock in shared 是共享锁，其他写操作加排他锁)。这里是行级锁，record lock。</strong></p>
    <p><strong>对于范围查询（使用非唯一的索引）：</strong> <br> <strong>比如(做范围查询)：where columnA between 10 and 30 ,会导致其他会话中10以后的数据都无法插入(next key lock),从而解决了幻读问题。</strong></p>
    <p><strong>这里是next key lock 会包括涉及到的所有行。</strong> <br> <strong>next key lock=recordLock+gapLock，不仅锁住相关数据，而且锁住边界，从而彻底避免幻读</strong>。<a href="https://link.juejin.im/?target=http%3A%2F%2Fhedengcheng.com%2F%3Fp%3D771%23_Toc374698322" target="_blank" rel="nofollow noopener noreferrer">可点击查看这篇推荐文章</a></p>
    <p><strong>对于没有索引</strong> <br> <strong>锁表</strong> <br> 通常发生在DDL语句\DML不走索引的语句中，比如这个DML update table set columnA=”A” where columnB=“B”. <br> 如果columnB字段不存在索引（或者不是组合索引前缀），会锁住所有记录也就是锁表。如果语句的执行能够执行一个columnB字段的索引，那么会锁住满足where的行(行锁)。</p>
    <p><strong>INNODB的MVCC通常是通过在每行数据后边保存两个隐藏的列来实现(其实是三列，第三列是用于事务回滚，此处略去)，</strong> <br> <strong>一个保存了行的创建版本号，另一个保存了行的更新版本号（上一次被更新数据的版本号）</strong> <br> 这个版本号是每个事务的版本号，递增的。</p>
    <p>这样保证了innodb对读操作不需要加锁也能保证正确读取数据。</p>
    <h2 id="mvcc-select无锁操作-与-维护版本号" data-id="heading-14"><a></a>MVCC select无锁操作 与 维护版本号</h2>
    <p>下边在mysql默认的Repeatable Read隔离级别下，具体看看MVCC操作：</p>
    <ul>
        <li>
            <p><strong>Select（快照读，所谓读快照就是读取当前事务之前的数据。）：</strong> <br> a.<strong>InnoDB只select查找版本号早于当前版本号的数据行</strong>，这样保证了读取的数据要么是在这个事务开始之前就已经commit了的（早于当前版本号），要么是在这个事务自身中执行创建操作的数据（等于当前版本号）。</p>
            <p>b.查找行的更新版本号要么未定义，要么大于当前的版本号(为了保证事务可以读到老数据)，这样保证了事务读取到在当前事务开始之后未被更新的数据。 <br> 注意： 这里的select不能有for update、lock in share 语句。 <br> 总之要只返回满足以下条件的行数据，达到了快照读的效果：</p>
        </li>
    </ul>
    <pre><code>(行创建版本号&lt; =当前版本号 &amp;&amp; (行更新版本号==null or 行更新版本号&gt;当前版本号 ) )</code></pre>
    <ul>
        <li>
            <p><strong>Insert</strong></p>
            <p>InnoDB为这个事务中新插入的行，保存当前事务版本号的行作为行的行创建版本号。</p>
        </li>
        <li>
            <p><strong>Delete</strong> <br> InnoDB为每一个删除的行保存当前事务版本号，作为行的删除标记。</p>
        </li>
        <li>
            <p><strong>Update</strong></p>
            <p>将存在两条数据，保持当前版本号作为更新后的数据的新增版本号，同时保存当前版本号作为老数据行的更新版本号。</p>
        </li>
    </ul>
    <pre><code>当前版本号—写—&gt;新数据行创建版本号 &amp;&amp; 当前版本号—写—&gt;老数据更新版本号();</code></pre>
    <h2 id="脏读-vs-幻读-vs-不可重复读" data-id="heading-15"><a></a>脏读 vs 幻读 vs 不可重复读 </h2>
    <p><strong>脏读</strong>：<strong>一事务未提交的中间状态的更新数据 被其他会话读取到。</strong> 当一个事务正在访问数据，并且对数据进行了修改，而这种修改还没有 提交到数据库中(commit未执行)，这时，另外会话也访问这个数据，因为这个数据是还没有提交， 那么另外一个会话读到的这个数据是脏数据，依据脏数据所做的操作也可能是不正确的。</p>
    <p><strong>不可重复读</strong>：<strong>简单来说就是在一个事务中读取的数据可能产生变化，ReadCommitted也称为不可重复读</strong>。</p>
    <p>在同一事务中，多次读取同一数据返回的结果有所不同。换句话说就是，后续读取可以读到另一会话事务已提交的更新数据。 相反，“可重复读”在同一事务中多次读取数据时，能够保证所读数据一样，也就是，后续读取不能读到另一会话事务已提交的更新数据。</p>
    <p><strong>幻读</strong>：会话T1事务中执行一次查询，然后会话T2新插入一行记录，<strong>这行记录恰好可以满足T1所使用的查询的条件</strong>。然后T1又使用相同 的查询再次对表进行检索，但是此时却看到了事务T2刚才插入的新行。这个新行就称为“幻像”，因为对T1来说这一行就像突然 出现的一样。 <br> innoDB的RR级别无法做到完全避免幻读，下文详细分析。</p>
    <pre><code>----------------------------------前置准备----------------------------------------
prerequisite：
-- 创建表
mysql&gt;
CREATE TABLE `t_bitfly` (
   `id` bigint(20) NOT NULL DEFAULT '0',
   `value` varchar(32) DEFAULT NULL,
   PRIMARY KEY (`id`)
 )

-- 确保当前隔离级别为默认的RR级别

mysql&gt; select @@global.tx_isolation, @@tx_isolation;
+-----------------------+-----------------+
| @@global.tx_isolation | @@tx_isolation  |
+-----------------------+-----------------+
| REPEATABLE-READ       | REPEATABLE-READ |
+-----------------------+-----------------+
1 row in set (0.00 sec)
---------------------------------------开始--------------------------------------------- 


session A                                           |   session B
                                                    |
                                                    |
mysql&gt; START TRANSACTION;                           |   mysql&gt; START TRANSACTION;
Query OK, 0 rows affected (0.00 sec)                |   Query OK, 0 rows affected (0.00 sec)                                        
                                                    |   
                                                    |
mysql&gt; SELECT * FROM test.t_bitfly;                 |   mysql&gt; SELECT * FROM test.t_bitfly; 
Empty set (0.00 sec)                                |   Empty set (0.00 sec)
                                                    |
                                                    |   mysql&gt; INSERT INTO t_bitfly VALUES (1, 'test');
                                                    |   Query OK, 1 row affected (0.00 sec)
                                                    |
                                                    |
mysql&gt; SELECT * FROM test.t_bitfly;                 |
Empty set (0.00 sec)                                |
                                                    |
                                                    |   mysql&gt; commit;
                                                    |   Query OK, 0 rows affected (0.01 sec)                                                
mysql&gt; SELECT * FROM test.t_bitfly;                 |
Empty set (0.00 sec)                                |
-- 可以看到虽然两次执行结果返回的数据一致，         |
-- 但是不能说明没有幻读。接着看：                   |
                                                    |
mysql&gt; INSERT INTO t_bitfly VALUES (1, 'test');     |
ERROR 1062 (23000):                                 |
Duplicate entry '1' for key 'PRIMARY'               |
                                                    |
-- 明明为空的表，为什么说主键重复？——幻读出现 ！！！       |
</code></pre>
    <h2 id="如何保证rr级别绝对不产生幻读" data-id="heading-16"><a></a>如何保证rr级别绝对不产生幻读？</h2>
    <p>在使用的select …where语句中加入 for update(排他锁) 或者 lock in share mode(共享锁)语句来实现。<strong>其实就是锁住了可能造成幻读的数据，阻止数据的写入操作。</strong></p>
    <p>其实是因为数据的写入操作(insert 、update)需要先获取写锁，由于可能产生幻读的部分，已经获取到了某种锁，所以要在另外一个会话中获取写锁的前提是当前会话中释放所有因加锁语句产生的锁。</p>
    <h2 id="mysql死锁问题" data-id="heading-17"><a></a>mysql死锁问题</h2>
    <p>死锁，就是产生了循环等待链条，我等待你的资源，你却等待我的资源，我们都相互等待，谁也不释放自己占有的资源，导致无线等待下去。 比如：</p>
    <pre><code>//Session A
START TRANSACTION;
UPDATE account SET p_money=p_money-100 WHERE p_name="tim";
UPDATE account SET p_money=p_money+100 WHERE p_name="bill";
COMMIT;
//Thread B
START TRANSACTION;
UPDATE account SET p_money=p_money+100 WHERE p_name="bill";
UPDATE account SET p_money=p_money-100 WHERE p_name="tim";
COMMIT;</code></pre>
    <p>当线程A执行到第一条语句UPDATE account SET p_money=p_money-100 WHERE p_name=”tim”;锁定了p_name=”tim”的行数据；并且试图获取p_name=”bill”的数据；</p>
    <p>，此时，恰好，线程B也执行到第一条语句：UPDATE account SET p_money=p_money+100 WHERE p_name=”bill”;</p>
    <p>锁定了 p_name=”bill”的数据，同时试图获取p_name=”tim”的数据； 此时，两个线程就进入了死锁，谁也无法获取自己想要获取的资源，进入无线等待中，直到超时！</p>
    <p><strong>innodb_lock_wait_timeout 等待锁超时回滚事务：</strong> <br> 直观方法是在两个事务相互等待时，当一个等待时间超过设置的某一阀值时，对其中一个事务进行回滚，另一个事务就能继续执行。这种方法简单有效，在innodb中，参数innodb_lock_wait_timeout用来设置超时时间。</p>
    <p><strong>wait-for graph算法来主动进行死锁检测：</strong> <br> innodb还提供了wait-for graph算法来主动进行死锁检测，每当加锁请求无法立即满足需要并进入等待时，wait-for graph算法都会被触发。</p>
    <p><strong>如何尽可能避免死锁</strong></p>
    <p>1）以固定的顺序访问表和行。比如两个更新数据的事务，事务A 更新数据的顺序 为1，2；事务B更新数据的顺序为2，1。这样更可能会造成死锁。</p>
    <p>2）大事务拆小。大事务更倾向于死锁，如果业务允许，将大事务拆小。</p>
    <p>3）在同一个事务中，尽可能做到一次锁定所需要的所有资源，减少死锁概率。</p>
    <p>4）降低隔离级别。如果业务允许，将隔离级别调低也是较好的选择，比如将隔离级别从RR调整为RC，可以避免掉很多因为gap锁造成的死锁。</p>
    <p>5）为表添加合理的索引。可以看到如果不走索引将会为表的每一行记录添加上锁，死锁的概率大大增大。</p>
    <p><strong>显式锁 与 隐式锁</strong> <br> <strong>隐式锁</strong>:我们上文说的锁都属于不需要额外语句加锁的隐式锁。 <br> <strong>显示锁</strong>：</p>
    <pre><code>SELECT ... LOCK IN SHARE MODE(加共享锁);
SELECT ... FOR UPDATE(加排他锁);</code></pre>
    <p>详情上文已经说过。</p>
    <p>通过如下sql可以查看等待锁的情况</p>
    <pre><code>select * from information_schema.innodb_trx where trx_state="lock wait";
或
show engine innodb status;</code></pre>
    <h2 id="mysql中的事务" data-id="heading-18"><a></a>mysql中的事务</h2>
    <pre><code>show variables like "autocommit";

set autocommit=0; //0表示AutoCommit关闭
set autocommit=1; //1表示AutoCommit开启
</code></pre>
    <ul>
        <li><strong>自动提交（AutoCommit，mysql默认）</strong></li>
    </ul>
    <p>mysql默认采用AutoCommit模式，也就是每个sql都是一个事务，并不需要显示的执行事务。 如果autoCommit关闭，那么每个sql都默认开启一个事务，只有显式的执行“commit”后这个事务才会被提交。</p>
    <blockquote>
        <p>推荐： <br> <a href="https://link.juejin.im/?target=https%3A%2F%2Fdev.mysql.com%2Fdoc%2Frefman%2F5.7%2Fen%2Finnodb-storage-engine.html" target="_blank" rel="nofollow noopener noreferrer">dev.mysql.com/doc/refman/…</a> <br> <a href="https://link.juejin.im/?target=http%3A%2F%2Fhedengcheng.com%2F%3Fp%3D577" target="_blank" rel="nofollow noopener noreferrer">hedengcheng.com/?p=577</a> <br>
            <a href="https://link.juejin.im/?target=http%3A%2F%2Fhedengcheng.com%2F%3Fp%3D771" target="_blank" rel="nofollow noopener noreferrer">hedengcheng.com/?p=771</a>
        </p>
    </blockquote>
</div><div data-v-91ebd2e4="" class="footer"><ul data-v-91ebd2e4="" class="tag-list"><li data-v-91ebd2e4="" class="item"><a data-v-91ebd2e4="" href="https://juejin.im/tag/%E5%90%8E%E7%AB%AF" class="">后端</a></li><li data-v-91ebd2e4="" class="item"><a data-v-91ebd2e4="" href="https://juejin.im/tag/MySQL" class="">MySQL</a></li></ul><section data-v-91ebd2e4=""><div data-v-db942a76="" data-v-91ebd2e4="" class="wechat-banner wechat-banner"><img data-v-db942a76="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/backend.58ef824.png" class="wechat-img"></div></section><!----><div data-v-91ebd2e4="" class="related-entry-list-box"><div data-v-91ebd2e4="" class="title">相关热门文章</div><ul data-v-91ebd2e4="" class="related-entry-list"><li data-v-91ebd2e4="" class="item"><div data-v-2c587f50="" data-v-91ebd2e4="" st:block="relatedEntry" class="related-entry related-entry"><a data-v-2c587f50="" href="https://juejin.im/post/5c984e366fb9a070cf6bd9f2" target="_blank" rel="" st:name="link" class="entry-link"><div data-v-5b957c59="" data-v-5f4c8686="" data-v-2c587f50="" data-src="https://b-gold-cdn.xitu.io/v3/static/img/default-thumb.4810307.png?imageView2/1/q/85/format/webp/interlace/1" class="lazy thumb thumb loaded" style="background-image: url(&quot;https://b-gold-cdn.xitu.io/v3/static/img/default-thumb.4810307.png?imageView2/1/q/85/format/webp/interlace/1&quot;); background-size: cover;"></div><div data-v-2c587f50="" class="info"><div data-v-2c587f50="" class="row title-row"><span data-v-2c587f50="" class="title">程序猿生存指南-62 鹊桥银河</span></div><div data-v-2c587f50="" class="row meta-row"><ul data-v-2c587f50="" class="meta-list"><li data-v-2c587f50="" class="meta user"><div data-v-2c587f50="" class="username">胡七筒</div></li><li data-v-2c587f50="" class="meta like"><div data-v-2c587f50="" class="icon icon-likes iconfont icon-xlcollection"></div><div data-v-2c587f50="" class="count">29</div></li><li data-v-2c587f50="" class="meta comment"><div data-v-2c587f50="" class="icon icon-comments iconfont icon-xlchatbox"></div><div data-v-2c587f50="" class="count">30</div></li></ul></div></div></a></div></li><li data-v-91ebd2e4="" class="item"><div data-v-2c587f50="" data-v-91ebd2e4="" st:block="relatedEntry" class="related-entry related-entry"><a data-v-2c587f50="" href="https://juejin.im/post/5c94716df265da60f30d4aac" target="_blank" rel="" st:name="link" class="entry-link"><div data-v-5b957c59="" data-v-5f4c8686="" data-v-2c587f50="" data-src="https://user-gold-cdn.xitu.io/2019/3/22/169a5b254c9fe012?imageView2/1/q/85/format/webp/interlace/1" class="lazy thumb thumb loaded" style="background-image: url(&quot;https://user-gold-cdn.xitu.io/2019/3/22/169a5b254c9fe012?imageView2/1/q/85/format/webp/interlace/1&quot;); background-size: cover;"></div><div data-v-2c587f50="" class="info"><div data-v-2c587f50="" class="row title-row"><span data-v-2c587f50="" class="title">MySql 三大知识点——索引、锁、事务！</span></div><div data-v-2c587f50="" class="row meta-row"><ul data-v-2c587f50="" class="meta-list"><li data-v-2c587f50="" class="meta user"><div data-v-2c587f50="" class="username">java架构交流</div></li><li data-v-2c587f50="" class="meta like"><div data-v-2c587f50="" class="icon icon-likes iconfont icon-xlcollection"></div><div data-v-2c587f50="" class="count">18</div></li><!----></ul></div></div></a></div></li><li data-v-91ebd2e4="" class="item"><div data-v-2c587f50="" data-v-91ebd2e4="" st:block="relatedEntry" class="related-entry related-entry"><a data-v-2c587f50="" href="https://juejin.im/post/5c986f715188250ee57060c2" target="_blank" rel="" st:name="link" class="entry-link"><div data-v-5b957c59="" data-v-5f4c8686="" data-v-2c587f50="" data-src="https://b-gold-cdn.xitu.io/v3/static/img/default-thumb.4810307.png?imageView2/1/q/85/format/webp/interlace/1" class="lazy thumb thumb loaded" style="background-image: url(&quot;https://b-gold-cdn.xitu.io/v3/static/img/default-thumb.4810307.png?imageView2/1/q/85/format/webp/interlace/1&quot;); background-size: cover;"></div><div data-v-2c587f50="" class="info"><div data-v-2c587f50="" class="row title-row"><span data-v-2c587f50="" class="title">Spring Boot 2.x基础教程：快速入门</span></div><div data-v-2c587f50="" class="row meta-row"><ul data-v-2c587f50="" class="meta-list"><li data-v-2c587f50="" class="meta user"><div data-v-2c587f50="" class="username">程序猿DD_</div></li><li data-v-2c587f50="" class="meta like"><div data-v-2c587f50="" class="icon icon-likes iconfont icon-xlcollection"></div><div data-v-2c587f50="" class="count">6</div></li><!----></ul></div></div></a></div></li><li data-v-91ebd2e4="" class="item"><div data-v-2c587f50="" data-v-91ebd2e4="" st:block="relatedEntry" class="related-entry related-entry"><a data-v-2c587f50="" href="https://juejin.im/post/5c9842e0e51d454f90168887" target="_blank" rel="" st:name="link" class="entry-link"><div data-v-5b957c59="" data-v-5f4c8686="" data-v-2c587f50="" data-src="https://b-gold-cdn.xitu.io/v3/static/img/default-thumb.4810307.png?imageView2/1/q/85/format/webp/interlace/1" class="lazy thumb thumb loaded" style="background-image: url(&quot;https://b-gold-cdn.xitu.io/v3/static/img/default-thumb.4810307.png?imageView2/1/q/85/format/webp/interlace/1&quot;); background-size: cover;"></div><div data-v-2c587f50="" class="info"><div data-v-2c587f50="" class="row title-row"><span data-v-2c587f50="" class="title">漫话：如何给女朋友解释什么是系统可用性？</span></div><div data-v-2c587f50="" class="row meta-row"><ul data-v-2c587f50="" class="meta-list"><li data-v-2c587f50="" class="meta user"><div data-v-2c587f50="" class="username">漫话编程</div></li><li data-v-2c587f50="" class="meta like"><div data-v-2c587f50="" class="icon icon-likes iconfont icon-xlcollection"></div><div data-v-2c587f50="" class="count">3</div></li><li data-v-2c587f50="" class="meta comment"><div data-v-2c587f50="" class="icon icon-comments iconfont icon-xlchatbox"></div><div data-v-2c587f50="" class="count">2</div></li></ul></div></div></a></div></li><li data-v-91ebd2e4="" class="item"><div data-v-2c587f50="" data-v-91ebd2e4="" st:block="relatedEntry" class="related-entry related-entry"><a data-v-2c587f50="" href="https://juejin.im/post/5c95d248e51d45097926a125" target="_blank" rel="" st:name="link" class="entry-link"><div data-v-5b957c59="" data-v-5f4c8686="" data-v-2c587f50="" data-src="https://b-gold-cdn.xitu.io/v3/static/img/default-thumb.4810307.png?imageView2/1/q/85/format/webp/interlace/1" class="lazy thumb thumb loaded" style="background-image: url(&quot;https://b-gold-cdn.xitu.io/v3/static/img/default-thumb.4810307.png?imageView2/1/q/85/format/webp/interlace/1&quot;); background-size: cover;"></div><div data-v-2c587f50="" class="info"><div data-v-2c587f50="" class="row title-row"><span data-v-2c587f50="" class="title">Aloha：一个分布式任务调度框架</span></div><div data-v-2c587f50="" class="row meta-row"><ul data-v-2c587f50="" class="meta-list"><li data-v-2c587f50="" class="meta user"><div data-v-2c587f50="" class="username">jrthe42</div></li><li data-v-2c587f50="" class="meta like"><div data-v-2c587f50="" class="icon icon-likes iconfont icon-xlcollection"></div><div data-v-2c587f50="" class="count">3</div></li><li data-v-2c587f50="" class="meta comment"><div data-v-2c587f50="" class="icon icon-comments iconfont icon-xlchatbox"></div><div data-v-2c587f50="" class="count">2</div></li></ul></div></div></a></div></li></ul></div></div></article><div data-v-6bc5fe54="" data-v-91ebd2e4="" class="comment-list-box" id="comment-box" data-v-f6fdafdc="" manual="true"><div data-v-6bc5fe54="" class="title">评论</div><div data-v-0f4f171a="" data-v-6bc5fe54="" class="comment-form comment-form"><div data-v-0f4f171a="" class="avatar-box"><div data-v-5b957c59="" data-v-b5e0fa26="" data-v-0f4f171a="" data-src="https://b-gold-cdn.xitu.io/v3/static/img/default-avatar.e30559a.svg" class="lazy avatar avatar loaded" style="background-image: url(&quot;https://b-gold-cdn.xitu.io/v3/static/img/default-avatar.e30559a.svg&quot;);"></div></div><div data-v-0f4f171a="" class="form-box"><div data-v-0f4f171a="" class="input-box"><div data-v-0f4f171a="" contenteditable="true" spellcheck="false" placeholder="输入评论..." class="rich-input empty"><br data-v-0f4f171a=""></div><!----></div><!----></div><input data-v-0f4f171a="" type="file" class="hidden"></div><div data-v-2cad70f5="" data-v-6bc5fe54="" class="comment-list comment-list"><div data-v-3d504eeb="" data-v-2cad70f5="" class="image-viewer-box"><!----></div><div data-v-2cad70f5="" class="item"><div data-v-419974fe="" data-v-2cad70f5="" class="comment comment"><div data-v-14a78378="" data-v-419974fe="" st:block="userPopover" st:state="5c6c05e0e51d450ba2442130" class="user-popover-box popover"><!----><a data-v-419974fe="" href="https://juejin.im/user/5c6c05e0e51d450ba2442130" target="_blank" rel="" class="user-link" data-v-14a78378=""><div data-v-5b957c59="" data-v-b5e0fa26="" data-v-419974fe="" data-src="https://user-gold-cdn.xitu.io/2019/2/19/16905f9aea5bea46?imageView2/1/w/100/h/100/q/85/format/webp/interlace/1" class="lazy avatar avatar loaded" style="background-image: url(&quot;https://user-gold-cdn.xitu.io/2019/2/19/16905f9aea5bea46?imageView2/1/w/100/h/100/q/85/format/webp/interlace/1&quot;);"></div></a></div><div data-v-419974fe="" class="content-box comment-divider-line"><div data-v-419974fe="" class="meta-box"><div data-v-14a78378="" data-v-419974fe="" st:block="userPopover" st:state="5c6c05e0e51d450ba2442130" class="user-popover-box"><!----><a data-v-419974fe="" href="https://juejin.im/user/5c6c05e0e51d450ba2442130" target="_blank" rel="" class="username ellipsis" data-v-14a78378="">码农007<!----></a></div><div data-v-419974fe="" class="position"></div></div><div data-v-419974fe="" class="content">原文在这里：<a href="https://link.juejin.im/?target=https%3A%2F%2Fblog.csdn.net%2Flemon89%2Farticle%2Fdetails%2F51477497" class="parse-emoji-url" style="color: #027fff" title="https://blog.csdn.net/lemon89/article/details/51477497" target="_blank" rel="nofollow noopener noreferrer"><img alt="https://blog.csdn.net/lemon89/article/details/51477497" style="vertical-align: sub" draggable="false" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/pin-url-link.3f843e8.svg">网页链接</a></div><div data-v-419974fe="" class="limit-ctl-box"><!----><!----></div><!----><div data-v-419974fe="" class="reply-stat"><time data-v-419974fe="" datetime="2019-02-19T13:37:49.028Z" title="Tue Feb 19 2019 21:37:49 GMT+0800 (Hong Kong Standard Time)" class="time">1月前</time><div data-v-419974fe="" class="delete"> &nbsp;·&nbsp;删除</div><div data-v-419974fe="" class="action-box"><div data-v-419974fe="" class="like-action action"><svg data-v-419974fe="" aria-hidden="true" width="16" height="16" viewBox="0 0 20 20" class="icon like-icon"><g data-v-419974fe="" fill="none" fill-rule="evenodd"><path data-v-419974fe="" d="M0 0h20v20H0z"></path> <path data-v-419974fe="" stroke="#8A93A0" stroke-linejoin="round" d="M4.58 8.25V17h-1.4C2.53 17 2 16.382 2 15.624V9.735c0-.79.552-1.485 1.18-1.485h1.4zM11.322 2c1.011.019 1.614.833 1.823 1.235.382.735.392 1.946.13 2.724-.236.704-.785 1.629-.785 1.629h4.11c.434 0 .838.206 1.107.563.273.365.363.84.24 1.272l-1.86 6.513A1.425 1.425 0 0 1 14.724 17H6.645V7.898C8.502 7.51 9.643 4.59 9.852 3.249A1.47 1.47 0 0 1 11.322 2z"></path></g></svg><!----></div><div data-v-419974fe="" class="comment-action action"><svg data-v-419974fe="" aria-hidden="true" width="16" height="16" viewBox="0 0 20 20" class="icon comment-icon"><g data-v-419974fe="" fill="none" fill-rule="evenodd"><path data-v-419974fe="" d="M0 0h20v20H0z"></path> <path data-v-419974fe="" stroke="#8A93A0" stroke-linejoin="round" d="M10 17c-4.142 0-7.5-2.91-7.5-6.5S5.858 4 10 4c4.142 0 7.5 2.91 7.5 6.5 0 1.416-.522 2.726-1.41 3.794-.129.156.41 3.206.41 3.206l-3.265-1.134c-.998.369-2.077.634-3.235.634z"></path></g></svg> <span data-v-419974fe="" class="action-title">回复</span></div></div></div><!----><div data-v-2140efbc="" data-v-419974fe="" class="sub-comment-list sub-comment-list"><!----></div></div><!----></div></div><div data-v-2cad70f5="" class="item"><div data-v-419974fe="" data-v-2cad70f5="" class="comment comment"><div data-v-14a78378="" data-v-419974fe="" st:block="userPopover" st:state="5aa9af5651882521d6574704" class="user-popover-box popover"><!----><a data-v-419974fe="" href="https://juejin.im/user/5aa9af5651882521d6574704" target="_blank" rel="" class="user-link" data-v-14a78378=""><div data-v-5b957c59="" data-v-b5e0fa26="" data-v-419974fe="" data-src="https://user-gold-cdn.xitu.io/2018/3/16/1622c889f29fd69a?imageView2/1/w/100/h/100/q/85/format/webp/interlace/1" class="lazy avatar avatar loaded" style="background-image: url(&quot;https://user-gold-cdn.xitu.io/2018/3/16/1622c889f29fd69a?imageView2/1/w/100/h/100/q/85/format/webp/interlace/1&quot;);"></div></a></div><div data-v-419974fe="" class="content-box comment-divider-line"><div data-v-419974fe="" class="meta-box"><div data-v-14a78378="" data-v-419974fe="" st:block="userPopover" st:state="5aa9af5651882521d6574704" class="user-popover-box"><!----><a data-v-419974fe="" href="https://juejin.im/user/5aa9af5651882521d6574704" target="_blank" rel="" class="username ellipsis" data-v-14a78378="">秋暮云<!----></a></div><div data-v-419974fe="" class="position"></div></div><div data-v-419974fe="" class="content">mysql的事物默认隔离级别是可重复读 而不是读已提交</div><div data-v-419974fe="" class="limit-ctl-box"><!----><!----></div><!----><div data-v-419974fe="" class="reply-stat"><time data-v-419974fe="" datetime="2018-03-17T11:40:51.086Z" title="Sat Mar 17 2018 19:40:51 GMT+0800 (Hong Kong Standard Time)" class="time">1年前</time><div data-v-419974fe="" class="delete"> &nbsp;·&nbsp;删除</div><div data-v-419974fe="" class="action-box"><div data-v-419974fe="" class="like-action action"><svg data-v-419974fe="" aria-hidden="true" width="16" height="16" viewBox="0 0 20 20" class="icon like-icon"><g data-v-419974fe="" fill="none" fill-rule="evenodd"><path data-v-419974fe="" d="M0 0h20v20H0z"></path> <path data-v-419974fe="" stroke="#8A93A0" stroke-linejoin="round" d="M4.58 8.25V17h-1.4C2.53 17 2 16.382 2 15.624V9.735c0-.79.552-1.485 1.18-1.485h1.4zM11.322 2c1.011.019 1.614.833 1.823 1.235.382.735.392 1.946.13 2.724-.236.704-.785 1.629-.785 1.629h4.11c.434 0 .838.206 1.107.563.273.365.363.84.24 1.272l-1.86 6.513A1.425 1.425 0 0 1 14.724 17H6.645V7.898C8.502 7.51 9.643 4.59 9.852 3.249A1.47 1.47 0 0 1 11.322 2z"></path></g></svg><span data-v-419974fe="" class="action-title">2</span></div><div data-v-419974fe="" class="comment-action action"><svg data-v-419974fe="" aria-hidden="true" width="16" height="16" viewBox="0 0 20 20" class="icon comment-icon"><g data-v-419974fe="" fill="none" fill-rule="evenodd"><path data-v-419974fe="" d="M0 0h20v20H0z"></path> <path data-v-419974fe="" stroke="#8A93A0" stroke-linejoin="round" d="M10 17c-4.142 0-7.5-2.91-7.5-6.5S5.858 4 10 4c4.142 0 7.5 2.91 7.5 6.5 0 1.416-.522 2.726-1.41 3.794-.129.156.41 3.206.41 3.206l-3.265-1.134c-.998.369-2.077.634-3.235.634z"></path></g></svg> <span data-v-419974fe="" class="action-title">回复</span></div></div></div><!----><div data-v-2140efbc="" data-v-419974fe="" class="sub-comment-list sub-comment-list"><!----></div></div><!----></div></div><div data-v-2cad70f5="" class="item"><div data-v-419974fe="" data-v-2cad70f5="" class="comment comment"><div data-v-14a78378="" data-v-419974fe="" st:block="userPopover" st:state="5a587fce6fb9a01cb64eba10" class="user-popover-box popover"><!----><a data-v-419974fe="" href="https://juejin.im/user/5a587fce6fb9a01cb64eba10" target="_blank" rel="" class="user-link" data-v-14a78378=""><div data-v-5b957c59="" data-v-b5e0fa26="" data-v-419974fe="" data-src="https://user-gold-cdn.xitu.io/2018/1/20/16111e3a6152bcee?imageView2/1/w/100/h/100/q/85/format/webp/interlace/1" class="lazy avatar avatar loaded" style="background-image: url(&quot;https://user-gold-cdn.xitu.io/2018/1/20/16111e3a6152bcee?imageView2/1/w/100/h/100/q/85/format/webp/interlace/1&quot;);"></div></a></div><div data-v-419974fe="" class="content-box comment-divider-line"><div data-v-419974fe="" class="meta-box"><div data-v-14a78378="" data-v-419974fe="" st:block="userPopover" st:state="5a587fce6fb9a01cb64eba10" class="user-popover-box"><!----><a data-v-419974fe="" href="https://juejin.im/user/5a587fce6fb9a01cb64eba10" target="_blank" rel="" class="username ellipsis" data-v-14a78378="">dafanzhijian<!----></a></div><div data-v-419974fe="" class="position">软件工程师 @ 无远</div></div><div data-v-419974fe="" class="content">情不自禁地收藏了，论学好SQL的重要性，现在都只需打开浏览器写写 SQL 就能一站完成全部开发工作了: <a href="https://link.juejin.im/?target=https%3A%2F%2Fenhancer.io" class="parse-emoji-url" style="color: #027fff" title="https://enhancer.io" target="_blank" rel="nofollow noopener noreferrer"><img alt="https://enhancer.io" style="vertical-align: sub" draggable="false" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/pin-url-link.3f843e8.svg">网页链接</a></div><div data-v-419974fe="" class="limit-ctl-box"><!----><!----></div><!----><div data-v-419974fe="" class="reply-stat"><time data-v-419974fe="" datetime="2018-03-15T10:33:15.776Z" title="Thu Mar 15 2018 18:33:15 GMT+0800 (Hong Kong Standard Time)" class="time">1年前</time><div data-v-419974fe="" class="delete"> &nbsp;·&nbsp;删除</div><div data-v-419974fe="" class="action-box"><div data-v-419974fe="" class="like-action action"><svg data-v-419974fe="" aria-hidden="true" width="16" height="16" viewBox="0 0 20 20" class="icon like-icon"><g data-v-419974fe="" fill="none" fill-rule="evenodd"><path data-v-419974fe="" d="M0 0h20v20H0z"></path> <path data-v-419974fe="" stroke="#8A93A0" stroke-linejoin="round" d="M4.58 8.25V17h-1.4C2.53 17 2 16.382 2 15.624V9.735c0-.79.552-1.485 1.18-1.485h1.4zM11.322 2c1.011.019 1.614.833 1.823 1.235.382.735.392 1.946.13 2.724-.236.704-.785 1.629-.785 1.629h4.11c.434 0 .838.206 1.107.563.273.365.363.84.24 1.272l-1.86 6.513A1.425 1.425 0 0 1 14.724 17H6.645V7.898C8.502 7.51 9.643 4.59 9.852 3.249A1.47 1.47 0 0 1 11.322 2z"></path></g></svg><span data-v-419974fe="" class="action-title">1</span></div><div data-v-419974fe="" class="comment-action action"><svg data-v-419974fe="" aria-hidden="true" width="16" height="16" viewBox="0 0 20 20" class="icon comment-icon"><g data-v-419974fe="" fill="none" fill-rule="evenodd"><path data-v-419974fe="" d="M0 0h20v20H0z"></path> <path data-v-419974fe="" stroke="#8A93A0" stroke-linejoin="round" d="M10 17c-4.142 0-7.5-2.91-7.5-6.5S5.858 4 10 4c4.142 0 7.5 2.91 7.5 6.5 0 1.416-.522 2.726-1.41 3.794-.129.156.41 3.206.41 3.206l-3.265-1.134c-.998.369-2.077.634-3.235.634z"></path></g></svg> <span data-v-419974fe="" class="action-title">回复</span></div></div></div><!----><div data-v-2140efbc="" data-v-419974fe="" class="sub-comment-list sub-comment-list"><!----></div></div><!----></div></div></div><!----></div></div><div data-v-91ebd2e4="" data-v-f6fdafdc="" st:block="aside" class="entry-public-aside sticky top"><div data-v-ffc386ce="" data-v-e12ecd66="" data-v-91ebd2e4="" class="sidebar-block app-download-sidebar-block shadow"><!----><div data-v-ffc386ce="" class="block-body"><a data-v-e12ecd66="" data-v-ffc386ce="" class="app-link" href="https://juejin.im/app" target="_blank"><img data-v-e12ecd66="" data-v-ffc386ce="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/entry.7c9ce29.png" class="qr-img"><div data-v-e12ecd66="" data-v-ffc386ce="" class="content-box"><div data-v-e12ecd66="" data-v-ffc386ce="" class="headline">下载掘金客户端</div><div data-v-e12ecd66="" data-v-ffc386ce="" class="desc">一个帮助开发者成长的社区</div></div><!----></a></div></div><ul data-v-91ebd2e4="" data-v-f6fdafdc="" class="sidebar-bd-entry"><li data-v-91ebd2e4="" data-v-f6fdafdc=""><a data-v-6aebdc16="" data-v-91ebd2e4="" href="https://juejin.im/post/5c78c636f265da2de6611f14" target="_blank" class="sidebar-entry shadow" data-v-f6fdafdc="" style="background-image: url(&quot;https://user-gold-cdn.xitu.io/1551665531141c08909389736d4d93383e9fa2c3fbd0a.jpg&quot;);"></a></li><li data-v-91ebd2e4="" data-v-f6fdafdc=""><a data-v-6aebdc16="" data-v-91ebd2e4="" href="https://www.teambition.com/agile?utm_source=juejin&amp;utm_term=dev" target="_blank" class="sidebar-entry shadow" data-v-f6fdafdc="" style="background-image: url(&quot;https://user-gold-cdn.xitu.io/1553163184680d30bb7b44d5bb33ae521f82297a1f7f5.jpg&quot;);"></a></li><li data-v-91ebd2e4="" data-v-f6fdafdc=""><a data-v-6aebdc16="" data-v-91ebd2e4="" href="https://css.w3ctech.com/" target="_blank" class="sidebar-entry shadow" data-v-f6fdafdc="" style="background-image: url(&quot;https://user-gold-cdn.xitu.io/1551697146900e41ba6f142efd56fa6a8937e97e4a5d3.jpg&quot;);"></a></li></ul><div data-v-ffc386ce="" data-v-03973072="" data-v-91ebd2e4="" class="sidebar-block wechat-sidebar-block pure"><div data-v-db942a76="" data-v-03973072="" class="wechat-banner" data-v-ffc386ce=""><img data-v-db942a76="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/backend.ba44b94.png" class="wechat-img"></div><!----></div><div data-v-6adf0c1a="" data-v-0fa4633a="" data-v-91ebd2e4="" class="index-book-collect" place="entry" category="5562b419e4b00c57d9b94ae2"><div data-v-6adf0c1a="" class="header"><div data-v-6adf0c1a="" class="title">掘金小册</div><div data-v-6adf0c1a="" class="controllers"><div data-v-6adf0c1a="" class="arrow icon ion-chevron-left"></div><div data-v-6adf0c1a="" class="arrow icon ion-chevron-right"></div></div></div><div data-v-6adf0c1a="" class="slide-book transition--next"><div data-v-5fd060c9="" data-v-6adf0c1a="" class="slide-book-list item"><a data-v-5fd060c9="" href="https://juejin.im/book/5baaf635f265da0ab915cc9f" class="item"><div data-v-5fd060c9="" class="poster"><div data-v-5b957c59="" data-v-5f4c8686="" data-v-5fd060c9="" data-src="https://user-gold-cdn.xitu.io/2019/2/25/16922d6d22ff1458?imageView2/1/w/104/h/144/q/95/format/webp/interlace/1" class="lazy thumb poster-img loaded" style="background-image: url(&quot;https://user-gold-cdn.xitu.io/2019/2/25/16922d6d22ff1458?imageView2/1/w/104/h/144/q/95/format/webp/interlace/1&quot;); background-size: cover;"></div></div><div data-v-5fd060c9="" class="content-text"><div data-v-5fd060c9="" class="title">WebGL 入门与实践</div><div data-v-5fd060c9="" class="price"><div data-v-5fd060c9="" class="new">新人价 ￥9.95</div><div data-v-5fd060c9="" class="delete">￥19.9</div></div></div></a><a data-v-5fd060c9="" href="https://juejin.im/book/5b9b2dc86fb9a05d0f16c8ac" class="item"><div data-v-5fd060c9="" class="poster"><div data-v-5b957c59="" data-v-5f4c8686="" data-v-5fd060c9="" data-src="https://user-gold-cdn.xitu.io/2018/12/24/167df457c3d66fbd?imageView2/1/w/104/h/144/q/95/format/webp/interlace/1" class="lazy thumb poster-img loaded" style="background-image: url(&quot;https://user-gold-cdn.xitu.io/2018/12/24/167df457c3d66fbd?imageView2/1/w/104/h/144/q/95/format/webp/interlace/1&quot;); background-size: cover;"></div></div><div data-v-5fd060c9="" class="content-text"><div data-v-5fd060c9="" class="title">Kubernetes 从上手到实践</div><div data-v-5fd060c9="" class="price"><div data-v-5fd060c9="" class="new">新人价 ￥9.95</div><div data-v-5fd060c9="" class="delete">￥19.9</div></div></div></a></div></div><div data-v-6adf0c1a="" class="book-newuser"><div data-v-6adf0c1a="" class="newuser-title"><span data-v-6adf0c1a="">新人专享好礼</span></div><div data-v-6adf0c1a="" class="giftbag"><img data-v-6adf0c1a="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/45.b99ea03.svg"><div data-v-6adf0c1a="" class="content-text"><div data-v-6adf0c1a="" class="title">送你<span data-v-6adf0c1a="" class="highlight">45元</span>买小册</div><div data-v-6adf0c1a="" class="btn-box"><div data-v-6adf0c1a="" class="btn-giftbag">立即领取</div></div></div></div></div></div><!----><div data-v-ffc386ce="" data-v-f62e7bb2="" data-v-91ebd2e4="" class="sidebar-block related-entry-sidebar-block sticky-section shadow" st:block="relatedEntrySidebarBlock" data-v-f6fdafdc=""><div data-v-ffc386ce="" class="block-title">相关文章</div><div data-v-ffc386ce="" class="block-body"><div data-v-f62e7bb2="" data-v-ffc386ce="" class="entry-list"><a data-v-f62e7bb2="" href="https://juejin.im/post/5c984e366fb9a070cf6bd9f2" target="_blank" rel="" st:name="link" class="item" data-v-ffc386ce=""><div data-v-f62e7bb2="" class="entry-title">程序猿生存指南-62 鹊桥银河</div><div data-v-f62e7bb2="" class="entry-meta-box"><div data-v-f62e7bb2="" class="entry-meta"><img data-v-f62e7bb2="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/zan.e9d7698.svg" class="icon"><span data-v-f62e7bb2="" class="count">29</span></div><div data-v-f62e7bb2="" class="entry-meta"><img data-v-f62e7bb2="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/comment.a7c8341.svg" class="icon"><span data-v-f62e7bb2="" class="count">30</span></div></div></a><a data-v-f62e7bb2="" href="https://juejin.im/post/5c94716df265da60f30d4aac" target="_blank" rel="" st:name="link" class="item" data-v-ffc386ce=""><div data-v-f62e7bb2="" class="entry-title">MySql 三大知识点——索引、锁、事务！</div><div data-v-f62e7bb2="" class="entry-meta-box"><div data-v-f62e7bb2="" class="entry-meta"><img data-v-f62e7bb2="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/zan.e9d7698.svg" class="icon"><span data-v-f62e7bb2="" class="count">18</span></div><div data-v-f62e7bb2="" class="entry-meta"><img data-v-f62e7bb2="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/comment.a7c8341.svg" class="icon"><span data-v-f62e7bb2="" class="count">0</span></div></div></a><a data-v-f62e7bb2="" href="https://juejin.im/post/5c986f715188250ee57060c2" target="_blank" rel="" st:name="link" class="item" data-v-ffc386ce=""><div data-v-f62e7bb2="" class="entry-title">Spring Boot 2.x基础教程：快速入门</div><div data-v-f62e7bb2="" class="entry-meta-box"><div data-v-f62e7bb2="" class="entry-meta"><img data-v-f62e7bb2="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/zan.e9d7698.svg" class="icon"><span data-v-f62e7bb2="" class="count">6</span></div><div data-v-f62e7bb2="" class="entry-meta"><img data-v-f62e7bb2="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/comment.a7c8341.svg" class="icon"><span data-v-f62e7bb2="" class="count">0</span></div></div></a><a data-v-f62e7bb2="" href="https://juejin.im/post/5c9842e0e51d454f90168887" target="_blank" rel="" st:name="link" class="item" data-v-ffc386ce=""><div data-v-f62e7bb2="" class="entry-title">漫话：如何给女朋友解释什么是系统可用性？</div><div data-v-f62e7bb2="" class="entry-meta-box"><div data-v-f62e7bb2="" class="entry-meta"><img data-v-f62e7bb2="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/zan.e9d7698.svg" class="icon"><span data-v-f62e7bb2="" class="count">3</span></div><div data-v-f62e7bb2="" class="entry-meta"><img data-v-f62e7bb2="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/comment.a7c8341.svg" class="icon"><span data-v-f62e7bb2="" class="count">2</span></div></div></a><a data-v-f62e7bb2="" href="https://juejin.im/post/5c95d248e51d45097926a125" target="_blank" rel="" st:name="link" class="item" data-v-ffc386ce=""><div data-v-f62e7bb2="" class="entry-title">Aloha：一个分布式任务调度框架</div><div data-v-f62e7bb2="" class="entry-meta-box"><div data-v-f62e7bb2="" class="entry-meta"><img data-v-f62e7bb2="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/zan.e9d7698.svg" class="icon"><span data-v-f62e7bb2="" class="count">3</span></div><div data-v-f62e7bb2="" class="entry-meta"><img data-v-f62e7bb2="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/comment.a7c8341.svg" class="icon"><span data-v-f62e7bb2="" class="count">2</span></div></div></a></div></div></div></div></div><div data-v-6f3b5444="" data-v-91ebd2e4="" class="article-suspended-panel article-suspended-panel" data-v-f6fdafdc=""><div data-v-6f3b5444="" badge="354" class="like-btn panel-btn like-adjust with-badge"></div><div data-v-6f3b5444="" badge="3" class="comment-btn panel-btn comment-adjust with-badge"></div><div data-v-6f3b5444="" class="collect-btn panel-btn"><!----></div><div data-v-6f3b5444="" class="share-title">分享</div><div data-v-6f3b5444="" class="weibo-btn share-btn panel-btn"></div><div data-v-6f3b5444="" class="qq-btn share-btn panel-btn"></div><div data-v-6f3b5444="" class="wechat-btn share-btn panel-btn"><img data-v-6f3b5444="" src="https://juejin.im/entry/5aa9ed73518825558b3da65e" class="wechat-qr-code-img shadow" style="display: none;"></div></div><div data-v-3d504eeb="" data-v-91ebd2e4="" class="image-viewer-box" data-v-f6fdafdc=""><!----></div><div data-v-ce49cb72="" data-v-91ebd2e4="" st:block="mobileBottomBar" class="mobile-bottom-bar" data-v-f6fdafdc=""><div data-v-ce49cb72="" class="bar-container"><a data-v-ce49cb72="" href="https://juejin.im/about" class="left"><img data-v-ce49cb72="" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/logo-bold.svg"><span data-v-ce49cb72="">一个帮助开发者成长的社区</span></a><a data-v-ce49cb72="" st:name="openInAppBtn" class="button">打开应用</a></div></div></main></div><div data-v-737ba367="" data-v-514f306c="" class="recommend-box"><div data-v-737ba367="" class="extension"><div data-v-737ba367="" data-growing-container="true" data-growing-title="掘金插件" class="link"><div data-v-737ba367="" class="title">掘金浏览器插件 - 下载插件，送你<span data-v-737ba367="" class="price">45元</span>买小册</div></div><div data-v-737ba367="" class="ion-close"></div></div><!----></div></div>
      
      
      <script type="text/javascript" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/runtime.6fe4d8f9253e8551fdeb.js"></script><script type="text/javascript" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/0.9ac2d94b4e54e7ec682d.js"></script><script type="text/javascript" src="./深入理解Mysql——锁、事务与并发控制 - 后端 - 掘金_files/1.1656d9c799d572e127fa.js"></script>
    </body><div id="cye-workaround-body" style="position: absolute; left: 0px; top: 0px; z-index: -2147483646; background: none 0% 0% / auto repeat scroll padding-box border-box rgb(244, 245, 245); height: 13081px; width: 1295px;"></div><div id="cye-workaround-body-image" style="position: absolute; left: 0px; top: 0px; z-index: -2147483645; background: none 0% 0% / auto repeat scroll padding-box border-box rgba(0, 0, 0, 0); height: 13081px; width: 1295px;"></div></html>