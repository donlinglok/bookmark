webpackJsonp([4],{1506:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function s(e){return!!e&&!(Array.isArray(e)&&!e.some(Boolean))}function c(e){var t=e.onRef,n=e.listClassName,r=e.itemClassName,o=e.className,a=e.children,s=i(e,["onRef","listClassName","itemClassName","className","children"]);return h.a.createElement("div",_({ref:t,className:b()(n,o)},s),d.Children.map(a,function(e){return"string"==typeof e?h.a.createElement("span",{className:r},e):e?Object(d.cloneElement)(e,{className:b()(r,e.props.className)}):e}))}n.d(t,"a",function(){return j}),n.d(t,"b",function(){return k}),n.d(t,"d",function(){return S}),n.d(t,"c",function(){return T});var l,u,p=n(2),f=n.n(p),d=n(0),h=n.n(d),m=n(3),b=n.n(m),v=n(23),y=n.n(v),w=n(551),g=(n.n(w),n(289)),E=n(1535),O=n(1607),C=(n.n(O),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k=function(e){return h.a.createElement(c,_({listClassName:"ContentItem-cells",itemClassName:"ContentItem-cell"},e))},j=function(e){return h.a.createElement(c,_({listClassName:"ContentItem-actions",itemClassName:"ContentItem-action"},e))},S=function(e){return h.a.createElement(c,_({listClassName:"ContentItem-status",itemClassName:"ContentItem-statusItem"},e))},P=(u=l=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.onRef=function(e){a.domNode=e,a.props.onRef&&a.props.onRef(e)},a.onAccessContent=function(e,t){t===document.activeElement&&window.open(a.props.link)},i=n,o(a,i)}return a(t,e),C(t,[{key:"componentDidMount",value:function(){var e=this;Object(w.onViewedOnce)(this.domNode,function(){var t=e.props,n=t.data;n=void 0===n?{}:n;var r=n.type,o=n.id,a=t.lastreadTouchable;e.context.currentUser&&a&&r&&o&&Object(E.c)("article"===r?"post":r,o,E.b)})}},{key:"render",value:function(){var e=y()(this.props,["noTrackCardShow","lastreadTouchable","data","onRef"]),t=e.className,n=e.title,r=e.meta,o=e.children,a=e.extra,c=e.image,l=e.link,u=i(e,["className","title","meta","children","extra","image","link"]),p=h.a.createElement(h.a.Fragment,null,n&&h.a.createElement("h2",{className:"ContentItem-title"},n),s(r)&&h.a.createElement("div",{className:"ContentItem-meta"},r));return h.a.createElement("div",_({ref:this.onRef,className:b()("ContentItem",t)},u),l&&h.a.createElement(g.c,{keyMap:{ACCESS:"enter"},handlers:{ACCESS:this.onAccessContent}}),c||a?h.a.createElement("div",{className:"ContentItem-main"},c&&h.a.createElement("div",{className:"ContentItem-image"},c),h.a.createElement("div",{className:"ContentItem-head"},p),a&&h.a.createElement("div",{className:"ContentItem-extra"},a)):p,o)}}]),t}(d.Component),l.contextTypes={currentUser:f.a.object},u),T={plain:"plain",default:"default",interactive:"interactive"};t.e=P},1510:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,c,l=n(0),u=n.n(l),p=n(1515),f=n(289),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=(c=s=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={ref:null},i=n,a(r,i)}return i(t,e),h(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.tabIndex,o=t.children,a=r(t,["tabIndex","children"]),i=this.state.ref;return u.a.createElement(p.a,d({tabIndex:n,onRef:function(t){return!e.state.ref&&e.setState({ref:t})}},a),u.a.createElement(f.d.Provider,{value:i},o))}}]),t}(l.Component),s.defaultProps={tabIndex:0},c),b=m;n.d(t,"a",function(){return b})},1511:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e&&e.startsWith("//")?"https:"+e:e}function s(e,t){var n=t.id,r=t.type;return{shareText:e.shareTexts[""+r+n]}}function c(e){return Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}var l,u,p=n(2),f=n.n(p),d=n(0),h=n.n(d),m=n(6),b=(n.n(m),n(3)),v=n.n(b),y=n(1610),w=n.n(y),g=n(118),E=n.n(g),O=n(9),C=n(63),_=n(4),k=n(7),j=n(196),S=(n.n(j),n(183)),P=n(289),T=n(597),N=n(17),A=n(10),x=n(1612),R=(n.n(x),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),I=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),M=(u=l=function(e){function t(){var e,n,a,s;r(this,t);for(var l=arguments.length,u=Array(l),p=0;p<l;p++)u[p]=arguments[p];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.state={qrCodeUrl:"",url:""},a.togglerRef=h.a.createRef(),a.shouldShowMenu=function(){var e=a.props,t=e.onTogglerClick,n=e.disabled;return!1!==t()&&!n},a.handleTogglerClick=function(e){if(!a.shouldShowMenu())return void e.preventDefault();a.loadQrcodeImage(),a.onShare(e)},a.open=function(e){a.shouldShowMenu()&&(a.loadQrcodeImage(),a.menu.popover.open(),a.onShare(e))},a.onShare=function(){var e=a.props,t=e.id,n=e.type,r=e.getShareText,o=e.zaShareId;r(t,n),k.default.trackEvent(a.togglerRef.current,R({action:"Share",element:"Button",is_intent:!0,element_name:A.P[n]},o&&{id:o}))},a.copyLink=function(){var e=a.props,t=e.type,n=e.title,r=e.authorName,o=e.href,s=e.showNotification,c=S.b[t]||"",l=n?n+" - ":"",u=r&&"匿名用户"!==r&&c?r+"的"+c+" - ":"",p=o?Object(j.toAbsoluteUrl)(o):a.url();w()(""+l+u+"知乎\n"+i(p)),s("链接复制成功！")},a.url=function(){var e=a.props,t=e.id,n=e.type;return i(Object(j.toAbsoluteUrl)(a.props.url))||location.origin+"/"+n+"/"+t},a.loadQrcodeImage=function(){var e=a.state.qrCodeUrl;if(!e){var t=location.protocol+"//www.zhihu.com/",n=a.url();e=t+"qrcode?"+c({url:n+"#showWechatShareTip"}),a.setState({qrCodeUrl:e,url:n})}},a.shareToWeibo=function(){var e={appKey:"3063806388"},t=a.props.shareText;t&&(e.title=t);var n="http://service.weibo.com/share/share.php?"+c(e);window.open(n,"_blank","width=615,height=505")||(location.href=n)},s=n,o(a,s)}return a(t,e),I(t,[{key:"componentDidUpdate",value:function(e){this.props.positionStatus!==e.positionStatus&&this.menu.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.togglerClassName,o=t.positionStatus,a=t.toggler,i=t.type,s=t.disabled,c=this.state.qrCodeUrl,l=h.a.createElement("div",{className:v()("ShareMenu-toggler",r)},c&&h.a.createElement("img",{className:"ShareMenu-fakeQRCode",src:c,alt:"微信二维码"}),Object(d.cloneElement)(a,{onMouseEnter:this.loadQrcodeImage,disabled:s,ref:this.togglerRef}));return h.a.createElement(h.a.Fragment,null,h.a.createElement(P.c,{keyMap:{SHARE:"f x"},handlers:{SHARE:this.open}}),h.a.createElement(C.c,{className:v()("ShareMenu",n),positionStatus:o,ref:function(t){e.menu=t},toggler:l,onClick:this.handleTogglerClick},h.a.createElement(C.b,{className:"ShareMenu-button",onClick:this.copyLink},h.a.createElement(O._18,{size:20,className:"ShareMenu-Icon--normal",color:"#9FADC7"}),"复制链接"),"live"===i||h.a.createElement(C.b,{className:"ShareMenu-button",onClick:this.shareToWeibo},h.a.createElement(O._84,{size:17,className:"ShareMenu-Icon--small"}),"新浪微博"),h.a.createElement(C.b,{tag:"div",className:"ShareMenu-wechat",noActive:!0},h.a.createElement(_.c,{className:"ShareMenu-button",preset:"plain"},h.a.createElement(O._83,{size:17,className:"ShareMenu-Icon--small",color:"#60C84D"}),"微信扫一扫"),h.a.createElement("img",{className:"ShareMenu-qrCode",src:c,alt:"微信二维码"}))))}}]),t}(d.Component),l.propTypes={toggler:f.a.node,onTogglerClick:f.a.func,zaShareId:f.a.number},l.defaultProps={toggler:h.a.createElement(_.c,{preset:"plain",icon:O._66,label:"分享"}),onTogglerClick:E.a},u);t.a=Object(m.connect)(s,{showNotification:N.g,getShareText:T.b})(M)},1512:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){var t=e.thumbnail,n=e.isLens,r=e.canPlay;return n||r?t&&"string"==typeof t?b.a.createElement("img",{src:t,alt:"视频封面"}):t:b.a.createElement(M,{className:"VideoCard-playIcon VideoCard-playIcon--nonLens"})}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=n(2),h=n.n(d),m=n(0),b=n.n(m),v=n(3),y=n.n(v),w=n(25),g=n.n(w),E=n(64),O=n.n(E),C=n(1522),_=n(9),k=n(1528),j=(n(1543),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),S=function(e){function t(){var e;r(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return s.state={isInputing:!1,value:s.props.value||""},s.handleChange=function(e){s.setState({value:Object(C.cutStringWidth)(e.target.value,30)})},s}return a(t,e),j(t,[{key:"componentWillReceiveProps",value:function(e){e.value&&e.value!==this.state.value&&this.setState({value:e.value})}},{key:"render",value:function(){var e=this,t=this.state,n=t.isInputing,r=t.value,o=this.props.onChange,a=!n&&!r,i=!n&&r;return b.a.createElement("div",{className:"Editable-VideoTitleInput-container"},b.a.createElement(k.a,null,b.a.createElement("div",{className:y()("Editable-VideoTitleInput-innerContainer",{"Editable-VideoTitleInput-innerContainer--isBeforeIconShown":a}),onClick:function(){return e.setState({isInputing:!0})}},a&&b.a.createElement(_.S,{className:"Editable-VideoTitleInput-beforeIcon",center:!0}),!n&&b.a.createElement("div",{className:y()("Editable-VideoTitleInput-value",{"Editable-VideoTitleInput-value--noContent":!r})},r||"好的标题可以获得更多的推荐及关注者"),n&&b.a.createElement("input",{className:"Editable-VideoTitleInput",value:r,ref:function(e){e&&e.focus()},placeholder:"标题长度不超过 15 个字",onChange:this.handleChange,onBlur:function(t){e.setState({isInputing:!1}),o(t.target.value)}}),i&&b.a.createElement(_.S,{className:"Editable-VideoTitleInput-afterIcon",center:!0}))))}}]),t}(m.Component),P=n(1513),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),N=function(e){function t(){var e;i(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return a.state={shown:!1},a.handleObserve=function(e){(e[0].isIntersecting||e[0].intersectionRatio>0)&&a.setState({shown:!0})},a}return c(t,e),T(t,[{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.rootMargin,r=e.children;return this.state.shown?r:b.a.createElement(P.a,{rootMargin:n,onObserve:this.handleObserve,threshold:[0,.1]},t||b.a.createElement("div",{style:{height:"1px"}}))}}]),t}(m.Component);N.propTypes={placeholder:h.a.element,rootMargin:h.a.string},N.defaultProps={rootMargin:"200px"};var A=N,x=n(1544),R=n.n(x),I=function(e){var t=e.className;return b.a.createElement("svg",{viewBox:"0 0 72 72",className:t},b.a.createElement("circle",{cx:"36",cy:"36",fill:"#fff",fillOpacity:".95",r:"36"}),b.a.createElement("path",{d:"M50.835 37.06L29.477 49.97a1.203 1.203 0 0 1-1.664-.43 1.25 1.25 0 0 1-.17-.631V23.091c0-.682.543-1.234 1.213-1.234.219 0 .433.06.62.173l21.359 12.91a1.245 1.245 0 0 1 0 2.12z",fill:"#444",fillRule:"nonzero"}))},M=I,L=(n(1545),function(){return b.a.createElement("div",{className:"VideoCardPlayButton"},b.a.createElement(M,{className:"VideoCardPlayButton-icon"}))}),D=function(e){var t=e.fileSize;return b.a.createElement("div",{className:"VideoCardPlayButton-withFileSize--outer"},b.a.createElement("span",{className:"VideoCardPlayButton-withFileSize"},b.a.createElement(_._47,{center:!0,size:13,className:"icon"}),t?R()(t,{decimalPlaces:1,unit:"MB"}):"流量播放"))},q=(n(1546),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),B=function(e){function t(){var e;u(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return a.state={isMobile:!1,playerShown:!1,playerLoading:!1},a.handlePlay=function(e){e.preventDefault();var t=a.props,n=t.interactive,r=t.isConverting,o=t.isLens,i=t.playerUrl,s=t.onPlayFailed,c=t.onLensPlay,l=t.onBeforePlay;if(n&&!r)return!i&&s?void s():l?void Promise.resolve(l()).then(function(e){!1!==e&&a.play()}):void(o&&c&&c()||a.play())},a.handlePlayerLoad=function(){0===--a.loadingCount&&a.setState({playerLoading:!1})},a}return f(t,e),q(t,[{key:"componentDidMount",value:function(){this.setState({isMobile:O()(navigator.userAgent).Mobile})}},{key:"canPlay",value:function(){var e=this.props,t=e.isPlayable,n=e.playerUrl;return t&&n}},{key:"inlinePlayer",value:function(){var e=this.props,t=e.interactive,n=e.isLens,r=e.onLensPlay,o=e.onBeforePlay,a=this.state.isMobile;return t&&(n?!(r||o):a)}},{key:"showContent",value:function(){var e=this.props,t=e.isLens,n=e.title,r=e.isVideoTitleEditable,o=this.state.isMobile;return!r&&(t?Boolean(n):!(o&&this.canPlay()))}},{key:"showDescription",value:function(){var e=this.props.isLens;return this.showContent()&&!e}},{key:"play",value:function(){var e=this.props.onPlay;this.loadingCount=2,this.setState({playerShown:!0,playerLoading:!0}),setTimeout(this.handlePlayerLoad,1e3),e&&e()}},{key:"renderContent",value:function(){var e=this.props,t=e.interactive,n=e.isLens,r=e.title,o=e.thumbnail,a=e.source,i=e.url,s=e.showPlayButton,c=e.usePlayButtonWithFileSize,u=e.fileSize,p=e.rightBottomButton,f=e.isVideoTitleEditable,d=e.onVideoTitleChange,h=e.isConverting,m=this.canPlay(),v=this.inlinePlayer(),w=b.a.createElement(l,{thumbnail:o,isLens:n,canPlay:m}),g=s&&!h&&(c?b.a.createElement(D,{fileSize:u}):b.a.createElement(L,null)),E=b.a.createElement("div",{className:"VideoCard-layout"},m?b.a.createElement("div",{className:"VideoCard-video"},b.a.createElement("div",{className:"VideoCard-video-content"},v?this.renderPlayer():b.a.createElement("div",{className:y()("VideoCard-thumbnail",{"VideoCard-thumbnail--placeholder":!o}),onClick:this.handlePlay},w,g,p))):b.a.createElement("div",{className:"VideoCard-poster"},w),this.showContent()&&b.a.createElement("div",{className:"VideoCard-content"},b.a.createElement("div",{className:"VideoCard-title"},r),this.showDescription()&&b.a.createElement("div",{className:"VideoCard-description"},a&&b.a.createElement("span",{className:"VideoCard-source"},a),b.a.createElement("span",{className:"VideoCard-badge"},"视频"))),f&&b.a.createElement(S,{value:r,onChange:d}));return n?E:t?b.a.createElement("a",{className:"VideoCard-link",href:i,target:"_blank",rel:"noopener noreferrer"},E):b.a.createElement("div",{className:"VideoCard-link"},E)}},{key:"renderPlayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,n=t.source,r=t.playerUrl,o=t.onIframeRef,a=t.useMSE,i=g.a.stringify({autoplay:e&&"lens"===n,useMSE:a});return b.a.createElement(A,{placeholder:b.a.createElement("div",{className:"VideoCard-player"})},b.a.createElement("div",{className:"VideoCard-player"},b.a.createElement("iframe",{ref:o,frameBorder:0,allowFullScreen:!0,src:r+"?"+i,onLoad:this.handlePlayerLoad})))}},{key:"render",value:function(){var e=this.props,t=e.interactive,n=e.isConverting,r=this.state,o=r.isMobile,a=r.playerShown,i=r.playerLoading;return b.a.createElement("div",{className:y()("VideoCard",{"VideoCard--converting":n,"VideoCard--interactive":t,"VideoCard--mobile":o})},this.renderContent(),a&&b.a.createElement("div",{className:y()("VideoCard-overlay",{"is-loading":i})},this.renderPlayer(!0)),b.a.createElement("div",{className:y()("VideoCard-mask",{"is-shown":i})}))}}]),t}(m.Component);B.propTypes={interactive:h.a.bool,showPlayButton:h.a.bool,usePlayButtonWithFileSize:h.a.bool,fileSize:h.a.number,onPlay:h.a.func,onPlayFailed:h.a.func,onLensPlay:h.a.func,onBeforePlay:h.a.func,rightBottomButton:h.a.oneOfType([h.a.element,h.a.string]),thumbnail:h.a.oneOfType([h.a.element,h.a.string])},B.defaultProps={interactive:!0,showPlayButton:!0};var U=B;n.d(t,"b",function(){return U}),n.d(t,"a",function(){return M})},1513:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(2),s=n.n(i),c=n(0),l=(n.n(c),n(20)),u=(n.n(l),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());"undefined"!=typeof window&&n(580);var p=function(e){function t(){var e;r(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return s.handleObserve=function(e){var t=s.props.onObserve;t&&t(e)},s}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.target=Object(l.findDOMNode)(this),this.observer=this.createObserver(),this.observer.observe(this.target)}},{key:"componentWillUnmount",value:function(){this.target&&this.observer.unobserve(this.target)}},{key:"createObserver",value:function(){var e=this.props,t=e.root,n=e.rootMargin,r=e.threshold,o={root:t,rootMargin:n,threshold:r};return new window.IntersectionObserver(this.handleObserve,o)}},{key:"render",value:function(){return this.props.children}}]),t}(c.Component);p.propTypes={root:s.a.object,rootMargin:s.a.string,threshold:s.a.oneOfType([s.a.number,s.a.arrayOf(s.a.number)]),onObserve:s.a.func},t.a=p},1515:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(14),s=n.n(i),c=n(0),l=n.n(c),u=n(3),p=n.n(u),f=(n(1525),function(e){var t=e.className,n=e.title,r=e.options,o=e.children,a=s()(e,["className","title","options","children"]);return l.a.createElement("div",Object.assign({className:p()("List",t)},a),(n||r)&&l.a.createElement("div",{className:"List-header"},l.a.createElement("h4",{className:"List-headerText"},n),l.a.createElement("div",{className:"List-headerOptions"},r)),o)}),d=f,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),h(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.tabIndex,r=e.meta,o=e.children,a=e.onRef;return l.a.createElement("div",{className:p()("List-item",t),tabIndex:n,ref:a},r&&l.a.createElement("div",{className:"List-itemMeta"},r),o)}}]),t}(l.a.Component),b=m,v=n(1530),y=function(){return l.a.createElement(b,{className:"List-item--holder"},l.a.createElement(v.a,{inline:!0,title:!0,width:"350",bottom:"20"}),l.a.createElement("div",{style:{marginBottom:"20px"}},l.a.createElement(v.a,{avatar:!0,right:"16"}),l.a.createElement(v.a,{inline:!0,width:"200",height:"18",bottom:"3"})),l.a.createElement(v.a,null),l.a.createElement(v.a,null),l.a.createElement(v.a,{width:"550"}))},w=function(){return l.a.createElement(b,{className:"List-item--holder"},l.a.createElement(v.a,{title:!0,width:"360",bottom:"20"}),l.a.createElement(v.a,{width:"280"}))},g=function(e){return e.rich?l.a.createElement("div",null,l.a.createElement(y,null),l.a.createElement(y,null),l.a.createElement(y,null)):l.a.createElement("div",null,l.a.createElement(w,null),l.a.createElement(w,null),l.a.createElement(w,null),l.a.createElement(w,null))},E=g;n.d(t,"b",function(){return d}),n.d(t,!1,function(){return E}),n.d(t,"a",function(){return b})},1516:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,c=n(2),l=n.n(c),u=n(0),p=n.n(u),f=n(9),d=n(4),h=n(7),m=n(287),b=(n.n(m),n(289)),v=n(1613),y=(n.n(v),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=(s=i=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.buttonRef=p.a.createRef(),a.handleClick=function(e){var t=a.props,n=t.zaInfos,r=n.toggleComment,o=n.getCommentAction,i=t.positionStatus,s=t.onClick,c=t.commentsShown;if(h.default.trackEvent(a.buttonRef.current,y({action:o?o(!c):"Comment",element:"Button",is_intent:!0},r&&{id:r})),s){var l="fixed"===i?"fixed":"bottom",u=a.props.commentsShown,p=!u,f={commentsShown:p,commentsAutoFocus:!(e instanceof KeyboardEvent),commentPattern:l};e instanceof KeyboardEvent&&"bottom"===l&&a.buttonRef.current.focus(),s(e,f)}},i=n,o(a,i)}return a(t,e),w(t,[{key:"componentDidMount",value:function(){this.props.onInstance(this)}},{key:"componentWillUnmount",value:function(){this.props.onInstance(null)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.count,r=e.commentsShown,o=e.commentClosed,a=void 0;if(r)a="收起评论";else{var i=n&&!o;a=i?Object(m.formatNumber)(n)+" 条评论":"添加评论"}return p.a.createElement(p.a.Fragment,null,p.a.createElement(b.c,{keyMap:{COMMENT:"c"},handlers:{COMMENT:this.handleClick}}),p.a.createElement(d.c,{onRef:this.buttonRef,preset:"plain",className:t,onClick:this.handleClick,icon:f.A,label:a}))}}]),t}(u.Component),i.propTypes={commentsShown:l.a.bool,count:l.a.number,zaInfos:l.a.shape({id:l.a.number,getCommentAction:l.a.func}),onInstance:l.a.func},i.defaultProps={zaInfos:{},onInstance:function(){return null}},s);t.a=g},1517:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,c=n(2),l=n.n(c),u=n(0),p=n.n(u),f=n(178),d=n(592),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=(s=i=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.handlePackup=function(){var e=a.props.onClose;window.scrollTo(0,a.originPageYOffset),e&&e()},i=n,o(a,i)}return a(t,e),h(t,[{key:"componentWillReceiveProps",value:function(e){"bottom"===e.commentPattern&&e.shown&&!this.props.shown&&(this.originPageYOffset=window.pageYOffset)}},{key:"render",value:function(){var e=this.props,t=e.shown,n=e.showPackupButton,r=e.parent,o=e.commentPattern,a=e.commentInputPosition,i=e.onClose,s=e.byComment,c=e.needLoadCommentPermission,l=e.isMobile,u=e.onOrderChange,h=e.onItemLike,m=e.onPaginationClick,b=e.autoFocus,v=e.onMount,y=e.zaInfo;return t?"bottom"===o?p.a.createElement(d.a,{autoFocus:b,parent:r,commentPattern:o,commentInputPosition:a,showPackupButton:n,handlePackupButton:this.handlePackup,needLoadCommentPermission:c,isMobile:l,onOrderChange:u,onItemLike:h,onPaginationClick:m,onMount:v,zaInfo:y}):p.a.createElement(f.b,{size:"fullPage",onClose:i,maskClosable:!1},t&&"fixed"===o&&p.a.createElement(d.a,{parent:r,commentPattern:o,byComment:s,needLoadCommentPermission:c,onOrderChange:u,onItemLike:h,onPaginationClick:m,onMount:v,zaInfo:y})):null}}]),t}(u.Component),i.propTypes={byComment:l.a.oneOfType([l.a.number,l.a.string]),parent:l.a.object,shown:l.a.bool,showPackupButton:l.a.bool,commentPattern:l.a.string,commentInputPosition:l.a.oneOf(["top","bottom"]),onClose:l.a.func,needLoadCommentPermission:l.a.bool,isMobile:l.a.bool,onOrderChange:l.a.func,onItemLike:l.a.func,onPaginationClick:l.a.func,autoFocus:l.a.bool,onMount:l.a.func,zaInfo:l.a.object},i.defaultProps={commentPattern:"fixed",showPackupButton:!0,commentInputPosition:"bottom"},s);t.a=m},1518:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function v(e,t){var n=pe[e]+"_"+t.type,r={monitor:{type:"Event",imgResourceErrorInfo:{error_description:n,img_url:t.url,img_from:"web"}}};E.default.trackMonitor({name:n},r)}var y=n(0),w=n.n(y),g=n(20),E=n(7),O=n(177),C=n(571),_=n(290),k=n(1520),j=n(551),S=n(3),P=n.n(S),T=n(79),N=n.n(T),A=n(81),x=n.n(A),R=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.a;return function(n){return N()(function(s){function c(){var e;o(this,c);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=a(this,(e=c.__proto__||Object.getPrototypeOf(c)).call.apply(e,[this].concat(r)));return s.key=t(),s}return i(c,s),R(c,[{key:"render",value:function(){return w.a.createElement(n,Object.assign({},this.props,r({},e,this.key)))}}]),c}(w.a.Component),n)}},M=I,L=n(1538),D=n(1529),q=n.n(D),B=function(e){var t=[];return{value:e,listen:function(e){t.push(e)},unlisten:function(e){t=t.filter(function(t){return t!==e})},emit:function(e){this.value=e,t.forEach(function(t){return t(e)})}}},U=function(){return Object(L.createSubscription)({getCurrentValue:function(e){return e.value},subscribe:function(e,t){return e.listen(t),function(){return e.unlisten(t)}}})},z=function(e,t){return e?q()(e,function(e){return function(){return t(e.apply(void 0,arguments))}}):{dispatch:t}},F=function(e,t){return function(n){var r=B({}),o=U(),a=function(e){return r.emit(e(r.value))},i=z(t,a),s=Object.assign(function(t){return w.a.createElement(o,{source:r},function(o){return w.a.createElement(n,Object.assign({},t,e({value:o,source:r},t),i))})},{source:r});return N()(s,n)}},Q=F,V=n(14),H=n.n(V),W=function(e){return function(t){var n=e.gifKey,r=e.isPlaying,o=H()(e,["gifKey","isPlaying"]),a=Object.assign({},t);if(r){var i=!0,c=!1,l=void 0;try{for(var u,p=Object.keys(a)[Symbol.iterator]();!(i=(u=p.next()).done);i=!0){var f=u.value,d=a[f];f!==n&&d.isPlaying&&(a[f]=Object.assign({},d,{isPlaying:!1}))}}catch(e){c=!0,l=e}finally{try{!i&&p.return&&p.return()}finally{if(c)throw l}}}return Object.assign({},a,s({},n,Object.assign({},t[n],{isPlaying:r},o)))}},Y=function(e){return function(t){var n=Object.assign({},t);return delete n[e.gifKey],n}},K=void 0;!function(e){e[e.Initial=0]="Initial",e[e.Loading=1]="Loading",e[e.Ok=2]="Ok",e[e.Failed=3]="Failed"}(K||(K={}));var G=function(e){return w.a.createElement("svg",Object.assign({width:60,height:60,viewBox:"0 0 60 60"},e),w.a.createElement("g",{fill:"none",fillRule:"evenodd"},w.a.createElement("ellipse",{fill:"#000",opacity:.45,cx:30,cy:30,rx:30,ry:30}),w.a.createElement("ellipse",{stroke:"#FFF",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4,1,4",cx:30,cy:30,rx:26,ry:26}),w.a.createElement("svg",Object.assign({x:16,y:18.5},e),w.a.createElement("path",{d:"M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z",fill:"#fff"}))))},X=function(e){return w.a.createElement("svg",Object.assign({width:"60px",height:"60px",viewBox:"0 0 60 60",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},e),w.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},w.a.createElement("ellipse",{fill:"#000000",opacity:"0.45",cx:"30",cy:"30",rx:"30",ry:"30"}),w.a.createElement("ellipse",{stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.5",cx:"30",cy:"30",rx:"26",ry:"26"}),w.a.createElement("ellipse",{stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4,1,4",cx:"30",cy:"30",rx:"26",ry:"26"},w.a.createElement("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 30 30",to:"90 30 30",dur:"0.3s"}),w.a.createElement("animate",{attributeName:"opacity",from:"1",to:"0",dur:"0.3",fill:"freeze"}))),w.a.createElement("svg",{x:"16",y:"18.5"},w.a.createElement("g",{fill:"#ffffff"},w.a.createElement("path",{x:"100",y:"100",d:"M12.8422852,12.9814453 L12.8422852,11.3994141 L7.63916016,11.3994141 L7.63916016,13.0517578 L10.9086914,13.0517578 L10.9086914,13.3242188 C10.8911133,15.2050781 9.46728516,16.4707031 7.39306641,16.4707031 C5.01123047,16.4707031 3.51708984,14.625 3.51708984,11.6367188 C3.51708984,8.70117188 5.00244141,6.84667969 7.34912109,6.84667969 C9.08056641,6.84667969 10.284668,7.68164062 10.7768555,9.2109375 L12.7543945,9.2109375 C12.3237305,6.64453125 10.2319336,5.00976562 7.34912109,5.00976562 C3.79833984,5.00976562 1.50439453,7.61132812 1.50439453,11.6542969 C1.50439453,15.75 3.77197266,18.3076172 7.36669922,18.3076172 C10.6889648,18.3076172 12.8422852,16.2246094 12.8422852,12.9814453 Z M17.5180664,18 L17.5180664,5.31738281 L15.5493164,5.31738281 L15.5493164,18 L17.5180664,18 Z M22.659668,18 L22.659668,12.7441406 L28.1088867,12.7441406 L28.1088867,11.0039062 L22.659668,11.0039062 L22.659668,7.11035156 L28.6098633,7.11035156 L28.6098633,5.31738281 L20.690918,5.31738281 L20.690918,18 L22.659668,18 Z"}))),w.a.createElement("path",{d:"M56,30 C56,15.6405965 44.3594035,4 30,4",stroke:"#FFFFFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0",fill:"none"},w.a.createElement("animate",{attributeName:"opacity",from:"0",to:"1",dur:".6",fill:"freeze"}),w.a.createElement("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 30 30",to:"360 30 30",dur:"1.625s",repeatCount:"indefinite"})))},$=function(e){return w.a.createElement("svg",Object.assign({width:60,height:60,viewBox:"0 0 60 60"},e),w.a.createElement("g",{fill:"none",fillRule:"evenodd"},w.a.createElement("ellipse",{fill:"#282828",opacity:.45,cx:30,cy:30,rx:30,ry:30}),w.a.createElement("path",{d:"M41.552 18.93A15.954 15.954 0 0 0 30 14c-8.837 0-16 7.163-16 16s7.163 16 16 16c7.811 0 14.315-5.597 15.72-13",stroke:"#FFF",strokeWidth:2,strokeLinecap:"round"}),w.a.createElement("path",{d:"M45.108 16.236c.44-.33.797-.151.797.4v7.005c0 .55-.358.73-.797.4L40.7 20.736c-.44-.33-.439-.866 0-1.195l4.407-3.305z",fill:"#FFF"})))},J=(n(1561),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Z=function(){return new Promise(requestAnimationFrame)},ee=function(e){function t(){var e;c(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return a.handleClick=function(e){var t=a.props,n=t.gifKey,r=t.src,o=t.onSuccess,i=t.onFailed,s=t.onClick,c=t.loadState,l=t.isPlaying;if(s&&s(e),a.canPlay)return void a.props.updateGif({gifKey:n,isPlaying:!l});c!==K.Loading&&(a.props.updateGif({gifKey:n,loadState:K.Loading}),Promise.all([Object(O.loadImage)(r),Z().then(Z)]).then(function(){o&&o(),a.props.updateGif({gifKey:n,isPlaying:!0,loadState:K.Ok})}).catch(function(e){i&&i(e),a.props.updateGif({gifKey:n,loadState:K.Failed})}))},a}return u(t,e),J(t,[{key:"componentWillUnmount",value:function(){this.props.removeGif({gifKey:this.props.gifKey})}},{key:"render",value:function(){var e=this.props,t=e.poster,n=e.src,r=e.size,o=e.loadState,a=e.isPlaying,i=this.canPlay&&a,s=o===K.Loading,c=o===K.Failed,l=void 0;return s?l=w.a.createElement(X,{className:"GifPlayer-icon"}):c?l=w.a.createElement($,{className:"GifPlayer-icon"}):a||(l=w.a.createElement(G,{className:"GifPlayer-icon"})),l&&(this.lastIcon=l),w.a.createElement("div",{className:P()("GifPlayer",{isPlaying:a}),"data-size":r,onClick:this.handleClick},w.a.createElement("img",{className:"column-gif",role:"presentation",src:i?n:t,"data-thumbnail":t,"data-size":r}),l||this.lastIcon)}},{key:"canPlay",get:function(){return this.props.loadState===K.Ok}}]),t}(w.a.Component);ee.defaultProps={isPlaying:!1,loadState:K.Initial};var te,ne,re,oe=M("gifKey")(Q(function(e,t){return e.value[t.gifKey]},{updateGif:W,removeGif:Y})(ee)),ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ie=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),se=function(e){function t(){var e,n,r,o;p(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onSuccess=function(){E.default.trackEvent(r,{action:"StatusReport",element:"Card"},{status:{result:"Success",event:{action:"Click"}}})},r.onFailed=function(){E.default.trackEvent(r,{action:"StatusReport",element:"Card"},{status:{result:"Fail",event:{action:"Click"}}})},o=n,f(r,o)}return d(t,e),ie(t,[{key:"componentDidMount",value:function(){var e=this;E.default.setModule(this,{module:"GifItem"}),Object(j.onViewedOnce)(Object(g.findDOMNode)(this),function(){E.default.trackCardShow(e,{element:"Card"})})}},{key:"render",value:function(){var e=this.props.data;return w.a.createElement(oe,ae({onSuccess:this.onSuccess,onFailed:this.onFailed},e))}}]),t}(y.Component),ce=se,le=(n(1562),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),ue=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),pe={fail:"image_web_fail",success:"image_web_success",timeout:"image_web_timeout"},fe=(ne=te=function(e){function t(){var e,n,r,o;h(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),re.call(r),o=n,m(r,o)}return b(t,e),ue(t,[{key:"componentDidMount",value:function(){this.mount()}},{key:"componentWillUpdate",value:function(e){this.props.html!==e.html&&this.unmount()}},{key:"componentDidUpdate",value:function(e){e.html!==this.props.html&&this.mount()}},{key:"componentWillUnmount",value:function(){this.unmount()}},{key:"mount",value:function(){var e=this;this.gifNodes=Array.from(this.root.getElementsByTagName("img")).filter(function(e){return!e.getAttribute("eeimg")&&e.getAttribute("data-thumbnail")}).map(function(t){var n=document.createElement("div");n.className="RichText-gifPlaceholder",n.innerHTML=t.outerHTML,t.parentNode.replaceChild(n,t);var r={src:t.dataset.actualsrc||Object(O.imgUrl)(t.src,{extension:"gif",size:"b"}),poster:t.dataset.thumbnail,size:t.dataset.size};return Object(g.unstable_renderSubtreeIntoContainer)(e,e.renderGif(r),n),n}),this.mentionNodes=Array.from(this.root.querySelectorAll(".member_mention")).map(function(t){var n=t.getAttribute("data-hash"),r=t.textContent.replace(/^@/,""),o=document.createElement("span");return t.parentNode.replaceChild(o,t),Object(g.unstable_renderSubtreeIntoContainer)(e,e.renderMention({id:n,name:r}),o),o}),this.videoNodes=Array.from(this.root.querySelectorAll(".video-box, .video-link, .unprocessable_video")).map(function(t){var n=t.getAttribute("data-poster"),r="data:,"===n?"":n,o={title:t.getAttribute("data-name"),thumbnail:r,url:t.getAttribute("href"),src:t.getAttribute("data-src")};o=t.getAttribute("data-lens-id")?le({},o,{isLens:!0,id:t.getAttribute("data-lens-id"),isPlayable:!0}):le({},o,{isLens:!1,id:t.getAttribute("data-video-id"),isPlayable:"true"===t.getAttribute("data-video-playable")}),t.hasAttribute("data-lens-status")&&(o=le({},o,{error:{status:t.getAttribute("data-lens-status"),message:t.getAttribute("data-description")}}));var a=document.createElement("div");return t.parentNode.replaceChild(a,t),Object(g.unstable_renderSubtreeIntoContainer)(e,e.renderVideo(o),a),a})}},{key:"unmount",value:function(){this.gifNodes&&this.gifNodes.forEach(function(e){Object(g.unmountComponentAtNode)(e)}),this.mentionNodes&&this.mentionNodes.forEach(function(e){Object(g.unmountComponentAtNode)(e)}),this.videoNodes&&this.videoNodes.forEach(function(e){Object(g.unmountComponentAtNode)(e)})}},{key:"renderMention",value:function(e){return w.a.createElement(_.a,{noBadge:!0,user:e,target:"_blank"},"@",e.name)}},{key:"renderVideo",value:function(e){return w.a.createElement(k.a,{data:e})}},{key:"renderGif",value:function(e){return w.a.createElement(ce,{data:e})}},{key:"render",value:function(){var e=this;return w.a.createElement(C.a,le({onRef:function(t){e.root=t},onClick:this.handleGifPlayerClick},this.props,{onLoadImageSuccess:this.trackLoadImageSuccess,onLoadImageFail:this.trackLoadImageFail,onLoadImageTimeout:this.trackLoadImageTimeout}))}}]),t}(y.Component),re=function(){this.handleGifPlayerClick=function(e){var t=e.target;"IMG"===t.tagName&&(t.parentNode.classList.contains("isPlaying")||t.dataset.thumbnail&&E.default.trackEvent(t,{action:"Click",element:"Image"}))},this.trackLoadImageFail=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.apply(void 0,["fail"].concat(t))},this.trackLoadImageSuccess=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.apply(void 0,["success"].concat(t))},this.trackLoadImageTimeout=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.apply(void 0,["timeout"].concat(t))}},ne);t.a=fe},1519:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e){return{isMobile:Object(re.k)(e).Mobile}}var m,b,v=n(2),y=n.n(v),w=n(0),g=n.n(w),E=n(6),O=n(3),C=n.n(O),_=n(4),k=n(1512),j=n(9),S=n(1523),P=n(552),T=n(1556),N=n(563),A=n(1513),x=n(551),R=n(573),I=n(177),M=n(7),L=n(289),D=n(1506),q=n(585),B=n(18),U=n(1518),z=(n(1608),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),F=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Q=(m=Object(E.connect)(function(e,t){return{isCurrentUser:Object(B.g)(e,t.data.author)}}))(b=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={tipShown:!1,tipContent:"",tipX:0,tipY:0,tipPosition:"bottom"},e.handleMouseDown=e.handleMouseDown.bind(e),e.handleCopy=e.handleCopy.bind(e),e.handleTipClose=e.handleTipClose.bind(e),e.rightClickX=-1,e.rightClickY=-1,e}return a(t,e),F(t,[{key:"getRange",value:function(e){if(e&&e.rangeCount>0)return e.getRangeAt(0)}},{key:"getExtraCopyright",value:function(e,t,n){var r=["作者："+t,"链接："+e,"来源：知乎","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],o=["",""];return r=n?r.concat(o):o.concat(r)}},{key:"getCopyText",value:function(e,t,n,r){var o=this.getExtraCopyright(t,n,r).join("\n");return r?o+e:e+o}},{key:"getRangeHtml",value:function(e){var t=document.createElement("div");return t.appendChild(e.cloneContents()),t.outerHTML}},{key:"getCopyHtml",value:function(e,t,n,r){var o=this.getExtraCopyright(t,n,r).join("<br />");return"<div>"+(r?o+e:e+o)+"</div>"}},{key:"randomRange",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"addCopyright",value:function(e,t,n){if(window.getSelection){var r=window.getSelection(),o=this.getRange(r),a=o.toString().trim(),i=this.getRangeHtml(o);if(a&&!(a.length<128)){var s=a.length>=512,c=this.getCopyHtml(i,t,n,s),l=this.getCopyText(a,t,n,s),u=e.nativeEvent.clipboardData;if("object"===(void 0===u?"undefined":z(u))){if(u.setData("text/html",'<meta charset="utf-8">'+c),u.setData("text/plain",l),u.getData("text/plain")&&u.getData("text/plain").length>0)return void e.preventDefault()}var p=document.createElement("div");p.innerHTML=c;var f=p.firstChild;f.style.position="fixed",f.style.left="-9999px",document.body.appendChild(f),r.selectAllChildren(f),setTimeout(function(){document.body.removeChild(f),r.removeAllRanges(),r.addRange(o)},200)}}}},{key:"showTip",value:function(e,t){if(window.getSelection){var n=window.getSelection(),r=this.getRange(n),o=r.toString().trim(),a=this.randomRange(44,66);if(!(o.length<=a)){e.preventDefault(),e.stopPropagation();var i=r.getBoundingClientRect(),s=window.pageYOffset,c=this.rightClickX,l=this.rightClickY,u=void 0,p="bottom";if(-1!==l)u=l+3;else{var f=this.props.viewPort,d=i.top+s,h=i.bottom+s,m=s+f.top+52,b=s+f.bottom-52;h<m?u=m-52:h<b?u=h:(p="top",u=d>m&&d<b?d:b+52)}var v=-1!==c?c+3:i.left+(i.right-i.left)/2-12;this.setState({tipShown:!0,tipContent:t,tipX:v,tipY:u,tipPosition:p}),this.rightClickX=-1,this.rightClickY=-1}}}},{key:"handleTipClose",value:function(){this.setState({tipShown:!1})}},{key:"handleCopy",value:function(e){var t=this.props,n=t.data,r=n.author,o=n.type,a=n.id,i=n.question,s=n.reshipmentSettings,c=n.relationship;c=void 0===c?{}:c;var l=c.isAuthor,u=c.isAuthorized,p=t.isCurrentUser,f="";if("article"===o?f="https://zhuanlan.zhihu.com/p/"+a:"answer"===o&&(f="https://www.zhihu.com/question/"+i.id+"/answer/"+a),!p&&!l)switch(s){case"disallowed":this.showTip(e,g.a.createElement("a",{href:"https://www.zhihu.com/terms#sec-licence-6"},"禁止转载"));break;case"need_payment":if(!u){this.showTip(e,g.a.createElement("a",{href:"https://www.zhihu.com/copyright/apply?answer="+a},"申请转载"));break}this.showTip(e,"已获授权，复制成功");default:this.addCopyright(e,f,r.name)}}},{key:"handleMouseDown",value:function(e){3===e.nativeEvent.which&&(this.rightClickX=e.pageX,this.rightClickY=e.pageY)}},{key:"render",value:function(){var e=this.props,t=e.onRef,n=e.tag,r=e.html,o=e.children,a=e.onClick,i=e.className,s=e.itemProp,c=e.style,l=e.prefix,u=this.state,p=u.tipShown,f=u.tipContent,d=u.tipX,h=u.tipY,m=u.tipPosition;return g.a.createElement("div",{ref:t,onClick:a,className:i,style:c},l,g.a.createElement(U.a,{itemProp:s,tag:n,html:r,onCopy:this.handleCopy,onMouseDown:this.handleMouseDown,className:"CopyrightRichText-richText"}),o,g.a.createElement(q.a,{shown:p,timeout:1e4,hideOnClick:!0,onClose:this.handleTipClose,x:d,y:h,position:m,content:f,className:"CopyrightRichText-tooltip"}))}}]),t}(w.Component))||b;Q.propTypes={onRef:y.a.func,viewPort:y.a.object};var V,H,W=Q,Y=n(1520),K=n(16),G=n(557),X=n.n(G),$=n(548),J=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Z=i(["发布于",""],["发布于",""]),ee=i(["编辑于",""],["编辑于",""]),te=(H=V=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),J(t,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.created,r=e.updated,o=e.onClick;return g.a.createElement("div",{className:"ContentItem-time"},g.a.createElement(K.Link,{to:t,target:"_blank",onClick:o},g.a.createElement("span",{"data-tooltip":X()(Z,Object($.toDateTimeString)(n))},r!==n?X()(ee,Object($.toSmartDateTimeString)(r)):X()(Z,Object($.toSmartDateTimeString)(n)))))}}]),t}(w.Component),V.propTypes={href:y.a.string,created:y.a.number,updated:y.a.number},H),ne=te,re=n(75),oe=n(600),ae=n(1535);n(1609);n.d(t,"a",function(){return ne});var ie,se,ce,le,ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),fe=/.*?(class="link-box")/,de=800,he=400,me=(ie=Object(E.connect)(h,{updateReadStatus:oe.b}))((le=ce=function(e){function t(){var e,n,r,o;p(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state=ue({},r.getInitTruncatedState(r.props),{shouldSticky:!1,offset:0}),r.richContentRef=g.a.createRef(),r.truncateContent=function(){var e=r.props.isMobile,t=e?he:de,n=r.props.expandedHeight||t;(!r.content||r.content.scrollHeight<n)&&r.setState({isTruncated:!1,isExpanded:!1}),r.content&&r.content.scrollHeight>r.content.offsetHeight&&r.setState({contentCollapsed:!0})},r.updateStateInBrowser=function(){var e=r.props,t=e.excerpt,n=e.html,o=e.expanded,a=e.cover,i=e.unescapable,s=e.limit,c=e.limitWithImage,l=e.truncateHTMLOptions,u=e.truncateDisabled,p=!0,f=r.state.truncatedContent;if(t&&(fe.test(t)||u))f=t;else if(!i){var d=a?c:s,h=r.truncate(n,d,l);p=h.isTruncated,f=h.content}return{isTruncated:p,isExpanded:n&&o,truncatedContent:f,previewImg:null}},r.checkOpenInAppStyle=function(e){},r.toggle=function(e){r.isCollapsed()?r.handleExpand(e):r.handleCollapse(e)},r.handleExpand=function(e){var t=r.props.zaIds.expand;M.default.trackEvent(r.richContentRef.current,ue({action:"Expand",name:e&&e.target.textContent},t&&{id:t}));var n=r.props.onExpand;if(n)return void n(e);var o=r.props,a=o.onToggleExpend,i=o.data,s=i.type,c=i.id;r.context.currentUser&&Object(ae.c)("article"===s?"post":s,c,ae.a);a&&a(!0),r.setState({isExpanded:!0},function(){"article"===s&&Object(x.onViewedOnce)(r.richContentRef.current,function(){M.default.trackEvent(r.richContentRef.current,{action:"ReadFinish"})})})},r.handleCollapse=function(){var e=r.props.onToggleExpend;M.default.trackEvent(r.richContentRef.current,{action:"Collapse",element:"Button"});e&&e(!1),r.setState({isExpanded:!1},function(){return r.checkOpenInAppStyle(!1)})},r.handlePreview=function(e){var t=r.state,n=t.isExpanded,o=t.isTruncated,a=o&&!n,i=e.target;!a&&"IMG"===i.tagName&&i.classList.contains("zh-lightbox-thumb")&&r.setState({previewImg:i})},r.handlePositionStatusChange=function(e){var t=r.props.onPositionStatusChange;t&&(t(e),r.checkOpenInAppStyle("fixed"===e))},r.handleObserve=function(e){var t=e[0].intersectionRatio;if(t||!document.querySelector("#root").style.position){var n=t>0;n!==r.state.shouldSticky&&(r.setState({shouldSticky:n}),n||r.checkOpenInAppStyle(!1))}},r.handleTrunObserve=function(e){var t=r.props,n=t.data,o=(n.type,n.id,t.updateReadStatus,e[0]),a=o.intersectionRatio,i=o.isIntersecting;r.truncateComputed||(a>0||i)&&(setTimeout(function(){return r.truncateContent()}),r.truncateComputed=!0)},r.isCollapsed=function(){var e=r.props,t=e.after,n=e.before,o=e.unescapable,a=r.state,i=a.isExpanded,s=a.isTruncated;return!n&&!t||o?s&&!i:!i},o=n,f(r,o)}return d(t,e),pe(t,[{key:"componentDidMount",value:function(){var e=this;this.setState(ue({},this.updateStateInBrowser(),{viewPort:{top:148,bottom:window.innerHeight-56}})),Object(x.onViewedOnce)(this.richContentRef.current,function(){var t=e.props,n=t.data,r=n.type,o=n.id,a=t.expanded;e.context.currentUser&&a&&Object(ae.c)("article"===r?"post":r,o,ae.a)})}},{key:"componentWillReceiveProps",value:function(e){this.props.data.id!==e.data.id&&this.setState(this.getInitTruncatedState(e))}},{key:"componentWillUpdate",value:function(e,t){if(this.state.isExpanded&&!t.isExpanded){var n=this.richContentRef.current.getBoundingClientRect();n.top<this.props.topExcludedHeight&&(this.rect=n,this.scroll=window.pageYOffset)}}},{key:"componentDidUpdate",value:function(e,t){if(t.isExpanded&&!this.state.isExpanded&&this.rect){var n=this.rect,r=n.top,o=n.bottom,a=n.height,i=this.richContentRef.current.offsetHeight,s=window,c=s.innerHeight,l=o<c?i-a:r-(c-i);window.scrollTo(0,this.scroll+l),this.rect=null,this.scroll=null}}},{key:"getInitTruncatedState",value:function(e){var t=e.excerpt,n=e.html,r=e.expanded,o=e.unescapable;return{isTruncated:t.length<=n.length,isExpanded:r,truncatedContent:o?n:t,previewImg:null}}},{key:"truncate",value:function(e,t,n){var r=Object(R.truncateHTML)(e,t,n);return{isTruncated:r.isTruncated,content:r.content}}},{key:"renderActions",value:function(){var e=this,t=this.props,n=t.children,r=t.unescapable,o=t.noCollapsed,a=t.expandText,i=void 0===a?"展开阅读全文":a,s=t.onClick,c=t.videoData,l=this.state,u=l.isExpanded,p=l.isTruncated,f=l.shouldSticky,d=l.offset;if(!u)return[r&&p&&!c&&g.a.createElement(_.c,{key:"expand-button",preset:"plain",className:"ContentItem-rightButton",onClick:s||this.handleExpand},i,g.a.createElement(j.g,{className:"ContentItem-arrowIcon",center:!0})),n&&g.a.createElement(D.a,{key:"actions"},n)];var h=(n||!o)&&g.a.createElement(D.a,{className:"RichContent-actions"},n,!o&&g.a.createElement(_.c,{"data-zop-retract-question":!0,preset:"plain",className:"ContentItem-rightButton",onClick:this.handleCollapse},g.a.createElement("span",{className:"RichContent-collapsedText"},"收起"),g.a.createElement(j.g,{className:"ContentItem-arrowIcon is-active",center:!0})));return f&&h?g.a.createElement(P.a,{offset:d,bottom:!0,container:function(){return e.richContentRef.current.parentNode},onPositionStatusChange:this.handlePositionStatusChange},h):h}},{key:"renderText",value:function(){var e=this,t=this.props,n=t.html,r=t.excerpt,o=t.data,a=t.itemProp,i=void 0===a?"text":a,s=t.expandText,c=void 0===s?"阅读全文":s,l=t.onClick,u=t.prefix,p=t.unescapable,f=t.collapsedHeight,d=this.state,h=d.truncatedContent,m=d.previewImg,b=d.viewPort,v=d.contentCollapsed,y=this.isCollapsed(),w=h||r,E="answer"===o.type?Object(T.a)(n):n,O=y?w:E,k=g.a.createElement(W,ue({itemProp:i,key:y,className:C()("RichContent-inner",{"RichContent-inner--collapsed":v}),style:y&&p?{maxHeight:f}:null,tag:"span",onRef:function(t){e.content=t},data:o,html:O,viewPort:b,prefix:u},y&&{onClick:l||this.handleExpand}),!p&&y&&g.a.createElement(_.c,{preset:"plain",className:"ContentItem-more"},c,g.a.createElement(j.g,{className:"ContentItem-arrowIcon",center:!0})),m&&g.a.createElement(S.a,{img:m,onClose:function(){return e.setState({previewImg:null})}}));return p?g.a.createElement(A.a,{rootMargin:"200px 0px 200px 0px",onObserve:this.handleTrunObserve},k):k}},{key:"render",value:function(){var e=this.props,n=e.unescapable,r=e.after,o=e.before,a=e.extra,i=e.cover,s=e.hasVideo,c=e.renderCanExpandExtra,l=e.className,u=e.videoData,p=e.handleClickVideoMoreButton,f=this.state.isExpanded,d=this.isCollapsed(),h=u?g.a.createElement(w.Fragment,null,g.a.createElement(Y.a,{data:u}),g.a.createElement("p",{className:"RichContent-videoMore",onClick:p},"点击查看全文")):this.renderText(),m=f?g.a.createElement(A.a,{rootMargin:"-240px 0px",onObserve:this.handleObserve},h):h;return g.a.createElement("div",{className:C()("RichContent",l,{"is-collapsed":d,"RichContent--unescapable":n}),ref:this.richContentRef,onClick:this.handlePreview},g.a.createElement(L.c,{keyMap:{TOGGLE_EXPAND:"o"},handlers:{TOGGLE_EXPAND:this.toggle}}),!d&&o,!n&&d&&i&&g.a.createElement(t.Cover,{url:i,hasVideo:s,onClick:this.handleExpand}),m,a||"function"==typeof c&&c(f,this.handleExpand),!d&&r,this.renderActions())}}]),t}(w.Component),ce.contextTypes={currentUser:y.a.object},ce.propTypes={unescapable:y.a.bool,expanded:y.a.bool,noCollapsed:y.a.bool,limit:y.a.number,limitWithImage:y.a.number,collapsedHeight:y.a.number,html:y.a.string,excerpt:y.a.string,truncateDisabled:y.a.bool,before:y.a.node,after:y.a.node,prefix:y.a.node,extra:y.a.node,renderCanExpandExtra:y.a.func,topExcludedHeight:y.a.number,onPositionStatusChange:y.a.func,type:y.a.string,data:y.a.object,cover:y.a.string,hasVideo:y.a.bool,truncateHTMLOptions:y.a.object,expandText:y.a.string,onToggleExpend:y.a.func,videoData:y.a.object,handleClickVideoMoreButton:y.a.func,zaIds:y.a.shape({expand:y.a.number})},ce.defaultProps={limit:160,limitWithImage:100,expanded:!1,unescapable:!1,topExcludedHeight:60,excerpt:"",hasVideo:!1,data:{},collapsedHeight:400,zaIds:{}},ce.Cover=function(e){var t=e.url,n=e.hasVideo,r=u(e,["url","hasVideo"]);return g.a.createElement("div",ue({className:C()("RichContent-cover",{"RichContent-cover--mobile":!1})},r),g.a.createElement("div",{className:"RichContent-cover-inner"},g.a.createElement(N.a,{thumbnail:Object(I.imgUrl)(t,"60w"),url:Object(I.imgUrl)(t,"400x224"),alt:"cover"})),n&&g.a.createElement(k.a,{className:"RichContent-cover-play"}))},se=le))||se;t.b=me},1520:function(e,t,n){"use strict";function r(e){function t(t){function n(n){var a=n.origin||n.originalEvent.origin,i="*"===r||r===a,s=n.data||{},c=s.from,l=s.id,u=s.payload,p=!o||e===l;if(i&&c===P&&p&&u){var f=u.messageName,d=u.data;f&&t(f,d,n.source)}}return window.addEventListener("message",n),{unsubscribe:function(){return window.removeEventListener("message",n)}}}function n(t,n,o){t&&t.postMessage&&t.postMessage({from:P,id:e,payload:{messageName:n,data:o}},r||"*")}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",o=arguments[2];return{subscribeMessage:t,dispatchMessage:n}}function o(e){function t(t,n){e(t,L({play_event_identifier:f,duration:1e3*p,elapsed:D(d,h),video_quality:B[u]},n))}function n(){v++,(v<15?z.includes(v):v%15==0)&&t({action:"Playing"})}function r(){v=0,o(),y=setInterval(n,1e3)}function o(){clearInterval(y)}function a(e){var n=e.currentTime,o=e.duration;p=o,q(n,0)&&(f=M()(),d=0),h=Date.now(),t(q(n,0)?{action:"Play"}:{action:"ResumePlay"}),r()}function i(e){var n=e.currentTime,r=e.duration;h&&(d+=Date.now()-h,h=null),t(q(n,r)?{action:"EndPlay"}:{action:"Pause"}),o()}function s(e){var n=e.quality;t({action:"Switch",name:U[n]}),u=n}function c(){m||(b=Date.now())}function l(){if(!m){m=!0;t({action:"Load"},{video_load_time:Date.now()-b})}}var u="sd",p=0,f=null,d=0,h=null,m=!1,b=0,v=0,y=void 0;return{handlePlayEvent:a,handlePauseEvent:i,handleQualityChangeEvent:s,handleFragmentLoading:c,handleFragmentLoaded:l,clearTick:o}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){var n=t.data,r=n.isLens,o=n.id;if(r){var a=!1;if("undefined"!=typeof window){var i=e.env.userAgent,s=i.Mobile,c=i.origin;"Chrome"!==E()(c).browser.name||s||(a="1"===Object(N.a)(e,"ls_fmp4"))}return{data:Q({},t.data,{source:"lens",playerUrl:"https://www.zhihu.com/video/"+o}),useMSE:a}}return{data:e.video.data[o]||t.data}}var l={};n.d(l,"DOM",function(){return k}),n.d(l,"PLAYER",function(){return j});var u={};n.d(u,"PLAYER",function(){return S});var p,f,d,h,m,b,v=n(0),y=n.n(v),w=n(6),g=n(1548),E=n.n(g),O=n(1513),C=n(1512),_=n(1533),k={PLAY:"event/dom/play",PLAYING:"event/dom/playing",PAUSE:"event/dom/pause",ENDED:"event/dom/ended",TIMEUPDATE:"event/dom/timeupdate",ERROR:"event/dom/error",WAITING:"event/dom/waiting"},j={QUALITY_CHANGE:"event/player/quality-change",REQUEST_PLAY:"event/player/request-play",REQUEST_PAUSE:"event/player/request-pause",PLAY_COUNT:"event/player/play-count",PLAY_FAILED:"event/player/play-failed",ENTER_FULLSCREEN:"event/player/enter-fullscreen",EXIT_FULLSCREEN:"event/player/exit-fullscreen"},S={PLAY:"action/player/play",PAUSE:"action/player/pause",SET_VOLUME:"action/player/set-volume",ENTER_FULLSCREEN:"action/player/enter-fullscreen",EXIT_FULLSCREEN:"action/player/exit-fullscreen"},P="griffith",T=r,N=n(75),A=n(17),x=n(298),R=n(288),I=n(558),M=n.n(I),L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D=function(e,t){return e+(t?Date.now()-t:0)},q=function(e,t){return Math.abs(e-t)<.01},B={auto:"Auto",ld:"LD",sd:"SD",hd:"HD"},U={auto:"自动",ld:"低清",sd:"标清",hd:"超清"},z=[1,2,3,5,8,13],F=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V=(p=Object(w.connect)(c,{showNotification:A.g,loadVideo:x.c}),f=Object(R.a)(function(e){var t=e.data,n=t.isLens,r=t.id,o=t.isPlayable;return{module:"VideoItem",content:{type:"Video",sub_type:n?"SelfHosted":"Embedded",video_id:r,is_playable:Boolean(o)},trackCardShow:!0,view:{id:174}}}),p(d=f((m=h=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));b.call(n);var r=e.trackEvent,s=e.data;return n.messageHelper=T(s.id,"*",!0),n.videoTracker=o(function(e,t){r(n,e,{play:t})}),n}return s(t,e),F(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.data,n=t.isLens,r=t.id,o=t.playerUrl,a=t.flvPlayerUrl,i=e.loadVideo;n||!r||o||a||i(r);var s=this.messageHelper.subscribeMessage;this.messageSubscription=s(this.handleMessage)}},{key:"componentWillUnmount",value:function(){this.messageSubscription.unsubscribe(),this.videoTracker.clearTick()}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.data.error,o=t.onBeforePlay,a=t.useMSE;return y.a.createElement("div",{className:"RichText-video"},r?y.a.createElement(_.a,n):y.a.createElement(O.a,{onObserve:this.handleObserve},y.a.createElement(C.b,Q({},n,{onIframeRef:function(t){return e.iframe=t},onPlay:this.handlePlay,onPlayFailed:this.handlePlayFailed,onBeforePlay:o},a&&{useMSE:!0}))))}}]),t}(v.Component),b=function(){var e=this;this.pauseVideoInIframe=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.messageHelper.dispatchMessage(t.contentWindow,u.PLAYER.PAUSE,{dontApplyOnFullScreen:n})},this.pauseAllOtherVideos=function(){Array.from(document.querySelectorAll("iframe")).filter(function(t){return t!==e.iframe}).forEach(function(t){return e.pauseVideoInIframe(t)})},this.handleMessage=function(t,n){var r=e.videoTracker,o=r.handlePlayEvent,a=r.handlePauseEvent,i=r.handleQualityChangeEvent,s=r.handleFragmentLoading,c=r.handleFragmentLoaded;switch(t){case l.DOM.PLAY:e.pauseAllOtherVideos(),o(n);break;case l.DOM.PAUSE:a(n);break;case l.PLAYER.QUALITY_CHANGE:i(n);break;case"fragment-loading":s(n);break;case"fragment-loaded":c(n)}},this.handleObserve=function(t){t[0].intersectionRatio<=0&&e.iframe&&e.pauseVideoInIframe(e.iframe,!0)},this.handlePlay=function(){e.props.trackEvent(e,{action:"Play",element:"Video"})},this.handlePlayFailed=function(){(0,e.props.showNotification)("视频加载失败，请刷新页面重试","red")}},d=m))||d)||d);t.a=V},1521:function(e,t,n){var r=n(1773),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();e.exports=a},1522:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1540);t.getHexRandom=r.getHexRandom,t.sliceString=r.sliceString,t.stringWidth=r.stringWidth,t.cutStringWidth=r.cutStringWidth},1523:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return{x:e.left+e.width/2,y:e.top+e.height/2}}var s=n(2),c=n.n(s),l=n(0),u=n.n(l),p=n(3),f=n.n(p),d=n(177),h=(n.n(d),n(554)),m=(n.n(h),n(64)),b=n.n(m),v=n(184),y=n(1563),w=(n.n(y),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),g={top:10,left:20},E={top:0,left:0},O=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={transEnded:!1,rect:null,translate:null,scale:null,url:null},e.getBoundingClientRect=function(){var t=e.props,n=t.img,r=t.data,o=n.getBoundingClientRect(),a=o.left,i=o.top,s=o.width,c=o.height,l=r.width,u=r.height,p={left:a,top:i,width:s,height:c},f=1;return l>u?(p.height=c,f=c/u,p.width=l*f,p.left=a+(s-p.width)/2,p.top=i+(c-p.height)/2):l<u&&(p.width=s,f=s/l,p.height=u*f,p.left=a+(s-p.width)/2,p.top=i+(c-p.height)/2),p},e.handleClick=e.handleClick.bind(e),e.handleTransEnd=e.handleTransEnd.bind(e),e.handleOriginLoad=e.handleOriginLoad.bind(e),e}return a(t,e),w(t,[{key:"componentWillMount",value:function(){h.hide();var e=this.props,t=e.img,n=e.isOriginalUrl,r=this.loadImg=new Image;r.src=Object(d.imgUrl)(t.dataset.original,"r"),r.addEventListener("load",this.handleOriginLoad),this.setState({rect:!1===n?this.getBoundingClientRect():t.getBoundingClientRect()})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.img,n=t.dataset.rawwidth,r=t.naturalWidth;setTimeout(function(){return e.setState(Object.assign({},e.computeTransition(e.state.rect,{width:n||r})))})}},{key:"componentWillUnmount",value:function(){this.loadImg.removeEventListener("load",this.handleOriginLoad),h.show()}},{key:"handleClick",value:function(){this.setState({translate:null,scale:null})}},{key:"handleTransEnd",value:function(){var e=this.state,t=e.translate,n=e.scale,r=this.props.onClose;t&&n?(this.setState({transEnded:!0}),this.scrollNode.style.overflow="auto"):r()}},{key:"handleOriginLoad",value:function(e){this.setState({url:e.target.src})}},{key:"computeTransition",value:function(e,t){var n=this.props,r=n.transitionType,o=n.data,a=b()(navigator.userAgent).Mobile?E:g,s=a.top,c=a.left,l=window,u=l.innerWidth,p=l.innerHeight,f={left:0,top:0,width:u,height:p},d=i(f),h={width:f.width-2*c,height:f.height-2*s},m={},v={},y=void 0;return 1===r?(m.width=h.width>o.width?o.width:h.width,y=m.width/o.width,m.height=o.height*y,v={x:(h.width-m.width)/2+c,y:m.height<h.height?(h.height-m.height)/2+s:g.top}):(m.width=h.width>t.width?t.width:h.width,y=m.width/e.width,m.height=e.height*y,v={x:d.x-e.width/2,y:(m.height<h.height?d.y:g.top+m.height/2)-e.height/2}),{translate:v,scale:y}}},{key:"render",value:function(){var e=this,t=this.props,n=t.img,r=t.isOriginalUrl,o=t.data,a=t.transitionType,i=t.className,s=this.state,c=s.translate,l=s.scale,p=s.rect,h=s.url,m=s.transEnded,y=c&&l,w=1,O="",C=void 0;if(1===a){var _=b()(navigator.userAgent).Mobile?E:g,k=_.left;C=Math.min(window.innerWidth-2*k,o.width);var j=p.width/C;O=y?"translate3d("+c.x+"px, "+c.y+"px, 0) scale3d(1, 1, 1) ":"translate3d("+p.left+"px, "+p.top+"px, 0) scale3d("+j+", "+j+", 1) ",w=y?1:0}else O=y?"translate3d("+c.x+"px ,"+c.y+"px,0) scale3d("+l+","+l+",1) ":"translate3d("+p.left+"px,"+p.top+"px,0)";return u.a.createElement(v.a,null,u.a.createElement("div",{className:f()("ImageView",i,{"is-active":y}),style:{paddingBottom:g.top},onClick:this.handleClick},u.a.createElement("div",{className:"ImageView-inner",ref:function(t){e.scrollNode=t}},u.a.createElement("img",{ref:function(t){e.imgEl=t},src:!1===r?Object(d.imgUrl)(n.dataset.original,"r"):m&&h||n.src,className:f()("ImageView-img",{"ImageView-transformOrigin":1===a}),style:{width:C||p.width,transform:O,opacity:w},onTransitionEnd:this.handleTransEnd,alt:"preview"}))))}}]),t}(l.Component);O.propTypes={img:c.a.object.isRequired,onClose:c.a.func.isRequired},t.a=O},1525:function(e,t){},1526:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return O});var i,s,c=n(2),l=n.n(c),u=n(0),p=n.n(u),f=n(7),d=n(548),h=(n.n(d),n(287)),m=(n.n(h),n(549)),b=n(601),v=n(290),y=n(602),w=n(1506),g=n(1614),E=(n.n(g),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),O=(s=i=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),E(t,[{key:"componentDidMount",value:function(){var e=this.props.user;f.default.setModule(this,{module:"UserItem"},{card:{content:{type:"User",member_hash_id:e.id,follower_num:e.followerCount}}})}},{key:"renderRewardDetails",value:function(){var e=this.props.user,t=e.amount,n=e.rewardCreated;return p.a.createElement("div",{className:"ContentItem-rewardDetails"},p.a.createElement("p",{className:"ContentItem-rewardAmount"},t&&"赞赏了 ￥"+t/100),p.a.createElement("p",{className:"ContentItem-rewardTime"},Object(d.toRelativeString)(n)))}},{key:"render",value:function(){var e=this.props,t=e.user,n=t.urlToken,r=t.isFollowed,o=t.isFollowing,a=t.answerCount,i=t.articlesCount,s=t.followerCount,c=t.id,l=t.isOrg,u=e.user,f=e.type,d=e.isRewardList,g=e.action,E=e.meta,O=e.status,C=e.noTrackCardShow,_=e.onClick,k=e.currentUser,j=!n,S=k&&k.id===c,P=void 0!==g?g:!S&&!j&&p.a.createElement(m.a,{id:u.urlToken,type:f||u.type,preset:m.a.PRESETS.primary,gender:u.gender,isFollowing:o,onClick:_}),T=void 0!==E?E:j||p.a.createElement(y.a,{user:u}),N=void 0!==O?p.a.createElement(w.d,null,O):!j&&p.a.createElement(w.d,null,Boolean(a)&&Object(h.formatNumber)(a)+" 回答",Boolean(i)&&Object(h.formatNumber)(i)+" 文章",Boolean(s)&&Object(h.formatNumber)(s)+" 关注者"),A="//www.zhihu.com/"+(l?"org":"people")+"/"+(n||c);return p.a.createElement(w.e,{data:u,link:A,image:p.a.createElement(v.a,{className:"UserItem-avatar",avatar:!0,avatarProps:{size:60},user:u,target:"_blank"}),title:p.a.createElement("div",{className:"UserItem-title"},p.a.createElement(v.a,{className:"UserItem-name",user:u,target:"_blank"}),p.a.createElement(b.a,{isFollowing:o,isFollowed:r})),meta:p.a.createElement("div",null,T,N),noTrackCardShow:C,extra:d?this.renderRewardDetails():P})}}]),t}(u.Component),i.contextTypes={authRequired:l.a.func},i.propTypes={action:l.a.node,status:l.a.node,meta:l.a.node,type:l.a.string,isRewardList:l.a.bool,onClick:l.a.func,currentUser:l.a.object},s)},1527:function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},1528:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return l});var i=n(0),s=n.n(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),c(t,[{key:"handleEvent",value:function(e){e.stopPropagation()}},{key:"render",value:function(){return s.a.createElement("div",{onBeforeInput:this.handleEvent,onBlur:this.handleEvent,onCompositionEnd:this.handleEvent,onCompositionStart:this.handleEvent,onCopy:this.handleEvent,onCut:this.handleEvent,onDragEnd:this.handleEvent,onDragEnter:this.handleEvent,onDragLeave:this.handleEvent,onDragOver:this.handleEvent,onDragStart:this.handleEvent,onDrop:this.handleEvent,onFocus:this.handleEvent,onInput:this.handleEvent,onKeyDown:this.handleEvent,onKeyPress:this.handleEvent,onKeyUp:this.handleEvent,onMouseUp:this.handleEvent,onPaste:this.handleEvent,onSelect:this.handleEvent,onClick:this.handleEvent},this.props.children)}}]),t}(s.a.Component)},1529:function(e,t,n){function r(e,t){var n={};return t=i(t,3),a(e,function(e,r,a){o(n,r,t(e,r,a))}),n}var o=n(192),a=n(584),i=n(112);e.exports=r},1530:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(3),i=n.n(a),s=(n(1573),function(e){var t=e.avatar,n=e.bottom,r=e.button,a=e.className,s=e.height,c=e.icon,l=e.inline,u=e.right,p=e.style,f=void 0===p?{}:p,d=e.title,h=e.width,m=Object.assign({},f);return h&&(m.width=h+"px"),s&&(m.height=s+"px"),n&&(m.marginBottom=n+"px"),u&&(m.marginRight=u+"px"),o.a.createElement("div",{className:i()("Holder",a,{"Holder--inline":l,"Holder--title":d,"Holder--icon":c,"Holder--button":r,"Holder--avatar":t}),style:m})}),c=s;n.d(t,"a",function(){return c})},1532:function(e,t){(function(t){e.exports=t}).call(t,{})},1533:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(2),s=n.n(i),c=n(0),l=n.n(c),u=n(1512),p=n(1547),f=(n.n(p),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),d=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),f(t,[{key:"renderThumbnail",value:function(){var e=this.props.error;return l.a.createElement("div",{className:"VideoErrorCard-thumbnail"},l.a.createElement("div",{className:"VideoErrorCard-error"},e.message||"错误"))}},{key:"render",value:function(){var e=this.props,t=e.isLens,n=e.id;return l.a.createElement("div",{className:"VideoErrorCard"},l.a.createElement(u.b,Object.assign({},this.props,t&&{playerUrl:"https://www.zhihu.com/video/"+n},{thumbnail:this.renderThumbnail(),showPlayButton:!1,onBeforePlay:function(){return!1}})))}}]),t}(c.Component);d.propTypes={error:s.a.object.isRequired},t.a=d},1534:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var n=t.id,r=e.entities.topics,o=e.loading.local;return{topic:r[n],isLoading:Boolean(o["topic/"+n])}}function c(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f,d,h,m,b,v,y=n(2),w=n.n(y),g=n(0),E=n.n(g),O=n(6),C=n(3),_=n.n(C),k=n(76),j=n(23),S=n.n(j),P=n(4),T=n(559),N=n(572),A=n(7),x=n(292),R=n(74),I=n(10),M=n(110),L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),q=(d=f=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.load=function(){var e=r.props,t=e.dispatch,n=e.id;t(Object(M.r)(n))},r.track=function(){var e=r.props.topic;r.hoverCardElement&&e&&(A.default.setModule(r.hoverCardElement,{module:"TopicItem"},{card:{content:{type:"Topic",token:e.id,item_num:e.questionsCount,follower_num:e.followersCount}}}),A.default.trackCardShow(r.hoverCardElement))},r.handleFollow=r.context.authRequired(function(){var e=!r.props.topic.isFollowing;A.default.trackEvent(r.hoverCardElement,{action:e?"Follow":"UnFollow",element:"Button"});var t=r.props,n=t.dispatch,o=t.id;n(Object(M.D)(o))},I.M.follow),r.handleOpen=function(){r.load(),r.track()},i=n,a(r,i)}return i(t,e),D(t,[{key:"isTopicReady",value:function(){var e=this.props.topic||{},t=e.questionsCount,n=e.followersCount,r=e.bestAnswersCount;return!(void 0===t&&void 0===n&&void 0===r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,o=t.topic,a=t.id,i=t.isLoading,s=t.onRef,c=r(t,["toggler","topic","id","isLoading","onRef"]),l=o||{},u=l.name,p=l.introduction,f=l.questionsCount,d=l.followersCount,h=l.bestAnswersCount,m=l.avatarUrl,b=l.isFollowing,v=l.headerCard,y="//www.zhihu.com/topic/"+a,w=v&&v.avatarUrl||m;return E.a.createElement(N.b,L({toggler:n,preventCloseOnTarget:!0,isLoading:i,onOpen:this.handleOpen,size:"large"},c,{onRef:function(t){s&&"function"==typeof s&&s(t),e.hoverCardElement=t}}),E.a.createElement(N.a,{title:E.a.createElement("a",{target:"_blank",href:y},u),avatarUrl:w}),p&&E.a.createElement("div",null,E.a.createElement(x.a,{className:"HoverCard-description",html:p})),E.a.createElement("div",null,this.isTopicReady()&&E.a.createElement(T.a,null,E.a.createElement(T.a.Item,{tag:R.a,preset:"plain",a:!0,to:y+"/questions",name:"问题",value:f,target:"_blank"}),E.a.createElement(T.a.Item,{tag:R.a,preset:"plain",a:!0,to:y+"/top-answers",name:"精华",value:h,target:"_blank"}),E.a.createElement(T.a.Item,{tag:R.a,preset:"plain",a:!0,to:y+"/followers",name:"关注者",target:"_blank",value:d})),E.a.createElement("div",{className:"HoverCard-buttons"},o&&E.a.createElement(P.c,{preset:"primary",color:b?"grey":"blue",onClick:this.handleFollow},b?"已关注":"关注话题"))))}}]),t}(g.Component),f.contextTypes={authRequired:w.a.func},d),B=Object(O.connect)(s)(q),U=n(75),z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Q=(h=Object(O.connect)(function(e){return{ua:Object(U.k)(e)}}))((v=b=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),F(t,[{key:"render",value:function(){var e=this.props,t=e.ua,n=e.topic,r=n.name,o=n.avatarUrl,a=n.id,i=n.headerCard,s=e.avatar,l=e.avatarProps,u=e.noHoverCard,p=e.noLink,f=e.style,d=e.className,h=e.children,m=c(e,["ua","topic","avatar","avatarProps","noHoverCard","noLink","style","className","children"]),b=void 0===u?t.Mobile:u,v=i&&i.avatarUrl||o,y=void 0;y=s?E.a.createElement(k.a,z({className:"TopicLink-avatar",url:v,alt:r},l)):h||r,p||b||(y=E.a.createElement(B,{toggler:y,id:a}));var w=p?"span":"a";return E.a.createElement(w,z({style:f,className:_()("TopicLink",d),href:"//www.zhihu.com/topic/"+a,target:"_blank"},S()(m,["dispatch"])),y)}}]),t}(g.Component),b.propTypes={topic:w.a.object.isRequired,user:w.a.object,avatar:w.a.bool,avatarProps:w.a.object,noHoverCard:w.a.bool,noLink:w.a.bool,style:w.a.object,className:w.a.string,children:w.a.node},b.defaultProps={avatar:!1,noLink:!1},m=v))||m;t.a=Q},1535:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l});var r=n(114),o=n.n(r),a=n(307),i=n.n(a),s=function(e,t){var n=[];return o()(function(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];n.push(o),setTimeout(function(){n.length&&(t(n),n.length=0)},e)},function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return String(t)})}(550,function(e){return i()("/lastread/touch",{method:"POST",form:{items:JSON.stringify(e)}})}),c="read",l="touch";t.c=s},1536:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,c=n(0),l=n.n(c),u=n(4),p=n(9),f=n(289),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=(s=i=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),d(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onClick,r=e.label,o=e.onRef;return l.a.createElement(l.a.Fragment,null,l.a.createElement(f.c,{keyMap:{BOOKMARK:"s c"},handlers:{BOOKMARK:n}}),l.a.createElement(u.c,{onRef:o,className:t,preset:"plain",onClick:n,icon:p._69,label:r}))}}]),t}(l.a.Component),i.defaultProps={label:"收藏"},s),m=h;n.d(t,"a",function(){return m})},1537:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var z,F,Q,V,H,W,Y,K,G,X,$,J,Z,ee,te,ne,re,oe,ae,ie,se,ce,le,ue,pe=n(0),fe=n.n(pe),de=n(3),he=n.n(de),me=n(9),be=["online_roundtable","relevant","editor_recommendation","roundtable","special","weekly","daily","professional"],ve={online_roundtable:me._30,relevant:me._29,editor_recommendation:me._27,roundtable:me._30,special:me._31,weekly:me._32,daily:me._26,professional:me._28},ye={online_roundtable:"知乎圆桌",relevant:"亲自答",editor_recommendation:"编辑推荐",roundtable:"知乎圆桌精选",special:"专题收录",weekly:"知乎周刊收录",daily:"知乎日报收录",professional:"内容专业"},we={online_roundtable:"知乎圆桌",relevant:"亲自答",editor_recommendation:"编辑推荐",roundtable:"圆桌精选",special:"专题收录",weekly:"周刊收录",daily:"日报收录",professional:"内容专业"},ge={online_roundtable:"此回答被收录进圆桌精选",relevant:"此回答由问题相关方亲自撰写",professional:"已获得 {} 人认可"},Ee={online_roundtable:"前往圆桌",roundtable:"前往圆桌",special:"前往专题",weekly:"前往周刊",daily:"前往日报"},Oe={online_roundtable:"圆桌",relevant:"亲自答",editor_recommendation:"编辑推荐",roundtable:"圆桌",special:"专题收录",weekly:"周刊收录",daily:"日报收录"},Ce=n(293),_e=(n(1667),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),ke={alpha:1,group:"GYL02A"},je={brand_special:me.o},Se=_e({},ve,{COMMERCIAL_ICONS:je}),Pe=function(e){return"GBL07A"===(e||ke).group?"commercial":"positive"},Te=function(e){return"recognition"===e?"professional":e},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labelInfo;if(!t)return null;var n=t.type,r=t.text,o=t.foregroundColor,a=Pe(o),i=Se[Te(n)];return i?fe.a.createElement("span",{className:he()("Label-icon","Label-iconColor--"+a)},fe.a.createElement(i,{center:!0,className:"Label-iconImg"}),r):null},Ae=Object(Ce.a)(null)(Ne),xe=n(2),Re=n.n(xe),Ie=n(6),Me=(n(1668),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Le=(F=z=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),Me(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.commercial,r=e.positive,o=e.neutral,a=e.circle,i=e.paidContent;if(!(n||r||o||a||i))return null;var s=[i,n,r,o,a].filter(Boolean).slice(0,2);return fe.a.createElement("div",{className:he()("Labels",t)},s.map(function(e,t){return fe.a.createElement("div",{className:"Labels-item",key:t},e)}))}}]),t}(fe.a.Component),z.propTypes={className:Re.a.string,commercial:Re.a.node,positive:Re.a.node,neutral:Re.a.node,circle:Re.a.node,paidContent:Re.a.node},F),De=Le,qe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return[ye[e],t].filter(Boolean).join(" · ")},Be=function(e,t){switch(t){case"online_roundtable":return e.onlineRoundtable?{icon:ve[t],title:qe(t,e.onlineRoundtable.name),shortTitle:we[t],description:ge[t],link:"https://www.zhihu.com/roundtable/"+e.onlineRoundtable.urlToken,linkDescription:Ee[t],zaName:Oe[t]}:null;case"relevant":return e.relevantInfo&&e.relevantInfo.isRelevant?{icon:ve[t],title:qe(t),shortTitle:we[t],description:ge[t],zaName:Oe[t]}:null;case"professional":return e.recognitionInfo&&e.recognitionInfo.recognizedCount?{icon:ve[t],title:qe(t),shortTitle:we[t],description:ge[t].replace("{}",String(e.recognitionInfo.recognizedCount)),link:"javascript:;",members:e.recognitionInfo.latestRecognizers,zaName:Oe[t]}:null;default:var n=e.includedInfos?e.includedInfos.find(function(e){return e.type===t}):null;return n?{icon:ve[t],title:qe(t,n.title),shortTitle:we[t],description:ge[t],link:n.url,linkDescription:Ee[t],zaName:Oe[t]}:null}},Ue=Be,ze=n(1669),Fe=n.n(ze),Qe=n(593),Ve=n(7),He=(n(1674),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),We=(V=Q=function(e){function t(){var e,n,r,o;i(this,t);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={expanded:!1,width:null},r.bar=null,r.list=null,r.popover=null,r.trackListCardShow=Fe()(function(){Ve.default.setModule(r.list,{module:"Content",module_name:"正向列表卡片"}),Ve.default.trackCardShow(r.list,{id:3770})}),r.expand=function(){r.props.isMobile&&r.setState({width:r.bar.getBoundingClientRect().width}),r.setState({expanded:!0},r.trackListCardShow)},r.collapse=function(){r.setState({expanded:!1})},r.handleToggle=function(){r.state.expanded?r.collapse():r.expand()},r.handleDismiss=function(e){r.state.expanded&&(r.bar.contains(e.target)||r.popover.contains(e.target)||r.collapse())},o=n,s(r,o)}return c(t,e),He(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleDismiss),document.addEventListener("touchstart",this.handleDismiss)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleDismiss),document.removeEventListener("touchstart",this.handleDismiss)}},{key:"render",value:function(){var e=this,t=this.props,n=t.isMobile,r=t.data,o=t.isExpandable,a=t.renderBar,i=t.renderItems,s=o(r);return fe.a.createElement("div",{className:"PositiveLabelLayout"},fe.a.createElement("div",{ref:function(t){return e.bar=t},className:"PositiveLabelLayout-bar"},a(r,{expandable:s,onExpand:this.handleToggle})),s&&fe.a.createElement(Qe.a,{onRef:function(t){return e.popover=t},className:he()("PositiveLabelLayout-popover",{"is-mobile":n}),isOpen:this.state.expanded,target:this.bar,placement:n?"bottom":"bottom-right",arrowed:n,listenResize:!0},fe.a.createElement("div",{ref:function(t){return e.list=t},className:"PositiveLabelLayout-list",style:{width:this.state.width}},i(r))))}}]),t}(fe.a.Component),Q.propTypes={isMobile:Re.a.bool.isRequired,data:Re.a.object.isRequired,isExpandable:Re.a.func.isRequired,renderBar:Re.a.func.isRequired,renderItems:Re.a.func.isRequired},Q.defaultProps={isMobile:!1},V),Ye=We,Ke=n(551),Ge=n(76),Xe=(n(1675),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),$e=(W=H=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),Xe(t,[{key:"render",value:function(){var e=this.props.members;return fe.a.createElement("div",{className:"PositiveLabelMembers"},e.slice(0,3).reverse().map(function(e){return fe.a.createElement(Ge.a,{key:e.id,className:"PositiveLabelMembers-avatar",url:e.avatarUrl,size:20})}))}}]),t}(fe.a.Component),H.propTypes={members:Re.a.array},W),Je=$e,Ze=(n(1676),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),et=(K=Y=function(e){function t(){var e,n,r,o;f(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.root=null,r.handleLinkClick=function(e){var t=r.props,n=t.type,o=t.link,a=t.onLinkClick,i=t.zaName;Ve.default.trackEvent(r.root,{id:3771,name:"一个"},{button:{text:i}}),a&&a(e,o,n)},o=n,d(r,o)}return h(t,e),Ze(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expandable,r=t.zaName;Ve.default.setModule(this.root,{module:"Content",module_name:r}),Object(Ke.onViewedOnce)(this.root,function(){Ve.default.trackCardShow(e.root,{id:3769,name:n?"多个":"一个"})})}},{key:"renderDesktopContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.description,o=e.meta,a=e.link,i=e.linkDescription,s=e.members;return fe.a.createElement("div",{className:"PositiveLabelBar-content"},fe.a.createElement(t,{className:"PositiveLabelBar-icon"}),fe.a.createElement("div",{className:"PositiveLabelBar-main"},fe.a.createElement("span",{className:"PositiveLabelBar-title"},n),r&&fe.a.createElement("span",{className:"PositiveLabelBar-description"}," "+r)),(a||o||s&&Boolean(s.length))&&fe.a.createElement("div",{className:"PositiveLabelBar-side"},s&&Boolean(s.length)&&fe.a.createElement("div",{className:"PositiveLabelBar-members"},fe.a.createElement(Je,{members:s})),a&&!o&&fe.a.createElement("span",{className:"PositiveLabelBar-link"},i&&fe.a.createElement("span",{className:"PositiveLabelBar-linkDescription"},i),fe.a.createElement(me.i,{className:"PositiveLabelBar-linkIcon"})),o&&fe.a.createElement("span",{className:"PositiveLabelBar-meta"},o)))}},{key:"renderMobileContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.shortTitle,o=e.description,a=e.meta,i=e.link,s=e.expandable,c=e.members;return fe.a.createElement("div",{className:"PositiveLabelBar-content"},fe.a.createElement(t,{className:"PositiveLabelBar-icon"}),fe.a.createElement("div",{className:"PositiveLabelBar-main"},fe.a.createElement("span",{className:"PositiveLabelBar-title"},a?r||n:n),o&&!a&&fe.a.createElement("span",{className:"PositiveLabelBar-description"}," "+o),a&&fe.a.createElement("span",{className:"PositiveLabelBar-meta"}," "+a)),(i||s||c&&Boolean(c.length))&&fe.a.createElement("div",{className:"PositiveLabelBar-side"},c&&Boolean(c.length)&&fe.a.createElement("div",{className:"PositiveLabelBar-members"},fe.a.createElement(Je,{members:c})),i&&!s&&fe.a.createElement("span",{className:"PositiveLabelBar-link"},fe.a.createElement(me.i,{className:"PositiveLabelBar-linkIcon"})),s&&fe.a.createElement("span",{className:"PositiveLabelBar-expand"},"点击查看")))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isMobile,r=t.link,o=t.expandable,a=t.onExpand,i=n?this.renderMobileContent():this.renderDesktopContent();return r&&!o?fe.a.createElement("a",{ref:function(t){return e.root=t},className:"PositiveLabelBar PositiveLabelBar--link",href:r,onClick:this.handleLinkClick},i):o?fe.a.createElement("div",{ref:function(t){return e.root=t},className:"PositiveLabelBar PositiveLabelBar--expandable",onClick:a},i):fe.a.createElement("div",{ref:function(t){return e.root=t},className:"PositiveLabelBar"},i)}}]),t}(fe.a.Component),Y.propTypes={isMobile:Re.a.bool.isRequired,icon:Re.a.func.isRequired,title:Re.a.string.isRequired,shortTitle:Re.a.string,description:Re.a.string,meta:Re.a.string,link:Re.a.string,linkDescription:Re.a.string,onLinkClick:Re.a.func,expandable:Re.a.bool.isRequired,onExpand:Re.a.func,members:Re.a.array,zaName:Re.a.string},Y.defaultProps={isMobile:!1,expandable:!1},K),tt=et,nt=(n(1677),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),rt=(X=G=function(e){function t(){var e,n,r,o;m(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.root=null,r.handleLinkClick=function(e){var t=r.props,n=t.type,o=t.link,a=t.onLinkClick,i=t.zaName;Ve.default.trackEvent(r.root,{id:3771,name:"一个"},{button:{text:i}}),a&&a(e,o,n)},o=n,b(r,o)}return v(t,e),nt(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expandable,r=t.zaName;Ve.default.setModule(this.root,{module:"Content",module_name:r}),Object(Ke.onViewedOnce)(this.root,function(){Ve.default.trackCardShow(e.root,{id:3769,name:n?"多个":"一个"})})}},{key:"renderDesktopContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.description,o=e.linkDescription;return fe.a.createElement("div",{className:"PositiveLabelRoundtableBar-content"},fe.a.createElement(t,{className:"PositiveLabelRoundtableBar-icon"}),fe.a.createElement("div",{className:"PositiveLabelRoundtableBar-main"},fe.a.createElement("div",{className:"PositiveLabelRoundtableBar-header"},fe.a.createElement("span",{className:"PositiveLabelRoundtableBar-title"},n),fe.a.createElement("span",{className:"PositiveLabelRoundtableBar-badge"},"进行中")),fe.a.createElement("div",{className:"PositiveLabelRoundtableBar-description"},r)),fe.a.createElement("div",{className:"PositiveLabelRoundtableBar-side"},fe.a.createElement("span",{className:"PositiveLabelRoundtableBar-link"},fe.a.createElement("span",{className:"PositiveLabelRoundtableBar-linkDescriptio"},o),fe.a.createElement(me.i,{className:"PositiveLabelRoundtableBar-linkIcon"}))))}},{key:"renderMobileContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.description;return fe.a.createElement("div",{className:"PositiveLabelRoundtableBar-content"},fe.a.createElement(t,{className:"PositiveLabelRoundtableBar-icon"}),fe.a.createElement("div",{className:"PositiveLabelRoundtableBar-main"},fe.a.createElement("div",{className:"PositiveLabelRoundtableBar-header"},fe.a.createElement("span",{className:"PositiveLabelRoundtableBar-title"},n),fe.a.createElement("span",{className:"PositiveLabelRoundtableBar-badge"},"进行中")),fe.a.createElement("div",{className:"PositiveLabelRoundtableBar-description"},r)),fe.a.createElement("div",{className:"PositiveLabelRoundtableBar-side"},fe.a.createElement("span",{className:"PositiveLabelRoundtableBar-link"},fe.a.createElement(me.i,{className:"PositiveLabelRoundtableBar-linkIcon"}))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isMobile,r=t.link,o=n?this.renderMobileContent():this.renderDesktopContent();return fe.a.createElement("a",{ref:function(t){return e.root=t},className:"PositiveLabelRoundtableBar PositiveLabelRoundtableBar--link",href:r,onClick:this.handleLinkClick},o)}}]),t}(fe.a.Component),G.propTypes={isMobile:Re.a.bool.isRequired,icon:Re.a.func.isRequired,title:Re.a.string.isRequired,description:Re.a.string,meta:Re.a.string,link:Re.a.string,linkDescription:Re.a.string,onLinkClick:Re.a.func,expandable:Re.a.bool.isRequired,onExpand:Re.a.func,zaName:Re.a.string},G.defaultProps={isMobile:!1,expandable:!1},X),ot=rt,at=(n(1678),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),it=(J=$=function(e){function t(){var e,n,r,o;y(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=w(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.root=null,r.handleLinkClick=function(e){var t=r.props,n=t.type,o=t.link,a=t.onLinkClick,i=t.zaName;Ve.default.trackEvent(r.root,{id:3771,name:"多个"},{button:{text:i}}),a&&a(e,o,n)},o=n,w(r,o)}return g(t,e),at(t,[{key:"renderContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.description,o=e.link,a=e.members;return fe.a.createElement("div",{className:"PositiveLabelItem-content"},fe.a.createElement(t,{className:"PositiveLabelItem-icon"}),fe.a.createElement("div",{className:"PositiveLabelItem-main"},fe.a.createElement("span",{className:"PositiveLabelItem-title"},n),r&&fe.a.createElement("span",{className:"PositiveLabelItem-description"}," "+r)),(o||a&&Boolean(a.length))&&fe.a.createElement("div",{className:"PositiveLabelItem-side"},a&&Boolean(a.length)&&fe.a.createElement("div",{className:"PositiveLabelItem-members"},fe.a.createElement(Je,{members:a})),o&&fe.a.createElement("span",{className:"PositiveLabelItem-link"},fe.a.createElement(me.i,{className:"PositiveLabelItem-linkIcon"}))))}},{key:"render",value:function(){var e=this,t=this.props.link,n=this.renderContent();return t?fe.a.createElement("a",{ref:function(t){return e.root=t},className:"PositiveLabelItem PositiveLabelItem--link",href:t,onClick:this.handleLinkClick},n):fe.a.createElement("div",{ref:function(t){return e.root=t},className:"PositiveLabelItem"},n)}}]),t}(fe.a.Component),$.propTypes={isMobile:Re.a.bool.isRequired,icon:Re.a.func.isRequired,title:Re.a.string.isRequired,description:Re.a.string,link:Re.a.string,onLinkClick:Re.a.func,members:Re.a.array,zaName:Re.a.string},$.defaultProps={isMobile:!1},J),st=it,ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ut=function(e){var t=be.map(function(t){return{type:t,props:Ue(e,t)}}).filter(function(e){return e.props});return t.length?{items:t}:null},pt=(ee=Z=function(e){function t(){var e,n,r,o;E(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=O(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.isExpandable=function(e){return e.items.length>1&&"online_roundtable"!==e.items[0].type},r.renderBar=function(e,t){var n=t.expandable,o=t.onExpand,a=r.props,i=a.isMobile,s=a.onLinkClick,c=e.items[0],l=c.type,u=c.props,p=ct({isMobile:i,type:l},u,{meta:n?"relevant"===l?"及 "+(e.items.length-1)+" 项收录":i?"等 "+e.items.length+" 项收录":"共 "+e.items.length+" 项收录":null,onLinkClick:s,expandable:n,onExpand:o});return"online_roundtable"===l?fe.a.createElement(ot,p):fe.a.createElement(tt,p)},r.renderItems=function(e){var t=r.props,n=t.isMobile,o=t.onLinkClick;return e.items.map(function(e){var t=e.type,r=e.props;return fe.a.createElement(st,ct({key:t,isMobile:n,type:t},r,{onLinkClick:o}))})},o=n,O(r,o)}return C(t,e),lt(t,[{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.data,r=ut(n);return r?fe.a.createElement("div",{className:"PositiveLabel"},fe.a.createElement(Ye,{isMobile:t,data:r,isExpandable:this.isExpandable,renderBar:this.renderBar,renderItems:this.renderItems})):null}}]),t}(fe.a.Component),Z.propTypes={isMobile:Re.a.bool.isRequired,data:Re.a.object.isRequired,onLinkClick:Re.a.func},Z.defaultProps={isMobile:!1},ee),ft=pt,dt=ft,ht=(n(1679),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),mt=(ne=te=function(e){function t(){return _(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j(t,e),ht(t,[{key:"componentDidMount",value:function(){Ve.default.trackCardShow(this,{id:4027})}},{key:"renderDesktopContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.description;return fe.a.createElement("div",{className:"CircleLabelBar"},fe.a.createElement("div",{className:"CircleLabelBar-content"},fe.a.createElement(t,{className:"CircleLabelBar-icon"}),fe.a.createElement("div",{className:"CircleLabelBar-main"},fe.a.createElement("span",{className:"CircleLabelBar-title"},n),r&&fe.a.createElement("span",{className:"CircleLabelBar-description"}," "+r))))}},{key:"renderMobileContent",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.linkDescription,o=e.onLinkClick,a=Boolean(o);return fe.a.createElement("div",{className:"CircleLabelBar",onClick:function(e){return a&&o(e)}},fe.a.createElement("div",{className:"CircleLabelBar-content"},fe.a.createElement(t,{className:"CircleLabelBar-icon"}),fe.a.createElement("div",{className:"CircleLabelBar-main"},fe.a.createElement("span",{className:"CircleLabelBar-title"},n)),a&&fe.a.createElement("div",{className:"CircleLabelBar-side"},fe.a.createElement("span",{className:"CircleLabelBar-link"},r&&fe.a.createElement("span",{className:"CircleLabelBar-linkDescription"},r),fe.a.createElement(me.i,{className:"CircleLabelBar-linkIcon"})))))}},{key:"render",value:function(){var e=this.props.isMobile;return fe.a.createElement("div",null,e?this.renderMobileContent():this.renderDesktopContent())}}]),t}(fe.a.Component),te.propTypes={isMobile:Re.a.bool.isRequired,icon:Re.a.func.isRequired,title:Re.a.string.isRequired,link:Re.a.string,linkDescription:Re.a.string,onLinkClick:Re.a.func},te.defaultProps={isMobile:!1},ne),bt=mt,vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),wt=function(e){return e?{icon:me._54,title:"圈内说 · "+e.realmName+"认证用户撰写",hasDesktopLink:!1,hasMobileLink:!0,linkDescription:"查看 "+e.realmMemberCount+" 个回答",id:e.id}:null},gt=(oe=re=function(e){function t(){return S(this,t),P(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,e),yt(t,[{key:"render",value:function(){var e=this.props,t=e.isMobile,n=e.circleInfo,r=e.onLinkClick,o=wt(n);return o?fe.a.createElement("div",{className:"CircleLabel"},fe.a.createElement(bt,vt({isMobile:t},o,{onLinkClick:r}))):null}}]),t}(fe.a.Component),re.propTypes={isMobile:Re.a.bool.isRequired,circleInfo:Re.a.object.isRequired,onLinkClick:Re.a.func},re.defaultProps={isMobile:!1},oe),Et=gt,Ot=Et,Ct=n(303),_t=(n(1680),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),kt={PURCHASE_REQUIRED:"purchase_required",VIP_FREE:"vip_free",PURCHASED:"purchased",EBOOK:"ebook",LIVE:"live",REMIX_ALBUM:"remix_album",REMIX_INSTABOOK:"remix_instabook"},jt="PaidContentLabel-icon",St=(ie=ae=function(e){function t(){var e,n,r,o;N(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=A(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleClick=function(){var e=r.props.link;Ct.default.dispatch("base/openURL",{url:e})},o=n,A(r,o)}return x(t,e),_t(t,[{key:"renderMainContent",value:function(){var e=this.props,t=e.theme,n=e.paidInfo.type,r=e.isHybrid,o="dark"===t;switch(n){case kt.PURCHASE_REQUIRED:return fe.a.createElement(fe.a.Fragment,null,fe.a.createElement(me._41,{className:""+jt}),"包含付费内容");case kt.PURCHASED:return fe.a.createElement(fe.a.Fragment,null,fe.a.createElement(me._41,{className:""+jt}),"已购付费内容");case kt.VIP_FREE:return fe.a.createElement(fe.a.Fragment,null,o?fe.a.createElement(me._82,{className:""+jt}):fe.a.createElement(me._81,{className:""+jt}),fe.a.createElement("div",{className:"PaidContentLabel-vipLabel"},fe.a.createElement("div",{className:"PaidContentLabel-vipLabel-left"},"会员专享"),r&&fe.a.createElement("div",{className:"PaidContentLabel-vipLabel-right"},"你可以完整查看该付费内容")));case kt.EBOOK:return fe.a.createElement(fe.a.Fragment,null,fe.a.createElement(me.P,{className:""+jt}),"选自电子书");case kt.LIVE:return fe.a.createElement(fe.a.Fragment,null,fe.a.createElement(me._36,{className:""+jt}),"选自 Live");case kt.REMIX_ALBUM:return fe.a.createElement(fe.a.Fragment,null,fe.a.createElement(me._58,{className:""+jt}),"选自私家课");case kt.REMIX_INSTABOOK:return fe.a.createElement(fe.a.Fragment,null,fe.a.createElement(me._59,{className:""+jt}),"选自讲书");default:return null}}},{key:"render",value:function(){var e=this.props.paidInfo.type,t=e===kt.VIP_FREE;return fe.a.createElement("div",{className:he()("PaidContentLabel",{"PaidContentLabel-vipFree":t})},fe.a.createElement("div",{className:"PaidContentLabel-main"},this.renderMainContent()),fe.a.createElement(me._12,{onClick:this.handleClick,className:"PaidContentLabel-HelpOutline"}))}}]),t}(fe.a.Component),ae.propTypes={link:Re.a.string,paidInfo:Re.a.object.isRequired,onPaidContentLabelClick:Re.a.func,isHybrid:Re.a.bool},ae.defaultPorps={isHybrid:!1},ie),Pt=St,Tt=Pt,Nt=n(566),At=n(39),xt=n(291),Rt=n(1526),It=n(82),Mt=(n(1681),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Lt=(ce=se=function(e){function t(){return R(this,t),I(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return M(t,e),Mt(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.shown,r=e.data,o=e.paging;o=void 0===o?{}:o;var a=o.isEnd,i=void 0!==a&&a,s=o.isLoading,c=void 0!==s&&s,l=o.totals,u=e.loadAnswerRecognizerList,p=e.answerId;return fe.a.createElement(At.b,{size:"fullPage",onClose:t},n&&fe.a.createElement("div",{className:"RecognizerListModal"},fe.a.createElement("div",{className:"RecognizerListModal-header"},l||"-"," 人已认可",fe.a.createElement("div",{className:"RecognizerListModal-headerDescription"},"「专业认可」是社区内有着专业创作水平的用户的特权，被认可的答主将收到专业徽章以示鼓励")),fe.a.createElement(xt.b,{isDrained:i,isLoading:c,onLoad:function(){u(p)}},r.map(function(e){return fe.a.createElement(Rt.a,{className:"UserItem",key:e.id,user:e})}))))}}]),t}(fe.a.Component),se.propTypes={onClose:Re.a.func.isRequired,shown:Re.a.bool.isRequired,answerId:Re.a.number.isRequired},ce),Dt=Object(Ie.connect)(function(e,t){var n=Object(Nt.a)(e,t.answerId)||{},r=n.data,o=void 0===r?[]:r,a=n.paging,i=void 0===a?{}:a;return{data:o.map(function(t){return Object(It.c)(e,{urlToken:t})}),paging:i}},{loadAnswerRecognizerList:Nt.d})(Lt),qt=(n(1682),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Bt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ut=(le=Object(Ce.a)())(ue=function(e){function t(){var e,n,r,o;L(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=D(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={recognizerListModalShown:!1},r.isFetched=!1,r.loadLabels=function(){var e=r.props,t=e.loadLabel,n=e.item;if(n){var o=n.isLabeled,a=n.id,i=n.type;o&&!r.isFetched&&(t(i,a),r.isFetched=!0)}},r.handlePositiveLabelClick=function(e,t,n){"professional"===n&&r.toggleRecognizerModal()},r.toggleRecognizerModal=function(){r.setState({recognizerListModalShown:!r.state.recognizerListModalShown})},o=n,D(r,o)}return q(t,e),Bt(t,[{key:"componentDidMount",value:function(){this.loadLabels()}},{key:"componentDidUpdate",value:function(){this.loadLabels()}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.item,r=e.commercialLabels,o=e.neutralLabels,a=this.state.recognizerListModalShown,i=null,s=null,c=null,l={item:n,isMobile:!1};return n&&n.isLabeled&&(t?(i=fe.a.createElement(dt,qt({},l,{data:t,onLinkClick:this.handlePositiveLabelClick})),s=fe.a.createElement(Ot,qt({},l,{circleInfo:t.circleInfo})),c=t&&t.paidInfo&&fe.a.createElement(Tt,{paidInfo:t.paidInfo})):(i=fe.a.createElement("div",{className:"LabelContainer-placeholder"}),s=null)),fe.a.createElement(pe.Fragment,null,fe.a.createElement(De,{className:"LabelContainer",positive:i,neutral:o,commercial:r,circle:s,paidContent:c}),fe.a.createElement(Dt,{onClose:this.toggleRecognizerModal,answerId:n.id,shown:a}))}}]),t}(fe.a.Component))||ue;Ut.propTypes={data:Re.a.object,item:Re.a.object.isRequired,commercialLabels:Re.a.node,neutralLabels:Re.a.node};var zt=function(e,t){var n=t.item;return{data:Object(Nt.c)(e,n)}},Ft=Object(Ie.connect)(zt,{loadLabel:Nt.e})(Ut),Qt=n(23),Vt=n.n(Qt),Ht=n(79),Wt=n.n(Ht),Yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kt=["answer","article","post","item"],Gt=function(e){return e.itemType||Kt.find(function(t){return e[t]})},Xt=function(e){var t=function(t){var n=t.showLabelInfo,r=void 0===n||n,o=t.showLabels,a=void 0===o||o,i=U(t,["showLabelInfo","showLabels"]),s=Gt(i),c=i,l=[];return a||l.push("isLabeled"),r||(l.push("labelInfo"),l.push("hermesLabel")),s&&l.length>0&&(c=Yt({},c,B({},s,Vt()(i[s],l)))),fe.a.createElement(e,c)};return Wt()(Object(Ie.connect)(function(e,t){return{useNewLabels:Object(Nt.f)(e,t[Gt(t)])}})(t),e)},$t=Xt,Jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zt=Object(pe.createContext)({showLabelInfo:!0,showLabels:!0}),en=Zt.Provider,tn=Zt.Consumer,nn=function(e){return function(t){var n=fe.a.createElement(tn,null,function(n){return fe.a.createElement(e,Jt({},t,{showLabelProps:n}))});return Wt()(n,e)}};n.d(t,"b",function(){return Ae}),n.d(t,"a",function(){return Ft}),n.d(t,"d",function(){return $t}),n.d(t,"c",function(){return en}),n.d(t,!1,function(){return tn}),n.d(t,"e",function(){return nn})},1538:function(e,t,n){"use strict";e.exports=n(1539)},1539:function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);i(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(179),s=n(0);t.createSubscription=function(e){var t=e.getCurrentValue,n=e.subscribe;return function(e){function i(){var n,r,a;if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=o(this,e.call.apply(e,[this].concat(c))),r.state={source:r.props.source,value:null!=r.props.source?t(r.props.source):void 0},r._hasUnmounted=!1,r._unsubscribe=null,a=n,o(r,a)}return a(i,e),i.getDerivedStateFromProps=function(e,n){return e.source!==n.source?{source:e.source,value:null!=e.source?t(e.source):void 0}:null},i.prototype.componentDidMount=function(){this.subscribe()},i.prototype.componentDidUpdate=function(e,t){this.state.source!==t.source&&(this.unsubscribe(t),this.subscribe())},i.prototype.componentWillUnmount=function(){this.unsubscribe(this.state),this._hasUnmounted=!0},i.prototype.render=function(){return this.props.children(this.state.value)},i.prototype.subscribe=function(){var e=this,o=this.state.source;if(null!=o){var a=n(o,function(t){e._hasUnmounted||e.setState(function(e){return t===e.value||o!==e.source?null:{value:t}})});"function"!=typeof a&&r("266"),this._unsubscribe=a,a=t(this.props.source),a!==this.state.value&&this.setState({value:a})}},i.prototype.unsubscribe=function(){"function"==typeof this._unsubscribe&&this._unsubscribe(),this._unsubscribe=null},i}(s.Component)}},1540:function(e,t,n){"use strict";function r(e){return Array.from({length:e}).map(function(){return Math.floor(16*Math.random()).toString(16).toUpperCase()}).join("")}function o(e,t){return e.length>t?e.slice(0,t)+"...":e}function a(e){return"string"==typeof e&&e?Array.from(e).reduce(function(e,t){var n=t.codePointAt(0);return e+(c.default(n)?2:1)},0):0}function i(e,t){if("string"!=typeof e||"number"!=typeof t||a(e)<=t)return e;for(var n="",r=0;a(e.slice(0,r+1))<=t;)r++,n=e.slice(0,r);return n}var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=s(n(1541));t.getHexRandom=r,t.sliceString=o,t.stringWidth=a,t.cutStringWidth=i},1541:function(e,t,n){"use strict";var r=n(1542);e.exports=function(e){return!r(e)&&(e>=4352&&(e<=4447||9001===e||9002===e||11904<=e&&e<=12871&&12351!==e||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141))}},1542:function(e,t,n){"use strict";e.exports=Number.isNaN||function(e){return e!==e}},1543:function(e,t){},1544:function(e,t,n){"use strict";function r(e,t){return"string"==typeof e?a(e):"number"==typeof e?o(e,t):null}function o(e,t){if(!Number.isFinite(e))return null;var n=Math.abs(e),r=t&&t.thousandsSeparator||"",o=t&&t.unitSeparator||"",a=t&&void 0!==t.decimalPlaces?t.decimalPlaces:2,l=Boolean(t&&t.fixedDecimals),u=t&&t.unit||"";u&&c[u.toLowerCase()]||(u=n>=c.pb?"PB":n>=c.tb?"TB":n>=c.gb?"GB":n>=c.mb?"MB":n>=c.kb?"KB":"B");var p=e/c[u.toLowerCase()],f=p.toFixed(a);return l||(f=f.replace(s,"$1")),r&&(f=f.replace(i,r)),f+o+u}function a(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,n=l.exec(e),r="b";return n?(t=parseFloat(n[1]),r=n[4].toLowerCase()):(t=parseInt(e,10),r="b"),Math.floor(c[r]*t)}e.exports=r,e.exports.format=o,e.exports.parse=a;var i=/\B(?=(\d{3})+(?!\d))/g,s=/(?:\.0*|(\.[^0]+)0+)$/,c={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},l=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i},1545:function(e,t){},1546:function(e,t){},1547:function(e,t){},1548:function(e,t,n){var r;!function(o,a){"use strict";var i="model",s="name",c="type",l="vendor",u="version",p="mobile",f="tablet",d={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},h={rgx:function(){for(var e,t,n,r,o,a,i,s=0,c=arguments;s<c.length&&!a;){var l=c[s],u=c[s+1];if(void 0===e){e={};for(r in u)u.hasOwnProperty(r)&&(o=u[r],"object"==typeof o?e[o[0]]=void 0:e[o]=void 0)}for(t=n=0;t<l.length&&!a;)if(a=l[t++].exec(this.getUA()))for(r=0;r<u.length;r++)i=a[++n],o=u[r],"object"==typeof o&&o.length>0?2==o.length?"function"==typeof o[1]?e[o[0]]=o[1].call(this,i):e[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?e[o[0]]=i?i.replace(o[1],o[2]):void 0:e[o[0]]=i?o[1].call(this,i,o[2]):void 0:4==o.length&&(e[o[0]]=i?o[3].call(this,i.replace(o[1],o[2])):void 0):e[o]=i||void 0;s+=2}return e},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(d.has(t[n][r],e))return"?"===n?void 0:n}else if(d.has(t[n],e))return"?"===n?void 0:n;return e}},m={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},b={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,u],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],u],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],u],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[s,u],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],u],[/(edge)\/((\d+)?[\w\.]+)/i],[s,u],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],u],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],u],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],u],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[u,[s,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],u],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[u,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[s,u],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],u],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],u],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],u],[/;fbav\/([\w\.]+);/i],[u,[s,"Facebook"]],[/fxios\/([\w\.-]+)/i],[u,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[u,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[u,s],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[u,h.str,m.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[s,u],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],u],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",d.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",d.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",d.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[i,l,[c,f]],[/applecoremedia\/[\w\.]+ \((ipad)/],[i,[l,"Apple"],[c,f]],[/(apple\s{0,1}tv)/i],[[i,"Apple TV"],[l,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,i,[c,f]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[i,[l,"Amazon"],[c,f]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[i,h.str,m.device.amazon.model],[l,"Amazon"],[c,p]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[i,l,[c,p]],[/\((ip[honed|\s\w*]+);/i],[i,[l,"Apple"],[c,p]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,i,[c,p]],[/\(bb10;\s(\w+)/i],[i,[l,"BlackBerry"],[c,p]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[i,[l,"Asus"],[c,f]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[l,"Sony"],[i,"Xperia Tablet"],[c,f]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[l,"Sony"],[i,"Xperia Phone"],[c,p]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[l,i,[c,"console"]],[/android.+;\s(shield)\sbuild/i],[i,[l,"Nvidia"],[c,"console"]],[/(playstation\s[34portablevi]+)/i],[i,[l,"Sony"],[c,"console"]],[/(sprint\s(\w+))/i],[[l,h.str,m.device.sprint.vendor],[i,h.str,m.device.sprint.model],[c,p]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[l,i,[c,f]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[l,[i,/_/g," "],[c,p]],[/(nexus\s9)/i],[i,[l,"HTC"],[c,f]],[/(nexus\s6p)/i],[i,[l,"Huawei"],[c,p]],[/(microsoft);\s(lumia[\s\w]+)/i],[l,i,[c,p]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[i,[l,"Microsoft"],[c,"console"]],[/(kin\.[onetw]{3})/i],[[i,/\./g," "],[l,"Microsoft"],[c,p]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[i,[l,"Motorola"],[c,p]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[i,[l,"Motorola"],[c,f]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[l,d.trim],[i,d.trim],[c,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[i,/^/,"SmartTV"],[l,"Samsung"],[c,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[i,[l,"Sharp"],[c,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[l,"Samsung"],i,[c,f]],[/smart-tv.+(samsung)/i],[l,[c,"smarttv"],i],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[l,"Samsung"],i,[c,p]],[/sie-(\w+)*/i],[i,[l,"Siemens"],[c,p]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[l,"Nokia"],i,[c,p]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[i,[l,"Acer"],[c,f]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],i,[c,f]],[/(lg) netcast\.tv/i],[l,i,[c,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[i,[l,"LG"],[c,p]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[i,[l,"Lenovo"],[c,f]],[/linux;.+((jolla));/i],[l,i,[c,p]],[/((pebble))app\/[\d\.]+\s/i],[l,i,[c,"wearable"]],[/android.+;\s(glass)\s\d/i],[i,[l,"Google"],[c,"wearable"]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[i,/_/g," "],[l,"Xiaomi"],[c,p]],[/android.+a000(1)\s+build/i],[i,[l,"OnePlus"],[c,p]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[c,d.lowerize],l,i]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[u,[s,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,u],[/rv\:([\w\.]+).*(gecko)/i],[u,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,u],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[u,h.str,m.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[u,h.str,m.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],u],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[s,u],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[s,"Symbian"],u],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],u],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[s,u],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],u],[/(sunos)\s?([\w\.]+\d)*/i],[[s,"Solaris"],u],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[s,u],[/(haiku)\s(\w+)/i],[s,u],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[s,"iOS"],[u,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[u,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[s,u]]},v=function(e,t){if(!(this instanceof v))return new v(e,t).getResult();var n=e||(o&&o.navigator&&o.navigator.userAgent?o.navigator.userAgent:""),r=t?d.extend(b,t):b;return this.getBrowser=function(){var e=h.rgx.apply(this,r.browser);return e.major=d.major(e.version),e},this.getCPU=function(){return h.rgx.apply(this,r.cpu)},this.getDevice=function(){return h.rgx.apply(this,r.device)},this.getEngine=function(){return h.rgx.apply(this,r.engine)},this.getOS=function(){return h.rgx.apply(this,r.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};v.VERSION="0.7.12",v.BROWSER={NAME:s,MAJOR:"major",VERSION:u},v.CPU={ARCHITECTURE:"architecture"},v.DEVICE={MODEL:i,VENDOR:l,TYPE:c,CONSOLE:"console",MOBILE:p,SMARTTV:"smarttv",TABLET:f,WEARABLE:"wearable",EMBEDDED:"embedded"},v.ENGINE={NAME:s,VERSION:u},v.OS={NAME:s,VERSION:u},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=v),t.UAParser=v):n(1532)?void 0!==(r=function(){return v}.call(t,n,t,e))&&(e.exports=r):o.UAParser=v;var y=o.jQuery||o.Zepto;if(void 0!==y){var w=new v;y.ua=w.getResult(),y.ua.get=function(){return w.getUA()},y.ua.set=function(e){w.setUA(e);var t=w.getResult();for(var n in t)y.ua[n]=t[n]}}}("object"==typeof window?window:this)},1549:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,c,l=n(0),u=n.n(l),p=n(2),f=n.n(p),d=n(1515),h=n(289),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=(c=s=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),m(t,[{key:"render",value:function(){var e=this.props,t=e.containerClassName,n=e.selector,o=r(e,["containerClassName","selector"]);return u.a.createElement(h.b,{className:t,selector:n},u.a.createElement(d.b,o))}}]),t}(l.Component),s.propTypes={containerClassName:f.a.string,selector:f.a.string},s.defaultProps={selector:".List-item"},c),v=b;n.d(t,"a",function(){return v})},1550:function(e,t,n){"use strict";function r(e){var t=e.annotationDetail;if(!t||!t.showOuter)return null;var n=t.reason,r=t.reasonDescription;return a.a.createElement("span",{className:"AnnotationTag"},n===s?"该内容已被标记":r)}t.a=r;var o=n(0),a=n.n(o),i=n(1645),s=(n.n(i),32300)},1551:function(e,t,n){"use strict";function r(e){var t=e.badge;if(!e.isOrg)return!1;var n=Object(o.a)(t)||{};return Boolean(n.identityInfo)}t.a=r;var o=n(191)},1552:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),c=n(3),l=n.n(c),u=n(4),p=n(178),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.handleSubmit=function(){var e=a.props,t=e.onSubmit;(0,e.onCancel)(),t()},i=n,o(a,i)}return a(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.subtitle,r=e.shown,o=e.onCancel,a=e.className,i=e.isMobile,c=s.a.createElement(u.c,{key:"confirm",preset:"primary",color:"blue",onClick:this.handleSubmit},"确认"),f=s.a.createElement(u.c,{key:"cancel",onClick:o},"取消"),d=i?[f,c]:[c,f];return s.a.createElement(p.b,{wrapperClassName:"ConfirmModal-wrapper",className:l()("ConfirmModal",a),title:t,size:i?"small":"default",subtitle:n,onClose:o,closeButton:!1,buttonGroupOnly:!0},r&&s.a.createElement(p.a,{direction:i?"horizontal":"vertical"},d))}}]),t}(i.Component);t.a=d},1553:function(e,t,n){"use strict";function r(e){var t=e.className;return a.a.createElement("span",{className:s()("ActivityItem-StickyMark",t)},"置顶")}var o=n(0),a=n.n(o),i=n(3),s=n.n(i);n(1683);n.d(t,"a",function(){return r})},1554:function(e,t,n){function r(e,t){var n=a(e,t);return o(n)?n:void 0}var o=n(1951),a=n(1956);e.exports=r},1556:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o=["DIV","P","BLOCKQUOTE","PRE","CODE","OL","UL","H1","H2","H3","H4","H5","H6"],a=function(e){return o.includes(e.nodeName)||e.classList&&(e.classList.contains("video-box")||e.classList.contains("link-box")||e.classList.contains("origin_image")||e.classList.contains("content_image"))};t.a=function(e){if("undefined"==typeof window)return e;if(-1!==e.indexOf("<p>"))return e;var t=document,n=t.createElement("div");n.innerHTML=e;var o=[].concat(r(n.childNodes)),i=!0,s=!1,c=void 0;try{for(var l,u=o[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var p=l.value;if("BR"===p.nodeName&&p.previousSibling&&"BR"!==p.previousSibling.nodeName&&p.nextSibling&&"BR"===p.nextSibling.nodeName){for(var f=t.createElement("p"),d=p.previousSibling;d&&!a(d)&&("BR"!==d.nodeName||d.previousSibling&&"BR"!==d.previousSibling.nodeName&&!a(d.previousSibling));){var h=f.childNodes;h.length>0?f.insertBefore(d,h[0]):f.appendChild(d),d=p.previousSibling}f.childNodes.length>0&&(n.insertBefore(f,p),p.nextSibling.parentNode.removeChild(p.nextSibling),p.parentNode.removeChild(p))}}}catch(e){s=!0,c=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw c}}return n.innerHTML}},1557:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d,h,m,b,v,y,w=n(0),g=n.n(w),E=n(2),O=n.n(E),C=n(6),_=n(9),k=n(63),j=n(18),S=n(119),P=(n(1598),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),N={all:"开放评论",censor:"预审评论",nobody:"关闭评论"},A={all:"允许任何人评论",follower:"允许关注我的人评论",censor:"评论由我筛选后显示",followee:"允许我关注的人评论",paid:"付费用户可评论",nobody:"关闭评论"},x=(d=Object(C.connect)(function(e){return{isOrg:Object(j.f)(e)}}))((b=m=function(e){function t(){var e,n,i,s;o(this,t);for(var c=arguments.length,l=Array(c),u=0;u<c;u++)l[u]=arguments[u];return n=i=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.handleClickOption=function(e){var t=i.props,n=t.isOrg,r=t.target,o=t.onChange,a=t.current;if(e!==a){if(!r)return void o(e);var s=r.id;r.adminClosedComment?Object(S.b)("此内容无法更改评论权限",{theme:"red-ghost"}):n||"censor"!==e&&"censor"!==a?o(s,e):Object(S.a)("你确定要更改评论权限吗？",{content:"censor"===e?"更改后，已有评论不变，新评论需要经过筛选才会公开显示":"更改后，所有待筛选评论都会被公开显示出来"}).then(function(){return o(s,e)}).catch(function(){return null})}},i.getCommentPermission=function(){var e=i.props.target,t=e&&"answer"===e.type&&"paid"===e.answerType;return Object.keys(A).filter(function(n){if("paid"!==n||t)return"follower"!==n||e&&"article"===e.type}).reduce(function(e,t){return P({},e,r({},t,A[t]))},{})},s=n,a(i,s)}return i(t,e),T(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.isOrg,r=t.current,o=n?N:this.getCommentPermission();return g.a.createElement(w.Fragment,null,Object.keys(o).map(function(t){var n=t===r;return g.a.createElement(k.b,{key:t,onClick:function(){return e.handleClickOption(t)},className:"CommentPermission-item"},n&&g.a.createElement(_.w,{text:!0,center:!0}),o[t])}))}}]),t}(w.Component),m.propTypes={current:O.a.string.isRequired,target:O.a.object,onChange:O.a.func.isRequired},h=b))||h,R=x,I=n(39),M=n(1599),L=n.n(M),D=n(288),q=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),B=(v=Object(D.a)({view:{id:3038},trackCardShow:!0}))(y=function(e){function t(){return s(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),q(t,[{key:"render",value:function(){return g.a.createElement("img",{src:L.a,style:{maxWidth:"200px",marginTop:"30px"},alt:"delete-comment-success"})}}]),t}(w.Component))||y;B.showModal=function(e){I.b.open(function(t){var n=e||{},r=n.reportText;return setTimeout(t,2e3),g.a.createElement(I.b,{title:"举报成功",onClose:t},g.a.createElement("div",{style:{textAlign:"center"}},g.a.createElement("div",null,r||"你的举报我们已经收到，处理完成后将会私信告知处理结果。"),g.a.createElement(B,null)))})};var U=B,z=n(4),F=n(296),Q=(n(1600),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),V=function(e){function t(){var e,n,r,o;u(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={reportModalShown:!1},r.handleSubmit=function(){var e=r.props,t=e.id,n=e.onDelete,o=e.onClose;n(t),o()},r.handleReportModalOpen=function(){return r.setState({reportModalShown:!0})},r.handleReportModalClose=function(){r.setState({reportModalShown:!1}),r.handleSubmit()},r.handleSuccess=function(){r.handleSubmit()},o=n,p(r,o)}return f(t,e),Q(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.shown,r=e.onClose,o=e.reportAndDeleteExperiment;return g.a.createElement(w.Fragment,null,g.a.createElement(I.b,{title:"你确定要删除这条评论吗？",closeButton:null,maskClosable:!1,hotKeyClosable:!1,onClose:r,footer:o&&g.a.createElement("div",{className:"CommentDeleteAndReport-extra"},"评论若构成举报条件可以",g.a.createElement(z.c,{preset:"link",onClick:this.handleReportModalOpen},"删除并举报"))},n&&g.a.createElement(I.a,{direction:"horizontal"},g.a.createElement(z.c,{onClick:r},"取消"),g.a.createElement(z.c,{preset:"primary",color:"blue",onClick:this.handleSubmit},"确定"))),g.a.createElement(F.a,{title:"删除成功，请选择举报理由",subtitle:"",shown:this.state.reportModalShown,type:"comment",urlToken:t,zaEnabled:!0,onSuccess:this.handleSuccess,onClose:this.handleReportModalClose}))}}]),t}(w.Component),H=V;n.d(t,"c",function(){return R}),n.d(t,"a",function(){return H}),n.d(t,"b",function(){return U})},1558:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…";return e.length>t?e.slice(0,t)+n:e}function o(e,t){for(var n,r=0,o="",a=e.length,i=0;i<a&&(n=e[i],n.charCodeAt(0)<128?r+=1:r+=2,o+=n,!(r>=t-1));i+=1);return o}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=void 0,s=void 0;"undefined"==typeof document?(s=e.replace(/<.+?>/g,""),a=o(s,t)):(i=i||document.createElement("div"),i.textContent=e,s=i.textContent.replace(/<.+?>/g,""),a=o(s,t));var c=!1;return a!==s&&(c=!0,a=a.slice(0,a.length-n.length),a+=n),r?{output:a,truncated:c}:a}t.a=r,t.b=a;var i=null},1559:function(e,t,n){"use strict";function r(e){var t=e.annotationDetail,n=e.className;if(!t)return null;var r=t.detail,o=t.member,i=t.reasonDescription,s=t.type,c=o?o.name+"：":"";return a.a.createElement("section",{className:l()("Annotation-mark",n)},a.a.createElement("header",{className:"Annotation-header"},"strong"===s&&a.a.createElement(u.e,{size:16,center:!0,text:!0,className:"Annotation-alert"}),a.a.createElement("h1",{className:"Annotation-markTitle"},i||"该内容已被标记")),(r||c)&&a.a.createElement(p.a,{className:"Annotation-markSummary",html:""+c+(r||"未填写原因")}))}t.a=r;var o=n(0),a=n.n(o),i=n(2),s=n.n(i),c=n(3),l=n.n(c),u=n(9),p=n(571),f=n(1644);n.n(f);r.propTypes={annotationDetail:s.a.shape({reason:s.a.number.isRequired,reasonDescription:s.a.string,type:s.a.oneOf(["strong","weak"]).isRequired,detail:s.a.string,member:s.a.shape({name:s.a.string.isRequired}),showOuter:s.a.bool}).isRequired}},1561:function(e,t){},1562:function(e,t){},1563:function(e,t){},1564:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function R(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function I(e){var t=e.className,n=e.commercial;if(!(n&&n.tail&&n.tail.url&&n.tail.message))return null;var r=n.tail,o=r.url,a=r.message;return we.a.createElement("a",{className:Ee()("CommercialQuestionTail",t),href:o},a,we.a.createElement(ke._25,{className:"CommercialQuestionTail-Icon",center:!0,text:!0}))}function M(e){var t=e.markInfo,n=$e.y[t.markType];if(!n)return null;var r=t.roundtable&&"https://www.zhihu.com/roundtable/"+t.roundtable.urlToken;return r?we.a.createElement("a",{href:r},n):we.a.createElement("span",null,n)}function L(e){var t=e.introCard,n=t.description,r=t.contentName,o=t.authorDesc;return we.a.createElement("section",{className:"PaidIntroCard"},we.a.createElement("p",{className:"PaidIntroCard-description"},n),we.a.createElement("p",{className:"PaidIntroCard-contentName"},r),we.a.createElement(fn.a,{className:"PaidIntroCard-authorDesc",html:o}))}function D(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var z,F,Q,V,H,W,Y,K,G,X,$,J,Z,ee,te,ne,re,oe,ae,ie,se,ce,le,ue,pe,fe,de,he,me,be=n(2),ve=n.n(be),ye=n(0),we=n.n(ye),ge=n(3),Ee=n.n(ge),Oe=n(6),Ce=n(16),_e=n(564),ke=n(9),je=n(7),Se=n(4),Pe=n(28),Te=n(63),Ne=n(189),Ae=n(30),xe=n.n(Ae),Re=(n(1571),n(45)),Ie=n(178),Me=32305,Le=[{code:32309,description:"收到大量反对"},{code:32301,description:"可能包含争议观点"},{code:32302,description:"可能存在事实性错误",placeholder:"为了避免对您造成误导，请谨慎甄别"},{code:32303,description:"可能涉及金钱往来",placeholder:"为保障您的财产安全，请谨慎判断"},{code:32304,description:"可能包含剧透"},{code:32306,description:"可能包含具体的医疗建议",placeholder:"网络上的医疗建议仅供参考，如有需要请咨询专业人士或前往医疗机构就医"},{code:32307,description:"可能包含令人不适的图片或视频",placeholder:"为保障您的阅读体验，请谨慎浏览"},{code:32308,description:"已有回应"},{code:32300,description:"其他"}],De=(n(1647),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),qe=(F=z=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),De(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.value,r=e.onChange,o=e.className;return we.a.createElement("div",{className:Ee()("RadioButtons",o)},t.map(function(e,t){var o=e.value,a=e.text,i=e.placeholder;return we.a.createElement("label",{key:t,className:"RadioButtons-item"},we.a.createElement("span",{className:"RadioButtons-text"},a),we.a.createElement("input",{type:"radio",className:"RadioButtons-input",value:o,checked:n===o,onChange:function(){return r(o,i)}}))}))}}]),t}(ye.PureComponent),z.propTypes={options:ve.a.arrayOf(ve.a.shape({value:ve.a.string,text:ve.a.string,placeholder:ve.a.string})).isRequired,value:ve.a.string,onChange:ve.a.func,className:ve.a.string},F),Be=(n(1648),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Ue=function(){return n.e(1).then(n.bind(null,2126))},ze=Le.map(function(e){var t=e.code,n=e.description,r=e.placeholder;return{text:n,value:String(t),placeholder:r}}),Fe=function(e){var t=Le.find(function(t){return t.code===e});return t&&t.description},Qe=(V=Q=function(e){function t(){var e,n,r,o;i(this,t);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={selectedReasonCode:null,isReasonDescriptionEmpty:!0},r.handleReasonCodeChange=function(e,t){r.setState({selectedReasonCode:Number(e),selectedReasonPlaceholder:t||""}),r.input&&r.input.resetWithValue(t||"")},r.handleAddAnnotation=function(){var e=r.props,t=e.addAnnotation,n=e.type,o=e.urlToken,a=e.showNotification,i=e.onClose;t(n,o,r.state.selectedReasonCode,r.input.toHTML()).then(function(){i(),a&&a("标记内容成功")})},r.handleReasonDescriptionChange=function(e){r.setState({isReasonDescriptionEmpty:e.isEmpty})},o=n,s(r,o)}return c(t,e),Be(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.shown,o=t.className,a=this.state,i=a.selectedReasonCode,s=a.isReasonDescriptionEmpty,c=a.selectedReasonPlaceholder,l=Fe(i),u=32300===i;return we.a.createElement(Ie.b,{title:"标记内容",subtitle:"请选择标记原因",onClose:n,className:o},r&&we.a.createElement("div",null,we.a.createElement("div",{className:"AddAnnotationModal-body"},we.a.createElement(qe,{options:ze,onChange:this.handleReasonCodeChange,value:String(i)}),i&&we.a.createElement("div",null,we.a.createElement("div",{className:"AddAnnotationModal-description"},l,"（",u?"必填":"选填","）"),we.a.createElement(Re.a,{getComponent:Ue,multiline:!0,richtext:!0,allowMention:!0,large:!0,spread:!0,minRows:2,onRef:function(t){e.input=t},defaultValue:c,placeholder:"请填写原因",onChange:this.handleReasonDescriptionChange}))),we.a.createElement(Ie.a,{direction:"horizontal",className:"AddAnnotationModal-buttonGroup"},we.a.createElement(Se.c,{preset:"primary",color:"blue",onClick:this.handleAddAnnotation,size:"spread",disabled:!i||u&&s},"标记"))))}}]),t}(ye.PureComponent),Q.propTypes={addAnnotation:ve.a.func.isRequired,onClose:ve.a.func.isRequired,shown:ve.a.bool.isRequired,type:ve.a.oneOf([0,1,2]).isRequired,urlToken:ve.a.oneOfType([ve.a.number,ve.a.string]),showNotification:ve.a.func,className:ve.a.string},V),Ve=n(15),He=n(64),We=n.n(He),Ye=n(77),Ke=(n(1649),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Ge=(W=H=function(e){function t(){var e,n,r,o;l(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={isReasonDescriptionEmpty:!0},r.handleCancelAnnotation=function(){var e=r.props,t=e.cancelAnnotation,n=e.type,o=e.urlToken,a=e.showNotification,i=e.onClose;t(n,o,Me,r.input.value).then(function(){i(),a&&a("撤销标记成功")})},r.handleReasonDescriptionChange=function(e){return r.setState({isReasonDescriptionEmpty:e.isEmpty})},o=n,u(r,o)}return p(t,e),Ke(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.shown,o=t.className,a=this.state.isReasonDescriptionEmpty;return we.a.createElement(Ie.b,{title:"你确定要撤销这条内容的标记吗？",onClose:n,className:o},r&&we.a.createElement("div",{className:"CancelAnnotationModal"},we.a.createElement(Ye.a,{multiline:!0,large:!0,spread:!0,onRef:function(t){e.input=t},placeholder:"请填写撤销原因（必填）",onChange:this.handleReasonDescriptionChange,className:"CancelAnnotationModal-Input"}),we.a.createElement(Ie.a,{direction:"horizontal"},Object(Ve.isBrowser)()&&!We()(window.navigator.userAgent).Mobile&&we.a.createElement(Se.c,{onClick:n,size:"spread"},"取消"),we.a.createElement(Se.c,{preset:"primary",color:"blue",onClick:this.handleCancelAnnotation,size:"spread",className:"CancelAnnotationModal-CancelButton",disabled:a},"撤销标记"))))}}]),t}(ye.PureComponent),H.propTypes={cancelAnnotation:ve.a.func.isRequired,onClose:ve.a.func.isRequired,shown:ve.a.bool.isRequired,type:ve.a.oneOf([0,1,2]).isRequired,urlToken:ve.a.oneOfType([ve.a.number.isRequired,ve.a.string.isRequired]),showNotification:ve.a.func,className:ve.a.string},W),Xe=n(562),$e=n(10),Je=n(180),Ze=n(109),et=n(8),tt=n(33),nt=n(5),rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ot=rt({},Object(nt.a)("collaboration",["ADD_ANNOTATION","CANCEL_ANNOTATION"])),at=function(e){return e===$e.b?"answers":e===$e.d?"pins":e===$e.c?"articles":null},it=function(e,t,n,r){return{API:{types:ot.ADD_ANNOTATION,endpoint:"v3/collaboration/annotation",method:"POST",body:Object(tt.getFormData)(Object(et.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:r}))},UPDATE:{success:function(n){var r=at(e);return r?f({},r,f({},t,n)):null}}}},st=function(e,t,n,r){return{API:{types:ot.CANCEL_ANNOTATION,endpoint:"v3/collaboration/annotation_cancel",method:"POST",body:Object(tt.getFormData)(Object(et.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:r}))},UPDATE:{success:function(n){var r=at(e);return r?f({},r,f({},t,rt({},n,{annotationDetail:null}))):null}}}},ct=n(17),lt=n(312),ut=n(299),pt=n(75),ft=n(298),dt=n(18),ht=n(1551),mt=n(567),bt=n(1578),vt=n(1557),yt=n(288),wt=n(1588),gt=n(568),Et=n(1559),Ot=n(1650),Ct=n.n(Ot),_t=function(e){var t=e.answer,n=e.canCollapse,r=t.isNormal,o=void 0===r||r,a=t.collapsedBy,i=t.reviewInfo;i=void 0===i?{}:i;var s=i.isReviewing,c=i.tips,l=t.suggestEdit;l=void 0===l?{}:l;var u=l.title,p=l.unnormalDetails;p=void 0===p?{}:p;var f=p.reason,d=p.description,h=t.collapseReason;return s?we.a.createElement("div",{key:"negativeLabels",className:"AnswerItem-status"},c):o?"community"===a?we.a.createElement("div",{key:"negativeLabels",className:"AnswerItem-statusContent"},we.a.createElement("div",{className:"AnswerItem-statusReason"},"该回答已被折叠 ",we.a.createElement("span",null,we.a.createElement("a",{target:"_blank",href:"/question/20120168","data-tooltip":"点击了解更多",className:"AnswerItem-complaintHelp"},we.a.createElement(ke._12,{className:"AnswerItem-complaintIcon",width:16})))),h&&we.a.createElement("div",{className:"AnswerItem-statusDescription"},"折叠原因：",h)):"org"!==a||n?null:we.a.createElement("div",{key:"negativeLabels",className:"AnswerItem-status"},"回答被提问机构移至隐藏区（",we.a.createElement("a",{href:"/org-intro#org-question",target:"_blank"},"为什么？"),"）"):we.a.createElement("div",{key:"negativeLabels",className:"AnswerItem-statusContent"},we.a.createElement("div",{className:"AnswerItem-statusReason"},d,"：",f),we.a.createElement("div",{className:"AnswerItem-statusDescription"},"作者修改内容通过后，回答会重新显示恢复正常 ",we.a.createElement("a",{target:"_blank",href:"/question/24752645",className:"AnswerItem-statusLink"},u)))},kt=function(e){var t=e.answer,n=e.canCollapse,r=t.collapsedBy,o=t.relevantInfo;o=void 0===o?{}:o;var a=o.relevantType;return Object(Je.j)(t)||Object(Je.k)(t)||"org"===r&&!n?we.a.createElement("div",{className:"AnswerItem-meta",key:"commercial"},"brand_special"===a&&we.a.createElement("div",{className:"AnswerItem-commercialBadge AnswerItem-commercialBadge-brand"},we.a.createElement(ke.o,{size:16}),we.a.createElement("b",null,"品牌特邀："),"本文由品牌邀请撰写"),"brand_best"===a&&we.a.createElement("span",{className:"AnswerItem-sticky","data-tooltip":"本回答由品牌设为精选","data-tooltip-position":"bottom"},"品牌精选")):null},jt=function(e){var t=e.answer,n=t.annotationDetail,r=t.reviewInfo;r=void 0===r?{}:r;var o=r.isReviewing,a=t.isNormal,i=void 0===a||a,s=t.collapsedBy;return!o&&i&&"community"!==s&&n?we.a.createElement(Et.a,{key:"neutral",annotationDetail:n}):null},St=function(e){var t=e.answer;return Object(Je.k)(t)?we.a.createElement("div",{className:"AnswerItem-commercialBadge",key:"positive"},we.a.createElement(Ct.a,{style:{marginRight:"6px",verticalAlign:"text-bottom"},size:16}),we.a.createElement("b",null,"亲自答："),"此回答由问题相关方亲自撰写"):null},Pt=n(1536),Tt=n(1632),Nt=n(1550),At=n(1506),xt=n(1511),Rt=n(1589),It=n(1516),Mt=n(1517),Lt=n(296),Dt=n(1633),qt=n(555),Bt=n(1566),Ut=n(1519),zt=n(1580),Ft=(n(1660),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Qt=(K=Y=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),Ft(t,[{key:"render",value:function(){var e=this.props.activateReward;return we.a.createElement("div",{className:"Reward"},we.a.createElement("button",{className:"Reward-activateBtn",onClick:e},"开启赞赏"),we.a.createElement("div",{className:"Reward-activateHint"},"赞赏开启后，读者将可以付费支持你的创作。"))}}]),t}(ye.Component),Y.propTypes={activateReward:ve.a.func},K),Vt=(n(1661),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Ht=(X=G=function(e){function t(){return b(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),Vt(t,[{key:"render",value:function(){var e=this.props,t=e.tagline,n=e.activateReward,r=e.totalMoney,o=e.showRewarders;return we.a.createElement("div",null,we.a.createElement("div",{className:"Reward-tagline"},t||$e.i,we.a.createElement("a",{className:"Reward-editButton",onClick:n},we.a.createElement(Pe.a,{left:!0,name:"modify"}),we.a.createElement("span",null,"编辑"))),Boolean(r)&&we.a.createElement("div",{className:"Reward-money"},we.a.createElement("span",{onClick:o},"￥ ",r.toFixed(2))))}}]),t}(ye.Component),G.propTypes={activateReward:ve.a.func,tagline:ve.a.string,totalMoney:ve.a.number,showRewarders:ve.a.func},X),Wt=n(1565),Yt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Kt=(J=$=function(e){function t(){return w(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),Yt(t,[{key:"render",value:function(){var e=this.props,t=e.modalShown,n=e.onLoad,r=e.items,o=e.voteupCount,a=e.isRewardList,i=e.onClose,s=e.notice;return we.a.createElement(Ie.b,{size:"fullPage",onClose:i},t&&we.a.createElement(Wt.a,{items:r,text:"赞赏了",isFetching:!1,isDrained:!1,voteupCount:o,onLoad:n,isRewardList:a,notice:s,type:"rewardPeople"}))}}]),t}(ye.Component),$.propTypes={onLoad:ve.a.func,modalShown:ve.a.bool},J),Gt=n(287),Xt=(n(1662),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),$t=(Z=Object(yt.a)({module:"UserList",moduleName:"*** 人已赞赏"}))((ne=te=function(e){function t(){var e,n,r,o;O(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={hoverName:""},r.hoverUser=function(e){r.setState({hoverName:e.target.dataset.name})},o=n,C(r,o)}return _(t,e),Xt(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.users,r=t.handleListShown,o=t.rewardMemberCount,a=t.onUserClick,i=this.state.hoverName,s=n.slice(0,5);return we.a.createElement("div",{className:"Reward-count"},we.a.createElement("p",{className:"Reward-User-text",onClick:r},Object(Gt.formatNumber)(o)+" 人已赞赏"),we.a.createElement("div",null,s.map(function(t,n){return we.a.createElement(Ce.Link,{key:n,to:"//www.zhihu.com/"+t.userType+"/"+t.urlToken,className:"Reward-User-img","data-hover-title":i,target:"_blank",onClick:a},we.a.createElement("img",{src:t.avatarUrl,className:"Reward-User-avatar","data-name":t.name,"data-index":n,onMouseOver:e.hoverUser,alt:"赞赏用户"}))}),o>6&&we.a.createElement("span",{className:"Reward-MoreUser",onClick:r},we.a.createElement("i",null),we.a.createElement("i",null),we.a.createElement("i",null))))}}]),t}(ye.Component),te.propTypes={users:ve.a.array,handleListShown:ve.a.func,rewardMemberCount:ve.a.number,onUserClick:ve.a.func},te.defaultProps={users:[]},ee=ne))||ee,Jt=$t,Zt=(n(1663),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),en=(oe=re=function(e){function t(){return k(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,e),Zt(t,[{key:"render",value:function(){var e=this.props,t=e.rewardMemberCount,n=e.handleListShown,r=e.isAuthor,o=e.users,a=e.onUserClick;return t?we.a.createElement(Jt,{users:o,onUserClick:a,handleListShown:n,rewardMemberCount:t}):we.a.createElement("div",{className:"Reward-countZero"},r?"还没有人赞赏。":"还没有人赞赏，快来当第一个赞赏的人吧！")}}]),t}(ye.Component),re.propTypes={rewardMemberCount:ve.a.number,handleListShown:ve.a.func,isAuthor:ve.a.bool,users:ve.a.array,onUserClick:ve.a.func},oe),tn=(n(1664),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),nn=(ie=ae=function(e){function t(){return P(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,e),tn(t,[{key:"render",value:function(){var e=this.props,t=e.tagline,n=e.onClick;return we.a.createElement("div",null,we.a.createElement("div",{className:"Reward-tagline"},t||$e.i),we.a.createElement("button",{className:"Reward-rewardBtn",onClick:n},"赞赏"))}}]),t}(ye.Component),ae.propTypes={onClick:ve.a.func,tagline:ve.a.string},ie),rn=(n(1665),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),on=function(){return n.e(0).then(n.bind(null,2735)).then(function(e){return e.TipjarDialog})},an=(se=Object(Oe.connect)(null,{updateAnswerReward:Je.B,updateArticleReward:ut.l,createArticleTipjar:ut.b,getRewardUserDetails:ut.i,getPagingArticleRewardUser:ut.f,getPagingArticleRewardUserDetails:ut.g,getArticleRewardUser:ut.e,updateEntitiesUsers:ut.m,getRewardUser:ut.h,createTipjar:ut.c,removeTradeNumber:ut.k,onRewardSuccess:ut.j,showNotification:ct.g}))((ue=le=function(e){function t(){var e,n,r,o;A(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=x(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={TipjarRender:!1,modalShown:!1,rewardModalShown:!1},r.onSubmitReward=function(e){xe.a.set("isRewardable",!0),r.updateReward(e),r.unactivateReward()},r.onPaySuccess=function(){var e=r.props,t=e.reward,n=e.currentUser,o=e.id,a=e.type,i=t[a][o].users,s=[n];Array.isArray(i)&&(i.push(n),s=i),r.props.onRewardSuccess(s,o,a),r.colseTijarDialog(),r.props.showNotification("你已赞赏成功！")},r.onLoad=function(e){"article"===r.props.type?"normal"===e?r.onLoadArticleRewardUser():r.onLoadArticleRewardUserDetails():r.onLoadRewardUser()},r.onLoadArticleRewardUser=function(){var e=r.props.id;r.props.getArticleRewardUser(e)},r.onLoadArticleRewardUserDetails=function(){var e=r.props,t=e.id;e.isAuthor?r.props.getPagingArticleRewardUserDetails(t):r.props.getPagingArticleRewardUser(t)},r.onLoadRewardUser=function(){var e=r.props,t=e.id;e.isAuthor?r.props.getRewardUserDetails(r.props.id):r.props.getRewardUser(t).then(function(e){var t=e.payload.data;if(t.length>0){var n={};t.forEach(function(e){n[e.urlToken]=e}),r.props.updateEntitiesUsers(n)}})},r.handleListShown=function(e){var t=r.props.onRewardUserMoreClick;t&&t(e),r.setState({modalShown:!0})},r.handleListHide=function(){r.setState({modalShown:!1})},r.updateReward=function(e){var t=r.props,n=t.type,o=t.id,a=t.rewardInfo.canOpenReward;if("article"===n){var i=!!a||void 0;r.props.updateArticleReward(o,e,i)}else r.props.updateAnswerReward(o,e)},r.activateReward=function(){r.setState({rewardModalShown:!0})},r.unactivateReward=function(){r.setState({rewardModalShown:!1})},r.showRewarders=function(){r.setState({modalShown:!0})},r.addReward=r.context.authRequired(function(e,t){var n=r.props,o=n.id;"article"===n.type?r.props.createArticleTipjar(o,e):r.props.createTipjar(o,e,t)},void 0,ct.b),r.handleRewardButtonClick=function(e){var t=r.props.onRewardButtonClick;t&&t(e),r.setState({TipjarRender:!0})},r.colseTijarDialog=function(){r.setState({TipjarRender:!1})},r.removeTradeNumber=function(){var e=r.props,t=e.id,n=e.type;r.props.removeTradeNumber(t,n)},o=n,x(r,o)}return R(t,e),rn(t,[{key:"componentDidMount",value:function(){var e=this.props.rewardInfo;e&&e.isRewardable&&this.onLoad("normal")}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentUser,r=t.isAuthor,o=t.isMobile,a=t.id,i=t.reward,s=t.author,c=t.type,l=t.ua,u=t.rewardInfo,p=u.canOpenReward,f=u.isRewardable,d=u.tagline,h=u.rewardTotalMoney,m=u.rewardMemberCount,b=t.onRewardUserClick;if(r&&n&&"organization"===n.userType)return null;var v=this.state,y=v.TipjarRender,w=v.modalShown,g=v.rewardModalShown,E=we.a.createElement(zt.a,{submitRewardText:function(t){return e.onSubmitReward(t)},onClose:this.unactivateReward,tagline:d,edit:!0});if(r&&p)return we.a.createElement("div",null,we.a.createElement(Qt,{activateReward:this.activateReward}),g&&E);if(f){var O=i&&i[c][a]||{},C=O.tradeNumber,_=O.users,k=O.notice,j=we.a.createElement(Kt,{modalShown:w,items:_,voteupCount:m,onLoad:this.onLoad,isRewardList:r,notice:k,onClose:this.handleListHide}),S=we.a.createElement(en,{rewardMemberCount:m,handleListShown:this.handleListShown,onUserClick:b,users:_,isAuthor:r});if(!r)return we.a.createElement("div",{className:"Reward"},we.a.createElement(nn,{tagline:d,onClick:this.handleRewardButtonClick}),S,g&&E,j,we.a.createElement(Re.a,{getComponent:on,author:s,tagline:d,isMobile:o,ua:l,addReward:this.addReward,colseTijarDialog:this.colseTijarDialog,tradeNumber:C,removeTradeNumber:this.removeTradeNumber,onPaySuccess:this.onPaySuccess,TipjarRender:y,type:c}));var P=(Number(h)||0)/100;return we.a.createElement("div",{className:"Reward"},we.a.createElement(Ht,{tagline:d,activateReward:this.activateReward,totalMoney:P,showRewarders:this.showRewarders}),g&&E,j,S)}return null}}]),t}(we.a.Component),le.propTypes={reward:ve.a.object,isAuthor:ve.a.bool,author:ve.a.object,id:ve.a.number,rewardInfo:ve.a.object,currentUser:ve.a.object,ua:ve.a.object,type:ve.a.string,isMobile:ve.a.bool,onRewardButtonClick:ve.a.func,onRewardUserClick:ve.a.func,onRewardUserMoreClick:ve.a.func},le.contextTypes={authRequired:ve.a.func},le.defaultProps={rewardInfo:{},type:"answer"},ce=ue))||ce,sn=n(1552),cn=(n(1666),I),ln=n(1537),un=n(1553),pn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=t.contentExpanded,r=t.unescapable,o=e.labelInfo,a=e.hermesLabel;return we.a.createElement(ye.Fragment,null,!n&&!r&&we.a.createElement(ln.b,{labelInfo:o||a}))},fn=n(1518),dn=(n(1684),L),hn=n(1635),mn=(n(1616),function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),bn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yn=function(e){return"plain"===e||"special-plain"===e},wn=yn,gn=function(e){return"special-plain"===e},En={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},On=function(e){var t=e.thumbnail,n=e.voteupCount,r=e.question.id,o=e.id,a=e.createdTime,i=e.updatedTime,s=e.commentCount;return{image:t,upvoteCount:n,url:"https://www.zhihu.com/question/"+r+"/answer/"+o,dateCreated:new Date(1e3*a).toISOString(),dateModified:new Date(1e3*i).toISOString(),commentCount:s}},Cn=(pe=Object(yt.a)(function(e){var t=e.answer,n=e.trackCardShow,r=void 0===n||n,o=e.zaInfos,a=void 0===o?{}:o;return vn({module:"AnswerItem",card:{has_image:Boolean(t.thumbnailExtraInfo&&"image"===t.thumbnailExtraInfo.type),has_video:Boolean(t.thumbnailExtraInfo&&"video"===t.thumbnailExtraInfo.type),content:{type:"Answer",token:t.id&&t.id.toString(),upvote_num:t.voteupCount,comment_num:t.commentCount,publish_timestamp:new Date(t.createTime).getTime(),parent_token:t.question&&t.question.id.toString(),author_member_hash_id:t.author&&t.author.id,video_id:t.thumbnailExtraInfo&&t.thumbnailExtraInfo.videoId}},content:{type:"Answer",token:t.id}},a.index&&{index:a.index},a.cardShow&&{view:{id:a.cardShow}},{trackCardShow:r})}),fe=Object(Oe.connect)(function(e,t){var n=e.entities,r=n.drafts,o=void 0===r?{}:r,a=n.questions,i=n.answers,s=e.question.draftStatus,c=e.reward,l=e.switches,u=e.video.shareVideoDetail,p=t.answer,f=t.relatedTo,d=i[p.id]?vn({},i[p.id]):p;a[d.question.id]&&(d.question=vn({},p.question,a[d.question.id]));var h=Object(dt.c)(e),m=["question","answer"].includes(f),b=Object(pt.e)(e)&&m,v=Object(pt.d)(e);return{draft:p&&o["question_"+p.question.id],draftStatus:s[p.question.id],answer:d,ua:Object(lt.i)(e),reward:c,switches:l,isHuman:b,edition:v,referer:Object(pt.g)(e),shouldOia:Object(pt.h)(e)&&m,shouldSpecialOia:Object(pt.i)(e),canOia:Object(pt.b)(e),isWechat:e.env.userAgent.Wechat,concernedUpvoters:Object(Je.d)(e,{id:p.id}),currentUser:h,shareVideoDetail:u,isBrandAnswer:Object(Je.i)(p),paidContent:Object(Je.u)(e,p.id),permission:Object(Ze.G)(e)}},{updateAnswerVote:Je.F,updateAnswerUnhelpful:Je.E,updateAnswerReshipmentSettings:Je.A,updateAnswerCommentPermission:Je.z,updateAnswerCollapsed:Je.y,updateAnswerStick:Je.C,deleteAnswer:Je.f,restoreAnswer:Je.v,updateAnswer:Je.x,loadAnswerForSettings:Je.q,showNotification:ct.g,addAnnotation:it,cancelAnnotation:st,addRewardTagline:ut.a,updateAnswerReward:Je.B,getVoteDownReason:Je.h,selectVoteDownReason:Je.w,loadAnswerConcernedVoters:Je.n,loadCurrentUser:dt.j,loadVideoDetails:ft.d,loadMarketAnswerPaidContent:Je.s}),pe(de=Object(Ce.withRouter)(de=fe(de=Object(ln.d)((me=he=function(e){function t(){var e,n,r,o;q(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=B(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={commentsShown:!1,commentsAutoFocus:!0,reportModalShown:!1,deleteModalShown:!1,collapseModalShown:!1,favlistsShown:!1,editing:!1,commentPattern:"fixed",addAnnotationModalShown:!1,cancelAnnotationModalShown:!1,guideShown:!1,shareVideoQuery:r.getShareVideoId(),shouldShowVideoDetails:!1,contentExpanded:r.props.expanded,hasFetchedLabels:!1},r.onCloseReward=function(){var e=r.props.answer.id;xe.a.set("isRewardable",!1),r.props.updateAnswerReward(e,"")},r.openModal=function(e,t){r.setState(vn({},t))},r.openDeleteModal=function(){setTimeout(function(){r.setState({deleteModalShown:!0})})},r.closeModal=function(){r.setState({commentsShown:!1});var e=r.props.onCloseComment;"function"==typeof e&&e()},r.closeDeleteModal=function(){r.setState({deleteModalShown:!1})},r.disableAuth=function(){var e=r.props,t=(e.edition,e.router);t=void 0===t?{}:t;var n=t.location;n=void 0===n?{}:n;n.pathname;return!1}(),r.loadAnswerConcernedVoters=function(){var e=r.props,t=e.concernedUpvoters,n=e.answer,o=e.loadAnswerConcernedVoters;!t&&r.context.currentUser&&o(n.id)},r.handleExpand=function(e){var t=r.props.onToggleExpand;e&&r.loadAnswerConcernedVoters(),t&&t(e),r.setState({contentExpanded:e})},r.handleVote=r.context.authRequired(function(e){var t=r.props,n=t.answer.id;(0,t.updateAnswerVote)(n,e)},$e.M.vote),r.handleUpdateUnhelpful=r.context.authRequired(function(){var e=r.props,t=e.answer,n=t.id,o=t.relationship.isNothelp,a=e.updateAnswerUnhelpful,i=!o;je.default.trackEvent(r.contentItem,{action:i?"NoHelp":"UnNoHelp",element:"Button"}),a(n,i)},$e.M.unhelpful),r.handleReshipmentSettings=function(e){var t=r.props,n=t.answer.id,o=t.updateAnswerReshipmentSettings,a=t.loadCurrentUser,i=t.currentUser;if("need_payment"===e){(void 0===i.caEnabled?a("ca_enabled"):Promise.resolve()).then(function(){r.props.currentUser.caEnabled?o(n,e):window.open("/copyright/invite")})}else o(n,e)},r.handleLoadAnswerForSettings=function(){var e=r.props,t=e.answer.id;(0,e.loadAnswerForSettings)(t)},r.handleDeleteAnswer=function(){var e=r.props,t=e.answer.id;(0,e.deleteAnswer)(t)},r.handlePositionStatusChange=function(e){r.setState({positionStatus:e})},r.handleCollapseModalShow=function(){r.setState({collapseModalShown:!0})},r.handleCollapseModalHide=function(){r.setState({collapseModalShown:!1})},r.handleUpdateAnswerCollapsed=function(){var e=r.props,t=e.answer,n=t.id,o=t.collapsedBy,a=e.updateAnswerCollapsed,i=e.showNotification;return"community"===o?i("该回答因违反社区规范已被管理员折叠，暂无法公开","red"):a(n)},r.handleUpdateAnswerStick=function(){var e=r.props,t=e.answer.id;return(0,e.updateAnswerStick)(t)},r.handleRestoreAnswer=function(){var e=r.props,t=e.answer,n=t.id,o=t.question;(0,e.restoreAnswer)(o.id,n)},r.handleStartEditAnswer=function(){var e=r.props,t=e.draftStatus,n=e.hasPublishingDraft;return t&&t.loading?void Ne.a.alert("草稿正在加载中……"):n?void Ne.a.alert("你有一份对该回答的修改正在发布中，请等待发布完成后再次修改。"):void r.setState({editing:!0},function(){r.answerForm.getWrappedInstance().focus()})},r.handleCancelEditAnswer=function(){r.setState({editing:!1});var e=r.props,t=e.onCloseEditing,n=e.onCloseComment;"function"==typeof n&&n(),"function"==typeof t&&t()},r.handleSubmitAnswer=function(e){var t=r.props,n=t.answer.id,o=t.updateAnswer;return r.handleCancelEditAnswer(),o(n,e).then(function(e){return je.default.trackEvent(r.contentItem,{action:"StatusReport"},{status:{result:"Success",event:{action:"Edit"}}}),e})},r.handleReportOpen=function(){var e=r.props.zaInfos.report;je.default.trackEvent(r.contentItem,vn({action:"Report",element:"Button",is_intent:!0},e&&{id:e})),r.context.authRequired(function(){return r.setState({reportModalShown:!0})},$e.M.report)()},r.handleReportHide=function(){r.setState({reportModalShown:!1})},r.handleLoadVoteDownReason=function(){var e=r.props,t=e.answer.question.id;(0,e.getVoteDownReason)(t)},r.handleSelectVoteDownReason=function(e){var t=r.props,n=t.answer.id,o=t.selectVoteDownReason,a=t.showNotification;o(n,e.reasonId).then(function(e){a(e.payload.message)})},r.handleSetShowVoteDownReason=function(e){xe.a.set($e.v,e?"TRUE":"FALSE")},r.handleFavlistsShown=function(e){var t=r.props,n=t.shouldOia,o=t.zaInfos.favlists;return je.default.trackEvent(r.favButtonRef,vn({action:"Collect",element:"Button",is_intent:!0},o&&{id:o})),n?void r.createOpenInAppHandler("collect_answer")(e):r.disableAuth?void r.handleToggleGuide():void r.context.authRequired(function(){return r.setState({favlistsShown:!0})},$e.M.favlists)()},r.handleFavlistHide=function(){r.setState({favlistsShown:!1})},r.handleLogMoreClick=function(){var e=r.props.zaInfos.options;je.default.trackEvent(r.contentItem,vn({action:"Click",element_name:"MoreAction"},e&&{id:e}))},r.handleShowAddAnnotationModal=function(){return r.setState({addAnnotationModalShown:!0})},r.handleCloseAddAnnotationModal=function(){return r.setState({addAnnotationModalShown:!1})},r.handleShowCancelAnnotationModal=function(){return r.setState({cancelAnnotationModalShown:!0})},r.handleCloseCancelAnnotationModal=function(){return r.setState({cancelAnnotationModalShown:!1})},r.handleToggleGuide=function(){r.setState({guideShown:!r.state.guideShown})},r.handleClickVideoMoreButton=function(){r.setState({shouldShowVideoDetails:!1})},r.startEditing=function(){var e=r.props,t=e.answer.relationship;t=void 0===t?{}:t;var n=t.isAuthor,o=e.editable;r.context.currentUser&&n&&o&&r.handleStartEditAnswer()},r.addRewardTagline=function(e){var t=r.props.answer.id;Object(ut.a)(e,t)},r.createOpenInAppHandler=function(e){var t=r.props,n=t.answer,o=n.type,a=n.id,i=t.edition,s=t.location.query,c=t.referer;return function(t){t.preventDefault(),Object(Xe.b)(t,{href:Object(mt.a)({type:o,id:a},{utm_content:e,edition:i,query:s,referer:c})})}},r.renderLabels=function(){var e=r.props,t=e.useNewLabels,n=e.answer,o=e.canCollapse,a=e.relatedTo,i=r.state.contentExpanded,s=_t({answer:n,canCollapse:o}),c=jt({answer:n}),l=kt({answer:n,canCollapse:o}),u=St({answer:n});if(t){if(s)return{labels:[s],editingLabels:[]};var p=[we.a.createElement(ln.a,{key:"labels",item:n,commercialLabels:l,neutralLabels:c})];return i||a?{labels:p,editingLabels:p}:{labels:[],editingLabels:p}}var f=[c,l,u];return{labels:[s].concat(f),editingLabels:f}},r.renderPrefix=function(){var e=r.props,t=e.answer,n=e.relatedTo,o=r.state.contentExpanded,a={contentExpanded:o,unescapable:Boolean(n)};return pn(t,a)},o=n,B(r,o)}return U(t,e),bn(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expanded,r=t.byComment,o=t.editing,a=t.loadVideoDetails,i=t.answer.id,s=t.loadMarketAnswerPaidContent,c=this.state.shareVideoQuery;c&&a(c).then(function(){e.setState({shouldShowVideoDetails:!0})}),n&&this.loadAnswerConcernedVoters(),r&&setTimeout(function(){return e.setState({commentsShown:Boolean(r)})}),o&&this.startEditing(),this.isPaidAnswer&&s(i)}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props.answer,r=n.reshipmentSettings,o=n.commentPermission,a=e.answer,i=a.reshipmentSettings,s=a.commentPermission,c=e.editing;!r&&i&&!o&&s&&setTimeout(function(){return t.settingsTogglerEl.click()}),c&&!this.props.editing&&this.startEditing()}},{key:"getShareVideoId",value:function(){this.props.location;return null}},{key:"renderReshipmentSettings",value:function(e){var t=this;return Object.keys(En).map(function(n){var r=Object(bt.a)(n,e);return we.a.createElement(Te.b,{key:n,onClick:function(){return t.handleReshipmentSettings(n)},className:Object(bt.b)(n,e)},r&&we.a.createElement(Pe.a,{className:"Button-icon",name:r}),En[n])})}},{key:"renderAnswerExtraInfo",value:function(){var e=this.props,t=e.answer,n=t.id,r=t.type,o=t.voteupCount,a=t.markInfos,i=e.actor,s=e.action,c=e.isHuman,l=e.concernedUpvoters,u=e.useNewLabels,p=a&&a.length>0,f=p&&!u;if(!f&&!o)return null;var d=i&&i.urlToken,h=f&&a.filter(function(e){return $e.y[e.markType]}).map(function(e,t){return we.a.createElement(ye.Fragment,{key:t},0!==t&&"、",we.a.createElement(M,{markInfo:e}))});return c&&!1||we.a.createElement("div",{className:"AnswerItem-extraInfo",key:"answerExtraInfo"},f&&h.length&&we.a.createElement(_e.CJKSpace,null,"收录于",h),f&&Boolean(o)&&" · ",we.a.createElement(Rt.a,{id:n,type:r,voteupCount:o,upvotedFollowees:(l||[]).filter(function(e){return d!==e.urlToken}),too:"voted"===s}))}},{key:"renderSettings",value:function(){var e=this,t=this.context.currentUser,n=this.props,r=n.answer,o=r.collapsedBy,a=r.relationship;a=void 0===a?{}:a;var i=a.isAuthor,s=r.reshipmentSettings,c=r.commentPermission,l=r.question.questionType,u=r.rewardInfo;u=void 0===u?{}:u;var p=u.isRewardable,f=void 0!==p&&p,d=r.relevantInfo,h=n.answer,m=n.canCollapse;return t&&i?s&&c?we.a.createElement(Te.c,{key:"settings",toggler:we.a.createElement(Se.c,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t},icon:ke._65,label:"设置"}),reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem"},this.renderReshipmentSettings(s),we.a.createElement(Te.a,null),we.a.createElement(vt.c,{target:h,onChange:this.props.updateAnswerCommentPermission,current:h.commentPermission}),we.a.createElement(Te.a,null),f&&we.a.createElement(Te.b,{onClick:this.onCloseReward},"关闭赞赏"),we.a.createElement(Te.b,{onClick:this.openDeleteModal},"删除"),"commercial"===l&&m&&"nobody"===o&&(!d||"brand_special"!==d.relevantType)&&[we.a.createElement(Te.a,{key:"MenuDivider"}),we.a.createElement(Te.b,{key:"MenuItem",onClick:this.handleUpdateAnswerCollapsed},"隐藏")]):we.a.createElement(Se.c,{key:"settings",preset:"plain",onClick:this.handleLoadAnswerForSettings,icon:ke._65,label:"设置"}):null}},{key:"renderReshipment",value:function(e,t){var n=this;return"need_payment"===t?we.a.createElement(Te.b,{onClick:function(){je.default.trackEvent(n.contentItem,{action:"Authorize",element:"Button",is_intent:!0})},tag:"a",href:"/copyright/apply?answer="+e,target:"_blank"},"申请授权"):"disallowed"===t?we.a.createElement(Te.b,{tag:"a",target:"_blank",href:"/terms#sec-licence-6"},"禁止转载"):null}},{key:"renderOptions",value:function(){var e=this;if(!this.context.currentUser)return null;var t=this.props,n=t.answer,r=t.canCollapse,o=t.renderExtraOptions,a=t.permission.canBrandAdminEdit,i=n.id,s=n.reshipmentSettings,c=n.relationship;c=void 0===c?{}:c;var l=c.isAuthor,u=c.isNothelp,p=n.collapsedBy,f=n.question.questionType,d=n.annotationAction,h=void 0===d?[]:d,m=n.annotationDetail,b={toggler:we.a.createElement(Se.c,{preset:"plain",className:"OptionsButton",icon:ke.I,"aria-label":"更多"}),reversed:!0,onOpen:this.handleLogMoreClick,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selfMenuItem"},v="commercial"===f,y="nobody"!==p;return l?null:we.a.createElement(Te.c,vn({},b,{key:"options"}),!1,r&&!v&&we.a.createElement(Te.b,{onClick:y?this.handleUpdateAnswerCollapsed:this.handleCollapseModalShow},y?"取消隐藏":"隐藏"),a&&v&&!y&&we.a.createElement(Te.b,{onClick:this.handleUpdateAnswerCollapsed},"隐藏"),h&&h.some(function(e){return $e.a.add===e})&&!m&&we.a.createElement(Te.b,{onClick:this.handleShowAddAnnotationModal},"标记内容"),h&&h.some(function(e){return $e.a.cancel===e})&&m&&we.a.createElement(Te.b,{onClick:this.handleShowCancelAnnotationModal},"撤销标记"),we.a.createElement(Te.b,{onClick:this.handleUpdateUnhelpful},u?"撤销没有帮助":"没有帮助"),we.a.createElement(Te.b,{onClick:this.handleReportOpen},"举报"),this.renderReshipment(i,s),o&&o({itemClassName:"AnswerItem-selfMenuItem",getContainer:function(){return e.contentItem}}))}},{key:"renderMeta",value:function(){var e=this.props.answer,t=On(e);return Object.keys(t).map(function(e){return we.a.createElement("meta",{key:e,itemProp:e,content:t[e]})})}},{key:"renderBrandQuestionPrizeTip",value:function(){var e=this.props.answer,t=e.id,n=e.question.prize;n=void 0===n?{}:n;var r=n.winnersAnswerTokens,o=n.prizes;if(!n.status)return null;var a=["一","二","三"],i=null;return o&&r&&r.forEach(function(e,n){e.includes(t)&&null===i&&(i=o&&o[1]&&o[1].name?"得"+a[n]+"等奖":"奖")}),i&&we.a.createElement("div",{className:"AnswerItem-brandQuestionPrizeTip"},"该回答在有奖问答中获",i)}},{key:"renderBrandEntityTrack",value:function(){var e=this.state.contentExpanded,t=this.props,n=t.answer,r=t.expanded,o=t.isBrandAnswer,a=n.question;return(r||e)&&(a&&"commercial"===a.questionType||o)?we.a.createElement(Tt.a,{type:n.type,id:n.id}):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.answer,r=t.reward,o=t.answer,a=o.id,i=o.isNormal,s=void 0===i||i,c=o.isDelete,l=o.question,u=o.rewardInfo,p=o.question,f=p.title,d=p.id,h=p.questionType,m=p.isMuted,b=p.voteDownReason,v=p.commercial,y=o.author,w=o.excerpt,g=o.content,E=o.editableContent,O=o.voteupCount,C=o.commentCount,_=o.adminClosedComment,k=o.relationship;k=void 0===k?{}:k;var j=k.voting,S=k.isAuthor,P=k.isRecognized,T=o.collapsedBy,N=o.isSticky,A=o.createdTime,x=o.updatedTime,R=o.thumbnail,I=o.thumbnailExtraInfo,M=o.reviewInfo;M=void 0===M?{}:M;var L=M.isReviewing,q=M.editType,B=o.relevantInfo;B=void 0===B?{}:B;var U=B.relevantType,z=o.annotationDetail,F=o.paidInfo,Q=void 0===F?{}:F,V=t.relatedTo,H=t.editable,W=t.byComment,Y=t.draft,K=t.expanded,G=t.lastreadTouchable,X=t.preset,$=t.canCollapse,J=t.canStick,Z=t.itemProp,ee=void 0===Z?"answer":Z,te=t.addAnnotation,ne=t.cancelAnnotation,re=t.showNotification,oe=t.dataZaIndex,ae=t.blockReading,ie=(t.edition,t.switches),se=(t.isWechat,t.lessExcerpt),ce=(t.isHuman,t.ua),le=t.shouldSpecialOia,ue=t.shareVideoDetail,pe=t.shouldOia,fe=t.formatContent,de=t.zaInfos,he=de.expand,me=de.title,be=de.voteUp,ve=de.thank,ye=de.voteDown,ge=de.toggleComment,Oe=de.share,_e=de.getCommentAction,je=t.handleToggleSticky,Te=t.renderActionButtons,Ne=t.paidContent,Ae=void 0===Ne?{}:Ne,xe=t.permission.canBrandAdminEdit,Re="function"==typeof je,Ie=this.context.currentUser,Me="/question/"+d+"/answer/"+a,Le=this.state,De=Le.reportModalShown,qe=Le.deleteModalShown,Be=Le.collapseModalShown,Ue=Le.favlistsShown,ze=Le.editing,Fe=Le.commentsShown,Ve=Le.commentsAutoFocus,He=Le.commentPattern,We=Le.addAnnotationModalShown,Ye=Le.cancelAnnotationModalShown,Ke=Le.positionStatus,Xe=Le.shareVideoQuery,Je=Le.shouldShowVideoDetails,Ze=Le.contentExpanded,et=Xe&&Je?{title:ue.title,thumbnail:ue.coverUrl,isLens:!0,id:Xe,isPlayable:!0,url:"https://www.zhihu.com/video/"+Xe}:null;if(c)return we.a.createElement("div",{className:"AnswerItem-deleted"},"你已经删除了该问题的回答，如果需要修改，请先  ",we.a.createElement("a",{onClick:this.handleRestoreAnswer},"撤销删除"));var tt=!(L&&"create"===q),nt="commercial"===h,rt="nobody"!==T,ot=Q.isOfficial,at=this.isPaidAnswer&&ot,it=!gn(X)&&we.a.createElement(qt.a,{className:Ee()("AnswerItem-authorInfo",{"AnswerItem-authorInfo--related":V}),key:"authorInfo",preset:wn(X)?"plain":"default",author:y,relatedTo:V,noLink:at}),st=this.renderAnswerExtraInfo(),ct=this.renderLabels(),lt=ct.labels,ut=ct.editingLabels,pt=Ae.introCard;if(ze)return we.a.createElement("div",null,it,ut,st,we.a.createElement(Dt.a,{className:"AnswerItem-form",bordered:!0,isEdit:!0,ref:function(t){e.answerForm=t},question:l,defaultValue:E,onDeleteDraft:this.handleCancelEditAnswer,onCancel:this.handleCancelEditAnswer,onSubmit:this.handleSubmitAnswer,isRewardable:u.isRewardable,addRewardTagline:this.addRewardTagline}));var ft=yn(X)?[[it].concat(D(lt)),st]:[[it].concat(D(lt),[st]),null],dt=mn(ft,2),mt=dt[0],bt=dt[1],vt="mainEntityOfPage"===ee||"acceptedAnswer"===ee,yt=le&&!vt;return we.a.createElement(At.e,{onRef:function(t){return e.contentItem=t},className:"AnswerItem","data-za-index":oe,"data-zop":JSON.stringify({authorName:y.name,itemId:a,title:f,type:"answer"}),data:n,link:Me,meta:mt,title:!V&&we.a.createElement("div",{itemProp:"zhihu:question",itemType:"http://schema.org/Question",itemScope:!0},we.a.createElement("meta",{itemProp:"url",content:"https://www.zhihu.com/question/"+d}),we.a.createElement("meta",{itemProp:"name",content:f}),Re&&this.props.isSticky&&we.a.createElement(un.a,null),we.a.createElement(Ce.Link,vn({to:Me,target:"_blank","data-za-detail-view-element_name":"Title"},me&&{"data-za-detail-view-id":me}),f)),lastreadTouchable:G,name:a,itemProp:ee,itemType:"http://schema.org/Answer",itemScope:!0},this.isPaidAnswer&&Boolean(pt)&&we.a.createElement(dn,{introCard:pt}),this.renderMeta(),nt&&this.renderBrandQuestionPrizeTip(),this.renderBrandEntityTrack(),(s||S)&&we.a.createElement(Ut.b,vn({onToggleExpend:this.handleExpand},yt&&{expandText:"App 内查看"},!1,{cover:R,hasVideo:Boolean(I&&"video"===I.type),videoData:et,handleClickVideoMoreButton:this.handleClickVideoMoreButton,unescapable:Boolean(V),expanded:K,onPositionStatusChange:this.handlePositionStatusChange,before:bt,excerpt:fe?fe(w,n):w,html:fe?fe(g||w,n):g||w,prefix:this.renderPrefix(),after:we.a.createElement("div",null,we.a.createElement(cn,{className:"AnswerItem-CommercialQuestionTail",commercial:v}),!et&&we.a.createElement(Ut.a,vn({created:A,updated:x,href:Me},pe&&{onClick:this.createOpenInAppHandler("click_answer")})),Ie&&S&&H&&we.a.createElement("a",{className:"AnswerItem-editButton",onClick:this.handleStartEditAnswer},we.a.createElement(Pe.a,{left:!0,name:"modify"}),we.a.createElement("span",{className:"AnswerItem-editButtonText"},"修改",Y&&Y.editableContent&&"（有未发布的编辑草稿）")),Ie&&we.a.createElement(an,{reward:r,currentUser:Ie,rewardInfo:u,isAuthor:S,id:a,author:y,ua:ce})),data:n,onClick:yt?this.createOpenInAppHandler("expand_answer"):this.disableAuth&&ae&&this.handleToggleGuide},se?{limit:74}:{},{zaIds:{expand:he}}),tt&&xe&&nt&&rt&&we.a.createElement(Se.c,{className:Ee()("ContentItem-rightButton AnswerItem-mainAction AnswerItem-open",{"AnswerItem-mainAction--disabled":"community"===T}),onClick:this.handleUpdateAnswerCollapsed},"公开回答"),tt&&J&&!rt&&"brand_special"!==U&&we.a.createElement(Se.c,{className:"ContentItem-rightButton AnswerItem-mainAction AnswerItem-brandQuestionButton",onClick:this.handleUpdateAnswerStick},N?"取消精选":"设为精选"),Te({componentList:[{name:"vote",component:tt&&we.a.createElement(Bt.a,vn({key:"vote",disabled:nt&&m,count:O},pe&&{onClick:this.createOpenInAppHandler("vote_answer")},{onVote:this.handleVote,disableAuth:this.disableAuth,voting:j,isOwner:S,isRecognized:P,handleToggleGuide:this.handleToggleGuide,isShowVoteDownMenu:Ie&&ie.isAnswerOpposeReasonVisiable,positionStatus:Ke,voteDownReason:b,onLoadVoteDownReason:this.handleLoadVoteDownReason,onSelectVoteDownReason:this.handleSelectVoteDownReason,onSetVoteDownReason:this.handleSetShowVoteDownReason,zaIds:{voteUp:be,voteDown:ye}}))},{name:"comment",component:tt&&we.a.createElement(It.a,vn({onInstance:function(t){return e.commentButton=t},key:"comment",onClick:this.openModal},!1,{commentsShown:Fe,commentClosed:_,count:C,positionStatus:Ke,zaInfos:{toggleComment:ge,getCommentAction:_e}}))},{name:"share",component:tt&&!0&&we.a.createElement(xt.a,{key:"share",id:a,type:"answer",title:f,authorName:y&&y.name,href:Me,positionStatus:Ke,zaShareId:Oe})},{name:"favlist",component:tt&&(!Ie||!Ie.isOrg)&&we.a.createElement(Pt.a,{key:"favlist",onRef:function(t){return e.favButtonRef=t},onClick:this.handleFavlistsShown,label:"收藏"})},{name:"thank",component:tt&&!S&&we.a.createElement(hn.a,{key:"thank",zaInfo:ve,answer:n})},{name:"sticky",component:Re&&S&&Object(ht.a)(Ie)&&we.a.createElement(Se.c,{key:"sticky",preset:"plain",onClick:je,icon:this.props.isSticky?ke._72:ke._71,label:this.props.isSticky?"取消置顶":"置顶"})},{name:"options",component:tt&&this.renderOptions()},{name:"settings",component:this.renderSettings()},{name:"annotation",component:!Ze&&we.a.createElement(Nt.a,{key:"annotation",annotationDetail:z})}]})),we.a.createElement(Mt.a,{shown:Fe,parent:n,byComment:W,commentPattern:He,autoFocus:Ve,onClose:this.closeModal}),we.a.createElement(Lt.a,{type:"answer",urlToken:a,shown:De,onClose:this.handleReportHide,zaEnabled:!0}),we.a.createElement(Qe,{addAnnotation:te,onClose:this.handleCloseAddAnnotationModal,shown:We,type:$e.b,urlToken:a,showNotification:re}),we.a.createElement(Ge,{cancelAnnotation:ne,onClose:this.handleCloseCancelAnnotationModal,shown:Ye,type:$e.b,urlToken:a,showNotification:re}),Ie&&S&&we.a.createElement(sn.a,{title:"你确定要删除自己的答案吗？",subtitle:"答案内容不会被永久删除，你还可以撤消本次删除操作。",shown:qe,onCancel:this.closeDeleteModal,onSubmit:this.handleDeleteAnswer}),$&&we.a.createElement(sn.a,{title:"隐藏答案",subtitle:"隐藏后该回答将不展示也不流通，是否确定隐藏？",shown:Be,onCancel:this.handleCollapseModalHide,onSubmit:this.handleUpdateAnswerCollapsed}),we.a.createElement(gt.a,{id:a,type:"answer",shown:Ue,onClose:this.handleFavlistHide,zaEnabled:!0}),!1)}},{key:"isPaidAnswer",get:function(){return"paid"===this.props.answer.answerType}}]),t}(ye.PureComponent),he.contextTypes=vn({currentUser:ve.a.object,authRequired:ve.a.func},!1),he.propTypes={relatedTo:ve.a.oneOf(["question","answer"]),editable:ve.a.bool,preset:ve.a.oneOf(["special-plain","plain","primary"]),lessExcerpt:ve.a.bool,shareVideoDetail:ve.a.object,formatContent:ve.a.func,renderExtraOptions:ve.a.func,zaInfos:wt.a,onToggleExpand:ve.a.func,useNewLabels:ve.a.bool.isRequired,renderActionButtons:ve.a.func},he.defaultProps={editable:!1,preset:"primary",zaInfos:{},renderActionButtons:hn.b},de=me))||de)||de)||de)||de);n.d(t,"a",function(){return Cn})},1565:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,c=n(2),l=n.n(c),u=n(0),p=n.n(u),f=n(1515),d=n(287),h=(n.n(d),n(291)),m=n(1576),b=n(1526),v=n(1651),y=(n.n(v),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=(s=i=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),w(t,[{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,r=e.items,o=e.voteupCount,a=e.onLoad,i=e.text,s=e.isRewardList,c=e.notice,l=e.type,u=e.currentUser,v={getContainer:function(e){return e}};return p.a.createElement("div",{className:"VoterList"},p.a.createElement(m.a,{header:Object(d.formatNumber)(o)+" 人"+(i||"赞同了")}),s&&c&&p.a.createElement("div",{className:"VoterList-description"},p.a.createElement("p",null,c)),p.a.createElement(h.b,y({className:"VoterList-content",isLoading:t,isDrained:n,onLoad:a,placeholder:p.a.createElement(h.a,{className:"List-item",withAvatar:!0})},v),r&&r.map(function(e,t){return p.a.createElement(f.a,{key:t+"."+e.urlToken},p.a.createElement(b.a,{currentUser:u,user:e,isRewardList:s,meta:null,type:l}))})))}}]),t}(u.Component),i.propTypes={isFetching:l.a.bool.isRequired,isDrained:l.a.bool.isRequired,items:l.a.array.isRequired,voteupCount:l.a.number.isRequired,text:l.a.string.isRequired,onLoad:l.a.func.isRequired,isRewardList:l.a.bool,type:l.a.string,currentUser:l.a.object},s);t.a=g},1566:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u,p,f=n(2),d=n.n(f),h=n(0),m=n.n(h),b=n(3),v=n.n(b),y=n(4),w=n(9),g=n(7),E=n(287),O=n(30),C=n.n(O),_=n(39),k=n(289),j=n(28),S=n(80),P=(n(1615),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),T=(p=u=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={step:0},r.containerRef=m.a.createRef(),r.reasonButtonRefs=[],r.toggleStep=function(){r.setState({step:0===r.state.step?1:0},function(){r.popover.position()})},r.handleKeyDown=function(e){var t=Number(e.key);t&&r.reasonButtonRefs[t-1]&&r.reasonButtonRefs[t-1].focus()},r.handleNeverShowVoteDownReason=function(){r.props.onSetVoteDownReason(!1),r.popover.close()},r.handleSelectReason=function(e){r.props.onSelectVoteDownReason(e),r.popover.close()},i=n,a(r,i)}return i(t,e),P(t,[{key:"componentDidUpdate",value:function(){"absolute"===this.props.positionStatus&&this.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.reasonList,o=t.positionStatus,a=this.state.step,i=[].concat(r(n)).sort(function(e,t){return e.sort-t.sort});return m.a.createElement(S.a,{className:"VoteDownReasonMenu",targetClassName:"VoteDownReasonMenu-target",positionStatus:o,toggler:this.props.toggler,onOpen:function(){e.setState({step:0})},getContainer:function(){return document.querySelector(".ContentItem-actions")},onClick:this.props.onTogglerClick,ref:function(t){e.popover=t,e.props.popoverRef&&e.props.popoverRef(t)},placement:"top",arrowed:!0,preventCloseOnTarget:!0},m.a.createElement("div",{className:"VoteDownReasonMenu-container",onKeyDown:this.handleKeyDown,tabIndex:-1},m.a.createElement("div",{className:"VoteDownReasonMenu-header"},0===a&&"已反对，你觉得",1===a&&"不再显示该反馈功能？"),m.a.createElement("div",{className:"VoteDownReasonMenu-action"},0===a&&m.a.createElement(y.c,{preset:"plain",className:"VoteDownReasonMenu-ignoreButton preventCloseOnTarget",onClick:this.toggleStep},"不再显示"),0===a&&m.a.createElement("div",{className:"VoteDownReasonMenu-spliter"}),m.a.createElement(y.c,{preset:"plain",className:"VoteDownReasonMenu-closeButton",onClick:function(){e.popover.close()},"aria-label":"关闭",tabIndex:1},m.a.createElement(j.a,{className:"VoteDownReasonMenu-closeIcon",name:"remove",width:12,height:12,fill:"#a5b6cf"}))),0===a&&m.a.createElement("div",{className:"VoteDownReasonMenu-reasonList"},i.map(function(t,n){return m.a.createElement(y.c,{preset:"plain",className:"VoteDownReasonMenu-reason",key:t.reasonId,onClick:function(){e.handleSelectReason(t)},onRef:function(t){return e.reasonButtonRefs[n]=t}},t.name)})),1===a&&m.a.createElement("div",{className:"VoteDownReasonMenu-disableReason"},m.a.createElement("div",{className:"VoteDownReasonMenu-disableReasonHint"},"你可以在「设置」页面中的「屏蔽」开启。"),m.a.createElement("div",{className:"VoteDownReasonMenu-disableReasonButtonList"},m.a.createElement(y.c,{className:"preventCloseOnTarget",onClick:this.toggleStep},"返回"),m.a.createElement(y.c,{color:"blue",onClick:this.handleNeverShowVoteDownReason},"不再显示")))))}}]),t}(h.Component),u.defaultProps={reasonList:[]},p),N=T,A=n(10);n(1572);n.d(t,"a",function(){return D});var x,R,I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),L=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),D=(R=x=function(e){function t(){var e,n,r,o;s(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={recognizeInfo:{showRecognizeModal:!1,action:"",voteType:"",isRecognized:r.props.isRecognized}},r.voteUpButtonRef=m.a.createRef(),r.voteDownButtonRef=m.a.createRef(),r.shouldShowMenu=function(){var e=r.props,t=e.voting,n=e.voteDownReason,o=e.onLoadVoteDownReason;return!(!e.isShowVoteDownMenu||"FALSE"===C.a.get(A.v)||(-1===t?(r.popover.close(),1):!n&&(r.isPendingForVoteDownReason=!0,o(),1)))},r.onVote=r.context.authRequired(function(e){r.props.onVote(e)},A.M.vote),r.voteUp=function(e){var t=r.props.voting,n=1===t?["UnUpvote","neutral"]:["Upvote","up"],o=M(n,2),a=o[0],i=o[1];r.vote(e,a,i),r.voteUpButtonRef.current.focus()},r._voteDown=function(e){var t=r.props.voting,n=-1===t?["UnDownvote","neutral"]:["Downvote","down"],o=M(n,2),a=o[0],i=o[1];r.vote(e,a,i),r.voteDownButtonRef.current.focus()},r.voteDown=function(e){r.shouldShowMenu()&&r.popover.open(),r._voteDown(e)},r.vote=function(e,t,n){var o=r.props,a=o.disableAuth,i=o.handleToggleGuide,s=o.onClick,c=o.type,l=o.zaIds,u=l.voteUp,p=l.voteDown,f=t.includes("Upvote")?u:p;return"article"===c&&"down"===n&&g.default.trackEvent(r.voteDownButtonRef.current,{action:"Click",id:2315,name:"反对"}),g.default.trackEvent(t.includes("Upvote")?r.voteUpButtonRef.current:r.voteDownButtonRef.current,I({action:t,element:"Button"},f&&{id:f})),s?void s(e):a?void i():void r.onVoteWithRecognize(t,n)},r.onVoteWithRecognize=function(e,t){var n=r.props.voting;!r.state.recognizeInfo.isRecognized||1!==n||"UnUpvote"!==e&&"Downvote"!==e?r.onVote(t):r.setState({recognizeInfo:I({},r.state.recognizeInfo,{showRecognizeModal:!0,action:e,voteType:t})})},r.handleConfirmCancelRecognize=function(){r.onVote(r.state.recognizeInfo.voteType),r.setState({recognizeInfo:I({},r.state.recognizeInfo,{isRecognized:!1,showRecognizeModal:!1})})},r.handleCloseCancelRecognizeModal=function(){return r.setState({recognizeInfo:I({},r.state.recognizeInfo,{showRecognizeModal:!1})})},r.handleTogglerClick=function(e){r.shouldShowMenu()||e.preventDefault(),r._voteDown(e)},r.renderVoteUpButton=function(){var e=r.props,t=e.isOwner,n=e.count,o=e.voting,a=e.disabled,i=e.hideDesc,s=1===o?"已赞同":"赞同",c=[s,Object(E.niceNumber)(n)].join(" "),l=[!i&&s,0!==n&&Object(E.niceNumber)(n)].filter(Boolean).join(" ");return m.a.createElement(y.c,{className:v()("VoteButton VoteButton--up",{"is-active":1===o}),disabled:t||a,onClick:r.voteUp,"aria-label":c,onRef:r.voteUpButtonRef},m.a.createElement(w._78,{center:!0,size:10,className:"VoteButton-TriangleUp"}),l)},r.renderVoteDownButton=function(){var e=r.props,t=e.voting,n=e.disabled,o=-1===t?"已反对":"反对";return m.a.createElement(y.c,{className:v()("VoteButton VoteButton--down",{"is-active":-1===t},{"VoteButton--mobileDown":!1}),disabled:n,onClick:r._voteDown,"aria-label":o,onRef:r.voteDownButtonRef},m.a.createElement(w._77,{center:!0,size:10}))},o=n,c(r,o)}return l(t,e),L(t,[{key:"componentWillReceiveProps",value:function(e){e.voteDownReason&&this.isPendingForVoteDownReason&&(this.isPendingForVoteDownReason=!1,this.popover.open())}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOwner,r=t.positionStatus,o=t.isShowVoteDownMenu,a=t.voteDownReason,i=this.state.recognizeInfo,s=i.showRecognizeModal,c=i.action,l="UnUpvote"===c,u=o&&!0;return m.a.createElement("span",{ref:this.voteButtonRef},m.a.createElement(k.c,{keyMap:{VOTE_UP:"v",VOTE_DOWN:"d"},handlers:{VOTE_UP:this.voteUp,VOTE_DOWN:this.voteDown}}),this.renderVoteUpButton(),!n&&!u&&this.renderVoteDownButton(),!n&&u&&m.a.createElement(N,{reasonList:a,toggler:this.renderVoteDownButton(),popoverRef:function(t){return e.popover=t},positionStatus:r,onTogglerClick:this.handleTogglerClick,onSelectVoteDownReason:this.props.onSelectVoteDownReason,onSetVoteDownReason:this.props.onSetVoteDownReason}),m.a.createElement(_.b,{title:"确定"+(l?"取消赞同":"选择反对"),onClose:this.handleCloseCancelRecognizeModal},s&&m.a.createElement("div",null,m.a.createElement("div",null,l?"取消赞同":"选择反对","时，也会取消对该回答的专业认可，并且当月的认可次数不会返还，是否仍要取消?"),m.a.createElement(_.a,{direction:"horizontal"},m.a.createElement(y.c,{onClick:this.handleCloseCancelRecognizeModal},l?"暂不取消":"暂不选择"),m.a.createElement(y.c,{preset:"primary",color:"blue",onClick:this.handleConfirmCancelRecognize},l?"取消赞同":"选择反对")))))}}]),t}(h.Component),x.contextTypes={authRequired:d.a.func},x.propTypes={voting:d.a.oneOf([-1,0,1]).isRequired,disabled:d.a.bool,type:d.a.string,hideDesc:d.a.bool,zaIds:d.a.shape({voteUp:d.a.number,voteDown:d.a.number}),isRecognized:d.a.bool},x.defaultProps={voting:0,disabled:!1,type:"",hideDesc:!1,zaIds:{}},R)},1569:function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},1571:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l,u,p=n(2),f=n.n(p),d=n(0),h=n.n(d),m=n(64),b=n.n(m),v=n(20),y=n(7),w=n(587),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O=function(e,t,n,r){return e?{card:{content:e}}:E({},t&&{card:t},n&&{list:n},r&&{attached_info_bytes:r})},C=(u=l=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.handleViewed=function(){var e=a.props.extra;setTimeout(function(){y.default.trackCardShow(a,{},e)})},a.trackEvent=function(e,t,n){y.default.trackEvent(e,t,E({},a.props.extra,n))},i=n,o(a,i)}return a(t,e),g(t,[{key:"componentDidMount",value:function(){this.setModule()}},{key:"componentDidUpdate",value:function(){this.setModule()}},{key:"setModule",value:function(){var e=this.props,t=e.module,n=e.index,r=e.isAd,o=e.moduleName,a=e.content,i=e.list,s=e.card,c=e.attachedInfoBytes;if(t){var l=Object(v.findDOMNode)(this);l&&y.default.setModule(l,{module:t,index:n,is_ad:r,module_name:o},O(a,s,i,c))}}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.trackCardShow,r=e.children,o="string"==typeof r.type?r:Object(d.cloneElement)(r,{trackEvent:this.trackEvent});return n?h.a.createElement(w.a,{id:t,onViewed:this.handleViewed},o):o}}]),t}(d.Component),l.propTypes={id:f.a.string,module:f.a.string,index:f.a.string,isAd:f.a.bool,content:f.a.object,extra:f.a.object,trackCardShow:f.a.bool,attachedInfoBytes:f.a.string},l.defaultProps={id:null,module:null,index:null,isAd:!1,content:null,extra:null,attachedInfoBytes:null,trackCardShow:!1},u),_=C,k=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}}(),n(178)),j=n(562),S=n(87);n(1597);n.d(t,"a",function(){return M});var P,T,N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),R={zhihu:"注册或登录",wechat:"使用微信快速登录",weibo:"使用微博快速登录",qq:"使用 QQ 快速登录"},I={qq:"qqconn",weibo:"sina",wechat:"wechat_mp"},M=(T=P=function(e){function t(){var e,n,r,o;i(this,t);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.jumpToOAuthUrl=function(e){var t=r.props,n=t.redirectUrl,o=void 0===n?location.href:n,a=t.edition,i=t.utm,s=Object(S.b)(o,a,i),c=s.utmSource,l=s.refSource,u=b()(navigator.userAgent),p=u.isZhihu;if("zhihu"===e)return void(location.href=p?"zhihu://signin?next="+o:"https://www.zhihu.com/signin?next="+o+(c?"?utm_source="+c:""));location.href="https://www.zhihu.com/oauth/redirect/login/"+I[e]+"?next=/oauth/account_callback&from="+encodeURIComponent(o)+"&utm_source="+c+"&ref_source="+l},r.renderSignButtons=function(){var e=r.props.buttons;return"string"==typeof e?r.renderSingleSignButton({name:e}):e.map(function(e){return"string"==typeof e?r.renderSingleSignButton({name:e}):"object"===(void 0===e?"undefined":A(e))?r.renderSingleSignButton(e):null})},r.renderSingleSignButton=function(e){var t=e.name,n=e.text,o=e.fill,a=e.color,i="#fff"===o||"#ffffff"===o;return-1===Object.keys(R).indexOf(t)?null:h.a.createElement("button",{className:"SignInModal-button-"+t,key:t,style:{backgroundColor:o,borderColor:i?"#0f88eb":o,color:i?"#0f88eb":a},onClick:function(){r.jumpToOAuthUrl(t)}},n||R[t])},o=n,s(r,o)}return c(t,e),x(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.utm,r=e.edition,o=r.yidianzixun,a=r.baidu,i=e.urlScheme,s=this.props.title||(a||!i?"":"打开 App 或")+"登录后继续操作";return o&&(s="打开知乎 App 继续操作"),h.a.createElement(k.b,{size:"small",className:"SignInModal",title:s,onClose:t},h.a.createElement(_,{module:"SignForm",moduleName:s,trackCardShow:!0},h.a.createElement("div",{className:"SignInModal-content"},i&&!a&&h.a.createElement(j.a,N({className:"SignInModal-openInAppButton",href:i},n),"立即打开",o?"":" App"),!o&&this.renderSignButtons())))}}]),t}(d.Component),P.propTypes={onClose:f.a.func.isRequired,urlScheme:f.a.string,redirectUrl:f.a.string,edition:f.a.object,buttons:f.a.oneOfType([f.a.array,f.a.string])},P.defaultProps={buttons:["zhihu"],edition:{},utm:{}},T)},1572:function(e,t){},1573:function(e,t){},1576:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(3),i=n.n(a),s=n(1601);n.n(s);t.a=function(e){var t=e.header,n=e.options,r=e.className,a=e.onRef,s=e.showOptions,c=void 0===s||s;return o.a.createElement("div",{className:i()("Topbar",r,!1),ref:a},o.a.createElement("div",{className:"Topbar-title"},t),c&&o.a.createElement("div",{className:"Topbar-options"},n))}},1577:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(0),u=n.n(l),p=n(2),f=n.n(p),d=n(4),h=n(39),m=(n(1604),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),b=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.state={logoutModalShown:!1},a.handleLogoutModalShow=function(){a.setState({logoutModalShown:!0})},a.handleLogoutModalHide=function(){a.setState({logoutModalShown:!1})},a.handleClick=function(){var e=a.context.currentUser;e&&e.urlToken?a.handleLogoutModalShow():location.href="https://www.zhihu.com/org/signup"},i=n,o(a,i)}return a(t,e),m(t,[{key:"render",value:function(){var e=this.state.logoutModalShown;return u.a.createElement(l.Fragment,null,u.a.createElement(d.c,{className:"OrgCreateButton",onClick:this.handleClick},"申请开通知乎机构号"),e&&u.a.createElement(h.b,{className:"OrgCreateButton-logoutModal",title:"开通提示",onClose:this.handleLogoutModalHide},u.a.createElement("p",null,"若想访问机构号注册页面，请您请先退出当前帐号登录状态"),u.a.createElement(h.a,null,u.a.createElement(d.c,{preset:"primary",color:"blue",onClick:function(){location.href="/logout?next=/org/signup"}},"退出登录"),u.a.createElement(d.c,{onClick:this.handleLogoutModalHide},"我再想想"))))}}]),t}(l.Component);b.contextTypes={currentUser:f.a.object};var v=b,y=(n(1605),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),w=function(e){function t(){return i(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),y(t,[{key:"render",value:function(){var e=this,t=(new Date).getFullYear();return u.a.createElement("footer",{className:"Footer",ref:function(t){e.footerEl=t}},u.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"//liukanshan.zhihu.com/"},"刘看山"),u.a.createElement("span",{className:"Footer-dot"}),u.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/question/19581624"},"知乎指南"),u.a.createElement("span",{className:"Footer-dot"}),u.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/terms"},"知乎协议"),u.a.createElement("span",{className:"Footer-dot"}),u.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/term/privacy"},"知乎隐私保护指引"),u.a.createElement("br",null),u.a.createElement("a",{className:"Footer-item",target:"_blank",href:"/app"},"应用"),u.a.createElement("span",{className:"Footer-dot"}),u.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://app.mokahr.com/apply/zhihu"},"工作"),u.a.createElement("span",{className:"Footer-dot"}),u.a.createElement(v,{className:"Footer-item"}),u.a.createElement("br",null),u.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://zhuanlan.zhihu.com/p/51068775"},"侵权举报"),u.a.createElement("span",{className:"Footer-dot"}),u.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"http://www.12377.cn"},"网上有害信息举报专区"),u.a.createElement("br",null),u.a.createElement("span",{className:"Footer-item"},"违法和不良信息举报：010-82716601"),u.a.createElement("br",null),u.a.createElement("a",{className:"Footer-item",target:"_blank",href:"/jubao"},"儿童色情信息举报专区"),u.a.createElement("br",null),u.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://zhstatic.zhihu.com/assets/zhihu/certificates/certificate-ICP.png"},"电信与服务业务经营许可证"),u.a.createElement("br",null),u.a.createElement("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://zhstatic.zhihu.com/assets/zhihu/certificates/certificate-1.jpeg"},"网络文化经营许可证"),u.a.createElement("br",null),u.a.createElement("a",{className:"Footer-item",target:"_blank",href:"/contact"},"联系我们"),u.a.createElement("span",null," © ",t," 知乎"))}}]),t}(l.Component);t.a=w},1578:function(e,t,n){"use strict";function r(e,t){return e===t?"check":null}function o(e,t){return e===t?"is-selected":null}t.a=r,t.b=o},1579:function(e,t){},1580:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e.replace(/^「/,"").replace(/」$/,"")}n.d(t,"a",function(){return E});var s,c,l=n(0),u=n.n(l),p=n(2),f=n.n(p),d=n(3),h=n.n(d),m=n(178),b=n(77),v=n(4),y=n(10),w=n(1656),g=(n.n(w),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),E=(c=s=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onChangeInputType=function(e){n.setState({checked:e.target.checked})},n.onChangeInputValue=function(e){n.setState({text:e.target.value})},n.submit=function(){var e=n.state.text;n.props.submitRewardText(e)};var a=e.tagline;return n.state={text:i(a)||"予人玫瑰，手有余香",checked:!0},n}return a(t,e),g(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.edit,r=this.state,o=r.text,a=r.checked;return u.a.createElement(m.b,{onClose:t,className:"RewardForm-rewardModal"},u.a.createElement("p",{className:"RewardForm-rewardTitle"},n?"编辑赞赏描述":"开启赞赏"),u.a.createElement(b.a,{className:"RewardForm-rewardInput",maxLength:"20",type:"text",value:o,onChange:this.onChangeInputValue}),u.a.createElement("div",{className:"RewardForm-remark"},!n&&u.a.createElement("div",{className:"RewardForm-Protocol"},u.a.createElement("input",{className:"RewardForm-rewardCheckbox",type:"checkbox",onChange:this.onChangeInputType,checked:a}),u.a.createElement("p",null,"我已同意",u.a.createElement("a",{className:"RewardForm-rewardLink",href:"/terms/tipjar"},"《知乎赞赏功能使用协议》"))),u.a.createElement("p",{className:"RewardForm-prompting"},"还可以输入"+(20-o.length)+"个字")),u.a.createElement(v.c,{className:h()("RewardForm-rewardSubmit",{"RewardForm-rewardSubmit-disabled":!a}),onClick:this.submit,disabled:!a},"确定"))}}]),t}(l.Component),s.propTypes={onClose:f.a.func,submitRewardText:f.a.func,edit:f.a.bool,tagline:f.a.string},s.defaultProps={tagline:y.i},c)},1582:function(e,t,n){function r(e){return null==e?void 0===e?c:s:l&&l in Object(e)?a(e):i(e)}var o=n(1699),a=n(1952),i=n(1953),s="[object Null]",c="[object Undefined]",l=o?o.toStringTag:void 0;e.exports=r},1583:function(e,t,n){function r(e,t,n,r){var i=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var l=t[s],u=r?r(n[l],e[l],l,n,e):void 0;void 0===u&&(u=e[l]),i?a(n,l,u):o(n,l,u)}return n}var o=n(1698),a=n(1770);e.exports=r},1584:function(e,t,n){"use strict";var r=n(620),o=n(1974);e.exports={connections:{},EE:new r,enableResizeInfo:!1,enableScrollInfo:!1,listeners:{},removers:[],supportPassiveEvent:o}},1585:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return h});var i=n(2),s=n.n(i),c=n(0),l=n.n(c),u=n(20),p=(n.n(u),n(188)),f=(n.n(p),n(552)),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.check=function(){var e=n.props.offset,t=e,r=n.childNodes.map(function(e){return Object(u.findDOMNode)(e)}).filter(function(e){return e}).map(function(e){var t=window.getComputedStyle(e);return e.offsetHeight+parseInt(t.marginBottom,10)+parseInt(t.marginTop,10)}),o=n.el&&n.el.clientHeight,a=document.documentElement.clientHeight-e;if(n.sticky&&n.sticky.updateHeight(),o>a){var i=o;r.every(function(e){return!(i<a)&&(i-=e,!0)}),t=e-o+i}n.state.stickyOffset!==t&&n.setState({stickyOffset:t})},n.childNodes=[],n.state={stickyOffset:e.offset},n}return a(t,e),d(t,[{key:"componentDidMount",value:function(){this.resizeHandler=Object(p.subscribe)("resize",this.check),this.timeout=setTimeout(this.check)}},{key:"componentWillUnmount",value:function(){this.resizeHandler.unsubscribe(),clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.className,o=t.onRef;return l.a.createElement("div",{className:r,ref:o},l.a.createElement(f.a,{offset:this.state.stickyOffset,ref:function(t){e.sticky=t}},l.a.createElement("div",{ref:function(t){e.el=t}},c.Children.toArray(n).map(function(t,n){return Object(c.cloneElement)(t,{ref:function(t){e.childNodes[n]=t}})}))))}}]),t}(c.Component);h.propTypes={offset:s.a.number,onRef:s.a.func,className:s.a.string},h.defaultProps={offset:0,onRef:function(){},className:""}},1588:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(2),o=n.n(r),a=o.a.shape({cardShow:o.a.number,expand:o.a.number,title:o.a.number,voteUp:o.a.number,voteDown:o.a.number,share:o.a.number,favlists:o.a.number,thank:o.a.number,options:o.a.number,report:o.a.number,toggleComment:o.a.number,getCommentAction:o.a.func})},1589:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e,t){var n=t.id,r=t.type,o=e.entities.users,a=e[U[r]]||{},i=a.voters,s=void 0===i?{}:i,c=a.concernedUpvoters,u=void 0===c?{}:c,p=s[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},f=p.isFetching,d=p.isDrained,h=p.order,m=p.ids,b=u[n]||{ids:[]},v=b.ids;return{isFetching:f,isDrained:d,order:h,items:[].concat(l(v),l(m.filter(function(e){return!v.includes(e)}))).map(function(e){return o[e]})}}var p=n(0),f=n.n(p),d=n(6),h=n(180),m=n(560),b=n(556),v=n(305),y=n(2),w=n.n(y),g=n(178),E=n(183),O=n(564),C=n(4),_=n(287),k=n(290),j=function(e){var t=e.upvotedFollowees,n=e.voteupCount,r=e.actionText,o=e.canClick,a=e.onClick;if(!n)return null;var i=t.length,s=i===n?"":Object(_.formatNumber)(n)+" 人";return f.a.createElement(O.CJKSpace,null,t.map(function(e,t){return f.a.createElement("span",{key:t},t>0&&"、",f.a.createElement(k.a,{key:t,noBadge:!0,user:e},e.name))}),i>0&&n-i>0&&"等",o?f.a.createElement(C.c,{preset:"plain",onClick:a},s,r):s+r)};j.propTypes={voteupCount:w.a.number.isRequired,upvotedFollowees:w.a.array.isRequired,actionText:w.a.string.isRequired,canClick:w.a.bool,onClick:w.a.func},j.defaultProps={voteupCount:0,actionText:"赞了",upvotedFollowees:[]};var S,P,T,N,A,x,R=j,I=n(1565),M=(n(1652),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),L=(P=S=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.state={modalShown:!1},a.handleListHide=function(){return a.setState({modalShown:!1})},a.handleListShown=function(){return a.setState({modalShown:!0})},i=n,o(a,i)}return a(t,e),M(t,[{key:"componentWillReceiveProps",value:function(){var e=this.props.modalShown;e&&!this.state.modalShown&&this.setState({modalShown:e})}},{key:"render",value:function(){var e=this.props,t=e.voteupCount,n=e.upvotedFollowees,r=e.openable,o=e.type,a=e.too,i=e.isFetching,s=e.isDrained,c=e.items,l=e.onLoad;if(t<=0)return null;var u=this.state.modalShown,p=void 0;return p="pin"===o?"为该"+E.b[o]+"鼓掌":"column"===o?"关注":(a?"也":"")+"赞同了该"+E.b[o],f.a.createElement("span",{className:"Voters"},f.a.createElement(R,{canClick:r,onClick:this.handleListShown,voteupCount:t,upvotedFollowees:n,actionText:p}),f.a.createElement(g.b,{size:"fullPage",onClose:this.handleListHide},u&&f.a.createElement(I.a,{isFetching:i,isDrained:s,text:"column"===o?"关注了":"赞同了",items:c,voteupCount:t,onLoad:l})))}}]),t}(p.Component),S.propTypes={openable:w.a.bool,upvotedFollowees:w.a.array,id:w.a.oneOfType([w.a.number,w.a.string]),type:w.a.oneOf(["pin","answer","article","column"]).isRequired,modalShown:w.a.bool},S.defaultProps={openable:!0},P),D=L,q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),U={answer:"answers",article:"articles",pin:"pins",column:"columns"},z=(T=Object(d.connect)(u,{loadAnswerVoters:h.r,loadArticleVoters:m.c,loadPinVoters:b.f,loadColumnsFollowers:v.c}))((x=A=function(e){function t(){var e,n,r,o;i(this,t);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.handleLoad=function(){var e=r.props,t=e.type,n=e.id,o=e.loadAnswerVoters,a=e.loadPinVoters,i=e.loadArticleVoters,s=e.loadColumnsFollowers;switch(t){case"answer":return o(n);case"pin":return a(n);case"article":return i(n);case"column":return s(n);default:return null}},o=n,s(r,o)}return c(t,e),B(t,[{key:"render",value:function(){return f.a.createElement(D,q({onLoad:this.handleLoad},this.props))}}]),t}(p.Component),A.propsTypes=q({},D.propsTypes),A.defaultProps=q({},D.defaultProps),N=x))||N;t.a=z},1591:function(e,t,n){e.exports={default:n(1922),__esModule:!0}},1592:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},1593:function(e,t,n){"use strict";t.__esModule=!0;var r=n(1924),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},1594:function(e,t,n){"use strict";t.__esModule=!0;var r=n(1695),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},1595:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(1938),a=r(o),i=n(1942),s=r(i),c=n(1695),l=r(c);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,l.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.default?(0,a.default)(e,t):e.__proto__=t)}},1597:function(e,t){},1598:function(e,t){},1599:function(e,t,n){e.exports=n.p+"assets/deleteComment.97d8abc0.gif"},1600:function(e,t){},1601:function(e,t){},1602:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(){_="pointer"}function s(){_="wheel"}function c(){C||(window.addEventListener("click",i),window.addEventListener("wheel",s,{passive:!0}),window.addEventListener("mousewheel",s,{passive:!0}),window.addEventListener("touchmove",s,{passive:!0}),C=!0)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=n(0),b=n.n(m),v=n(2),y=n.n(v),w=n(20),g=n(552),E=n(188),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),C=!1,_="pointer",k=function(e){function t(){var e;r(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return s.currentDirection=null,s.lastEmitDirection=null,s.startPosition=0,s.previousPosition=0,s.handleScroll=function(){var e=window.pageYOffset;if(!(e<0)){var t=e<s.previousPosition?"up":"down";t!==s.currentDirection&&(s.currentDirection=t,s.startPosition=s.previousPosition),s.previousPosition=e;var n=s.props,r=n.threshold,o=n.emitOnce,a=n.onScrollUp,i=n.onScrollDown;Math.abs(s.startPosition-e)>=r&&("wheel"!==_||o&&s.lastEmitDirection===t||("up"===t&&a&&a(),"down"===t&&i&&i()),s.lastEmitDirection=t,s.startPosition=e)}},s}return a(t,e),O(t,[{key:"componentDidMount",value:function(){c();var e=this.props,t=e.throttleRate,n=e.useRAF,r=window.pageYOffset;this.startPosition=r,this.previousPosition=r,this.subscription=Object(E.subscribe)("scroll",this.handleScroll,{throttleRate:t,useRAF:n})}},{key:"componentWillUnmount",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"render",value:function(){return this.props.children||null}}]),t}(m.Component);k.propTypes={throttleRate:y.a.number,useRAF:y.a.bool,emitOnce:y.a.bool,threshold:y.a.number,onScrollUp:y.a.func,onScrollDown:y.a.func},k.defaultProps={threshold:100,useRAF:!0,emitOnce:!0};var j,S,P=k,T=n(289),N=n(10),A=(n(1603),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),x=(S=j=function(e){function t(){var e,n,r,o;l(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={enabled:!1,shown:!1},r.handleScrollUp=function(){r.state.shown&&r.canToggle()&&r.setState({shown:!1})},r.handleScrollDown=function(){!r.state.shown&&r.canToggle()&&r.setState({shown:!0})},r.handlePositionStatusChange=function(e){r.canToggle()&&("normal"!==e?r.enable():r.disable())},o=n,u(r,o)}return p(t,e),A(t,[{key:"componentDidMount",value:function(){this.appHeader=document.querySelector(".AppHeader"),this.portal=document.createElement("div"),this.portal.classList.add("PageHeader"),this.appHeader.appendChild(this.portal),this.renderPortal()}},{key:"componentWillReceiveProps",value:function(e){this.renderPortal(e)}},{key:"componentDidUpdate",value:function(e,t){var n=t.shown,r=this.state.shown,o=this.props.onStatusChange;n!==r&&o&&o(r),!n&&r&&(this.appHeader.classList.add("is-hidden"),this.portal.classList.add("is-shown")),n&&!r&&(this.appHeader.classList.remove("is-hidden"),this.portal.classList.remove("is-shown"))}},{key:"componentWillUnmount",value:function(){this.appHeader.classList.remove("is-hidden"),Object(w.unmountComponentAtNode)(this.portal),this.appHeader.removeChild(this.portal)}},{key:"canToggle",value:function(){return!(this.props.prevent||document.activeElement&&document.activeElement.closest(".SearchBar"))}},{key:"enable",value:function(){this.setState({enabled:!0,shown:!0})}},{key:"disable",value:function(){this.setState({enabled:!1,shown:!1})}},{key:"renderPortal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;Object(w.unstable_renderSubtreeIntoContainer)(this,e.children,this.portal)}},{key:"render",value:function(){var e=this,t=this.props.offset,n=this.state.enabled;return b.a.createElement("div",null,b.a.createElement(T.a,{keyMap:{FOCUS_SEARCH:"/"},handlers:{FOCUS_SEARCH:function(){return e.setState({shown:!1})}}}),b.a.createElement(g.a,{offset:t,onPositionStatusChange:this.handlePositionStatusChange},b.a.createElement("div",null)),n&&b.a.createElement(P,{onScrollUp:this.handleScrollUp,onScrollDown:this.handleScrollDown}))}}]),t}(m.Component),j.propTypes={prevent:y.a.bool,offset:y.a.number,onStatusChange:y.a.func},j.defaultProps={prevent:!1,offset:N.f},S),R=x;n.d(t,"a",function(){return M});var I=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),M=function(e){function t(){var e,n,r,o;f(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={show:!1},o=n,d(r,o)}return h(t,e),I(t,[{key:"componentDidMount",value:function(){this.appHeader=document.querySelector(".AppHeader"),this.setState({show:Boolean(this.appHeader)})}},{key:"render",value:function(){return this.state.show?b.a.createElement(R,this.props):null}}]),t}(m.Component)},1603:function(e,t){},1604:function(e,t){},1605:function(e,t){},1607:function(e,t){},1608:function(e,t){},1609:function(e,t){},1610:function(e,t,n){"use strict";function r(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function o(e,t){var n,o,s,c,l,u,p=!1;t||(t={}),n=t.debug||!1;try{s=a(),c=document.createRange(),l=document.getSelection(),u=document.createElement("span"),u.textContent=e,u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",document.body.appendChild(u),c.selectNode(u),l.addRange(c);if(!document.execCommand("copy"))throw new Error("copy command was unsuccessful");p=!0}catch(a){n&&console.error("unable to copy using execCommand: ",a),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData("text",e),p=!0}catch(a){n&&console.error("unable to copy using clipboardData: ",a),n&&console.error("falling back to prompt"),o=r("message"in t?t.message:i),window.prompt(o,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(c):l.removeAllRanges()),u&&document.body.removeChild(u),s()}return p}var a=n(1611),i="Copy to clipboard: #{key}, Enter";e.exports=o},1611:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach(function(t){e.addRange(t)}),t&&t.focus()}}},1612:function(e,t){},1613:function(e,t){},1614:function(e,t){},1615:function(e,t){},1616:function(e,t){},1620:function(e,t,n){"use strict";t.__esModule=!0;var r=n(1762),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},1621:function(e,t){t.f={}.propertyIsEnumerable},1622:function(e,t,n){function r(e){return null!=e&&a(e.length)&&!o(e)}var o=n(1772),a=n(1776);e.exports=r},1623:function(e,t){function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}var r=Object.prototype;e.exports=n},1624:function(e,t,n){function r(e){return i(e)?o(e):a(e)}var o=n(1778),a=n(1972),i=n(1622);e.exports=r},1625:function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(1980),a=n(1981),i=n(1982),s=n(1983),c=n(1984);r.prototype.clear=o,r.prototype.delete=a,r.prototype.get=i,r.prototype.has=s,r.prototype.set=c,e.exports=r},1626:function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1}var o=n(1700);e.exports=r},1627:function(e,t,n){var r=n(1554),o=r(Object,"create");e.exports=o},1628:function(e,t,n){function r(e,t){var n=e.__data__;return o(t)?n["string"==typeof t?"string":"hash"]:n.map}var o=n(1999);e.exports=r},1629:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return O.default.createElement("svg",(0,g.default)({viewBox:"0 0 24 19",width:"24",height:"18",fill:"#e6eaee"},e),O.default.createElement("path",{fillRule:"evenodd",d:"M12.8 2.5c4.4 0 9.4 15.6 9.4 16H0S2.8 6 6 6.4c1.2 0 1.8 5.8 1.8 5.8s2.5-9.5 5-9.8zm7.8 3c-2 0-3-1.2-3-2.7 0-1.6 1.5-2.8 3-2.8 1.6 0 2.8 1.2 2.8 2.8 0 1.5-1.2 2.7-2.8 2.7z"}))}function a(e){return O.default.createElement("svg",(0,g.default)({width:"22",height:"24",viewBox:"0 0 22 24"},e),O.default.createElement("path",{d:"M12.5529341,14.1404734 L18.169832,9.26282809 C18.7810874,8.65157268 19.7534925,8.63293695 20.3417595,9.22120397 C20.9300266,9.80947106 20.9113909,10.7818762 20.3001355,11.3931316 L13.0513943,17.6878498 L12.2520561,18.4871879 C11.4710076,19.2682365 10.2046776,19.2682365 9.42362902,18.4871879 L8.70753902,17.7710979 L1.69466746,11.7582264 C1.10640039,11.1699593 1.12503611,10.1975542 1.73629152,9.58629879 C2.34754694,8.97504338 3.31995206,8.95640766 3.90821914,9.54467473 L9.54022989,14.3735893 L9.54022989,1.50635209 C9.54022989,0.674416801 10.2146467,1.52824032e-16 11.046582,0 C11.8785173,-8.18957847e-16 12.5529341,0.674416801 12.5529341,1.50635208 L12.5529341,14.1404734 Z M21.298428,22.2454939 L21.298428,22.2581981 C21.298428,23.0866252 20.6268551,23.7581981 19.798428,23.7581981 L2.2947352,23.7581981 C1.466308,23.7581981 0.7947352,23.0866252 0.7947352,22.2581981 L0.7947352,22.2454939 C0.7947352,21.4170668 1.466308,20.7454939 2.2947352,20.7454939 L19.798428,20.7454939 C20.6268551,20.7454939 21.298428,21.4170668 21.298428,22.2454939 Z"}))}function i(e){return O.default.createElement("svg",(0,g.default)({width:"100",height:"100",viewBox:"0 0 100 100"},e),O.default.createElement("g",{fill:"none",fillRule:"evenodd"},O.default.createElement("circle",{cx:"50",cy:"50",r:"47.222",fill:"#000",fillOpacity:".2"}),O.default.createElement("path",{fill:"#FFF",d:"M50,100 C22.3857625,100 0,77.6142375 0,50 C0,22.3857625 22.3857625,0 50,0 C77.6142375,0 100,22.3857625 100,50 C100,77.6142375 77.6142375,100 50,100 Z M50,97.2222222 C76.0801132,97.2222222 97.2222222,76.0801132 97.2222222,50 C97.2222222,23.9198868 76.0801132,2.77777778 50,2.77777778 C23.9198868,2.77777778 2.77777778,23.9198868 2.77777778,50 C2.77777778,76.0801132 23.9198868,97.2222222 50,97.2222222 Z M66.0426405,48.1352959 C67.5072274,49.0506627 67.5117218,50.5319565 66.0426405,51.4501323 L43.8196795,65.339483 C42.3550926,66.2548498 41.1678103,65.6054361 41.1678103,63.8674518 L41.1678103,35.7179765 C41.1678103,33.9896292 42.3505982,33.3277694 43.8196795,34.2459452 L66.0426405,48.1352959 Z"})))}function s(e){return O.default.createElement("svg",(0,g.default)({},e,{viewBox:"0 0 24 24"}),O.default.createElement("path",{d:"M9.218 16.78a.737.737 0 0 0 1.052 0l4.512-4.249a.758.758 0 0 0 0-1.063L10.27 7.22a.737.737 0 0 0-1.052 0 .759.759 0 0 0-.001 1.063L13 12l-3.782 3.716a.758.758 0 0 0 0 1.063z",fillRule:"evenodd"}))}function c(e){return O.default.createElement("svg",(0,g.default)({viewBox:"0 0 12 12"},e),O.default.createElement("path",{fillRule:"evenodd",d:"M3 2L2 3l3 3-3 3 1 1 3-3 3 3 1-1-3-3 3-3-1-1-3 3"}))}function l(e){return O.default.createElement("svg",(0,g.default)({width:"24",height:"24",viewBox:"0 0 24 24"},e),O.default.createElement("path",{fillRule:"evenodd",d:"M12.0005,13.0003752 L8.2845,9.21837516 C7.9905,8.92737516 7.5145,8.92737516 7.2205,9.21837516 C6.9265,9.50837516 6.9265,9.97937516 7.2205,10.2703752 L11.4685,14.7823752 C11.7625,15.0733752 12.2385,15.0733752 12.5325,14.7823752 L16.7795,10.2703752 C17.0735,9.97937516 17.0735,9.50937516 16.7795,9.21837516 C16.4855,8.92737516 16.0105,8.92737516 15.7165,9.21737516 L12.0005,13.0003752 Z"}))}function u(e){return O.default.createElement("svg",(0,g.default)({width:"22",height:"24",viewBox:"0 0 24 24"},e),O.default.createElement("path",{fillRule:"evenodd",d:"M12.0005,13.0003752 L8.2845,9.21837516 C7.9905,8.92737516 7.5145,8.92737516 7.2205,9.21837516 C6.9265,9.50837516 6.9265,9.97937516 7.2205,10.2703752 L11.4685,14.7823752 C11.7625,15.0733752 12.2385,15.0733752 12.5325,14.7823752 L16.7795,10.2703752 C17.0735,9.97937516 17.0735,9.50937516 16.7795,9.21837516 C16.4855,8.92737516 16.0105,8.92737516 15.7165,9.21737516 L12.0005,13.0003752 Z",transform:"matrix(1 0 0 -1 0 24)"}))}function p(e){return O.default.createElement("svg",(0,g.default)({viewBox:"0 0 24 24"},e),O.default.createElement("path",{d:"M13.491 10.488s-.012-5.387 0-5.998c-.037-1.987-3.035-1.987-2.997 0-.038 1.912 0 5.998 0 5.998H4.499c-1.999.01-1.999 3.009 0 3.009s5.995-.01 5.995-.01v5.999c0 2.019 3.006 2.019 2.997 0-.01-2.019 0-5.998 0-5.998s3.996.009 6.004.009c2.008 0 2.008-3-.01-3.009h-5.994z",fillRule:"evenodd"}))}function f(e){return O.default.createElement("svg",(0,g.default)({width:"12",height:"14",viewBox:"0 0 24 24"},e),O.default.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M41,34.647593 L46.4821856,29.8952505 C47.0573478,29.3171615 47.9939599,29.3212723 48.5741674,29.9044323 C49.1543749,30.4875923 49.1584649,31.4289706 48.5833027,32.0070596 L41.7409518,37.9384886 L41.0759034,38.6069213 C40.2968396,39.3899495 39.0305137,39.3931633 38.2474854,38.6140995 C38.2450866,38.6117128 38.2426938,38.6093201 38.2403072,38.6069213 L37.5569882,37.920125 L30.6628707,31.936666 C30.0826632,31.353506 30.0785732,30.4121277 30.6537354,29.8340386 C31.2288976,29.2559496 32.1655097,29.2600604 32.7457172,29.8432204 L38,34.403454 L38,22.5 C38,21.6715729 38.6715729,21 39.5,21 C40.3284271,21 41,21.6715729 41,22.5 L41,34.647593 Z M49,42.5 C49,43.3284271 48.3284271,44 47.5,44 L31.5,44 C30.6715729,44 30,43.3284271 30,42.5 C30,41.6715729 30.6715729,41 31.5,41 L47.5,41 C48.3284271,41 49,41.6715729 49,42.5 Z",transform:"translate(-30 -21)"}))}function d(e){var t=e.style;return O.default.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 25",style:t},O.default.createElement("path",{fill:"#FA0",d:"M17.274758,15.4469628 L19.717838,23.7077251 C19.8447617,24.1107955 19.7143932,24.5558233 19.3955281,24.8079664 C19.0766631,25.0601095 18.6426594,25.0613602 18.3225416,24.8110584 L11.9871141,19.556149 L5.67675579,24.8157738 C5.35585352,25.0642585 4.92230992,25.0611015 4.60456814,24.8079664 C4.28682636,24.5548313 4.15784801,24.1098443 4.28559448,23.7074782 L6.69918173,15.4591101 L0.383646092,10.7225632 C0.0610151875,10.4737818 -0.0766431831,10.0304757 0.0422739945,9.62323054 C0.161191172,9.21598539 0.509822814,8.93679002 0.906828141,8.93086791 L8.69117778,8.93086791 L11.125674,0.681629762 C11.2430397,0.276206583 11.5378306,0 12.0000481,0 C12.4622656,0 12.7310442,0.276206583 12.8484099,0.681629762 L15.2829062,8.93086791 L23.0932681,8.93086791 C23.4904075,8.93683682 23.8390971,9.21625563 23.9578641,9.62370313 C24.0766312,10.0311506 23.9386295,10.4745268 23.6156809,10.7230801 L17.274758,15.4469628 Z"}))}function h(e){return O.default.createElement("svg",(0,g.default)({width:"16",height:"16",viewBox:"0 0 24 25"},e),O.default.createElement("path",{fill:"none",stroke:"#FA0",strokeWidth:"1.764",d:"M11.9819001,0.879433133 C11.9795516,0.880021622 11.9838641,0.88895781 11.971605,0.931278979 L9.35049088,9.81286791 L8.69117778,9.81286791 L0.919983421,9.8127698 C0.919003912,9.81278441 0.901713576,9.82663106 0.888917203,9.87045367 C0.870461414,9.93365758 0.891089579,10.0000872 0.912838593,10.0169576 L7.7173316,15.1202144 L7.54568587,15.7068089 L5.12624332,23.9743743 C5.10962557,24.0267157 5.12267547,24.0829123 5.14588507,24.110054 L11.9857433,18.4090959 L12.5501987,18.8772825 L18.8564176,24.1084404 C18.8797348,24.0814822 18.8926963,24.023831 18.8720512,23.9578624 L16.254506,15.1071827 L16.7478316,14.7396633 L23.0777374,10.0241232 C23.1088665,10.000165 23.1295357,9.93375829 23.111104,9.87052561 C23.0983169,9.82665738 23.0810031,9.81278318 23.0932681,9.81286791 L14.6235931,9.81286791 L14.4369752,9.18051713 L12.0011958,0.92688923 C11.9873473,0.879051627 11.9964848,0.872771777 12.0017908,0.875210734 Z"}))}function m(e){return O.default.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 25",style:e.style},O.default.createElement("clipPath",{id:"cut-off-bottom-test"},O.default.createElement("rect",{x:"0",y:"0",width:e.cutWidth,height:"25"})),O.default.createElement("path",{clipPath:"url(#cut-off-bottom-test)",fill:"#FA0",d:"M17.274758,15.4469628 L19.717838,23.7077251 C19.8447617,24.1107955 19.7143932,24.5558233 19.3955281,24.8079664 C19.0766631,25.0601095 18.6426594,25.0613602 18.3225416,24.8110584 L11.9871141,19.556149 L5.67675579,24.8157738 C5.35585352,25.0642585 4.92230992,25.0611015 4.60456814,24.8079664 C4.28682636,24.5548313 4.15784801,24.1098443 4.28559448,23.7074782 L6.69918173,15.4591101 L0.383646092,10.7225632 C0.0610151875,10.4737818 -0.0766431831,10.0304757 0.0422739945,9.62323054 C0.161191172,9.21598539 0.509822814,8.93679002 0.906828141,8.93086791 L8.69117778,8.93086791 L11.125674,0.681629762 C11.2430397,0.276206583 11.5378306,0 12.0000481,0 C12.4622656,0 12.7310442,0.276206583 12.8484099,0.681629762 L15.2829062,8.93086791 L23.0932681,8.93086791 C23.4904075,8.93683682 23.8390971,9.21625563 23.9578641,9.62370313 C24.0766312,10.0311506 23.9386295,10.4745268 23.6156809,10.7230801 L17.274758,15.4469628 Z"}))}function b(e){var t=e.className,n=e.name,r=(0,y.default)(e,["className","name"]),o=k[n];return o?O.default.createElement(o,(0,g.default)({className:(0,_.default)("Icon Icon--"+n,t)},r)):null}Object.defineProperty(t,"__esModule",{value:!0});var v=n(1720),y=r(v),w=n(1620),g=r(w);t.DefaultImageIcon=o,t.DownloadIcon=a,t.PauseIcon=i,t.TriangleIcon=s,t.CloseIcon=c,t.ArrowDown=l,t.ArrowUp=u,t.AddIcon=p,t.DownloadIconWhite=f,t.ActiveStar=d,t.UnActiveStar=h,t.VarietyStar=m,t.default=b;var E=n(0),O=r(E),C=n(3),_=r(C),k={close:c,triangle:s,add:p}},1632:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var n=t.os,r=t.id,o=t.sessionId,a=t.type;return e.replace("__OS__",n).replace("__REQUESTID__",o).replace("__SESSIONID__",o).replace("__ATOKEN__",r).replace("__AID__",r).replace("__PAGETYPE__",a)}var s,c,l=n(0),u=n.n(l),p=n(6),f=n(608),d=n.n(f),h=n(558),m=n.n(h),b=n(190),v=n(604),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w=(s=Object(p.connect)(function(e){return{ua:e.env.userAgent}},{loadBrandEntityTrackUrl:v.b}))(c=function(e){function t(){var e,n,a,s;r(this,t);for(var c=arguments.length,l=Array(c),u=0;u<c;u++)l[u]=arguments[u];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={urls:null,logged:!1},a.handleObserve=function(e){e&&a.log()},a.log=function(){a.state.logged||Promise.resolve(a.state.urls||a.load().then(function(e){return e?(e=a.normalize(e),a.setState({urls:e}),e):[]})).then(function(e){return e.forEach(function(e){return e&&Object(b.c)(e)})}).then(function(){return a.setState({logged:!0})})},a.load=function(){var e=a.props,t=e.type,n=e.id;return(0,e.loadBrandEntityTrackUrl)({type:t,id:n}).then(function(e){return e&&e.payload&&e.payload.data})},a.normalize=function(e){var t=m()(),n=a.props,r=n.ua,o=n.id,s=n.type,c=encodeURIComponent("其他");r.Android?c="android":r.iOS&&(c="ios");var l={os:c,id:o,sessionId:t,type:s};return e.map(function(e){return i(e,l)})},s=n,o(a,s)}return a(t,e),y(t,[{key:"render",value:function(){return!this.state.logged&&u.a.createElement(d.a,{rootMargin:"0px 0px 0px 0px",onChange:this.handleObserve})}}]),t}(l.Component))||c,g=w;n.d(t,"a",function(){return g})},1633:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _,k,j,S,P,T,N,A,x,R,I,M=n(2),L=n.n(M),D=n(0),q=n.n(D),B=n(6),U=n(3),z=n.n(U),F=n(557),Q=n.n(F),V=n(9),H=n(4),W=n(28),Y=n(63),K=n(581),G=n(552),X=n(186),$=n(189),J=n(548),Z=n(30),ee=n.n(Z),te=n(1653),ne=n(554),re=n(7),oe=n(550),ae=n(178),ie=(n(1579),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),se="AnswerOrg::know",ce=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.handleHide=function(){ee.a.set(se,!0),a.props.onClose()},i=n,o(a,i)}return a(t,e),ie(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return q.a.createElement(ae.b,{title:"机构帐号提问规则",subtitle:"这是一个「机构提问」，请在回答前了解以下规则",onClose:n},t&&q.a.createElement("div",null,q.a.createElement("ul",{className:"AnswerModal-list"},q.a.createElement("li",null,"1. 提问机构如需使用你的回答，由提问机构联系你，共同商定确认使用条件。"),q.a.createElement("li",null,"2.「机构提问」下的回答，站内传播与社区公共提问下的回答有所区别。"),q.a.createElement("li",null,"3. 提问机构可能「隐藏」回答，被「隐藏」回答不在社区内流通。")),q.a.createElement("a",{className:"AnswerModal-moreLink",href:"/org-intro#org-question",target:"_blank"},"了解更多"),q.a.createElement(ae.a,{direction:"horizontal"},q.a.createElement(H.c,{onClick:this.handleHide},"不再显示"),q.a.createElement(H.c,{color:"blue",preset:"primary",onClick:n},"知道了"))))}}],[{key:"getKnown",value:function(){return ee.a.get(se)}}]),t}(D.Component),le=n(39),ue=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),pe="AnswerBrand::know",fe=function(e){function t(){var e,n,r,o;i(this,t);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.handleHide=function(){ee.a.set(pe,!0),r.props.onClose()},o=n,s(r,o)}return c(t,e),ue(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return q.a.createElement(le.b,{title:"品牌提问规则",subtitle:"这是一个「品牌提问」，请在回答前了解：",onClose:n},t&&q.a.createElement("div",null,q.a.createElement("p",null,"「品牌提问」由品牌方管理，回答由品牌方筛选后展示，传播与社区提问有所区别。回答著作权归作者所有。"),q.a.createElement("a",{className:"AnswerModal-moreLink",href:"/introduction/brand_question",target:"_blank"},"了解品牌提问"),q.a.createElement(le.a,{direction:"horizontal"},q.a.createElement(H.c,{onClick:this.handleHide},"知道了，继续回答"),q.a.createElement(H.c,{color:"blue",preset:"primary",onClick:n},"取消"))))}}],[{key:"getKnown",value:function(){return ee.a.get(pe)}}]),t}(D.Component),de=(n(1655),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),he=function(e){function t(){var e,n,r,o;l(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(e){var t=r.props.handleChange,n=e.target.checked;t(e),re.default.trackEvent(r.circle,{id:4063,action:n?"Open":"Close"})},o=n,u(r,o)}return p(t,e),de(t,[{key:"componentDidMount",value:function(){re.default.trackCardShow(this,{id:4062})}},{key:"render",value:function(){var e=this,t=this.props,n=t.draft,r=t.isAnswerRewardable,o=t.isChecked;return q.a.createElement("label",{className:z()("CircleEntry-openCircleLabel",{"CircleEntry-openCircleLabel--withoutReward":!n&&!r,"CircleEntry-openCircleDraftsLabel":n,"CircleEntry-openCircleDraftsLabel--withoutReward":n&&!r}),ref:function(t){e.circle=t},htmlFor:"CircleEntry-openCircleInput"},q.a.createElement("input",{type:"checkbox",id:"CircleEntry-openCircleInput",checked:o,onChange:this.handleChange}),"发布到圈内说")}}]),t}(D.Component),me=he,be=n(1552),ve=n(579),ye=n(1580),we=n(605),ge=n(553),Ee=n(291),Oe=n(1518),Ce=(n(1657),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),_e={current:"当前草稿",saved:"自动保存",published:"发布过的版本"},ke=(k=_=function(e){function t(){var e,n,r,o;f(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.formatDate=function(e){return Object(ge.format)("current"===e.versionType?1e3*e.updatedAt:1e3*e.createdAt,"YYYY-MM-DD HH:mm")},r.handleDraftClick=function(e){e.preventDefault()},o=n,d(r,o)}return h(t,e),Ce(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.history,r=t.currentVersion,o=t.currentDraft,a=t.getHistory,i=t.onSelect,s=t.onRevert;return n?n.isFetching&&!n.items?q.a.createElement("div",{className:"DraftHistory"},q.a.createElement(X.a,{className:"DraftHistory-loading"})):q.a.createElement("div",{className:"DraftHistory"},q.a.createElement("div",{className:"DraftHistory-side"},q.a.createElement("div",{className:"DraftHistory-title"},"历史版本"),q.a.createElement(Ee.b,{className:"DraftHistory-history",getContainer:function(e){return e},isLoading:n.isFetching,isDrained:n.isDrained,onLoad:a},q.a.createElement("div",null,n.items&&n.items.map(function(t,n){return q.a.createElement("a",{key:n,href:"javascript:;",className:z()("DraftHistory-version",{"DraftHistory-version--selected":r&&t.versionType===r.versionType&&t.id===r.id}),onClick:function(){return i(t)}},q.a.createElement("div",{className:"DraftHistory-versionDate"},e.formatDate(t)),q.a.createElement("div",{className:"DraftHistory-versionType"},_e[t.versionType]))})))),o&&q.a.createElement("div",{className:"DraftHistory-main"},o.isFetching&&q.a.createElement(X.a,{className:"DraftHistory-loading"}),!o.isFetching&&o.data&&q.a.createElement(q.a.Fragment,null,q.a.createElement(Oe.a,{className:"DraftHistory-draft",html:o.data.draft.content,onClick:this.handleDraftClick}),q.a.createElement("div",{className:"DraftHistory-actions"},q.a.createElement("div",{className:"DraftHistory-meta"},this.formatDate(o.data)," ",_e[o.data.versionType]),q.a.createElement(H.c,{className:"DraftHistory-revert",disabled:"current"===o.data.versionType,onClick:function(){return s(o.data)}},"恢复此版本"))))):null}}]),t}(q.a.Component),_.propTypes={history:L.a.object,currentVersion:L.a.object,currentDraft:L.a.object,onSelect:L.a.func,onRevert:L.a.func},k),je=ke,Se=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Pe=function(e,t){var n=t.type,r=t.id;return{history:e.draftHistory.history[n+"_"+r],drafts:e.draftHistory.drafts}},Te=(S=j=function(e){function t(){var e,n,r,o;m(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={currentVersion:null},r.getHistory=function(){var e=r.props,t=e.type,n=e.id;(0,e.getHistory)(t,n)},r.handleSelect=function(e){r.setState({currentVersion:e})},r.handleRevert=function(e){var t=r.props,n=t.revert,o=t.onReverted;n(e.versionType,e.id).then(function(){o&&o(e)})},o=n,b(r,o)}return v(t,e),Se(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.getHistory)(t,n)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.drafts,o=n.getDraft,a=this.state.currentVersion,i=t.currentVersion;!a||i&&i.versionType===a.versionType&&i.id===a.id||r[a.versionType+"_"+a.id]||o(a.versionType,a.id)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.reset)(t,n)}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.drafts,r=this.state.currentVersion;return q.a.createElement(je,{history:t,currentVersion:r,currentDraft:r?n[r.versionType+"_"+r.id]:null,getHistory:this.getHistory,onSelect:this.handleSelect,onRevert:this.handleRevert})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.history&&e.history.items&&e.history.items.length&&!t.currentVersion?{currentVersion:e.history.items[0]}:null}}]),t}(q.a.Component),j.propTypes={type:L.a.string.isRequired,id:L.a.number.isRequired,onReverted:L.a.func},S),Ne=Object(B.connect)(Pe,{getHistory:we.c,getDraft:we.b,revert:we.e,reset:we.d})(Te),Ae=(n(1658),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),xe=(T=P=function(e){function t(){var e,n,r,o;y(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=w(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleReverted=function(e){var t=r.props,n=t.onClose,o=t.onReverted;o&&o(e),n&&n()},o=n,w(r,o)}return g(t,e),Ae(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose,r=e.type,o=e.id;return q.a.createElement(le.b,{className:"DraftHistoryModal",size:"fullPage",onClose:n},t&&q.a.createElement(Ne,{type:r,id:o,onReverted:this.handleReverted}))}}]),t}(q.a.Component),P.propTypes={shown:L.a.bool.isRequired,onClose:L.a.func,type:L.a.string.isRequired,id:L.a.number.isRequired,onReverted:L.a.func},P.defaultProps={shown:!0},T),Re=xe,Ie=n(1557),Me=n(109),Le=n(299),De=n(17),qe=n(18),Be=n(586),Ue=n(1578),ze=function(){return ee.a.get("last_viewed_attention")},Fe=function(e){ee.a.set("last_viewed_attention",e)},Qe=n(1634),Ve=n.n(Qe),He=n(10),We=(n(1659),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Ye=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["草稿保存于",""],["草稿保存于",""]),Ke={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},Ge=(N=Object(B.connect)(function(e,t){var n=e.env.trafficSource,r=e.entities,o=r.questions,a=r.drafts,i=void 0===a?{}:a,s=r.answers,c=e.switches,l=e.question,u=Object(qe.c)(e),p=Object.values(s).filter(function(e){return e.author&&e.author.urlToken===(u&&u.urlToken)})[0]||{},f=p.rewardInfo&&p.rewardInfo.tagline;return{isProduction:"production"===n,question:o[t.question.id]||t.question,draft:i["question_"+t.question.id],switches:c,rewardTagline:f,currentUser:u,isPuQuestion:Boolean(l&&l.brand&&l.brand.isPuQuestion)}},{addDraft:Me.b,updateDraft:Me.K,deleteDraft:Me.i,showNotification:De.g,updateQuestionRewardinfo:Le.n,loadCurrentUser:qe.j},null,{withRef:!0}))((R=x=function(e){function t(e,n){E(this,t);var r=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));I.call(r);var o=r.props,a=o.defaultValue,i=o.draft,s=i?i.editableContent:a,c=i?i.updatedTime:0;return r.state={draft:s,content:{toHTML:function(){return""}},isEmpty:!s,isTyping:!1,isChecked:n.isCheckedCircle,reshipmentSettings:null,commentPermission:null,answerModalShown:!1,focusing:!1,selectedText:null,loadingShown:!1,isUploading:!1,rewardNotication:!0,checked:e.isRewardable,isFullscreen:!1,isToolbarSticky:!1,isLeaveActive:!1,toolbarMenuAttention:null,dateNow:0,rewardModalShown:!1,lastUpdatedTime:c,rewardTagline:e.rewardTagline,draftHistoryModalShown:!1},r.hasEdited=!1,r}return C(t,e),We(t,[{key:"componentDidMount",value:function(){var e=this;this.shouldAnswerOrgQuestionModalShow=!ce.getKnown(),this.onFocusAuthChecked=!1,this.props.isProduction||"draft_history"===ze()||(Fe("draft_history"),this.setState({toolbarMenuAttention:"现在可以查看「历史版本」了"})),document.addEventListener("compositionstart",this.onCompositionStart),document.addEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=function(){return e.state.isUploading||e.composition||e.syncDraft.isPending()||e.props.draft&&e.props.draft.updating?"草稿尚未保存完毕，确定离开此页？":void 0},this.setState({dateNow:Date.now()}),this.reRenderTimer=setInterval(function(){return e.setState({dateNow:Date.now()})},6e4);var t=this.props,n=t.currentUser,r=t.loadCurrentUser;!n||void 0!==n.lastCommentPermission&&void 0!==n.caEnabled||r("last_comment_permission,ca_enabled")}},{key:"componentWillReceiveProps",value:function(e,t){var n=this.state,r=e.currentUser,o={};if(n.reshipmentSettings||void 0===r.caEnabled||(o.reshipmentSettings=r.caEnabled?"need_payment":"allowed"),t.isCheckedCircle!==n.isChecked&&this.setState({isChecked:t.isCheckedCircle}),n.commentPermission||void 0===r.lastCommentPermission||(o.commentPermission=r.lastCommentPermission),Object.keys(o).length&&this.setState(o),!this.draftLoaded&&!this.state.draft&&!this.props.draft&&e.draft){var a=e.draft.editableContent;a&&(this.setState({draft:a,isEmpty:!a}),this.editable&&!this.editable.toHTML()&&this.editable.resetWithValue(a)),this.draftLoaded=!0}}},{key:"componentDidUpdate",value:function(){var e=this,t=this.state.focusing;if(this.props.tagline){var n=ee.a.get("rewardNotication");t&&!n&&(this.setState({rewardNotication:!1}),ee.a.set("rewardNotication",!0),this.timeout=setTimeout(function(){e.setState({rewardNotication:!0})},2e3))}}},{key:"componentWillUnmount",value:function(){this.syncDraft.cancel(),document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=null,this.timeout&&clearTimeout(this.timeout),this.reRenderTimer&&clearInterval(this.reRenderTimer)}},{key:"getCloneContent",value:function(){return this.editable.state.editorState.getCurrentContent()}},{key:"deleteDraft",value:function(){var e=this.props,t=e.question,n=e.draft,r=e.deleteDraft;n&&r(t.id)}},{key:"renderReshipmentSettings",value:function(e){var t=this;return Object.keys(Ke).map(function(n){var r=Object(Ue.a)(n,e);return q.a.createElement(Y.b,{key:n,onClick:function(){return t.handleReshipmentSettings(n)},className:Object(Ue.b)(n,e)},r&&q.a.createElement(W.a,{className:"Button-icon",name:r}),Ke[n])})}},{key:"renderFooter",value:function(){var e=this,t=this.props,n=t.draft,r=t.isEdit,o=t.switches,a=t.rewardTagline,i=t.question,s=i.commercial,c=i.relationship.isAnonymous,l=i.circleInfo;l=void 0===l?{}:l;var u=l.canWriteCircle,p=this.state,f=p.checked,d=p.commentPermission,h=p.focusing,m=p.isEmpty,b=p.isTyping,v=p.isChecked,y=p.isFullscreen,w=p.loadingShown,g=p.reshipmentSettings,E=p.rewardNotication,O=p.rewardModalShown,C=p.rewardTagline,_=p.selectedText,k=p.dateNow,j=null;if(w)j=q.a.createElement(X.a,{count:3});else if(_)j=_.length+" 个字";else if(n){var S=null;S=n.updating||b?"草稿保存中…":n.updated&&k<1e3*n.updatedTime+6e4?"草稿已保存":n.updateFailed?q.a.createElement("span",{className:"AnswerForm-draftStatus--failed"},"草稿保存失败"):Q()(Ye,Object(J.toRelativeString)(n.updatedTime)),j=q.a.createElement("div",null,q.a.createElement(H.c,{preset:"plain",className:"AnswerForm-delete","aria-label":"删除草稿","data-tooltip":"删除草稿",onClick:this.onDeleteDraftModalShow},q.a.createElement(W.a,{name:"delete"})),S)}else s&&s.tip&&s.tip.message&&(j=s.tip.message);var P=q.a.createElement("div",{className:z()("AnswerForm-footer",{"AnswerForm-footer--hidden":!y&&!h&&m})},q.a.createElement("div",{className:"AnswerForm-footerContent AnswerForm-container"},q.a.createElement("div",{className:"AnswerForm-status"},j),!E&&q.a.createElement("span",{className:"AnswerForm-Notication"},"你的回答可以开启赞赏了"),!c&&u&&q.a.createElement(me,{isChecked:v,draft:n,isAnswerRewardable:o.isAnswerRewardable,handleChange:this.onChangecircleSettings}),o.isAnswerRewardable&&q.a.createElement("div",{className:"AnswerForm-openRewardButton"},q.a.createElement("label",{className:z()("AnswerForm-openRewardLabel",{"AnswerForm-openRewardDraftsLabel":n}),ref:function(t){e.label=t},htmlFor:"AnswerForm-openRewardInput"},q.a.createElement("input",{type:"checkbox",id:"AnswerForm-openRewardInput",checked:f,onChange:this.onChangerewardSettings}),"开启赞赏"),O&&q.a.createElement(ye.a,{submitRewardText:this.onSubmitReward,onClose:this.unactivateReward,tagline:C||a,edit:!1})),q.a.createElement("div",{className:"AnswerForm-footerRight"},r?q.a.createElement("a",{className:"AnswerForm-cancel",onClick:this.onCancel},n?"保存草稿并离开":"取消"):q.a.createElement(Y.c,{toggler:q.a.createElement(H.c,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t}},q.a.createElement(W.a,{left:!0,name:"setting"}),"设置"),reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem"},this.renderReshipmentSettings(g),q.a.createElement(Y.a,null),q.a.createElement(Ie.c,{onChange:this.handleChangeCommentPermission,current:d})),q.a.createElement(H.c,{className:"AnswerForm-submit",preset:"primary",color:"blue",onClick:this.onSubmit},r?"提交修改":"提交回答"))));return y?P:q.a.createElement(G.a,{bottom:!0,container:function(){return e.form}},P)}},{key:"render",value:function(){var e=this,t=this.props,n=t.bordered,r=t.className,o=t.defaultValue,a=t.draft,i=t.isEdit,s=t.question,c=t.currentUser,l=t.isPuQuestion,u=this.state,p=u.deleteDraftModalShown,f=u.isFullscreen,d=u.isToolbarSticky,h=u.isLeaveActive,m=u.toolbarMenuAttention,b=u.draftHistoryModalShown,v=(i?"修改":"写")+"回答...";if("commercial"===s.questionType){var y=l?"大咖提问":"品牌提问";v="这是一个「"+y+"」，请在回答前了解：「"+y+"」由品牌方管理，回答由品牌方筛选后展示，传播与社区提问有所区别。回答著作权归作者所有。"}var w=q.a.createElement(ve.a,{className:z()("AnswerForm-editor","AnswerForm-container",{isToolbarSticky:d}),onRef:function(t){e.editable=t},large:!0,spread:!0,allowDragAndDrop:!0,allowLinkCard:!0,allowMention:!0,allowToolbar:!0,allowUploadDocument:!0,allowVideoTitleChange:!0,allowToolbarSticky:!f,toolbarStickyOffset:He.f,getToolbarPlugins:this.getToolbarPlugins,getToolbarMenuPlugins:this.getToolbarMenuPlugins,toolbarMenuAttention:m,minRows:3,placeholder:v,defaultValue:a?a.editableContent:o,onChange:this.onChangeContent,onAfterChange:this.onAfterChangeContent,onFocus:this.onFocusWithAuth,onSelectText:this.onSelectText,onSubmit:this.onSubmit,onError:this.handleError,onLoadStart:this.onLoadStart,onLoadEnd:this.onLoadEnd,onUploadStart:this.handleUploadStart,onUploadEnd:this.handleUploadEnd,onUploadError:this.handleUploadError,onBeforeVideoUpload:this.handleBeforeVideoUpload,logo:Ve.a,location:s.title,editingContentType:"answer"});return q.a.createElement(oe.a,{module:"AnswerEditView",content:{type:"Answer",parent_token:String(s.id),author_member_hash_id:c.id}},q.a.createElement("form",{ref:function(t){e.form=t},className:z()("AnswerForm",r,{"AnswerForm--bordered":n}),onSubmit:function(e){return e.preventDefault()},noValidate:!0},f&&q.a.createElement("div",{className:z()("AnswerForm-fullscreenBackdrop",{isLeaveActive:h})}),q.a.createElement("div",{className:z()({"AnswerForm-fullscreenContent":f,isLeaveActive:h}),ref:function(t){return e.fullscreenContent=t}},q.a.createElement("div",{className:z()({"AnswerForm-fullscreenScroller":f}),ref:function(t){return e.scroller=t},onScroll:this.handleScroll},f&&q.a.createElement("div",{className:"AnswerForm-container",ref:this.handleFullscreenRef},q.a.createElement("div",{className:"AnswerForm-title"},s.title)),f&&q.a.createElement(H.c,{className:"AnswerForm-exitFullscreenButton",onClick:this.exitFullscreen,onMouseDown:function(e){return e.preventDefault()}},q.a.createElement(V._7,{text:!0,center:!0})," 退出全屏模式"),w),this.renderFooter()),f&&q.a.cloneElement(w,{readOnly:!0,className:"AnswerForm-cloneEditor",defaultValue:this.getCloneContent(),allowToolbarSticky:!1,toolbarMenuAttention:null,onRef:function(t){return e.cloneEditor=t}}),"org"===s.questionType&&q.a.createElement(ce,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),"commercial"===s.questionType&&q.a.createElement(fe,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),q.a.createElement(be.a,{title:"清除草稿",subtitle:i?"你确定要清除保存的草稿并取消编辑吗？":"你确定要清除保存的草稿吗？",shown:p,onCancel:this.onDeleteDraftModalHide,onSubmit:this.onDeleteDraft}),q.a.createElement(Re,{shown:b,onClose:this.hideDraftHistoryModal,type:"question",id:s.id,onReverted:this.handleReverted})))}}]),t}(D.Component),x.propTypes={question:L.a.object,bordered:L.a.bool,isEdit:L.a.bool,defaultValue:L.a.string},x.defaultProps={bordered:!1,isEdit:!1},x.contextTypes={authRequired:L.a.func,isCheckedCircle:L.a.bool,onChangecircleSettings:L.a.func},I=function(){var e=this;this.onCompositionStart=function(){e.composition=!0,e.syncDraft.cancel()},this.onCompositionEnd=function(){e.composition=!1,e.prevValue&&e.syncDraft(e.prevValue),e.prevValue=null},this.onChangeContent=function(t){e.loggingDeltaTime||(e.loggingDeltaTime=!0,e.startCompositionTime=Math.floor((new Date).getTime()/1e3)),e.hasEdited=!0,e.setState({content:t,isEmpty:t.isEmpty,isTyping:!0}),e.composition?e.prevValue=t:e.syncDraft(t)},this.onAfterChangeContent=function(e){var t=e.getSelection(),n=t.getIsBackward(),r=document.getSelection();if(r.rangeCount){var o=r.getRangeAt(0).cloneRange();o.collapse(n);var a=o.getBoundingClientRect();if(0===a.height){var i=o.commonAncestorContainer;1===i.nodeType&&(a=i.getBoundingClientRect())}if(0!==a.height){var s=a.bottom-(window.innerHeight-64);s>0&&window.scrollBy(0,s)}}},this.onChangeReshipmentSettings=function(t){if("need_payment"===t&&!e.props.currentUser.caEnabled)return void window.open("/copyright/invite");e.setState({reshipmentSettings:t})},this.onChangerewardSettings=function(t){var n=t.target.checked,r=e.props,o=r.question,a=o.relationship.isAnonymous,i=o.id,s=r.showNotification,c=e.state.rewardTagline;return a?void s("匿名回答无法开启赞赏，请先取消匿名","red"):!n||c?(e.setState({rewardTagline:"",checked:!1}),void e.props.updateQuestionRewardinfo(i,!1)):void e.activateReward()},this.onSubmitReward=function(t){e.setState({rewardTagline:t,checked:!0});var n=e.props.question.id;Promise.resolve(e.props.updateQuestionRewardinfo(n,!0)).then(function(){return e.unactivateReward()})},this.onDeleteDraftModalShow=function(){e.setState({deleteDraftModalShown:!0})},this.onDeleteDraft=function(){e.props.isEdit||(e.editable.reset(),e.setState({draft:"",content:{toHTML:function(){return""}},isEmpty:!0})),e.deleteDraft();var t=e.props.onDeleteDraft;t&&t()},this.onDeleteDraftModalHide=function(){e.setState({deleteDraftModalShown:!1})},this.onSubmit=this.context.authRequired(function(t){var n=e.state,r=n.reshipmentSettings,o=n.commentPermission,a=n.rewardTagline,i=n.isChecked;if(!e.editable)return void e.props.onCancel();var s=e.editable.toHTML();if(s){var c=e.props,l=c.isEdit,u=c.onSubmit,p=c.showNotification,f=c.question,d=f.id,h=f.questionType,m=f.circleInfo;m=void 0===m?{}:m;var b=m.canWriteCircle,v=c.currentUser;if(e.editable.hasVideo("upload"))return void e.handleError("video-uploading");if(e.editable.hasImage("upload"))return void e.handleError("image-uploading");if(e.editable.hasImage("error")||e.editable.hasVideo("error")&&!e.editable.hasVideo("error-review"))return t.persist(),void $.a.alert("草稿中含有上传失败的内容，请更改后重新提交",{title:"上传失败"});if(e.editable.hasVideo("error-review")||e.editable.hasVideo("censor"))return t.persist(),void $.a.alert("视频中包含未通过审核的信息，请更改后重新提交",{title:"视频未通过审核"});var y={content:s};l||(y.reshipmentSettings=r||"allowed",y.commentPermission=o||"all"),y.rewardSetting={canReward:Boolean(a),tagline:a},b&&(y.isCircle=i);var w=l?"Edit":"Answer";Promise.resolve(u(y)).then(function(){re.default.trackEvent(null,{id:4931,action:"StatusReport"},{module:[{card:{content:[{type:"Answer",parent_token:String(d),author_member_hash_id:v.id}]}}],status:{result:"Success",event:{action:"Submit"}}}),"commercial"===h&&p("已发布！由品牌筛选后进入推荐区。")}).catch(function(){re.default.trackEvent(e,{id:4931,action:"StatusReport"},{status:{result:"Fail",event:{action:"Submit"}}})}),"Answer"===w&&re.default.trackEvent(e,{id:4930}),re.default.trackEvent(e,{action:w,is_intent:!1})}}),this.onCancel=function(){var t=e.props.onCancel;return e.editable.hasVideo("upload")?void e.handleError("video-uploading-draft"):e.editable.hasImage("upload")?void e.handleError("image-uploading-draft"):(e.hasEdited&&e.syncDraftImmediately(),void(t&&t()))},this.onFocus=function(){"org"===e.props.question.questionType&&e.shouldAnswerOrgQuestionModalShow&&e.handleAnswerOrgQuestionModalShow(),e.setState({focusing:!0})},this.onFocusWithAuth=function(){return e.onFocusAuthChecked?e.onFocus():(e.onFocusAuthChecked=!0,e.context.authRequired(e.onFocus)())},this.onSelectText=function(t){e.setState({selectedText:t.replace(/\s/g,"")})},this.onLoadStart=function(){e.setState({loadingShown:!0})},this.onLoadEnd=function(){e.setState({loadingShown:!1})},this.getToolbarPlugins=function(){var t=e.state,n=t.isFullscreen,r=t.isLeaveActive;return(!n||r)&&q.a.createElement(K.a,{key:"enterFullscreen",icon:q.a.createElement(V._6,{text:!0}),className:"AnswerForm-enterFullscreenButton",onClick:e.toggleFullscreen},"全屏模式")},this.getToolbarMenuPlugins=function(){return e.props.isProduction?null:q.a.createElement(K.b,{onClick:e.showDraftHistoryModal},q.a.createElement(V._74,{text:!0}),"历史版本")},this.toggleFullscreen=function(){var t=e.state.isFullscreen,n=function(){var t=e.scroller.querySelector(".Editable");return t?t.offsetTop:0};e.scrollTop=t?e.scroller.scrollTop-n():Math.max(-e.scroller.getBoundingClientRect().top,0),e.setState({isFullscreen:!t},function(){e.state.isFullscreen?e.scrollTop>0&&(e.scroller.scrollTop=e.scrollTop+n()):window.scrollTo(0,e.scroller.getBoundingClientRect().top-document.documentElement.getBoundingClientRect().top+e.scrollTop)})},this.exitFullscreen=function(){e.cloneEditor.resetWithValue(e.getCloneContent());var t=function t(){e.fullscreenContent.removeEventListener("animationend",t),e.setState({isLeaveActive:!1}),e.toggleFullscreen()};e.fullscreenContent.addEventListener("animationend",t),e.setState({isLeaveActive:!0})},this.handleFullscreenRef=function(t){t?ne.hide():(ne.show(),e.setState({isToolbarSticky:!1}))},this.handleScroll=function(){e.isHandleScrollPending||(e.isHandleScrollPending=!0,requestAnimationFrame(function(){var t=e.state,n=t.isFullscreen,r=t.isToolbarSticky,o=!1;if(n&&e.scroller){var a=e.scroller.querySelector(".Editable-toolbar");o=!!a&&e.scroller.scrollTop===a.offsetTop}o!==r&&e.setState({isToolbarSticky:o}),e.isHandleScrollPending=!1}))},this.showDraftHistoryModal=function(){e.syncDraft.flush(),e.setState({draftHistoryModalShown:!0})},this.hideDraftHistoryModal=function(){e.setState({draftHistoryModalShown:!1})},this.closeRewardModal=function(){e.label.click()},this.handleUploadStart=function(){e.setState({isUploading:!0})},this.handleUploadEnd=function(){e.setState({isUploading:!1})},this.handleUploadError=function(t,n){switch(n){case"video":e.handleError("video-upload-error");break;case"image":e.handleError("image-upload-error",t)}},this.handleAnswerOrgQuestionModalShow=function(){e.setState({answerModalShown:!0}),e.shouldAnswerOrgQuestionModalShow=!1},this.handleAnswerModalHide=function(){e.setState({answerModalShown:!1})},this.syncDraftImmediately=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state.content,n=t.toHTML(),r=e.state.lastUpdatedTime,o=Math.floor((new Date).getTime()/1e3),a=void 0;a=!r||e.startCompositionTime-r>180?o-e.startCompositionTime:o-r,e.setState({isTyping:!1}),n?e.updateDraft(n,a).then(function(t){t.payload&&t.payload.updatedTime&&e.setState({lastUpdatedTime:t.payload.updatedTime}),e.loggingDeltaTime=!1,delete e.startCompositionTime,re.default.trackEvent(e,{action:"AutoSave"})}):e.deleteDraft()},this.syncDraft=Object(te.debounce)(this.syncDraftImmediately,2e3),this.updateDraft=function(t,n){var r=e.props,o=r.question.id,a=r.draft,i=r.addDraft,s=r.updateDraft;return a?s(o,t,n):i(o,t,n)},this.focus=function(){e.editable&&e.editable.focus()},this.hasVideo=function(){return!!e.editable&&e.editable.hasVideo()},this.handleChangeCommentPermission=function(t,n){var r=void 0===n?t:n;e.setState({commentPermission:r})},this.handleReshipmentSettings=function(t){"need_payment"!==t||e.props.currentUser.caEnabled||window.open("/copyright/invite"),e.setState({reshipmentSettings:t})},this.handleError=function(t,n){Object(Be.b)(t,n,e.props.showNotification)},this.handleBeforeVideoUpload=function(){var t=e.props.question;return!t.relationship||!t.relationship.isAnonymous},this.handleReverted=function(t){e.editable.resetWithValue(t.draft.content)},this.unactivateReward=function(){e.setState({rewardModalShown:!1})},this.activateReward=function(){e.setState({rewardModalShown:!0})},this.onChangecircleSettings=function(t){var n=t.target.checked,r=e.context.onChangecircleSettings;e.setState({isChecked:n}),r(n)}},A=R))||A;t.a=Ge},1634:function(e,t,n){e.exports=n.p+"assets/logo.f6eef033.png"},1635:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,c,l,u=function(e){return e.componentList.filter(function(e){var t=e.component;return Boolean(t)}).map(function(e){return e.component})},p=n(0),f=n.n(p),d=function(e){var t=e.data,n=e.name,r=e.component;return{name:n,component:r?f.a.createElement(r,{key:n,data:t}):null}},h=n(2),m=n.n(h),b=n(6),v=n(23),y=n.n(v),w=n(7),g=n(9),E=n(4),O=(n(63),n(180)),C=n(293),_=n(289),k=n(10),j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),P=function(e){var t=e.relationship;return t=void 0===t?{}:t,t.isThanked?"取消感谢":"感谢"},T={answer:m.a.object.isRequired,renderThankButtonText:m.a.func,zaInfo:m.a.number},N=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Object.keys(T)),["updateAnswerThank"]),A=(i=Object(C.a)(null))((l=c=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.buttonRef=f.a.createRef(),a.handleUpdateThanked=a.context.authRequired(function(){var e=a.props,t=e.answer,n=t.id,r=t.relationship.isThanked,o=e.updateAnswerThank,i=e.zaInfo,s=!r;w.default.trackEvent(a.buttonRef.current,j({action:s?"Thank":"UnThank",element:"Button"},i&&{id:i})),o(n,s)},k.M.thank),i=n,o(a,i)}return a(t,e),S(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.answer,r=t.renderThankButtonText,o=y()(this.props,N),a=r(n);return f.a.createElement(f.a.Fragment,null,f.a.createElement(_.c,{keyMap:{THANK:"t"},handlers:{THANK:function(t){e.buttonRef.current.focus(),e.handleUpdateThanked(t)}}}),f.a.createElement(E.c,j({onRef:this.buttonRef,preset:"plain",onClick:this.handleUpdateThanked,icon:g._9,label:a},o)))}}]),t}(f.a.Component),c.contextTypes={authRequired:m.a.func},c.propTypes=T,c.defaultProps={renderThankButtonText:P},s=l))||s,x=Object(b.connect)(null,{updateAnswerThank:O.D})(A);n.d(t,"b",function(){return u}),n.d(t,!1,function(){return d}),n.d(t,"a",function(){return x})},1637:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(28),i=function(e,t){return t>=e+1?"rating":t>=e+.5?"ratingHalf":"ratingNone"},s=function(e){var t=e.score;if(0===t)return null;var n=Math.round(2*t)/2;return o.a.createElement("div",{className:"Rating"},Array.from({length:5}).map(function(e,t){return o.a.createElement(a.a,{style:{marginLeft:0},key:t,width:15,height:15,name:i(t,n)})}))};t.a=s},1644:function(e,t){},1645:function(e,t){},1647:function(e,t){},1648:function(e,t){},1649:function(e,t){},1650:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),a=r(n(32)),i=function(e){return o.default.createElement(a.default,Object.assign({width:"18",height:"18",viewBox:"0 0 18 18"},e),o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("path",{fill:"#C2A469",d:"M12.17 2.18l2.077.372c.613.11 1.092.588 1.201 1.2l.372 2.079c.038.211.12.412.243.588L17.27 8.15c.356.51.356 1.188 0 1.698l-1.207 1.732a1.485 1.485 0 0 0-.243.588l-.372 2.078a1.485 1.485 0 0 1-1.2 1.201l-2.079.372c-.211.038-.412.12-.588.243L9.85 17.27a1.485 1.485 0 0 1-1.698 0l-1.732-1.207a1.485 1.485 0 0 0-.588-.243l-2.078-.372a1.485 1.485 0 0 1-1.201-1.2l-.372-2.079a1.485 1.485 0 0 0-.243-.588L.73 9.85a1.485 1.485 0 0 1 0-1.698l1.207-1.732c.122-.176.205-.377.243-.588l.372-2.078a1.485 1.485 0 0 1 1.2-1.201l2.079-.372c.211-.038.412-.12.588-.243L8.15.73a1.485 1.485 0 0 1 1.698 0l1.732 1.207.588.243z"}),o.default.createElement("path",{fill:"#FFF",d:"M9 11c-.481 0-.893-.19-1.236-.571a1.982 1.982 0 0 1-.514-1.373V5.945c0-.535.171-.993.514-1.374C8.107 4.191 8.52 4 9 4s.893.19 1.236.571c.343.381.514.839.514 1.374v3.11c0 .535-.171.993-.514 1.374-.343.38-.755.571-1.236.571zm3.143-2.889a.367.367 0 0 1 .107.264v.75c0 .863-.278 1.614-.832 2.253-.555.639-1.24 1.005-2.057 1.098v1.774c.002.2-.119.301-.361.301s-.363-.1-.361-.301v-1.774c-.816-.093-1.502-.46-2.057-1.098a3.326 3.326 0 0 1-.832-2.253v-.75c0-.102.036-.19.107-.264A.34.34 0 0 1 6.111 8a.34.34 0 0 1 .254.111.367.367 0 0 1 .107.264v.75c0 .723.248 1.341.742 1.854.495.514 1.09.771 1.786.771s1.291-.257 1.786-.77a2.578 2.578 0 0 0 .742-1.855v-.75c0-.102.035-.19.107-.264A.341.341 0 0 1 11.889 8c.098 0 .182.037.254.111z"})))},s=i;t.default=s},1651:function(e,t){},1652:function(e,t){},1653:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1654);t.debounce=r.debounce},1654:function(e,t,n){"use strict";function r(e,t,n){var r=!1,o=a.default(function(){r=!1,e.apply(void 0,arguments)},t,n);return Object.assign(function(){r=!0,o.apply(void 0,arguments)},{cancel:o.cancel,flush:o.flush,isPending:function(){return r}})}var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(116));t.debounce=r},1655:function(e,t){},1656:function(e,t){},1657:function(e,t){},1658:function(e,t){},1659:function(e,t){},1660:function(e,t){},1661:function(e,t){},1662:function(e,t){},1663:function(e,t){},1664:function(e,t){},1665:function(e,t){},1666:function(e,t){},1667:function(e,t){},1668:function(e,t){},1669:function(e,t,n){function r(e){return o(2,e)}var o=n(1670);e.exports=r},1670:function(e,t,n){function r(e,t){var n;if("function"!=typeof t)throw new TypeError(a);return e=o(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var o=n(1671),a="Expected a function";e.exports=r},1671:function(e,t,n){function r(e){var t=o(e),n=t%1;return t===t?n?t-n:t:0}var o=n(1672);e.exports=r},1672:function(e,t,n){function r(e){if(!e)return 0===e?e:0;if((e=o(e))===a||e===-a){return(e<0?-1:1)*i}return e===e?e:0}var o=n(1673),a=1/0,i=1.7976931348623157e308;e.exports=r},1673:function(e,t,n){function r(e){if("number"==typeof e)return e;if(a(e))return i;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=l.test(e);return n||u.test(e)?p(e.slice(2),n?2:8):c.test(e)?i:+e}var o=n(88),a=n(198),i=NaN,s=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,p=parseInt;e.exports=r},1674:function(e,t){},1675:function(e,t){},1676:function(e,t){},1677:function(e,t){},1678:function(e,t){},1679:function(e,t){},1680:function(e,t){},1681:function(e,t){},1682:function(e,t){},1683:function(e,t){},1684:function(e,t){},1687:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,c,l,u=n(2),p=n.n(u),f=n(0),d=n.n(f),h=n(548),m=(n.n(h),n(287)),b=(n.n(m),n(28)),v=n(1506),y=n(1516),w=n(1517),g=n(549),E=n(1511),O=n(290),C=n(288),_=n(1737),k=(n.n(_),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),j=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S=(i=Object(C.a)(function(e){var t=e.favlist,n=e.trackCardShow,r=void 0===n||n;return{module:"CollectionItem",card:{content:{type:"Collection",token:String(t.id),item_num:t.answerCount,follower_num:t.followerCount,publish_timestamp:1e3*t.updateTime,author_member_hash_id:(t.creator||{}).id}},trackCardShow:r}}))((l=c=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.state={commentPattern:"fixed",commentsShown:!1,commentsAutoFocus:!0},a.handleCommentsShown=function(e,t){a.setState(t)},a.handleCommentsHide=function(){a.setState({commentsShown:!1})},i=n,o(a,i)}return a(t,e),j(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,r=t.favlist,o=t.favlist,a=o.id,i=o.type,s=o.title,c=o.updatedTime,l=o.answerCount,u=o.followerCount,p=o.isFollowing,f=o.isPublic,C=o.creator,_=void 0===C?{}:C,j=o.commentCount,S=t.status,P=t.action,T=t.lastreadTouchable,N=t.zaInfos,A=N.follow,x=N.options,R=t.renderOptions,I=this.state,M=I.commentsShown,L=I.commentsAutoFocus,D=I.commentPattern,q="/collection/"+a,B=d.a.createElement("a",{href:q,target:"_blank"},s);if(n===v.c.plain)return d.a.createElement(v.e,{data:r,link:q,title:B});var U={id:a,type:i};return n===v.c.default?d.a.createElement(v.e,{data:r,link:q,title:d.a.createElement("div",{className:"FavlistItem-title"},B,!f&&d.a.createElement(b.a,{grey:!0,className:"FavlistItem-lockIcon",name:"lock"})),meta:S||d.a.createElement(v.d,null,Object(h.toDateString)(c)+" 更新",Object(m.formatNumber)(l)+" 条内容",Object(m.formatNumber)(u)+" 人关注"),extra:P}):d.a.createElement(v.e,{data:r,link:q,onRef:function(t){e.contentItem=t},title:B,lastreadTouchable:T},d.a.createElement(v.b,{key:"favlist-item-cells"},d.a.createElement("div",null,d.a.createElement("span",null,"关注数："),Object(m.formatNumber)(u)),d.a.createElement("div",null,d.a.createElement("span",null,"最后更新于："),Object(h.toDateString)(c)),d.a.createElement("div",null,d.a.createElement("span",null,"作者："),d.a.createElement(O.a,{user:_}))),d.a.createElement(v.a,{key:"favlist-item-actions"},d.a.createElement(g.a,k({},U,{isFollowing:p,zaId:A})),d.a.createElement(y.a,{onClick:this.handleCommentsShown,commentsShown:M,count:j}),d.a.createElement(E.a,k({},U,{title:s,authorName:_&&_.name})),R&&R(function(){return e.contentItem},x)),d.a.createElement(w.a,{parent:r,commentPattern:D,shown:M,autoFocus:L,onClose:this.handleCommentsHide}))}}]),t}(f.Component),c.propTypes={preset:p.a.oneOf(Object.values(v.c)),zaInfos:p.a.shape({follow:p.a.number,options:p.a.number}),renderOptions:p.a.func},c.defaultProps={preset:v.c.default,zaInfos:{}},s=l))||s;t.a=S},1693:function(e,t){t.f=Object.getOwnPropertySymbols},1694:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(1916),a=r(o),i=n(1919),s=r(i);t.default=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=(0,s.default)(e);!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,a.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},1695:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(1927),a=r(o),i=n(1929),s=r(i),c="function"==typeof s.default&&"symbol"==typeof a.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===c(a.default)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":c(e)}},1696:function(e,t,n){t.f=n(31)},1697:function(e,t,n){var r=n(29),o=n(49),a=n(201),i=n(1696),s=n(117).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=a?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:i.f(e)})}},1698:function(e,t,n){function r(e,t,n){var r=e[t];s.call(e,t)&&a(r,n)&&(void 0!==n||t in e)||o(e,t,n)}var o=n(1770),a=n(1700),i=Object.prototype,s=i.hasOwnProperty;e.exports=r},1699:function(e,t,n){var r=n(1521),o=r.Symbol;e.exports=o},1700:function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},1701:function(e,t){var n=Array.isArray;e.exports=n},1702:function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},1703:function(e,t,n){(function(e){var r=n(1773),o="object"==typeof t&&t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o,s=i&&r.process,c=function(){try{var e=a&&a.require&&a.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=c}).call(t,n(40)(e))},1704:function(e,t,n){var r=n(1554),o=n(1521),a=r(o,"Map");e.exports=a},1705:function(e,t,n){var r=n(2011),o=n(1783),a=Object.prototype,i=a.propertyIsEnumerable,s=Object.getOwnPropertySymbols,c=s?function(e){return null==e?[]:(e=Object(e),r(s(e),function(t){return i.call(e,t)}))}:o;e.exports=c},1706:function(e,t,n){var r=n(2015),o=n(1704),a=n(2016),i=n(2017),s=n(2018),c=n(1582),l=n(1774),u=l(r),p=l(o),f=l(a),d=l(i),h=l(s),m=c;(r&&"[object DataView]"!=m(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=m(new o)||a&&"[object Promise]"!=m(a.resolve())||i&&"[object Set]"!=m(new i)||s&&"[object WeakMap]"!=m(new s))&&(m=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case u:return"[object DataView]";case p:return"[object Map]";case f:return"[object Promise]";case d:return"[object Set]";case h:return"[object WeakMap]"}return t}),e.exports=m},1707:function(e,t,n){function r(e){var t=new e.constructor(e.byteLength);return new o(t).set(new o(e)),t}var o=n(2021);e.exports=r},1708:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAEDElEQVR4Ae3cQW5cRwwE0FGgAzhA7porxGe1gRxBWev9RaHRPc0syrsCySKnCmRjJMgfP/759fW6+O/fv//61u3Pn7+/YePfgq/Xy3zj1ptv3Hqx9cZP4z9OE5ZvT4Easqff8eoaclzSPcJPy1dvrPXi1Ruc8p3PfLHz7GL77/I5bzdkV9HD9TXksKC7dDVkV8HD9Y83RH5vnHHx6o1N+fYX218sf6o3Xz5x4jM/8XdDVGwY15BhA2xfQ1RkGMc3ZHi+R/t0gy1YvfHW38bdkNuKh341JAh0O1xDbise+o2/Ias33vzVN0U9duvl28XdkF0FD9fXkMOC7tLVkF0FD9fHN+T2jU39fEOSHokv1af4af5uSFL8cryGXBY8tashSaHL8ccbsnqj3z2v83iz3x3389nP+C7uhuwqeLi+hhwWdJeuhuwqeLj+05t8mP843btvuAPf1qcbogPDuIYMG2D7GqIiw/hj9e9D0k1NN976lK8+1htf5bN+F+/O1w3ZdeBwfQ05LOguXQ3ZVfBw/eN7iDc43UTn2c23v/yrOM1jP/ON2z/lG7de3A1RkWFcQ4YNsH0NUZFh/PH19fXt79RXb6bzr9abn27uav7qfOY7j/3NTzjxdUOSgpfjNeSy4KldDUkKXY7Hn2V583bn8wbLn+Kpf6rfjdtfPuN+PuPiboiKDOMaMmyA7WuIigzj+LMs50s303yxN3WVbzXf/uLEl+J+HvkTlr8bkhS7HK8hlwVP7WpIUuhy/PGzrNX+3kDrV2+sfKl+Nd/5Ur1x69N85ie+boiKDeMaMmyA7WuIigzjz3TTVm+k+fKn+K4e9kt8zmO+8cSf4omvG6IDw7iGDBtg+xqiIsN4+XuIN9KbuPp5Ep/xxO88p+sTv/E0r/FuiIoM4xoybIDta4iKDOP4PcT50o1MNzvV20+c6lf7my+2f4qbL7bez9MNUbFhXEOGDbB9DVGRYfz4nfruPN7E/xtfmmd1ft8E+Y3Lb7wbooLDuIYMG2D7GqIiw3j5e8juvN5QceL35lovTnwpnvpZv5pvfTdERYZxDRk2wPY1REWG8eP/XHz3DfbzenONi9N88qV8+cWr9Snf+ezXDVGRYVxDhg2wfQ1RkWH8eEOcJ90889MNXc23v1i+hFN9iq/yr+rRDUkKX47XkMuCp3Y1JCl0OR7fkMvzvNIN9yabbzzNb37iM574U779uyFJ0cvxGnJZ8NSuhiSFLsfH35B0Y1f1SHze7JRv/1Rv3Hr7ibshKjaMa8iwAbavISoyjOMbkm7i6fnt540V2//d9fZbxc5nfTdERYZxDRk2wPY1REWG8eMNSTf69rzp5jpPml8+88XyW2/c+tX8boiKDuMaMmyA7WuIigzj/wC7sm2izpKNiwAAAABJRU5ErkJggg=="},1709:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(610),a=r(o),i=n(611),s=r(i);e.exports={TransitionGroup:s.default,CSSTransitionGroup:a.default}},1710:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var u=n(0),p=n.n(u),f=n(3),d=n.n(f),h=n(4),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=function(e){function t(){var e;r(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return s.handleClick=function(){var e=s.props;(0,e.onSelect)(e.page)},s}return a(t,e),m(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.isCurrent,r=e.className;return p.a.createElement(h.c,{preset:h.b.Plain,className:d()("PaginationButton",{"PaginationButton--current":n},r),onClick:this.handleClick,disabled:n},t)}}]),t}(u.Component),v=(n(1722),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.from({length:t},function(t,n){return n+e})},w=function(e,t){return t<=5?y(1,t):e>t-3?[1,"..."].concat(l(y(t-3,3)),[t]):e<=3?[1].concat(l(y(2,3)),["...",t]):[1,"..."].concat(l(y(e-Math.floor(1.5),3)),["...",t])},g=function(e,t){return function(){e.apply(void 0,arguments)}},E=function(e){function t(){return i(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),v(t,[{key:"render",value:function(){var e=this.props,t=e.onSelect,n=e.className,r=e.clickCallback,o=this.props.current,a=this.props.total,i=r&&g(r),s=i||t,c=w(o,a);return p.a.createElement("div",{className:d()("Pagination",n)},o>1&&o<=a&&p.a.createElement(b,{className:"PaginationButton-prev",onSelect:s,text:"上一页",page:o-1}),c.map(function(e,t){return"number"==typeof e?p.a.createElement(b,{onSelect:s,text:e,page:e,key:t,isCurrent:o===e}):p.a.createElement("button",{disabled:!0,key:t,className:"PaginationButton PaginationButton--ellipsis"},e)}),o>0&&o<a&&p.a.createElement(b,{className:"PaginationButton-next",onSelect:s,text:"下一页",page:o+1}))}}]),t}(u.Component);E.defaultProps={current:1,total:1,onSelect:function(){}},n.d(t,"a",function(){return E}),n.d(t,!1,function(){return w})},1719:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),c=n.n(s),l=n(3),u=n.n(l),p=(n(1907),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.alt,o=r(e,["className","alt"]);return c.a.createElement("img",p({className:u()("ImageAlias",t),alt:n},o))}}]),t}(s.Component),h=d;t.a=h},1720:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}},1721:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,P.default)(e).reduce(function(t,n){return t[(0,T.decamelize)(n)]=e[n],t},{});return A.default.stringify(t)}function a(e,t){var n=o(t);return n&&(e.indexOf("?")>-1?e+="&"+n:e+="?"+n),j.default.race([U(e)])}function i(e){var t=e;return e>999&&(t=(e/1e3).toFixed(1)+"K"),e>9999&&(t=(e/1e4).toFixed(1)+"M"),t}function s(e){return(e||0).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")}function c(e,t,n){return(Array.isArray(t)?t:t.replace(/\[/g,".").replace(/\]/g,"").split(".")).reduce(function(e,t){return(e||{})[t]},e)||n}function l(e){return["[object Array]","[object Object]"].includes(Object.prototype.toString.call(e))}function u(e){if(!l(e))throw new Error("obj 不是一个对象！");var t=Array.isArray(e)?[]:{};return(0,P.default)(e).forEach(function(n){"object"!==(0,_.default)(e[n])?t[n]=e[n]:null===e[n]?t[n]="":t[n]=u(e[n])}),t}function p(e){if(!l(e))throw new Error("obj 不是一个对象！");var t=Array.isArray(e)?[]:{};return(0,P.default)(e).forEach(function(n){"object"!==(0,_.default)(e[n])?t[n]=e[n]:t[n]=p(e[n])}),t}function f(e){return(0,O.default)(parseInt(e,10))?"00:00":[parseInt(e/60,10),e%60].join(":").replace(/\b(\d)\b/g,"0$1")}function d(){var e=document.createElement("div");e.className="adsbox",document.body.appendChild(e);var t="none"===getComputedStyle(e).display;return document.body.removeChild(e),t}function h(e){return e&&e.includes("1200x500")?e.replace(/(.*)1200x500/,"$1600x250"):e}function m(e){var t=h(e);return t&&t.includes("adx4.")||!t?t:t.includes("600x250")?t.replace(/(.*)\./,"$1|adx4."):t.replace(/(.*)\./,"$1_adx4.")}function b(e){return e&&e.includes("adx4.")?e:e&&e.match(/\d*\x\d*/)?e.replace(/(.*)\./,"$1|adx4."):e.replace(/(.*)\./,"$1_adx4.")}function v(e){if("number"!=typeof e)return"";var t=String(e);return t.indexOf(".")>0?t.replace(/(\d)(?=(\d{3})+\.)/g,"$1,"):t.replace(/(\d)(?=(\d{3})+$)/g,"$1,")}function y(e){for(var t=(""+e).split("."),n=(0,g.default)(t,2),r=n[0],o=n[1],a=[],i=1;i<=r;i+=1)a.push(1);return parseInt(o,10)?(a.push(Number("0."+o).toFixed(1)),a):a}Object.defineProperty(t,"__esModule",{value:!0}),t.numberToArr=t.formatNumber=t.imgUrlAddAdx4=t.loadBanner=t.requestByFetch=t.AddWatermark=t.imgInformationChange=t.convertNullDeepClone=t.deepClone=t.isAdblockEnabled=t.request=t.str2Json=t.get=t.secondesFormat=t.numberFormatDot=t.numberFormat=t.track=t.onCompletelyShowedOnce=t.onShowedOnce=t.isShowed=void 0;var w=n(1694),g=r(w),E=n(1947),O=r(E),C=n(1695),_=r(C),k=n(316),j=r(k),S=n(1768),P=r(S),T=n(8),N=n(25),A=r(N),x=n(1809),R=function(e,t){return(0,P.default)(e).reduce(function(t,n){var r=e[n];return void 0!==r&&null!==r&&t.append(n,r),t},t||new FormData)},I=function(e){var t=e.url,n=e.params;return t?fetch(t,{method:"post",headers:{"X-Requested-With":"fetch"},body:R((0,T.decamelizeKeys)(n))}).catch(function(){}):j.default.reject(new Error("request but no url"))},M=function(e){var t=e.query,n=e.url;return fetch(n+"?"+A.default.stringify(t)).then(function(e){if(e.status>=400)throw new Error("Bad response from server");return e.json()}).then(function(e){return e.banner}).catch(function(e){console.error(e)})},L=function(e){if(!document.body.contains(e))return!1;var t=e.getBoundingClientRect(),n=document.documentElement;return t.top<(window.innerHeight||n.clientHeight)},D=function(e,t,n){if(L(e))return void t.call(n);var r=(0,x.subscribe)("scroll",function(){L(e)&&(t.call(n),r.unsubscribe())})},q=function(e){if(!document.body.contains(e))return!1;var t=e.getBoundingClientRect(),n=document.documentElement;return t.bottom<(window.innerHeight||n.clientHeight)},B=function(e,t,n){if(q(e))return void t.call(n);var r=(0,x.subscribe)("scroll",function(){q(e)&&(t.call(n),r.unsubscribe())})},U=function(e){return new j.default(function(t,n){var r=new Image;r.onload=t,r.addEventListener("error",n),r.src=e})},z=function(e){try{return JSON.parse(e)}catch(e){return console.error(e),{}}};t.isShowed=L,t.onShowedOnce=D,t.onCompletelyShowedOnce=B,t.track=a,t.numberFormat=i,t.numberFormatDot=s,t.secondesFormat=f,t.get=c,t.str2Json=z,t.request=U,t.isAdblockEnabled=d,t.deepClone=p,t.convertNullDeepClone=u,t.imgInformationChange=h,t.AddWatermark=m,t.requestByFetch=I,t.loadBanner=M,t.imgUrlAddAdx4=b,t.formatNumber=v,t.numberToArr=y},1722:function(e,t){},1735:function(e,t,n){"use strict";function r(e){return/^[a-z0-9]{32}$/.test(e)}function o(e){var t=e.match(a);return t&&t[1]}t.b=r,t.a=o;var a=/#comment-(\d+)/},1737:function(e,t){},1762:function(e,t,n){e.exports={default:n(1913),__esModule:!0}},1763:function(e,t,n){var r=n(113),o=n(49),a=n(302);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],i={};i[e]=t(n),r(r.S+r.F*a(function(){n(1)}),"Object",i)}},1764:function(e,t,n){var r=n(628),o=n(327).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},1765:function(e,t,n){var r=n(1621),o=n(317),a=n(195),i=n(606),s=n(120),c=n(626),l=Object.getOwnPropertyDescriptor;t.f=n(86)?l:function(e,t){if(e=a(e),t=i(t,!0),c)try{return l(e,t)}catch(e){}if(s(e,t))return o(!r.f.call(e,t),e[t])}},1766:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1591),a=r(o),i=n(1592),s=r(i),c=n(1593),l=r(c),u=n(1594),p=r(u),f=n(1595),d=r(f),h=n(0),m=r(h),b=function(e){function t(e){(0,s.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.state={hasError:!1},n}return(0,d.default)(t,e),(0,l.default)(t,[{key:"componentDidCatch",value:function(e,t){this.handleError(e,t)}},{key:"unstable_handleError",value:function(e,t){this.handleError(e,t)}},{key:"handleError",value:function(e,t){this.setState({hasError:!0}),console.error(e),t&&console.error(t)}},{key:"render",value:function(){return this.state.hasError?null:this.props.children}}]),t}(m.default.Component);t.default=b},1767:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e instanceof A.Component?(0,x.findDOMNode)(e):e}function a(e,t,n){var r=t.moduleName,a=void 0===r?"ExternalAdItem":r,i=t.index,s=n.card,c=s.zaAdInfoJson,l=s.type,u=void 0===l?"ExternalAd":l,p=s.id,f=s.token,d=n.otherModule,h=(0,N.default)({card:{content:{ad_info:c&&JSON.parse(c),type:u,id:p,token:f}}},d);L.default.setModule(o(e),{module:"ExternalAdItem",module_name:a,is_ad:!0,index:i},h)}function i(e,t,n,r){"cardShow"===e?L.default.trackCardShow(o(t),n,r):"trackEvent"===e&&L.default.trackEvent(o(t),n,r)}function s(e,t){var n=e,r=/^https?:\/\/[\w-.]+(:\d+)?/i.exec(e)[0];return r&&r.match("zhihu.com")&&(n=n+"&ets="+(new Date).getTime()),(0,U.track)(n,n.indexOf("sugar.zhihu.com")>-1&&t?{fl:t}:void 0)}function c(e,t,n){var r=e.filter(Boolean).map(function(e){return s(e+(n?"&et="+n:""),t)}),o=P.default.all(r).catch(function(){return null});return P.default.race([o,new P.default(function(e){return setTimeout(e,500)})])}function l(e){var t=e.filter(Boolean).map(function(e){return s(e)}),n=P.default.all(t).catch(function(){return null});return P.default.race([n,new P.default(function(e){return setTimeout(e,500)})])}function u(e,t){e&&e.length&&e.map(function(e){return s(e,t)})}function p(e,t,n,r){t&&t.length&&(0,U.onShowedOnce)(e,function(){t.map(function(e){return P.default.race([s(e,n),new P.default(function(e,t){return setTimeout(t,5e3)})]).then(function(){return{status:200}}).catch(function(){return{status:600}}).then(function(t){return{et:"third_imp",ev:t.status||601,etu:btoa(e),plugin:(0,U.isAdblockEnabled)()}}).then(function(e){if(e){var t=I.default.stringify(e);(r||[]).map(function(e){return e?(0,U.request)(t?e+(e.includes("?")?"&":"?")+t:e):null})}})})})}function f(e,t,n){t&&t.length&&(0,U.onShowedOnce)(e,function(){t.map(function(e){return s(e+"&et=auto_play",n)})})}function d(e,t){t&&t.length&&(0,U.onShowedOnce)(e,function(){t.map(function(e){return s(""+e)})})}function h(e,t){var n=t.impressionTracks,r=t.debugTracks,o=t.viewTracks,a=t.xAppFlavor;u(n,a,r),p(e,o,a,r)}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3],o=t.viewEntity,s=void 0===o?{}:o,c=t.modules,l=n||{},u=l.view,p=l.extra;a(e,s,c),setTimeout(function(){(0,U.onCompletelyShowedOnce)(e,function(){i("cardShow",e,u,p)})},0),h(e,r)}function b(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").indexOf("c.gdt.qq.com")>-1}function v(e,t,n){if(!b(e)||!t||!n)return e;var r=t.getBoundingClientRect(),o=r.left,a=r.top,i=n.clientX,s=n.clientY,c=i-o,l=s-a,u={__DOWN_X__:Math.abs(c),__DOWN_Y__:Math.abs(l),__UP_X__:Math.abs(c),__UP_Y__:Math.abs(l)};return(0,j.default)(u).reduce(function(e,t){return e.replace(t,u[t])},e)}function y(e,t,n,r){console.log("We are sending a "+t+" request to Hybrid");var o=e.conversionTracks,a=(0,_.default)(e.creatives,1),i=a[0],s=e.videoProgress,c=e.sdk,l=e.downloadSilent,u=void 0!==l&&l,p=e.isNewWebview,f=void 0!==p&&p,d=e.conversionTrackJs,h=e.isSpeeding,m=e.cdnMap,b=e.experimentInfo,y=e.extraConversionTracks,w=i.landingUrl,g=i.appPromotionUrl,E=i.deepUrl,O=i.packageName,C=i.brand,k=i.thumbnailExtraInfo,j=i.nativeUrl,S=void 0===j?"":j,P=i.canvas;return[z.commonAd,z.preloadAd].includes(t)?{is_speeding:h,cdn_map:m,download_silent:u,conversion_tracks:o,sdk:(0,B.decamelizeKeys)(c),conversion_track_js:d,extra_conversion_tracks:(0,B.decamelizeKeys)(y),experiment_info:b,creative:{package_name:O,shouldUseNewWebView:f,landing_url:v(w,n,r),app_promotion_url:g,deep_url:E,thumbnail_extra_info:(0,B.decamelizeKeys)(k),video_progress:s,brand:C,native_url:S,canvas:(0,B.decamelizeKeys)(P)}}:{ad:{downloadSilent:u,conversionTracks:o,sdk:c,creatives:[{shouldUseNewWebView:f,landingUrl:v(w,n,r),conversionTracks:o,appPromotionUrl:g,deepUrl:E,brand:C,nativeUrl:S}]}}}function w(e){var t=e.data,n=e.node,r=e.clickPoint,o=e.type,a="preload"===o?z.preloadAd:z.commonAd;return new P.default(function(e){q.default.ready().then(function(){return q.default.supportsAction(a).then(function(o){o?q.default.dispatch(a,{ad:y(t,a,n,r)}).then(function(){return e(!0)},function(){return e(!1)}):a===z.commonAd&&q.default.dispatch(z.answerAd,{ad:y(t,z.answerAd,n,r)}).then(function(){return e(!0)},function(){return e(!1)})})},function(){return e(!1)})})}function g(e,t){return w({data:e,node:t,type:"preload"})}function E(e,t,n){return w({data:e,node:t,clickPoint:n,type:"open"})}function O(e,t){return new P.default(function(n){q.default.ready().then(function(){return q.default.supportsAction(e).then(function(r){r?q.default.dispatch(e,t).then(function(){return n(!0)},function(){return n(!1)}):n(!1)})},function(){return n(!1)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.preloadHybridAd=t.normalTracks=t.closeTrack=t.clickTrack=t.openHybrid=t.openHybridAd=t.initTrack=t.initCmTrack=t.zaSetModule=t.zaTrack=void 0;var C=n(1694),_=r(C),k=n(1768),j=r(k),S=n(316),P=r(S),T=n(1762),N=r(T);t.isGdtAd=b,t.getGdtLandingUrl=v;var A=n(0),x=n(20),R=n(25),I=r(R),M=n(7),L=r(M),D=n(303),q=r(D),B=n(8),U=n(1721),z={commonAd:"ad/open",preloadAd:"ad/preload",answerAd:"answer/openAd"},F={videoTrack:f,impressionTrack:u,viewTrack:p,extraConversionTrack:d};t.zaTrack=i,t.zaSetModule=a,t.initCmTrack=h,t.initTrack=m,t.openHybridAd=E,t.openHybrid=O,t.clickTrack=c,t.closeTrack=l,t.normalTracks=F,t.preloadHybridAd=g},1768:function(e,t,n){e.exports={default:n(1945),__esModule:!0}},1769:function(e,t,n){"use strict";function r(e,t,n,r){var s="addEventListener",c="removeEventListener",l=!!a.supportPassiveEvent&&o({},i,r);return!e.addEventListener&&e.attachEvent&&(s="attachEvent",c="detachEvent",t="on"+t),e[s](t,n,l),{remove:function(){e[c](t,n)}}}var o=n(1950),a=n(1584),i={capture:!1,passive:!1};e.exports=r},1770:function(e,t,n){function r(e,t,n){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var o=n(1771);e.exports=r},1771:function(e,t,n){var r=n(1554),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},1772:function(e,t,n){function r(e){if(!a(e))return!1;var t=o(e);return t==s||t==c||t==i||t==l}var o=n(1582),a=n(1527),i="[object AsyncFunction]",s="[object Function]",c="[object GeneratorFunction]",l="[object Proxy]";e.exports=r},1773:function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(11))},1774:function(e,t){function n(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var r=Function.prototype,o=r.toString;e.exports=n},1775:function(e,t){function n(e){return e}e.exports=n},1776:function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},1777:function(e,t){function n(e,t){var n=typeof e;return!!(t=null==t?r:t)&&("number"==n||"symbol"!=n&&o.test(e))&&e>-1&&e%1==0&&e<t}var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},1778:function(e,t,n){function r(e,t){var n=i(e),r=!n&&a(e),u=!n&&!r&&s(e),f=!n&&!r&&!u&&l(e),d=n||r||u||f,h=d?o(e.length,String):[],m=h.length;for(var b in e)!t&&!p.call(e,b)||d&&("length"==b||u&&("offset"==b||"parent"==b)||f&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||c(b,m))||h.push(b);return h}var o=n(1966),a=n(1967),i=n(1701),s=n(1779),c=n(1777),l=n(1970),u=Object.prototype,p=u.hasOwnProperty;e.exports=r},1779:function(e,t,n){(function(e){var r=n(1521),o=n(1969),a="object"==typeof t&&t&&!t.nodeType&&t,i=a&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===a,c=s?r.Buffer:void 0,l=c?c.isBuffer:void 0,u=l||o;e.exports=u}).call(t,n(40)(e))},1780:function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},1781:function(e,t,n){"use strict";var r=!1;if("undefined"!=typeof navigator){var o=navigator.userAgent.match(/MSIE (\d+\.\d+)/);o&&(r=parseFloat(o[1],10)<9)}e.exports=r},1782:function(e,t,n){function r(e){return i(e)?o(e,!0):a(e)}var o=n(1778),a=n(2006),i=n(1622);e.exports=r},1783:function(e,t){function n(){return[]}e.exports=n},1784:function(e,t,n){var r=n(1785),o=n(1786),a=n(1705),i=n(1783),s=Object.getOwnPropertySymbols,c=s?function(e){for(var t=[];e;)r(t,a(e)),e=o(e);return t}:i;e.exports=c},1785:function(e,t){function n(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}e.exports=n},1786:function(e,t,n){var r=n(1780),o=r(Object.getPrototypeOf,Object);e.exports=o},1787:function(e,t,n){function r(e,t,n){var r=t(e);return a(e)?r:o(r,n(e))}var o=n(1785),a=n(1701);e.exports=r},1788:function(e,t,n){"use strict";e.exports={EVENT_END_DELAY:100,DEFAULT_THROTTLE_RATE:50}},1789:function(e,t){},1800:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c});var r=n(1558),o=n(287),a=(n.n(o),function(e){return{name:"description",property:"og:description",content:e}}),i=function(e,t){if(e&&e.detail){var n=Object(r.b)(e.detail,100);if(n)return[a(n)]}else if(t&&t.content)return s(t);return[]},s=function(e){if(e&&e.content){var t=Object(r.b)(e.content,100);if(t)return[a(t)]}return[]},c=function(e){if(e){var t=e.headline,n=void 0===t?"":t,r=e.answerCount,i=void 0===r?0:r,s=e.voteupCount,c=void 0===s?0:s,l=n+" 回答数 "+Object(o.formatNumber)(i)+"，获得 "+Object(o.formatNumber)(c)+" 次赞同";return[a(l)]}return[]}},1802:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return b});var i,s,c=n(2),l=n.n(c),u=n(0),p=n.n(u),f=n(1710),d=n(21),h=n(5),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=(s=i=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),m(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.page,r=e.prePage,o=e.onLoad,a=e.isNextLoaded;t||o(Object(h.c)(n),r),a||o(Object(h.c)(n+1),r)}},{key:"componentWillReceiveProps",value:function(e){var t=e.isFetching,n=e.isDrained,r=e.isNextLoaded,o=e.page,a=e.prePage,i=e.onLoad,s=e.total;n||t||i(Object(h.c)(o),a),!r&&o<s&&o!==this.props.page&&i(Object(h.c)(o+1),a)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.total,r=e.page,o=e.onPaginationClick,a=e.isFetching,i=e.placeholder;return p.a.createElement("div",null,t,a&&i,n>1&&p.a.createElement(f.a,{current:r,total:n,clickCallback:o}))}}]),t}(u.Component),i.propTypes={isFetching:l.a.bool.isRequired,isDrained:l.a.bool.isRequired,onLoad:l.a.func.isRequired,total:l.a.number,page:l.a.number,prePage:l.a.number,placeholder:l.a.node,onPaginationClick:l.a.func.isRequired,isNextLoaded:l.a.bool},i.defaultProps={prePage:d.b,page:1},s)},1809:function(e,t,n){"use strict";function r(){}"undefined"!=typeof window?e.exports={listen:n(1769),subscribe:n(1975),unsubscribe:n(2039)}:e.exports={listen:r,subscribe:r,unsubscribe:r}},1810:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return y.default.createElement(S.default,null,y.default.createElement(R,(0,i.default)({},e,{data:(0,E.camelizeKeys)(e.data)})))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1620),i=r(a),s=n(1591),c=r(s),l=n(1592),u=r(l),p=n(1593),f=r(p),d=n(1594),h=r(d),m=n(1595),b=r(m);t.default=o;var v=n(0),y=r(v),w=n(2),g=r(w),E=n(8),O=n(7),C=r(O),_=n(25),k=r(_),j=n(1766),S=r(j),P=n(1629),T=r(P),N=n(2040),A=n(1767),x=n(1721);n(2041);var R=function(e){function t(){var e,n,r,o;(0,u.default)(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=(0,h.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(i))),r.state={item:null},r.getAdsenseSource=function(){var e=r.props.location,t=r.state.item.template,n=N.ADSENSE_SOURCE[e];return n[t]||n.default||N.defaultSourceValue},r.trackImpression=function(){var e=r.state.item;if(e){var t=e.impressionTrackUrls,n=e.debugTracks,o=e.viewTrackUrls,a={impressionTracks:t,viewTracks:o,debugTracks:n};(0,A.initCmTrack)(r.card,a)}},r.load=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.props,t=e.id,n=e.location,o=e.query,a=e.delay;clearTimeout(r.loadTimeout),a>0?r.loadTimeout=setTimeout(function(){(0,x.loadBanner)({id:t,location:n,query:o,url:""+N.pathForAd+n}).then(function(e){r.setState({item:e})})},a):(0,x.loadBanner)({id:t,location:n,query:o,url:""+N.pathForAd+n}).then(function(e){r.setState({item:e})})},r.handleIframeLoad=function(){r.props.onHeightChange&&setTimeout(r.props.onHeightChange,N.TIMEOUT)},r.handleImageLoad=function(){var e=r.state.item;e&&(r.debugTracks("image_onload"),r.trackImpression(),C.default.trackEvent(r,{action:"Load"},{link:{url:e.landingUrl}}),r.props.onHeightChange&&setTimeout(r.props.onHeightChange,N.TIMEOUT))},r.debugTracks=function(e){var t=r.state.item;if(t){var n=t.debugTracks,o=void 0===n?[]:n,a={et:e},i=k.default.stringify(a);o.map(function(e){return e?(0,x.request)(i?e+(e.includes("?")?"&":"?")+i:e):null})}},r.handleClose=function(){var e=r.state.item;e&&((0,A.closeTrack)([e.closeTrackUrl]),r.hideImage())},r.handleLog=function(e){var t=r.state.item,n=t.landingUrl,o=t.clickTrackUrls;C.default.trackEvent(e.target,{action:"OpenUrl",url:window.location.href},{link:{url:n}}),(0,A.clickTrack)(o)},r.hideImage=function(){var e=r.card.offsetHeight;r.card.style.height=e+"px",r.timeout=setTimeout(function(){r.card.classList.add("Pc-card--hidden"),r.card.style.height=0,r.timeout=setTimeout(function(){r.props.onHeightChange&&r.props.onHeightChange()},N.TIMEOUT)},N.TICK)},o=n,(0,h.default)(r,o)}return(0,b.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){this.load()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.id,r=t.location,o=e.id,a=e.location;n===o&&r===a||(clearTimeout(this.timeout),this.setState({item:null}),this.load(e))}},{key:"render",value:function(){var e=this,t=this.state.item;if(!t)return null;var n=t.image,r=t.image2x,o=t.landingUrl,a=t.template;return y.default.createElement("div",{className:"Pc-card Card",ref:function(t){e.card=t}},y.default.createElement("a",{className:"Banner-link",href:o,target:"_blank",onClick:this.handleLog},["google_pc_js","qihoo_pc_js"].includes(a)?y.default.createElement("iframe",{title:"third_ad",className:"Banner-adsense",src:this.getAdsenseSource(),scrolling:"no",frameBorder:"0",onLoad:this.handleIframeLoad}):y.default.createElement("img",{className:"Banner-image",src:r||(0,x.imgUrlAddAdx4)(n),alt:"广告",onLoad:this.handleImageLoad,onError:function(){return e.debugTracks("image_onerror")},ref:function(t){e.image=t}})),this.props.isMobile||y.default.createElement("div",{className:"Pc-card-button-close ",onClick:this.handleClose,"data-tooltip":"不再显示","data-tooltip-position":"bottom"},y.default.createElement(T.default,{name:"close",className:"Pc-card-button-close-svg "})))}}]),t}(v.Component);R.propTypes={id:g.default.string,location:g.default.string.isRequired,onHeightChange:g.default.func,isMobile:g.default.bool},R.defaultProps={isMobile:!1}},1811:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,c=n(2),l=n.n(c),u=n(0),p=n.n(u),f=n(547),d=n(2042),h=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),m={unregistered:{url:"http://zhi.hu/BDXoI",qrcode:n(1708)},home:{url:"http://zhi.hu/BDXoI",qrcode:n(1708)},question:{url:"http://zhi.hu/BDXoI",qrcode:n(1708)}},b=(s=i=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),h(t,[{key:"renderContent",value:function(){var e=this.props.type;return p.a.createElement(f.d,{className:"AppBanner"},p.a.createElement("a",{className:"AppBanner-link",href:m[e].url},p.a.createElement("div",{className:"AppBanner-layout"},p.a.createElement("img",{className:"AppBanner-qrcode",src:m[e].qrcode,alt:"QR Code of Downloading Zhihu App"}),p.a.createElement("div",{className:"AppBanner-content"},p.a.createElement("div",{className:"AppBanner-title"},"下载知乎客户端"),p.a.createElement("div",{className:"AppBanner-description"},"与世界分享知识、经验和见解")))))}},{key:"render",value:function(){return this.context.currentUser?null:this.renderContent()}}]),t}(u.Component),i.contextTypes={currentUser:l.a.object},i.propTypes={type:l.a.oneOf(Object.keys(m)),getSidebar:l.a.func},i.defaultProps={type:"unregistered",getSidebar:function(){return null}},s);t.a=b},1812:function(e,t,n){"use strict";function r(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]="number"==typeof e[n]?e[n]:e[n].val);return t}t.__esModule=!0,t.default=r,e.exports=t.default},1902:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l,u,p=n(0),f=n.n(p),d=n(3),h=n.n(d),m=n(28),b=n(4),v=n(1523),y=n(573),w=n(15),g=n(1556),E=n(2),O=n.n(E),C=(n(1903),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),_=(u=l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),C(t,[{key:"render",value:function(){var e=this.props.tips;return f.a.createElement("div",{className:"QuestionReviewInfo"},f.a.createElement("p",null,e))}}]),t}(p.PureComponent),l.propsTypes={tips:O.a.string},u),k=n(1518),j=n(1558),S=(n(1904),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),P=function(e){function t(){var e,n,r,o;i(this,t);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={previewImage:null,truncated:null},r.handleClick=function(e){var t=r.props,n=t.collapsed,o=t.onExpand;r.state.truncated.isTruncated&&n&&"function"==typeof o&&o(),r.handlePreviewImage(e)},r.handlePreviewImage=function(e){var t=e.target;"IMG"===t.tagName&&t.classList.contains("zh-lightbox-thumb")&&r.setState({previewImage:t})},r.handlePreviewImageClose=function(){r.setState({previewImage:null})},o=n,s(r,o)}return c(t,e),S(t,[{key:"componentWillMount",value:function(){if(Object(w.isBrowser)()){var e=this.truncateHTML(this.props);this.setState({truncated:e,hasVideo:e&&e.thumbnailInfo.id&&"video"===e.thumbnailInfo.type,thumbnail:e&&e.thumbnailInfo.url})}}},{key:"componentWillReceiveProps",value:function(e){var t=e.html;this.props.html!==t&&this.setState({truncated:this.truncateHTML(e)})}},{key:"truncateHTML",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return Object(y.truncateHTML)(Object(g.a)(e.html),75,{placeholders:{img:" [图片] "}})}},{key:"render",value:function(){var e=this.props,t=e.html,n=e.collapsed,r=e.editable,o=e.onEdit,a=e.excerpt,i=e.reviewInfo,s=this.state,c=s.previewImage,l=s.truncated,u=s.hasVideo,p=s.thumbnail,d=l||{isTruncated:a.length<=t.length,content:a},y=d.isTruncated,w=d.content,g=i.tips,E=y&&n;return f.a.createElement("div",null,g&&u&&f.a.createElement(_,{tips:g}),f.a.createElement("div",{className:"QuestionHeader-detail"},f.a.createElement("div",{className:h()("QuestionRichText",{"QuestionRichText--expandable":y,"QuestionRichText--collapsed":n,"QuestionRichText--video":u&&n}),onClick:this.handleClick},u&&n&&f.a.createElement("div",{className:"QuestionRichText--wrapImgae"},f.a.createElement("img",{src:p,alt:"video",className:"QuestionRichText--image"})),f.a.createElement("div",null,n&&!w?f.a.createElement("span",null,Object(j.a)(a,75)):f.a.createElement(k.a,{itemProp:"text",tag:"span",html:E?w:t}),E&&f.a.createElement(b.c,{preset:"plain",className:"QuestionRichText-more"},"显示全部",f.a.createElement(m.a,{name:"arrow",className:"QuestionRichText-more-icon"}))),r&&!E&&f.a.createElement(b.c,{preset:"plain",className:"QuestionHeader-edit",onClick:o},f.a.createElement(m.a,{name:"modify",left:!0}),"修改"),c&&f.a.createElement(v.a,{img:c,onClose:this.handlePreviewImageClose}))))}}]),t}(p.Component);t.a=P},1903:function(e,t){},1904:function(e,t){},1907:function(e,t){},1908:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m,b,v,y,w=n(0),g=n.n(w),E=n(2),O=n.n(E),C=n(3),_=n.n(C),k=n(9),j="TopicVoteCheckbox",S=(n(1909),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),P=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),T=[0,1,2,3,4,5,6,7].map(function(e){return g.a.createElement("div",{className:j+"-Sparkle",key:e})}),N=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),P(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onChange,r=e.checked,o=e.onClick,a=e.tooltipPosition;return g.a.createElement("div",S({className:_()(j,j+"--recommend",t),"data-tooltip":"推荐"},a&&{"data-tooltip-position":a}),g.a.createElement("input",{id:"topic-recommend",type:"checkbox",checked:r,onChange:n,onClick:o}),g.a.createElement("label",{htmlFor:"topic-recommend"},g.a.createElement(k._33,{size:19}),T))}}]),t}(w.Component),A=(n(1910),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),R=function(e){function t(){return i(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),x(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onChange,r=e.checked,o=e.onClick,a=e.tooltipPosition;return g.a.createElement("div",A({className:_()(j,j+"--against",t),"data-tooltip":"不推荐"},a&&{"data-tooltip-position":a}),g.a.createElement("input",{id:"topic-against",type:"checkbox",checked:r,onChange:n,onClick:o}),g.a.createElement("label",{htmlFor:"topic-against"},g.a.createElement(k._33,{size:19})))}}]),t}(w.Component),I=(n(1911),{Recommend:N,Against:R}),M=(n(1912),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),L=function(e){return e.stopPropagation()},D=(b=m=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),M(t,[{key:"render",value:function(){var e=this.props,t=e.noAnimation,n=e.status,r=e.onVoteChange,o=e.tooltipPosition;return g.a.createElement("span",{className:"VotableTopicCard",onClick:L},g.a.createElement("span",{className:_()("VotableTopicCard-RecommendStatus",{"VotableTopicCard-VoteActions--noAnimation":t})},g.a.createElement(I.Recommend,{className:"VotableTopicCard-VoteCheckbox",checked:"like"===n,onChange:function(e){r(e,"recommend")},tooltipPosition:o}),g.a.createElement(I.Against,{className:"VotableTopicCard-VoteCheckbox",checked:"dislike"===n,onChange:function(e){r(e,"unrecommend")},tooltipPosition:o})))}}]),t}(w.Component),m.propTypes={noAnimation:O.a.bool.isRequired,status:O.a.oneOf(["like","dislike","none"]).isRequired,noBorder:O.a.bool.isRequired,onVoteChange:O.a.func.isRequired,tooltipPosition:O.a.string},b),q=D,B=n(7),U=n(287),z=n(10),F=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Q={Upvote:"Upvote",UnUpvote:"UnUpvote",Downvote:"Downvote",UnDownvote:"UnDownvote"},V=function(e){return e>1e4?Object(U.niceNumber)(e):Object(U.formatNumber)(e)},H=(y=v=function(e){function t(){var e,n,r,o;f(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={noAnimation:!!r.props.metaInfo.vote&&"none"!==r.props.metaInfo.vote.status},r.handleVoteChange=r.context.authRequired(function(e,t){var n=r.props,o=n.metaInfo.vote.status,a=n.onUpdateVoteTopic;r.state.noAnimation&&r.setState({noAnimation:!1});var i={actionType:"",voteFor:"",method:""};"recommend"===t?"like"===o?(i.actionType=Q.UnUpvote,i.voteFor="like",i.method="DELETE"):(i.actionType=Q.Upvote,i.voteFor="like",i.method="POST"):"dislike"===o?(i.actionType=Q.UnDownvote,i.voteFor="dislike",i.method="DELETE"):(i.actionType=Q.Downvote,i.voteFor="dislike",i.method="POST"),i.actionType&&(B.default.trackEvent(e.target,{action:i.actionType,id:4176}),a(i))},z.M.vote),o=n,d(r,o)}return h(t,e),F(t,[{key:"renderVotableTopicCard",value:function(){var e=this.state.noAnimation,t=this.props,n=t.tooltipPosition,r=t.metaInfo;r=void 0===r?{}:r;var o=r.vote;o=void 0===o?{}:o;var a=o.status;return g.a.createElement(q,{noBorder:!0,status:a,noAnimation:e,onVoteChange:this.handleVoteChange,tooltipPosition:n})}},{key:"renderReviewCardExtraInfo",value:function(){var e=this.props,t=e.metaInfo,n=t.vote,r=t.meta.title,o=e.ReviewCardExtraInfoComponent,a=e.reviewerCountFormatter;if(!o)return null;var i=n.totalVotes,s=n.ratio,c=n.ratioStatus,l=n.status,u=(100*s).toFixed(0),p=a(i),f=void 0;return f="none"===l?"你推荐么？":"like"===l?"已推荐":"不推荐",g.a.createElement(o,{reviewerCount:p,insufficientText:f,percent:u,ratioStatus:c,title:r})}},{key:"render",value:function(){return g.a.createElement(w.Fragment,null,this.renderReviewCardExtraInfo(),this.props.children,this.renderVotableTopicCard())}}]),t}(w.Component),v.propTypes={onUpdateVoteTopic:O.a.func.isRequired,metaInfo:O.a.shape({meta:O.a.object.isRequired,vote:O.a.shape({status:O.a.oneOf(["none","dislike","like"]).isRequired})}),ReviewCardExtraInfoComponent:O.a.oneOfType([O.a.func,O.a.string,O.a.object]).isRequired,reviewerCountFormatter:O.a.func.isRequired,tooltipPosition:O.a.string},v.defaultProps={reviewerCountFormatter:V},v.contextTypes={authRequired:O.a.func},y);n.d(t,!1,function(){return q}),n.d(t,"a",function(){return H})},1909:function(e,t){},1910:function(e,t){},1911:function(e,t){},1912:function(e,t){},1913:function(e,t,n){n(1914),e.exports=n(49).Object.assign},1914:function(e,t,n){var r=n(113);r(r.S+r.F,"Object",{assign:n(1915)})},1915:function(e,t,n){"use strict";var r=n(578),o=n(1693),a=n(1621),i=n(590),s=n(629),c=Object.assign;e.exports=!c||n(302)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=i(e),c=arguments.length,l=1,u=o.f,p=a.f;c>l;)for(var f,d=s(arguments[l++]),h=u?r(d).concat(u(d)):r(d),m=h.length,b=0;m>b;)p.call(d,f=h[b++])&&(n[f]=d[f]);return n}:c},1916:function(e,t,n){e.exports={default:n(1917),__esModule:!0}},1917:function(e,t,n){n(591),n(589),e.exports=n(1918)},1918:function(e,t,n){var r=n(328),o=n(31)("iterator"),a=n(91);e.exports=n(49).isIterable=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||a.hasOwnProperty(r(t))}},1919:function(e,t,n){e.exports={default:n(1920),__esModule:!0}},1920:function(e,t,n){n(591),n(589),e.exports=n(1921)},1921:function(e,t,n){var r=n(50),o=n(631);e.exports=n(49).getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},1922:function(e,t,n){n(1923),e.exports=n(49).Object.getPrototypeOf},1923:function(e,t,n){var r=n(590),o=n(630);n(1763)("getPrototypeOf",function(){return function(e){return o(r(e))}})},1924:function(e,t,n){e.exports={default:n(1925),__esModule:!0}},1925:function(e,t,n){n(1926);var r=n(49).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},1926:function(e,t,n){var r=n(113);r(r.S+r.F*!n(86),"Object",{defineProperty:n(117).f})},1927:function(e,t,n){e.exports={default:n(1928),__esModule:!0}},1928:function(e,t,n){n(589),n(591),e.exports=n(1696).f("iterator")},1929:function(e,t,n){e.exports={default:n(1930),__esModule:!0}},1930:function(e,t,n){n(1931),n(625),n(1936),n(1937),e.exports=n(49).Symbol},1931:function(e,t,n){"use strict";var r=n(29),o=n(120),a=n(86),i=n(113),s=n(627),c=n(1932).KEY,l=n(302),u=n(326),p=n(206),f=n(318),d=n(31),h=n(1696),m=n(1697),b=n(1933),v=n(1934),y=n(50),w=n(85),g=n(195),E=n(606),O=n(317),C=n(607),_=n(1935),k=n(1765),j=n(117),S=n(578),P=k.f,T=j.f,N=_.f,A=r.Symbol,x=r.JSON,R=x&&x.stringify,I=d("_hidden"),M=d("toPrimitive"),L={}.propertyIsEnumerable,D=u("symbol-registry"),q=u("symbols"),B=u("op-symbols"),U=Object.prototype,z="function"==typeof A,F=r.QObject,Q=!F||!F.prototype||!F.prototype.findChild,V=a&&l(function(){return 7!=C(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=P(U,t);r&&delete U[t],T(e,t,n),r&&e!==U&&T(U,t,r)}:T,H=function(e){var t=q[e]=C(A.prototype);return t._k=e,t},W=z&&"symbol"==typeof A.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof A},Y=function(e,t,n){return e===U&&Y(B,t,n),y(e),t=E(t,!0),y(n),o(q,t)?(n.enumerable?(o(e,I)&&e[I][t]&&(e[I][t]=!1),n=C(n,{enumerable:O(0,!1)})):(o(e,I)||T(e,I,O(1,{})),e[I][t]=!0),V(e,t,n)):T(e,t,n)},K=function(e,t){y(e);for(var n,r=b(t=g(t)),o=0,a=r.length;a>o;)Y(e,n=r[o++],t[n]);return e},G=function(e,t){return void 0===t?C(e):K(C(e),t)},X=function(e){var t=L.call(this,e=E(e,!0));return!(this===U&&o(q,e)&&!o(B,e))&&(!(t||!o(this,e)||!o(q,e)||o(this,I)&&this[I][e])||t)},$=function(e,t){if(e=g(e),t=E(t,!0),e!==U||!o(q,t)||o(B,t)){var n=P(e,t);return!n||!o(q,t)||o(e,I)&&e[I][t]||(n.enumerable=!0),n}},J=function(e){for(var t,n=N(g(e)),r=[],a=0;n.length>a;)o(q,t=n[a++])||t==I||t==c||r.push(t);return r},Z=function(e){for(var t,n=e===U,r=N(n?B:g(e)),a=[],i=0;r.length>i;)!o(q,t=r[i++])||n&&!o(U,t)||a.push(q[t]);return a};z||(A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===U&&t.call(B,n),o(this,I)&&o(this[I],e)&&(this[I][e]=!1),V(this,e,O(1,n))};return a&&Q&&V(U,e,{configurable:!0,set:t}),H(e)},s(A.prototype,"toString",function(){return this._k}),k.f=$,j.f=Y,n(1764).f=_.f=J,n(1621).f=X,n(1693).f=Z,a&&!n(201)&&s(U,"propertyIsEnumerable",X,!0),h.f=function(e){return H(d(e))}),i(i.G+i.W+i.F*!z,{Symbol:A});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)d(ee[te++]);for(var ne=S(d.store),re=0;ne.length>re;)m(ne[re++]);i(i.S+i.F*!z,"Symbol",{for:function(e){return o(D,e+="")?D[e]:D[e]=A(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in D)if(D[t]===e)return t},useSetter:function(){Q=!0},useSimple:function(){Q=!1}}),i(i.S+i.F*!z,"Object",{create:G,defineProperty:Y,defineProperties:K,getOwnPropertyDescriptor:$,getOwnPropertyNames:J,getOwnPropertySymbols:Z}),x&&i(i.S+i.F*(!z||l(function(){var e=A();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=t=r[1],(w(t)||void 0!==e)&&!W(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!W(t))return t}),r[1]=t,R.apply(x,r)}}),A.prototype[M]||n(66)(A.prototype,M,A.prototype.valueOf),p(A,"Symbol"),p(Math,"Math",!0),p(r.JSON,"JSON",!0)},1932:function(e,t,n){var r=n(318)("meta"),o=n(85),a=n(120),i=n(117).f,s=0,c=Object.isExtensible||function(){return!0},l=!n(302)(function(){return c(Object.preventExtensions({}))}),u=function(e){i(e,r,{value:{i:"O"+ ++s,w:{}}})},p=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,r)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[r].i},f=function(e,t){if(!a(e,r)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[r].w},d=function(e){return l&&h.NEED&&c(e)&&!a(e,r)&&u(e),e},h=e.exports={KEY:r,NEED:!1,fastKey:p,getWeak:f,onFreeze:d}},1933:function(e,t,n){var r=n(578),o=n(1693),a=n(1621);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var i,s=n(e),c=a.f,l=0;s.length>l;)c.call(e,i=s[l++])&&t.push(i);return t}},1934:function(e,t,n){var r=n(126);e.exports=Array.isArray||function(e){return"Array"==r(e)}},1935:function(e,t,n){var r=n(195),o=n(1764).f,a={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(e){return i.slice()}};e.exports.f=function(e){return i&&"[object Window]"==a.call(e)?s(e):o(r(e))}},1936:function(e,t,n){n(1697)("asyncIterator")},1937:function(e,t,n){n(1697)("observable")},1938:function(e,t,n){e.exports={default:n(1939),__esModule:!0}},1939:function(e,t,n){n(1940),e.exports=n(49).Object.setPrototypeOf},1940:function(e,t,n){var r=n(113);r(r.S,"Object",{setPrototypeOf:n(1941).set})},1941:function(e,t,n){var r=n(85),o=n(50),a=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(125)(Function.call,n(1765).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return a(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:a}},1942:function(e,t,n){e.exports={default:n(1943),__esModule:!0}},1943:function(e,t,n){n(1944);var r=n(49).Object;e.exports=function(e,t){return r.create(e,t)}},1944:function(e,t,n){var r=n(113);r(r.S,"Object",{create:n(607)})},1945:function(e,t,n){n(1946),e.exports=n(49).Object.keys},1946:function(e,t,n){var r=n(590),o=n(578);n(1763)("keys",function(){return function(e){return o(r(e))}})},1947:function(e,t,n){e.exports={default:n(1948),__esModule:!0}},1948:function(e,t,n){n(1949),e.exports=n(49).Number.isNaN},1949:function(e,t,n){var r=n(113);r(r.S,"Number",{isNaN:function(e){return e!=e}})},1950:function(e,t,n){var r=n(1698),o=n(1583),a=n(1957),i=n(1622),s=n(1623),c=n(1624),l=Object.prototype,u=l.hasOwnProperty,p=a(function(e,t){if(s(t)||i(t))return void o(t,c(t),e);for(var n in t)u.call(t,n)&&r(e,n,t[n])});e.exports=p},1951:function(e,t,n){function r(e){return!(!i(e)||a(e))&&(o(e)?h:l).test(s(e))}var o=n(1772),a=n(1954),i=n(1527),s=n(1774),c=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,u=Function.prototype,p=Object.prototype,f=u.toString,d=p.hasOwnProperty,h=RegExp("^"+f.call(d).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},1952:function(e,t,n){function r(e){var t=i.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(e){}var o=s.call(e);return r&&(t?e[c]=n:delete e[c]),o}var o=n(1699),a=Object.prototype,i=a.hasOwnProperty,s=a.toString,c=o?o.toStringTag:void 0;e.exports=r},1953:function(e,t){function n(e){return o.call(e)}var r=Object.prototype,o=r.toString;e.exports=n},1954:function(e,t,n){function r(e){return!!a&&a in e}var o=n(1955),a=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=r},1955:function(e,t,n){var r=n(1521),o=r["__core-js_shared__"];e.exports=o},1956:function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},1957:function(e,t,n){function r(e){return o(function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,s&&a(n[0],n[1],s)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var c=n[r];c&&e(t,c,r,i)}return t})}var o=n(1958),a=n(1965);e.exports=r},1958:function(e,t,n){function r(e,t){return i(a(e,t,o),e+"")}var o=n(1775),a=n(1959),i=n(1961);e.exports=r},1959:function(e,t,n){function r(e,t,n){return t=a(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=a(r.length-t,0),c=Array(s);++i<s;)c[i]=r[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=r[i];return l[t]=n(c),o(e,this,l)}}var o=n(1960),a=Math.max;e.exports=r},1960:function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},1961:function(e,t,n){var r=n(1962),o=n(1964),a=o(r);e.exports=a},1962:function(e,t,n){var r=n(1963),o=n(1771),a=n(1775),i=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:a;e.exports=i},1963:function(e,t){function n(e){return function(){return e}}e.exports=n},1964:function(e,t){function n(e){var t=0,n=0;return function(){var i=a(),s=o-(i-n);if(n=i,s>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var r=800,o=16,a=Date.now;e.exports=n},1965:function(e,t,n){function r(e,t,n){if(!s(n))return!1;var r=typeof t;return!!("number"==r?a(n)&&i(t,n.length):"string"==r&&t in n)&&o(n[t],e)}var o=n(1700),a=n(1622),i=n(1777),s=n(1527);e.exports=r},1966:function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},1967:function(e,t,n){var r=n(1968),o=n(1569),a=Object.prototype,i=a.hasOwnProperty,s=a.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return o(e)&&i.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},1968:function(e,t,n){function r(e){return a(e)&&o(e)==i}var o=n(1582),a=n(1569),i="[object Arguments]";e.exports=r},1969:function(e,t){function n(){return!1}e.exports=n},1970:function(e,t,n){var r=n(1971),o=n(1702),a=n(1703),i=a&&a.isTypedArray,s=i?o(i):r;e.exports=s},1971:function(e,t,n){function r(e){return i(e)&&a(e.length)&&!!s[o(e)]}var o=n(1582),a=n(1776),i=n(1569),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=r},1972:function(e,t,n){function r(e){if(!o(e))return a(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}var o=n(1623),a=n(1973),i=Object.prototype,s=i.hasOwnProperty;e.exports=r},1973:function(e,t,n){var r=n(1780),o=r(Object.keys,Object);e.exports=o},1974:function(e,t,n){"use strict";var r=!1;if("undefined"!=typeof window)try{var o=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,o)}catch(e){}e.exports=r},1975:function(e,t,n){"use strict";function r(e,t,n){n=n||{};var r=n.useRAF||!1,c=parseInt(n.throttleRate,10),l=n.eventOptions;return isNaN(c)&&(c=s),r&&(c="raf"),a&&(c=0),o.enableScrollInfo=o.enableScrollInfo||n.enableScrollInfo||!1,o.enableResizeInfo=o.enableResizeInfo||n.enableResizeInfo||!1,o.enableTouchInfo=o.enableTouchInfo||n.enableTouchInfo||!1,i[e](c,t,n,l)}var o=n(1584),a=n(1781),i=n(1976),s=n(1788).DEFAULT_THROTTLE_RATE;e.exports=r},1976:function(e,t,n){"use strict";function r(e){return e.id||"target-id-"+O++}function o(e,t,n,r){return m.on(e,t,n),r=r||e,h[r]=(h[r]||0)+1,{_type:e,_cb:t,_ctx:n,unsubscribe:function(){if(this._type){m.removeListener(e,t,n),h[r]--,0===h[r]&&(y[r].remove(),y[r]=void 0),this._type=void 0,this._cb=void 0,this._ctx=void 0;for(var o=g.length-1;o>=0;o--){if(g[o]===this){g.splice(o,1);break}}}}}}function a(e,t,n,a){return function(i,s,c){function l(e){N.end.update(e),m.emit(j,e,N.end),A=null}function d(e){A||(N.start.update(e),m.emit(k,e,N.start)),clearTimeout(A),N.main.update(e),m.emit(S,e,N.main),b?(e=u(e),A=setTimeout(function(){l(e)},i+E)):A=setTimeout(l.bind(null,e),i+E)}var h=c.context,O=c.target,C=O&&r(O),_=C?":"+C:"",k=t+"Start:"+i+_,j=t+"End:"+i+_,S=t+":"+i+_,P=n+":"+i+_,T=o(P,s,h,S);if(g.push(T),y[S])return T;var N={start:new f({mainType:t,subType:"start"}),main:new f({mainType:t}),end:new f({mainType:t,subType:"end"})};"raf"===i?(i=16,d=w(d)):i>0&&(d=p(d,i));var A;return y[S]=v(O||e,t,d,a),T}}function i(e,t){return function(n,a,i){function s(e){h.update(e),m.emit(p,e,h)}var c=i.context,l=i.target,u=l&&r(l),p=t+":0"+(u?":"+u:""),d=o(p,a,c);if(g.push(d),y[p])return d;var h=new f({mainType:t});return y[p]=v(l||e,t,s),d}}var s,c,l,u=n(1977),p=n(2032),f=n(2037),d=n(1584),h=d.connections,m=d.EE,b=n(1781),v=n(1769),y=d.listeners,w=n(2038),g=d.removers,E=(d.subscriptions,n(1788).EVENT_END_DELAY),O=0;"undefined"!=typeof window&&(c=window,s=c.document||document,l=s.body),e.exports={scrollStart:a(c,"scroll","scrollStart"),scrollEnd:a(c,"scroll","scrollEnd"),scroll:a(c,"scroll","scroll"),resizeStart:a(c,"resize","resizeStart"),resizeEnd:a(c,"resize","resizeEnd"),resize:a(c,"resize","resize"),visibilitychange:i(s,"visibilitychange"),touchmoveStart:a(l,"touchmove","touchmoveStart"),touchmoveEnd:a(l,"touchmove","touchmoveEnd"),touchmove:a(l,"touchmove","touchmove"),touchstart:i(l,"touchstart"),touchend:i(l,"touchend")}},1977:function(e,t,n){function r(e){return o(e,a)}var o=n(1978),a=4;e.exports=r},1978:function(e,t,n){function r(e,t,n,R,I,M){var L,D=t&k,q=t&j,B=t&S;if(n&&(L=I?n(e,R,I,M):n(e)),void 0!==L)return L;if(!O(e))return e;var U=w(e);if(U){if(L=b(e),!D)return u(e,L)}else{var z=m(e),F=z==T||z==N;if(g(e))return l(e,D);if(z==A||z==P||F&&!I){if(L=q||F?{}:y(e),!D)return q?f(e,c(L,e)):p(e,s(L,e))}else{if(!x[z])return I?e:{};L=v(e,z,D)}}M||(M=new o);var Q=M.get(e);if(Q)return Q;if(M.set(e,L),C(e))return e.forEach(function(o){L.add(r(o,t,n,o,e,M))}),L;if(E(e))return e.forEach(function(o,a){L.set(a,r(o,t,n,a,e,M))}),L;var V=B?q?h:d:q?keysIn:_,H=U?void 0:V(e);return a(H||e,function(o,a){H&&(a=o,o=e[a]),i(L,a,r(o,t,n,a,e,M))}),L}var o=n(1979),a=n(2003),i=n(1698),s=n(2004),c=n(2005),l=n(2008),u=n(2009),p=n(2010),f=n(2012),d=n(2013),h=n(2014),m=n(1706),b=n(2019),v=n(2020),y=n(2026),w=n(1701),g=n(1779),E=n(2028),O=n(1527),C=n(2030),_=n(1624),k=1,j=2,S=4,P="[object Arguments]",T="[object Function]",N="[object GeneratorFunction]",A="[object Object]",x={};x[P]=x["[object Array]"]=x["[object ArrayBuffer]"]=x["[object DataView]"]=x["[object Boolean]"]=x["[object Date]"]=x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Map]"]=x["[object Number]"]=x[A]=x["[object RegExp]"]=x["[object Set]"]=x["[object String]"]=x["[object Symbol]"]=x["[object Uint8Array]"]=x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0,x["[object Error]"]=x[T]=x["[object WeakMap]"]=!1,e.exports=r},1979:function(e,t,n){function r(e){var t=this.__data__=new o(e);this.size=t.size}var o=n(1625),a=n(1985),i=n(1986),s=n(1987),c=n(1988),l=n(1989);r.prototype.clear=a,r.prototype.delete=i,r.prototype.get=s,r.prototype.has=c,r.prototype.set=l,e.exports=r},1980:function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},1981:function(e,t,n){function r(e){var t=this.__data__,n=o(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}var o=n(1626),a=Array.prototype,i=a.splice;e.exports=r},1982:function(e,t,n){function r(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]}var o=n(1626);e.exports=r},1983:function(e,t,n){function r(e){return o(this.__data__,e)>-1}var o=n(1626);e.exports=r},1984:function(e,t,n){function r(e,t){var n=this.__data__,r=o(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var o=n(1626);e.exports=r},1985:function(e,t,n){function r(){this.__data__=new o,this.size=0}var o=n(1625);e.exports=r},1986:function(e,t){function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}e.exports=n},1987:function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},1988:function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},1989:function(e,t,n){function r(e,t){var n=this.__data__;if(n instanceof o){var r=n.__data__;if(!a||r.length<s-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(r)}return n.set(e,t),this.size=n.size,this}var o=n(1625),a=n(1704),i=n(1990),s=200;e.exports=r},1990:function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(1991),a=n(1998),i=n(2e3),s=n(2001),c=n(2002);r.prototype.clear=o,r.prototype.delete=a,r.prototype.get=i,r.prototype.has=s,r.prototype.set=c,e.exports=r},1991:function(e,t,n){function r(){this.size=0,this.__data__={hash:new o,map:new(i||a),string:new o}}var o=n(1992),a=n(1625),i=n(1704);e.exports=r},1992:function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(1993),a=n(1994),i=n(1995),s=n(1996),c=n(1997);r.prototype.clear=o,r.prototype.delete=a,r.prototype.get=i,r.prototype.has=s,r.prototype.set=c,e.exports=r},1993:function(e,t,n){function r(){this.__data__=o?o(null):{},this.size=0}var o=n(1627);e.exports=r},1994:function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},1995:function(e,t,n){function r(e){var t=this.__data__;if(o){var n=t[e];return n===a?void 0:n}return s.call(t,e)?t[e]:void 0}var o=n(1627),a="__lodash_hash_undefined__",i=Object.prototype,s=i.hasOwnProperty;e.exports=r},1996:function(e,t,n){function r(e){var t=this.__data__;return o?void 0!==t[e]:i.call(t,e)}var o=n(1627),a=Object.prototype,i=a.hasOwnProperty;e.exports=r},1997:function(e,t,n){function r(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=o&&void 0===t?a:t,this}var o=n(1627),a="__lodash_hash_undefined__";e.exports=r},1998:function(e,t,n){function r(e){var t=o(this,e).delete(e);return this.size-=t?1:0,t}var o=n(1628);e.exports=r},1999:function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},2e3:function(e,t,n){function r(e){return o(this,e).get(e)}var o=n(1628);e.exports=r},2001:function(e,t,n){function r(e){return o(this,e).has(e)}var o=n(1628);e.exports=r},2002:function(e,t,n){function r(e,t){var n=o(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var o=n(1628);e.exports=r},2003:function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}e.exports=n},2004:function(e,t,n){function r(e,t){return e&&o(t,a(t),e)}var o=n(1583),a=n(1624);e.exports=r},2005:function(e,t,n){function r(e,t){return e&&o(t,a(t),e)}var o=n(1583),a=n(1782);e.exports=r},2006:function(e,t,n){function r(e){if(!o(e))return i(e);var t=a(e),n=[];for(var r in e)("constructor"!=r||!t&&c.call(e,r))&&n.push(r);return n}var o=n(1527),a=n(1623),i=n(2007),s=Object.prototype,c=s.hasOwnProperty;e.exports=r},2007:function(e,t){function n(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}e.exports=n},2008:function(e,t,n){(function(e){function r(e,t){if(t)return e.slice();var n=e.length,r=l?l(n):new e.constructor(n);return e.copy(r),r}var o=n(1521),a="object"==typeof t&&t&&!t.nodeType&&t,i=a&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===a,c=s?o.Buffer:void 0,l=c?c.allocUnsafe:void 0;e.exports=r}).call(t,n(40)(e))},2009:function(e,t){function n(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}e.exports=n},2010:function(e,t,n){function r(e,t){return o(e,a(e),t)}var o=n(1583),a=n(1705);e.exports=r},2011:function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,o=0,a=[];++n<r;){var i=e[n];t(i,n,e)&&(a[o++]=i)}return a}e.exports=n},2012:function(e,t,n){function r(e,t){return o(e,a(e),t)}var o=n(1583),a=n(1784);e.exports=r},2013:function(e,t,n){function r(e){return o(e,i,a)}var o=n(1787),a=n(1705),i=n(1624);e.exports=r},2014:function(e,t,n){function r(e){return o(e,i,a)}var o=n(1787),a=n(1784),i=n(1782);e.exports=r},2015:function(e,t,n){var r=n(1554),o=n(1521),a=r(o,"DataView");e.exports=a},2016:function(e,t,n){var r=n(1554),o=n(1521),a=r(o,"Promise");e.exports=a},2017:function(e,t,n){var r=n(1554),o=n(1521),a=r(o,"Set");e.exports=a},2018:function(e,t,n){var r=n(1554),o=n(1521),a=r(o,"WeakMap");e.exports=a},2019:function(e,t){function n(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&o.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var r=Object.prototype,o=r.hasOwnProperty;e.exports=n},2020:function(e,t,n){function r(e,t,n){var r=e.constructor;switch(t){case v:return o(e);case l:case u:return new r(+e);case y:return a(e,n);case w:case g:case E:case O:case C:case _:case k:case j:case S:return c(e,n);case p:return new r;case f:case m:return new r(e);case d:return i(e);case h:return new r;case b:return s(e)}}var o=n(1707),a=n(2022),i=n(2023),s=n(2024),c=n(2025),l="[object Boolean]",u="[object Date]",p="[object Map]",f="[object Number]",d="[object RegExp]",h="[object Set]",m="[object String]",b="[object Symbol]",v="[object ArrayBuffer]",y="[object DataView]",w="[object Float32Array]",g="[object Float64Array]",E="[object Int8Array]",O="[object Int16Array]",C="[object Int32Array]",_="[object Uint8Array]",k="[object Uint8ClampedArray]",j="[object Uint16Array]",S="[object Uint32Array]";e.exports=r},2021:function(e,t,n){var r=n(1521),o=r.Uint8Array;e.exports=o},2022:function(e,t,n){function r(e,t){var n=t?o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var o=n(1707);e.exports=r},2023:function(e,t){function n(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}var r=/\w*$/;e.exports=n},2024:function(e,t,n){function r(e){return i?Object(i.call(e)):{}}var o=n(1699),a=o?o.prototype:void 0,i=a?a.valueOf:void 0;e.exports=r},2025:function(e,t,n){function r(e,t){var n=t?o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var o=n(1707);e.exports=r},2026:function(e,t,n){function r(e){return"function"!=typeof e.constructor||i(e)?{}:o(a(e))}var o=n(2027),a=n(1786),i=n(1623);e.exports=r},2027:function(e,t,n){var r=n(1527),o=Object.create,a=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=a},2028:function(e,t,n){var r=n(2029),o=n(1702),a=n(1703),i=a&&a.isMap,s=i?o(i):r;e.exports=s},2029:function(e,t,n){function r(e){return a(e)&&o(e)==i}var o=n(1706),a=n(1569),i="[object Map]";e.exports=r},2030:function(e,t,n){var r=n(2031),o=n(1702),a=n(1703),i=a&&a.isSet,s=i?o(i):r;e.exports=s},2031:function(e,t,n){function r(e){return a(e)&&o(e)==i}var o=n(1706),a=n(1569),i="[object Set]";e.exports=r},2032:function(e,t,n){function r(e,t,n){var r=!0,s=!0;if("function"!=typeof e)throw new TypeError(i);return a(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),o(e,t,{leading:r,maxWait:t,trailing:s})}var o=n(2033),a=n(1527),i="Expected a function";e.exports=r},2033:function(e,t,n){function r(e,t,n){function r(t){var n=y,r=w;return y=w=void 0,_=t,E=e.apply(r,n)}function u(e){return _=e,O=setTimeout(d,t),k?r(e):E}function p(e){var n=e-C,r=e-_,o=t-n;return j?l(o,g-r):o}function f(e){var n=e-C,r=e-_;return void 0===C||n>=t||n<0||j&&r>=g}function d(){var e=a();if(f(e))return h(e);O=setTimeout(d,p(e))}function h(e){return O=void 0,S&&y?r(e):(y=w=void 0,E)}function m(){void 0!==O&&clearTimeout(O),_=0,y=C=w=O=void 0}function b(){return void 0===O?E:h(a())}function v(){var e=a(),n=f(e);if(y=arguments,w=this,C=e,n){if(void 0===O)return u(C);if(j)return O=setTimeout(d,t),r(C)}return void 0===O&&(O=setTimeout(d,t)),E}var y,w,g,E,O,C,_=0,k=!1,j=!1,S=!0;if("function"!=typeof e)throw new TypeError(s);return t=i(t)||0,o(n)&&(k=!!n.leading,j="maxWait"in n,g=j?c(i(n.maxWait)||0,t):g,S="trailing"in n?!!n.trailing:S),v.cancel=m,v.flush=b,v}var o=n(1527),a=n(2034),i=n(2035),s="Expected a function",c=Math.max,l=Math.min;e.exports=r},2034:function(e,t,n){var r=n(1521),o=function(){return r.Date.now()};e.exports=o},2035:function(e,t,n){function r(e){if("number"==typeof e)return e;if(a(e))return i;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=l.test(e);return n||u.test(e)?p(e.slice(2),n?2:8):c.test(e)?i:+e}var o=n(1527),a=n(2036),i=NaN,s=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,p=parseInt;e.exports=r},2036:function(e,t,n){function r(e){return"symbol"==typeof e||a(e)&&o(e)==i}var o=n(1582),a=n(1569),i="[object Symbol]";e.exports=r},2037:function(e,t,n){"use strict";function r(e){e=e||{};var t=(e.mainType||"").toLowerCase(),n=(e.subType||"").toLowerCase();this.mainType=t,this.subType=n,this.type=t+n.charAt(0).toUpperCase()+n.slice(1)||"",this.scroll=i,this.resize=a,this.touch=s}var o=n(1584),a={width:0,height:0},i={delta:0,top:0},s={axisIntention:"",startX:0,startY:0,deltaX:0,deltaY:0};r.prototype={getXY:function(e){var t={x:0,y:0},n=document.body,r=document.documentElement;return e.pageX||e.pageY?(t.x=e.pageX,t.y=e.pageY):(t.x=e.clientX+n.scrollLeft+r.scrollLeft,t.y=e.clientY+n.scrollTop+r.scrollTop),t},update:function(e){var t=this.mainType,n=this.subType,r=document.documentElement;if(o.enableScrollInfo&&("scroll"===t||"touchmove"===t)){var a=r.scrollTop+document.body.scrollTop;a!==this.scroll.top&&(this.scroll.delta=a-this.scroll.top,this.scroll.top=a)}if(o.enableResizeInfo&&"resize"===t&&(this.resize.width=window.innerWidth||r.clientWidth,this.resize.height=window.innerHeight||r.clientHeight),o.enableTouchInfo&&e.touches&&("touchstart"===t||"touchmove"===t||"touchend"===t)){var i,s,c;"touchstart"===t||"start"===n?(i=this.getXY(e.touches[0]),this.touch.axisIntention="",this.touch.startX=i.x,this.touch.startY=i.y,this.touch.deltaX=0,this.touch.deltaY=0):"touchmove"===t&&(i=this.getXY(e.touches[0]),this.touch.deltaX=i.x-this.touch.startX,this.touch.deltaY=i.y-this.touch.startY,""===this.touch.axisIntention&&(s=Math.abs(this.touch.deltaX),c=Math.abs(this.touch.deltaY),s>5&&s>=c?this.touch.axisIntention="x":c>5&&c>s&&(this.touch.axisIntention="y")))}}},e.exports=r},2038:function(e,t,n){"use strict";function r(e,t){var n,r,i=0,s=0;t=t||15;var c=function c(){var l=a();t-(l-i)<=0?(i=l,s=0,e.apply(n,r)):s=o(c)};return function(){n=this,r=arguments,s||(s=o(c))}}var o=n(575),a=Date.now||function(){return(new Date).getTime()};e.exports=r},2039:function(e,t,n){"use strict";function r(e,t,n){for(var r,a=o.length-1;a>=0;a--)r=o[a],r._cb===t&&r._type.indexOf(e)>=0&&(r.unsubscribe(),o.splice(a,1))}var o=n(1584).removers;e.exports=r},2040:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={qihoo_pc_js:"https://www.zhihu.com/home_top_360.html",default:"https://www.zhihu.com/inner_bottom.html"},o={qihoo_pc_js:"https://www.zhihu.com/home_top_360.html",default:"https://www.zhihu.com/inner_top.html"},a={qihoo_pc_js:"https://www.zhihu.com/home_top_360.html",default:"https://www.zhihu.com/inner_top.html"},i={qihoo_pc_js:"https://www.zhihu.com/home_top_360.html",default:"https://www.zhihu.com/inner_bottom.html"},s={qihoo_pc_js:"https://www.zhihu.com/home_top_360.html",default:"https://www.zhihu.com/home_bottom.html"},c={qihoo_pc_js:"https://www.zhihu.com/home_top_360.html",default:"https://www.zhihu.com/home_top.html"},l={new_answer_down_sticky:r,new_answer_up:o,new_question_up:a,new_question_down_sticky:i,new_home_up:s,new_home_bottom:c};t.ADSENSE_SOURCE=l,t.defaultSourceValue="https://www.zhihu.com/home_bottom.html",t.TICK=17,t.TIMEOUT=300,t.pathForAd="https://www.zhihu.com/api/v4/alter_banners/"},2041:function(e,t){},2042:function(e,t){},2043:function(e,t,n){"use strict";function r(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=0);return t}t.__esModule=!0,t.default=r,e.exports=t.default},2044:function(e,t,n){"use strict";function r(e,t,n,r,a,i,s){var c=-a*(t-r),l=-i*n,u=c+l,p=n+u*e,f=t+p*e;return Math.abs(p)<s&&Math.abs(f-r)<s?(o[0]=r,o[1]=0,o):(o[0]=f,o[1]=p,o)}t.__esModule=!0,t.default=r;var o=[0,0];e.exports=t.default},2045:function(e,t,n){(function(t){(function(){var n,r,o;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:void 0!==t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-o)/1e6},r=t.hrtime,n=function(){var e;return e=r(),1e9*e[0]+e[1]},o=n()):Date.now?(e.exports=function(){return Date.now()-o},o=Date.now()):(e.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(t,n(22))},2046:function(e,t,n){"use strict";function r(e,t,n){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(0!==n[r])return!1;var o="number"==typeof t[r]?t[r]:t[r].val;if(e[r]!==o)return!1}return!0}t.__esModule=!0,t.default=r,e.exports=t.default},2047:function(e,t,n){e.exports=n(13)(8)},2112:function(e,t){},2113:function(e,t){},2114:function(e,t){},2115:function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.question;return{brand:t.brand,advancedStyle:t.advancedStyle}}n.d(t,"a",function(){return b});var s,c,l=n(0),u=n.n(l),p=n(6),f=(n.n(p),n(2543)),d=n(109),h=n(190),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=(s=Object(p.connect)(i,{loadBrandQuestionAdvancedStyle:d.r}))(c=function(t){function n(){var t,a,i,s;r(this,n);for(var c=arguments.length,l=Array(c),u=0;u<c;u++)l[u]=arguments[u];return a=i=o(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(l))),i.getTrackUrls=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.props,o=r.pageType,a=r.advancedStyle,s=a.viewTracks,c=a.clickTracks,l="view"===t?s:c,u=Object.assign({},{eru:encodeURIComponent(e.location.href),ct:1,pt:"question"===o?1:2,rt:1},n),p=Object.keys(u).map(function(e){return"&"+e+"="+u[e]}).join("");return l.map(function(e){return""+e+p})},i.handleViewTrack=function(e){i.getTrackUrls("view",e).forEach(h.c)},i.handleClickTrack=function(e){i.getTrackUrls("click",e).forEach(h.c)},s=a,o(i,s)}return a(n,t),m(n,[{key:"componentWillMount",value:function(){var e=this.props,t=e.questionId;(0,e.loadBrandQuestionAdvancedStyle)(t)}},{key:"componentDidUpdate",value:function(e){var t=e.advancedStyle;t=void 0===t?{}:t;var n=t.cardType,r=this.props,o=r.advancedStyle;o=void 0===o?{}:o;var a=o.cardType,i=r.onLoad;!n&&a&&"function"==typeof i&&i()}},{key:"render",value:function(){var e=this.props,t=e.brand,n=e.advancedStyle;return n&&n.id?u.a.createElement(f.a,{brand:t,advancedStyle:n,handleViewTrack:this.handleViewTrack,handleClickTrack:this.handleClickTrack,isMobileView:!1}):null}}]),n}(l.Component))||c}).call(t,n(11))},2116:function(e,t,n){"use strict";t.__esModule=!0,t.default={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},e.exports=t.default},2117:function(e,t){},2510:function(e,t){},2511:function(e,t){},2512:function(e,t){},2513:function(e,t){},2514:function(e,t){},2515:function(e,t){},2516:function(e,t){},2517:function(e,t){},2518:function(e,t){},2519:function(e,t){},2520:function(e,t){},2521:function(e,t){},2522:function(e,t){},2523:function(e,t){},2524:function(e,t){},2525:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),a=r(n(32)),i=function(e){return o.default.createElement(a.default,Object.assign({viewBox:"0 0 72 18"},e),o.default.createElement("g",{fillRule:"evenodd"},o.default.createElement("rect",{width:"72",height:"18",rx:"2"}),o.default.createElement("text",{fill:"#FFF",fontSize:"12",fontWeight:"500"},o.default.createElement("tspan",{x:"19",y:"13"},"有奖问答")),o.default.createElement("path",{fill:"#FFF",d:"M13.4 5.8H11a.4.4 0 0 1-.4-.3l.1-.4 1.6-1.7c.4-.4 1-.5 1.6-.2.5.3.8 1 .7 1.5-.2.6-.7 1-1.3 1zm0-1.9L13 4l-.7.8h1c.3 0 .5-.2.5-.4 0-.3-.2-.5-.5-.5zM10 6.4v1.5H5.8a.8.8 0 1 1 0-1.5H10zm.8 0h4.3a.8.8 0 0 1 0 1.5H11V6.4zM10 8.7v6H8.4c-.8 0-1.1-.2-1.5-.4-.3-.1-.5-.4-.7-.7-.2-.3-.3-.7-.3-1.5v-.9c0-.8.1-1.1.3-1.5l.7-.7c.4-.2.7-.3 1.5-.3h1.7zm.8 0h1.7c.8 0 1.1.1 1.5.3l.7.7c.2.4.3.7.3 1.5v1c0 .7-.1 1-.3 1.4-.2.3-.4.6-.7.7-.4.2-.7.3-1.5.3h-1.7V8.7zm-3.3-3c-.6 0-1.1-.4-1.3-1-.1-.5.2-1.2.7-1.5.5-.3 1.2-.2 1.6.2l1.6 1.7s.1.3 0 .4c0 .2-.2.2-.3.3H7.6zM8 4a.4.4 0 0 0-.5 0c-.2 0-.4.3-.3.5 0 .2.2.3.4.3h1L8 4z",fillRule:"nonzero"})))},s=i;t.default=s},2526:function(e,t){},2527:function(e,t){},2528:function(e,t){},2529:function(e,t){},2530:function(e,t){},2531:function(e,t){},2532:function(e,t){},2533:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.children,n=(0,u.default)(e,["children"]);return _.default.createElement("a",(0,c.default)({target:"_blank"},n),t)}function a(e){var t=e.data,n=t.name,r=t.logo;return _.default.createElement("div",{className:"Pc-word-card-brand"},_.default.createElement("div",{className:"Pc-word-card-brand-wrapper"},_.default.createElement("img",{width:"20",height:"20",src:r,alt:"logo"}),_.default.createElement("span",null,n)))}function i(e){return e.data?_.default.createElement(T.default,null,_.default.createElement(R,(0,c.default)({},e,{data:(0,S.camelizeKeys)(e.data)}))):null}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1620),c=r(s),l=n(1720),u=r(l),p=n(1694),f=r(p),d=n(1591),h=r(d),m=n(1592),b=r(m),v=n(1593),y=r(v),w=n(1594),g=r(w),E=n(1595),O=r(E);t.default=i;var C=n(0),_=r(C),k=n(2),j=r(k),S=n(8),P=n(1766),T=r(P),N=n(1767),A=n(2534),x=r(A);n(2114);var R=function(e){function t(){var e,n,r,o;(0,b.default)(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=(0,g.default)(this,(e=t.__proto__||(0,h.default)(t)).call.apply(e,[this].concat(i))),r.state={display:!0},r.handleClick=function(e){e.stopPropagation();var t=r.props.data.clickTracks,n=e.target.closest("a");(0,N.clickTrack)(t).finally(function(){var e=n.href;window.open(e)})},r.handleClose=function(){var e=r.props.data.closeTracks;(0,N.closeTrack)(e).then(function(){r.setState(function(e){return{display:!e.display}}),r.props.onClose&&r.props.onClose()})},r.handleRef=function(e){r.root=e},o=n,(0,g.default)(r,o)}return(0,O.default)(t,e),(0,y.default)(t,[{key:"componentDidMount",value:function(){if(this.root&&!this.props.preview){var e=this.props.data,t=e.impressionTracks,n=e.debugTracks,r=e.viewTracks,o={impressionTracks:t,viewTracks:r,debugTracks:n};(0,N.initCmTrack)(this.root,o)}}},{key:"render",value:function(){var e=(0,f.default)(this.props.data.creatives,1),t=e[0],n=t.title,r=t.description,i=t.cta;i=void 0===i?{}:i;var s=i.value,c=t.landingUrl,l=t.brand;return this.state.display?_.default.createElement("div",{className:"Pc-word",ref:this.handleRef},_.default.createElement("div",{className:"Pc-word-card"},_.default.createElement(o,{href:c,onClick:this.handleClick},_.default.createElement(a,{data:l})),_.default.createElement(x.default,{onClose:this.handleClose}),_.default.createElement(o,{href:c,onClick:this.handleClick},_.default.createElement("h2",{className:"Pc-word-card-title"},n),_.default.createElement("div",{className:"Pc-word-card-content  "},r&&_.default.createElement(_.default.Fragment,null,_.default.createElement("span",null,r),_.default.createElement("span",{className:"Pc-word-card-content-cta  "},s)))))):null}}]),t}(C.Component);R.propTypes={data:j.default.object.isRequired,onClose:j.default.func}},2534:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1591),a=r(o),i=n(1592),s=r(i),c=n(1593),l=r(c),u=n(1594),p=r(u),f=n(1595),d=r(f),h=n(0),m=r(h),b=n(2),v=r(b),y=n(1629),w=r(y);n(2114);var g=function(e){function t(){var e,n,r,o;(0,s.default)(this,t);for(var i=arguments.length,c=Array(i),l=0;l<i;l++)c[l]=arguments[l];return n=r=(0,p.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(c))),r.state={display:!1},r.handleCloseByDocument=function(e){"Pc-word-card-sign-label"!==e.target.closest("div").className&&r.setState({display:!1})},r.handleClick=function(){r.setState(function(e){return{display:!e.display}});var e=r.sign.querySelector(".Pc-word-card-sign-label").getBoundingClientRect(),t=e.left,n=e.top,o=e.width,a=e.height,i=a+15,s=Math.floor(o/2);r.sign.querySelector(".Pc-word-card-sign-popup").style.top=n+i+"px",r.sign.querySelector(".Pc-word-card-sign-popup").style.left=t-s+"px"},r.handleClose=function(){r.props.onClose&&r.props.onClose()},r.handleRef=function(e){r.sign=e},o=n,(0,p.default)(r,o)}return(0,d.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleCloseByDocument)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleCloseByDocument)}},{key:"render",value:function(){return m.default.createElement("div",{className:"Pc-word-card-sign",ref:this.handleRef},m.default.createElement("div",{className:"Pc-word-card-sign-label",onClick:this.handleClick},"广告​",m.default.createElement(w.default,{name:"triangle",className:"Pc-word-card-sign-svg"})),m.default.createElement("div",{className:"Pc-word-card-sign-popup "+(this.state.display?"Pc-word-card-sign-popup--isShowed":"Pc-word-card-sign-popup--isHidden")},m.default.createElement("span",{className:"Pc-word-card-sign-popup-arrow"}),m.default.createElement("div",{className:"Pc-word-card-sign-popup-menu"},m.default.createElement("button",{type:"button",onClick:this.handleClose},"不感兴趣"),m.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/promotion-intro"},"知乎广告介绍"))))}}]),t}(h.Component);g.propTypes={onClose:v.default.func},t.default=g},2535:function(e,t){},2536:function(e,t){},2537:function(e,t){},2538:function(e,t){},2539:function(e,t){},2540:function(e,t){},2541:function(e,t){},2542:function(e,t){},2543:function(e,t,n){"use strict";function r(e){var t=e.isMobileView,n=e.advancedStyle;n=void 0===n?{}:n;var r=n.cardType,o=n.url,a=n.material,s=void 0===a?[]:a,c=e.handleViewTrack,u=e.handleClickTrack;if(!s)return null;var p=function(e){return"function"==typeof u?{onClick:function(){u(e)}}:{}},d=function(e){return"function"==typeof c?{onViewed:function(){c(e)}}:{}},y=function(e,t){return i.a.createElement("a",h({key:"AdvancedViewer-commodity-"+t,className:"AdvancedViewer-commodityItem",target:"_blank",href:o},p({etu:o,pi:t+1})),i.a.createElement("img",{src:e.image,role:"presentation"}),e.mainTitle&&i.a.createElement("div",{className:"AdvancedViewer-commodityIntro"},i.a.createElement("span",{className:"AdvancedViewer-mainTitle"},e.mainTitle),i.a.createElement("span",{className:"AdvancedViewer-subTitle"},e.subTitle)))};if("image"===r)return i.a.createElement("a",h({className:"AdvancedViewer-material AdvancedViewer-image",target:"_blank",href:o},p({etu:o})),i.a.createElement(v,{src:s[0].image,style:t?{width:375,height:156.25}:{}}));if("image_text"===r)return i.a.createElement("a",h({className:"AdvancedViewer-material AdvancedViewer-imageText",target:"_blank",href:o},p({etu:o})),t&&i.a.createElement("div",{className:"AdvancedViewer-intro"},s[0].intro),i.a.createElement(v,{src:s[0].image}),!t&&i.a.createElement("div",{className:"AdvancedViewer-intro"},s[0].intro));if("commodity"===r)return s.length&&i.a.createElement("div",{className:"AdvancedViewer-material AdvancedViewer-commodity"},t?s.map(y):i.a.createElement(f.a,{items:s,renderItem:y}));if("recommended"===r){var w=function(e,t){return i.a.createElement("a",h({className:"AdvancedViewer-recommendedItem",href:e.url,target:"_blank"},p({etu:e.url,pi:t+1})),i.a.createElement("div",{className:"AdvancedViewer-summary"},i.a.createElement("div",{className:"AdvancedViewer-wrap"},i.a.createElement("div",{className:"AdvancedViewer-title"},e.title),e.intro&&i.a.createElement("div",{className:"AdvancedViewer-desc"},e.intro.replace(/<[\s\S]*?>/g,""))),i.a.createElement("span",{className:"AdvancedViewer-data"},b[e.type]," · ",e.statisticText)),i.a.createElement(v,{src:e.image||m}))};return i.a.createElement("div",{className:"AdvancedViewer-material AdvancedViewer-recommended"},s.map(function(e,t){return c?i.a.createElement(l.a,h({key:"AdvancedViewer-recommendedItem-"+t},d({pi:t+1})),w(e,t)):w(e,t)}))}return null}function o(e){var t=e.isMobileView,n=e.brand,o=n.name,a=n.logo,s=e.advancedStyle;s=void 0===s?{}:s;var f=s.brandRecommendText,d=s.buttonText,m=s.url,b=s.cardType,v=e.handleViewTrack,y=e.handleClickTrack,w=function(e){return"function"==typeof y?{onClick:function(){y(e)}}:{}},g=o&&o.charCodeAt(o.length-1),E=g>=0&&g<=128?o+" ":o,O=t&&"recommended"!==b,C=f||E+"的品牌推荐",_=i.a.createElement(u.d,{className:c()("AdvancedViewer",{"is-mobile":t})},!O&&i.a.createElement(u.b,{className:"AdvancedViewer-header"},i.a.createElement("span",{className:"AdvancedViewer-headerText"},C)),i.a.createElement("div",{className:"AdvancedViewer-content"},i.a.createElement(r,e)),!t&&b&&"recommended"!==b&&i.a.createElement("div",{className:"AdvancedViewer-footer"},i.a.createElement(p.a,h({className:"AdvancedViewer-button",target:"_blank",to:m},w({etu:m})),d||"了解更多")),O&&i.a.createElement("div",{className:"AdvancedViewer-footer"},i.a.createElement("div",{className:"AdvancedViewer-brand"},i.a.createElement("img",{className:"AdvancedViewer-logo",src:a,role:"presentation"}),i.a.createElement("span",{className:"AdvancedViewer-brandName"},C)),i.a.createElement(p.a,h({className:"AdvancedViewer-button",target:"_blank",to:m},w({etu:m})),d||"查看详情")));return v?i.a.createElement(l.a,function(e){return"function"==typeof v?{onViewed:function(){v(e)}}:{}}(),_):_}t.a=o;var a=n(0),i=n.n(a),s=n(3),c=n.n(s),l=n(587),u=n(547),p=n(74),f=n(2544),d=n(2553),h=(n.n(d),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),m="https://pic1.zhimg.com/da8e974dc.jpg",b={question:"提问",answer:"回答",post:"文章",live:"Live",ebook:"电子书"},v=function(e){var t=e.src,n=e.style;return i.a.createElement("div",{className:"AdvancedViewer-imgField",style:h({},n,t?{backgroundImage:"url("+t+")",backgroundSize:"cover",backgroundPosition:"center"}:{})})}},2544:function(e,t,n){"use strict";(function(e){function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return k});var s,c,l=n(0),u=n.n(l),p=n(2545),f=(n.n(p),n(3)),d=n.n(f),h=n(28),m=n(2552),b=(n.n(m),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=30,w="ontouchstart"in e,g=function(e,t){var n=(t+1)%e;return n<0?n+e:n},E=function(e){var t=e.changedTouches[0];return{x:t.pageX,y:t.pageY}},O=function(e,t,n){return Math.min(Math.max(e,t),n)},C=function(e,t){return{transform:"translate3d("+e+", "+t+", 0)",WebkitTransform:"translate3d("+e+", "+t+", 0)"}},_=function(e){return function(t){t.stopPropagation(),e()}},k=(c=s=function(e){function t(){var e,n,r,i;o(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={offset:r.props.defaultIndex-(r.props.loop?r.props.visibles:0),touchMoveOffset:0,showLeftArrow:!1,showRightArrow:!1},r.handleHotkeys=function(e){var t=r.isVertical?38===e.keyCode:37===e.keyCode,n=r.isVertical?40===e.keyCode:39===e.keyCode;t?r.prev():n&&r.next()},r.play=function(){r.timer_=setTimeout(function(){r.next(r.play)},r.props.interval)},r.pause=function(){r.isPlaying_&&(r.isPaused_=!0,r.stop())},r.resume=function(){r.isPaused_&&r.start()},r.prev=function(e){var t=r.state.offset;return t-=1,r.setOffset(t,e)},r.next=function(e){var t=r.state.offset;return t+=1,r.setOffset(t,e)},r.handleTouchStart=function(e){r.pause(),r.touchStartPosition_=E(e)},r.handleTouchMove=function(e){e.preventDefault();var t=E(e);if(r.isVertical){var n=t.y-r.touchStartPosition_.y;r.setState({touchMoveOffset:O(n/r.el.offsetHeight,-1,1)})}else{var o=t.x-r.touchStartPosition_.x;r.setState({touchMoveOffset:O(o/r.el.offsetWidth,-1,1)})}},r.handleTouchEnd=function(e){var t=E(e),n=t.x-r.touchStartPosition_.x,o=t.y-r.touchStartPosition_.y,a=r.isVertical?o>y:n>y,i=r.isVertical?o<-y:n<-y,s=!1;a?s=r.prev(r.resume):i&&(s=r.next(r.resume)),s||r.setState({touchMoveOffset:0})},r.handleTouchCancel=function(){r.resume()},r.handleMouseEnter=function(){r.pause()},r.handleMouseMove=function(){r.props.enableArrows&&r.setState({showLeftArrow:!0,showRightArrow:!0})},r.handleMouseLeave=function(){r.resume(),r.setState({showLeftArrow:!1,showRightArrow:!1})},r.timer_=null,r.isPlaying_=!1,i=n,a(r,i)}return i(t,e),v(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.autoplay,n=e.enableHotkeys;t&&this.canPlay&&this.start(),n&&window.addEventListener("keydown",this.handleHotkeys)}},{key:"componentWillReceiveProps",value:function(e){var t=e.items,n=this.props.items;t.length!==n.length&&t.length>1&&this.start()}},{key:"componentWillUnmount",value:function(){this.stop(),window.removeEventListener("keydown",this.handleHotkeys)}},{key:"start",value:function(){this.isPlaying_||(this.isPlaying_=!0,this.play())}},{key:"stop",value:function(){this.isPlaying_=!1,clearTimeout(this.timer_)}},{key:"calcIndex",value:function(e){var t=this.props,n=t.loop,r=t.items;return n?g(r.length,e):e}},{key:"isValidIndex",value:function(e){var t=this.props.items;return e>=0&&e<=t.length-1}},{key:"setOffset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this.calcIndex(e);return!!this.isValidIndex(n)&&(this.props.onSlide({index:n}),this.setState({offset:e,touchMoveOffset:0},t),!0)}},{key:"slideTo",value:function(e,t){var n=this.props.items,r=this.state.offset,o=n.length,a=this.currentIndex;e!==a&&(r+=a<e?e-a:o+e-a,this.setOffset(r,t))}},{key:"getTranslateStyle",value:function(e){return this.isVertical?C(0,100*e+"%"):C(100*e+"%",0)}},{key:"renderArrows",value:function(){var e=this.props.enableArrows,t=this.state,n=t.showLeftArrow,r=t.showRightArrow;return!e||this.isVertical?null:u.a.createElement("span",null,n&&u.a.createElement("button",{className:"Carousel-leftArrow","aria-label":"上一个",onClick:_(this.prev)},u.a.createElement(h.a,{name:"arrow"})),r&&u.a.createElement("button",{className:"Carousel-rightArrow","aria-label":"下一个",onClick:_(this.next)},u.a.createElement(h.a,{name:"arrow"})))}},{key:"renderBullets",value:function(){var e=this,t=this.props,n=t.items;return t.enableBullets?u.a.createElement("div",{className:"Carousel-bullets"},n.map(function(t,n){return u.a.createElement("span",{key:n,className:d()("Carousel-bullet",{"is-active":e.currentIndex===n}),onClick:function(){return e.slideTo(n)}})})):null}},{key:"renderItems",value:function(){var e=this.props,t=e.loop,n=e.items,o=e.renderItem,a=e.visibles;if(!t)return n.map(function(e,t){return Object(l.cloneElement)(o(e,t),{key:t})});var i=this.currentIndex,s=i+3*a;return[n[n.length-1]].concat(r(n),[n[0]]).map(function(e,t){var n=t>=i&&t<s;return Object(l.cloneElement)(o(e,t),{key:t,hidden:!n})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.loop,r=t.visibles,o=t.items,a=t.className,i=t.defaultIndex,s=this.state,c=s.offset,l=s.touchMoveOffset;if(!o.length)return null;var f=this.canPlay?{onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,onTouchCancel:this.handleTouchCancel,onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave}:null,h=n?r:0;return u.a.createElement(p.Motion,{defaultStyle:{offset:-i},style:{offset:Object(p.spring)(-(c+h-l))}},function(t){return u.a.createElement("div",b({ref:function(t){return e.el=t},className:d()("Carousel",a,{"is-vertical":e.isVertical})},f),u.a.createElement("div",{className:"Carousel-scroller",style:e.getTranslateStyle(t.offset)},u.a.createElement("div",{className:"Carousel-window",style:n?e.getTranslateStyle(c):null},e.renderItems())),e.canPlay&&e.renderArrows(),e.canPlay&&e.renderBullets())})}},{key:"canPlay",get:function(){return this.props.items.length>1}},{key:"isVertical",get:function(){return"vertical"===this.props.direction}},{key:"currentIndex",get:function(){return this.calcIndex(this.state.offset)}}]),t}(l.Component),s.defaultProps={id:"",items:[],defaultIndex:0,visibles:1,interval:3e3,loop:!0,enableArrows:!w,enableBullets:!0,enableHotkeys:!1,autoplay:!0,direction:"horizontal",onSlide:function(){}},c)}).call(t,n(11))},2545:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e.default:e}t.__esModule=!0;var o=n(2546);t.Motion=r(o);var a=n(2547);t.StaggeredMotion=r(a);var i=n(2548);t.TransitionMotion=r(i);var s=n(2550);t.spring=r(s);var c=n(2116);t.presets=r(c);var l=n(1812);t.stripStyle=r(l);var u=n(2551);t.reorderKeys=r(u)},2546:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(2043),i=r(a),s=n(1812),c=r(s),l=n(2044),u=r(l),p=n(2045),f=r(p),d=n(575),h=r(d),m=n(2046),b=r(m),v=n(0),y=r(v),w=n(2),g=r(w),E=n(2047),O=r(E),C=O.default({propTypes:{defaultStyle:g.default.objectOf(g.default.number),style:g.default.objectOf(g.default.oneOfType([g.default.number,g.default.object])).isRequired,children:g.default.func.isRequired,onRest:g.default.func},getInitialState:function(){var e=this.props,t=e.defaultStyle,n=e.style,r=t||c.default(n),o=i.default(r);return{currentStyle:r,currentVelocity:o,lastIdealStyle:r,lastIdealVelocity:o}},wasAnimating:!1,animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyle:null,clearUnreadPropStyle:function(e){var t=!1,n=this.state,r=n.currentStyle,a=n.currentVelocity,i=n.lastIdealStyle,s=n.lastIdealVelocity;for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c)){var l=e[c];"number"==typeof l&&(t||(t=!0,r=o({},r),a=o({},a),i=o({},i),s=o({},s)),r[c]=l,a[c]=0,i[c]=l,s[c]=0)}t&&this.setState({currentStyle:r,currentVelocity:a,lastIdealStyle:i,lastIdealVelocity:s})},startAnimationIfNecessary:function(){var e=this;this.animationID=h.default(function(t){var n=e.props.style;if(b.default(e.state.currentStyle,n,e.state.currentVelocity))return e.wasAnimating&&e.props.onRest&&e.props.onRest(),e.animationID=null,e.wasAnimating=!1,void(e.accumulatedTime=0);e.wasAnimating=!0;var r=t||f.default(),o=r-e.prevTime;if(e.prevTime=r,e.accumulatedTime=e.accumulatedTime+o,e.accumulatedTime>1e3/60*10&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();var a=(e.accumulatedTime-Math.floor(e.accumulatedTime/(1e3/60))*(1e3/60))/(1e3/60),i=Math.floor(e.accumulatedTime/(1e3/60)),s={},c={},l={},p={};for(var d in n)if(Object.prototype.hasOwnProperty.call(n,d)){var h=n[d];if("number"==typeof h)l[d]=h,p[d]=0,s[d]=h,c[d]=0;else{for(var m=e.state.lastIdealStyle[d],v=e.state.lastIdealVelocity[d],y=0;y<i;y++){var w=u.default(1e3/60/1e3,m,v,h.val,h.stiffness,h.damping,h.precision);m=w[0],v=w[1]}var g=u.default(1e3/60/1e3,m,v,h.val,h.stiffness,h.damping,h.precision),E=g[0],O=g[1];l[d]=m+(E-m)*a,p[d]=v+(O-v)*a,s[d]=m,c[d]=v}}e.animationID=null,e.accumulatedTime-=i*(1e3/60),e.setState({currentStyle:l,currentVelocity:p,lastIdealStyle:s,lastIdealVelocity:c}),e.unreadPropStyle=null,e.startAnimationIfNecessary()})},componentDidMount:function(){this.prevTime=f.default(),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=e.style,null==this.animationID&&(this.prevTime=f.default(),this.startAnimationIfNecessary())},componentWillUnmount:function(){null!=this.animationID&&(h.default.cancel(this.animationID),this.animationID=null)},render:function(){var e=this.props.children(this.state.currentStyle);return e&&y.default.Children.only(e)}});t.default=C,e.exports=t.default},2547:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){for(var r=0;r<e.length;r++)if(!v.default(e[r],t[r],n[r]))return!1;return!0}t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(2043),s=r(i),c=n(1812),l=r(c),u=n(2044),p=r(u),f=n(2045),d=r(f),h=n(575),m=r(h),b=n(2046),v=r(b),y=n(0),w=r(y),g=n(2),E=r(g),O=n(2047),C=r(O),_=C.default({propTypes:{defaultStyles:E.default.arrayOf(E.default.objectOf(E.default.number)),styles:E.default.func.isRequired,children:E.default.func.isRequired},getInitialState:function(){var e=this.props,t=e.defaultStyles,n=e.styles,r=t||n().map(l.default),o=r.map(function(e){return s.default(e)});return{currentStyles:r,currentVelocities:o,lastIdealStyles:r,lastIdealVelocities:o}},animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyles:null,clearUnreadPropStyle:function(e){for(var t=this.state,n=t.currentStyles,r=t.currentVelocities,o=t.lastIdealStyles,i=t.lastIdealVelocities,s=!1,c=0;c<e.length;c++){var l=e[c],u=!1;for(var p in l)if(Object.prototype.hasOwnProperty.call(l,p)){var f=l[p];"number"==typeof f&&(u||(u=!0,s=!0,n[c]=a({},n[c]),r[c]=a({},r[c]),o[c]=a({},o[c]),i[c]=a({},i[c])),n[c][p]=f,r[c][p]=0,o[c][p]=f,i[c][p]=0)}}s&&this.setState({currentStyles:n,currentVelocities:r,lastIdealStyles:o,lastIdealVelocities:i})},startAnimationIfNecessary:function(){var e=this;this.animationID=m.default(function(t){var n=e.props.styles(e.state.lastIdealStyles);if(o(e.state.currentStyles,n,e.state.currentVelocities))return e.animationID=null,void(e.accumulatedTime=0);var r=t||d.default(),a=r-e.prevTime;if(e.prevTime=r,e.accumulatedTime=e.accumulatedTime+a,e.accumulatedTime>1e3/60*10&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();for(var i=(e.accumulatedTime-Math.floor(e.accumulatedTime/(1e3/60))*(1e3/60))/(1e3/60),s=Math.floor(e.accumulatedTime/(1e3/60)),c=[],l=[],u=[],f=[],h=0;h<n.length;h++){var m=n[h],b={},v={},y={},w={};for(var g in m)if(Object.prototype.hasOwnProperty.call(m,g)){var E=m[g];if("number"==typeof E)b[g]=E,v[g]=0,y[g]=E,w[g]=0;else{for(var O=e.state.lastIdealStyles[h][g],C=e.state.lastIdealVelocities[h][g],_=0;_<s;_++){var k=p.default(1e3/60/1e3,O,C,E.val,E.stiffness,E.damping,E.precision);O=k[0],C=k[1]}var j=p.default(1e3/60/1e3,O,C,E.val,E.stiffness,E.damping,E.precision),S=j[0],P=j[1];b[g]=O+(S-O)*i,v[g]=C+(P-C)*i,y[g]=O,w[g]=C}}u[h]=b,f[h]=v,c[h]=y,l[h]=w}e.animationID=null,e.accumulatedTime-=s*(1e3/60),e.setState({currentStyles:u,currentVelocities:f,lastIdealStyles:c,lastIdealVelocities:l}),e.unreadPropStyles=null,e.startAnimationIfNecessary()})},componentDidMount:function(){this.prevTime=d.default(),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){null!=this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=e.styles(this.state.lastIdealStyles),null==this.animationID&&(this.prevTime=d.default(),this.startAnimationIfNecessary())},componentWillUnmount:function(){null!=this.animationID&&(m.default.cancel(this.animationID),this.animationID=null)},render:function(){var e=this.props.children(this.state.currentStyles);return e&&w.default.Children.only(e)}});t.default=_,e.exports=t.default},2548:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var r=t;return null==r?e.map(function(e,t){return{key:e.key,data:e.data,style:n[t]}}):e.map(function(e,t){for(var o=0;o<r.length;o++)if(r[o].key===e.key)return{key:r[o].key,data:r[o].data,style:n[t]};return{key:e.key,data:e.data,style:n[t]}})}function a(e,t,n,r){if(r.length!==t.length)return!1;for(var o=0;o<r.length;o++)if(r[o].key!==t[o].key)return!1;for(var o=0;o<r.length;o++)if(!E.default(e[o],t[o].style,n[o]))return!1;return!0}function i(e,t,n,r,o,a,i,s,c){for(var u=m.default(r,o,function(e,r){var o=t(r);return null==o?(n({key:r.key,data:r.data}),null):E.default(a[e],o,i[e])?(n({key:r.key,data:r.data}),null):{key:r.key,data:r.data,style:o}}),p=[],f=[],d=[],h=[],b=0;b<u.length;b++){for(var v=u[b],y=null,w=0;w<r.length;w++)if(r[w].key===v.key){y=w;break}if(null==y){var g=e(v);p[b]=g,d[b]=g;var O=l.default(v.style);f[b]=O,h[b]=O}else p[b]=a[y],d[b]=s[y],f[b]=i[y],h[b]=c[y]}return[u,p,f,d,h]}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=n(2043),l=r(c),u=n(1812),p=r(u),f=n(2044),d=r(f),h=n(2549),m=r(h),b=n(2045),v=r(b),y=n(575),w=r(y),g=n(2046),E=r(g),O=n(0),C=r(O),_=n(2),k=r(_),j=n(2047),S=r(j),P=S.default({propTypes:{defaultStyles:k.default.arrayOf(k.default.shape({key:k.default.string.isRequired,data:k.default.any,style:k.default.objectOf(k.default.number).isRequired})),styles:k.default.oneOfType([k.default.func,k.default.arrayOf(k.default.shape({key:k.default.string.isRequired,data:k.default.any,style:k.default.objectOf(k.default.oneOfType([k.default.number,k.default.object])).isRequired}))]).isRequired,children:k.default.func.isRequired,willEnter:k.default.func,willLeave:k.default.func,didLeave:k.default.func},getDefaultProps:function(){return{willEnter:function(e){return p.default(e.style)},willLeave:function(){return null},didLeave:function(){}}},getInitialState:function(){var e=this.props,t=e.defaultStyles,n=e.styles,r=e.willEnter,o=e.willLeave,a=e.didLeave,s="function"==typeof n?n(t):n,c=void 0;c=null==t?s:t.map(function(e){for(var t=0;t<s.length;t++)if(s[t].key===e.key)return s[t];return e});var u=null==t?s.map(function(e){return p.default(e.style)}):t.map(function(e){return p.default(e.style)}),f=null==t?s.map(function(e){return l.default(e.style)}):t.map(function(e){return l.default(e.style)}),d=i(r,o,a,c,s,u,f,u,f),h=d[0];return{currentStyles:d[1],currentVelocities:d[2],lastIdealStyles:d[3],lastIdealVelocities:d[4],mergedPropsStyles:h}},unmounting:!1,animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyles:null,clearUnreadPropStyle:function(e){for(var t=i(this.props.willEnter,this.props.willLeave,this.props.didLeave,this.state.mergedPropsStyles,e,this.state.currentStyles,this.state.currentVelocities,this.state.lastIdealStyles,this.state.lastIdealVelocities),n=t[0],r=t[1],o=t[2],a=t[3],c=t[4],l=0;l<e.length;l++){var u=e[l].style,p=!1;for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var d=u[f];"number"==typeof d&&(p||(p=!0,r[l]=s({},r[l]),o[l]=s({},o[l]),a[l]=s({},a[l]),c[l]=s({},c[l]),n[l]={key:n[l].key,data:n[l].data,style:s({},n[l].style)}),r[l][f]=d,o[l][f]=0,a[l][f]=d,c[l][f]=0,n[l].style[f]=d)}}this.setState({currentStyles:r,currentVelocities:o,mergedPropsStyles:n,lastIdealStyles:a,lastIdealVelocities:c})},startAnimationIfNecessary:function(){var e=this;this.unmounting||(this.animationID=w.default(function(t){if(!e.unmounting){var n=e.props.styles,r="function"==typeof n?n(o(e.state.mergedPropsStyles,e.unreadPropStyles,e.state.lastIdealStyles)):n;if(a(e.state.currentStyles,r,e.state.currentVelocities,e.state.mergedPropsStyles))return e.animationID=null,void(e.accumulatedTime=0);var s=t||v.default(),c=s-e.prevTime;if(e.prevTime=s,e.accumulatedTime=e.accumulatedTime+c,e.accumulatedTime>1e3/60*10&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();for(var l=(e.accumulatedTime-Math.floor(e.accumulatedTime/(1e3/60))*(1e3/60))/(1e3/60),u=Math.floor(e.accumulatedTime/(1e3/60)),p=i(e.props.willEnter,e.props.willLeave,e.props.didLeave,e.state.mergedPropsStyles,r,e.state.currentStyles,e.state.currentVelocities,e.state.lastIdealStyles,e.state.lastIdealVelocities),f=p[0],h=p[1],m=p[2],b=p[3],y=p[4],w=0;w<f.length;w++){var g=f[w].style,E={},O={},C={},_={};for(var k in g)if(Object.prototype.hasOwnProperty.call(g,k)){var j=g[k];if("number"==typeof j)E[k]=j,O[k]=0,C[k]=j,_[k]=0;else{for(var S=b[w][k],P=y[w][k],T=0;T<u;T++){var N=d.default(1e3/60/1e3,S,P,j.val,j.stiffness,j.damping,j.precision);S=N[0],P=N[1]}var A=d.default(1e3/60/1e3,S,P,j.val,j.stiffness,j.damping,j.precision),x=A[0],R=A[1];E[k]=S+(x-S)*l,O[k]=P+(R-P)*l,C[k]=S,_[k]=P}}b[w]=C,y[w]=_,h[w]=E,m[w]=O}e.animationID=null,e.accumulatedTime-=u*(1e3/60),e.setState({currentStyles:h,currentVelocities:m,lastIdealStyles:b,lastIdealVelocities:y,mergedPropsStyles:f}),e.unreadPropStyles=null,e.startAnimationIfNecessary()}}))},componentDidMount:function(){this.prevTime=v.default(),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);var t=e.styles;this.unreadPropStyles="function"==typeof t?t(o(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):t,null==this.animationID&&(this.prevTime=v.default(),this.startAnimationIfNecessary())},componentWillUnmount:function(){this.unmounting=!0,null!=this.animationID&&(w.default.cancel(this.animationID),this.animationID=null)},render:function(){var e=o(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles),t=this.props.children(e);return t&&C.default.Children.only(t)}});t.default=P,e.exports=t.default},2549:function(e,t,n){"use strict";function r(e,t,n){for(var r={},o=0;o<e.length;o++)r[e[o].key]=o;for(var a={},o=0;o<t.length;o++)a[t[o].key]=o;for(var i=[],o=0;o<t.length;o++)i[o]=t[o];for(var o=0;o<e.length;o++)if(!Object.prototype.hasOwnProperty.call(a,e[o].key)){var s=n(o,e[o]);null!=s&&i.push(s)}return i.sort(function(e,n){var o=a[e.key],i=a[n.key],s=r[e.key],c=r[n.key];if(null!=o&&null!=i)return a[e.key]-a[n.key];if(null!=s&&null!=c)return r[e.key]-r[n.key];if(null!=o){for(var l=0;l<t.length;l++){var u=t[l].key;if(Object.prototype.hasOwnProperty.call(r,u)){if(o<a[u]&&c>r[u])return-1;if(o>a[u]&&c<r[u])return 1}}return 1}for(var l=0;l<t.length;l++){var u=t[l].key;if(Object.prototype.hasOwnProperty.call(r,u)){if(i<a[u]&&s>r[u])return 1;if(i>a[u]&&s<r[u])return-1}}return-1})}t.__esModule=!0,t.default=r,e.exports=t.default},2550:function(e,t,n){"use strict";function r(e,t){return o({},s,t,{val:e})}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var a=n(2116),i=function(e){return e&&e.__esModule?e:{default:e}}(a),s=o({},i.default.noWobble,{precision:.01});e.exports=t.default},2551:function(e,t,n){"use strict";function r(){}t.__esModule=!0,t.default=r;e.exports=t.default},2552:function(e,t){},2553:function(e,t){},2554:function(e,t){},2555:function(e,t){},2556:function(e,t){},2557:function(e,t){},2558:function(e,t){},2559:function(e,t){},2560:function(e,t){},2561:function(e,t){},2737:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function O(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function j(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function S(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function A(e){return e.name.startsWith("创建 ")&&e.name.endsWith(" 话题")}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function D(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function V(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function X(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ne(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ae(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ie(e,t){var n=t.question.id,r=e.entities,o=r.users,a=r.topics,i=e.question,s=i.invitationCandidates,c=i.invitees,l=i.autoInvitation,u=function(e){var t=e.member,n=e.isInvited,r=e.topicContributions,i=e.reason,s=r&&r.sort(function(e,t){return t.contributionsCount-e.contributionsCount})[0]||{},c=s.topic,l=s.contributionsCount;return{user:o[t],topic:a[c],isInvited:n,contributionsCount:l,reason:i}},p=s[n]||{isFetching:!1,isDrained:!1,items:[],searchItems:[]},f=p.isFetching,d=p.isDrained,h=p.items,m=p.searchItems,b=c[n]||{items:[]},v=b.items;return{isFetching:f,isDrained:d,items:h.map(u),searchItems:m.map(u),invitees:v.map(function(e){return o[e]}),autoInvitationItem:l[n]}}function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function le(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ue(e,t){var n=e.entities.questions,r=e.question.inviters,o=t.location.query,a=t.question.id,i={isMuteSpecial:Object(To.n)(t.question),edition:e.env.edition,inviters:r[a]};if(o.rf&&/^\d+$/.test(o.rf)){var s=n[Number(o.rf)];s&&(i.fromQuestion=s)}return i}function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function de(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function he(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function me(e,t){var n=t.parent.id,r=e.entities.users,o=e.question,a=o.followers,i=o.concernedFollowers,s=a[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},c=s.isFetching,l=s.isDrained,u=s.order,p=s.ids,f=i[n]||{ids:[]},d=f.ids;return{isFetching:c,isDrained:l,order:u,items:[].concat(he(d),he(p.filter(function(e){return!d.includes(e)}))).map(function(e){return r[e]}),currentUser:Object(Ha.c)(e)}}function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ye(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ke(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e&&(t||n)}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Pe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ae(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Re(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Me(e,t){var n=new Date(e),r=new Date(t),o=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),a=Date.UTC(r.getFullYear(),r.getMonth(),r.getDate());return Math.floor((a-o)/Lc)}function Le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=new Date(t),r=Math.floor(n.getTime()/1e3),o=e-r;if(o<0)return null;var a=0,i="天";if(o>86400){a=Me(n,new Date(1e3*e)),i="天"}else o>3600?(a=Math.floor(o/3600),i="小时"):o>60?(a=Math.floor(o/60),i="分钟"):(a=o,i="秒");return{quantity:a,unit:i}}function De(e){var t=["一","二","三"],n=function(){var t=e.question,n=t.id,r=t.prize,o=r.endTime,a=r.rule,i=r.status;return vo.a.createElement("div",{className:"BrandQuestionPrizes-tips"},vo.a.createElement("div",{className:"BrandQuestionPrizes-tip"},vo.a.createElement("span",{className:"BrandQuestionPrizes-tipTitle"},"活动时间","："),Mc()(new Date(1e3*o),"YYYY-MM-DD HH:mm")," 截止"),vo.a.createElement("div",{className:"BrandQuestionPrizes-tip"},vo.a.createElement("span",{className:"BrandQuestionPrizes-tipTitle"},"活动规则","："),a),vo.a.createElement("div",{className:"BrandQuestionPrizes-tip"},vo.a.createElement("span",{className:"BrandQuestionPrizes-tipTitle"},"获奖公示","："),"ongoing"===i&&"获奖名单将在活动结束后公布","finished"===i&&"品牌开奖中，即将公布获奖名单","awarded"===i&&vo.a.createElement(yo.Link,{target:"_blank",to:"/organization/question/"+n+"/winners"},"查看获奖名单"),!1),vo.a.createElement("div",{className:"BrandQuestionPrizes-rule"},"品牌方为本问题设置了有奖问答，添加回答即视为参与活动，并同意遵守",vo.a.createElement("a",{className:"BrandQuestionPrizes-ruleLink",href:"https://www.zhihu.com/organization/ophelp/norm/53",target:"_blank",rel:"noopener noreferrer"},"《有奖问答活动管理办法》")))},r=e.handleToggle,o=e.expanded,a=e.question,i=a.id,s=a.prize,c=a.relationship;c=void 0===c?{}:c;var l=c.isAuthor,u=a.permission;u=void 0===u?{}:u;var p=u.isSuperUser;if(!s||!s.status)return null;var f=s.endTime,d=s.prizes,h=s.status,m=Le(f);return vo.a.createElement("div",{className:Io()("BrandQuestionPrizes",{"is-mobile":!1})},vo.a.createElement("div",{className:"BrandQuestionPrizes-info"},vo.a.createElement("div",{className:"BrandQuestionPrizes-bar",onClick:r},vo.a.createElement("div",{className:"BrandQuestionPrizes-desc"},vo.a.createElement("div",{className:"BrandQuestionPrizes-symbol"},vo.a.createElement(qc.a,{alt:"logo",width:72,height:18,fill:"ongoing"===h?"#ff9607":"#999999"}),"ongoing"===h&&vo.a.createElement("span",null,"距离结束还有",vo.a.createElement("em",null,m.quantity),m.unit),"finished"===h&&"待开奖","awarded"===h&&"已开奖"),vo.a.createElement("div",{className:"BrandQuestionPrizes-name"},"奖品：",d[0].name,d.length>1&&"等")),vo.a.createElement("div",{className:"BrandQuestionPrizes-images"},d.map(function(e,t){var n=e.imageUrl;return n&&vo.a.createElement("img",{key:"BrandQuestionPrizes-images"+t,src:n,role:"presentation"})}),vo.a.createElement(Bo.a,{name:"arrow",width:9,height:5,fill:"#9fadc7"}))),o&&vo.a.createElement("div",{className:"BrandQuestionPrizes-detail"},d.map(function(e,n){var r=e.imageUrl,o=e.name,a=e.value,i=e.quantity;return vo.a.createElement("div",{key:"BrandQuestionPrizes-prize"+n,className:"BrandQuestionPrizes-prize"},vo.a.createElement("div",{className:"BrandQuestionPrizes-intro"},r&&vo.a.createElement("img",{className:"BrandQuestionPrizes-prizeImage",src:r,role:"presentation"}),vo.a.createElement("div",{className:"BrandQuestionPrizes-prizeInfo"},vo.a.createElement("div",{className:"BrandQuestionPrizes-prizeName"},d.length>1&&t[n]+"等奖：",o),vo.a.createElement("div",{className:"BrandQuestionPrizes-prizeValue"},"价值 ¥ ",a))),vo.a.createElement("div",{className:"BrandQuestionPrizes-prizeQuantity"},i," 份"))})),o&&!1&&n()),o&&!0&&n(),o&&vo.a.createElement("hr",{className:"BrandQuestionPrizes-split"}),(p||l)&&vo.a.createElement(si.a,{className:"BrandQuestionPrizes-edit",to:"/organization/question/"+i+"/setting/"+("finished"===h?"winners":"prize")},"ongoing"===h&&"编辑有奖回答","finished"===h&&"填写获奖名单"))}function qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Qe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function He(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function We(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ke(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ge(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Xe(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function $e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Je(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ze(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function et(e){return{brand:e.question.brand,publicEditPermission:e.publicEditPermission,currentUserUrlToken:e.currentUser,permission:Object(To.G)(e)}}function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function rt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ot(e){var t=e.toString();return 1===t.length?"0"+t:t}function at(){var e=document.querySelector(".QuestionAnswers-statusWrapper");window.scrollTo(0,e?window.pageYOffset-.75*window.innerWidth+e.getBoundingClientRect().bottom:0)}function it(e,t){var n=t.params,r=n.id,o=n.answerId,a=e.question.meta,i=e.entities.drafts,s=void 0===i?{}:i,c=e.env.referer,l=e.reward,u=void 0===l?{}:l,p=e.currentUser,f=Boolean(o);return Wl({id:r,meta:a[r]||[],question:Object(To.I)(e,{id:r}),reward:u,draft:s["question_"+r],referer:c,currentUserUrlToken:p},f?{answer:Object(ci.c)(e,{id:o})}:{firstAnswer:Object(ci.g)(e,{id:r})})}function st(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function ct(e){var t=e.params.id,n=e.route.resource,r=e.location.query,o=r.group_id,a=r.page,i=r.qc;return function(e,r){if(!i&&o)return e(Object(To.x)(o));var s=r().env.userAgent,c=uu;return s.isBot?c=pu:s.Mobile&&(c=4),e(Object(To.w)(t,n,{offset:Object(au.c)(Number(a)||1),limit:c}))}}function lt(e,t){var n=t.id,r=t.resource;return e.question[r][n]||fu}function ut(e,t){var n=t.params.id,r=t.route.resource,o=t.location.query,a=o.group_id,i=o.qc,s=e.currentUser,c=!i&&a,l=lt(e,{id:n,resource:r}),u=l.isDrained,p=Object(To.I)(e,{id:n}),f=p.answerCount,d=p.relationship.isAnonymous,h=s&&!d&&f<su,m=f?cu:lu;return{isNormalNotification:c,notificationId:a,resource:r,question:p,isDrained:u,invitationShowCount:h?m:0,isBot:e.env.userAgent.isBot,isHuman:Object(bi.e)(e),currentUser:Object(Ha.c)(e),edition:Object(bi.d)(e),canOia:Object(bi.b)(e),shouldOia:Object(bi.h)(e),referer:Object(bi.g)(e),isMuteSpecial:Object(To.n)(p)}}function pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function dt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ht(e,t){var n=lt(e,{id:t.id,resource:"notificationAnswers"}),r=n.isFetching,o=n.isDrained,a=n.ids;return{isFetching:r,isDrained:o,items:vu(a,e.entities.answers)}}function mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function vt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function yt(e){var t=e.question;return{commonAnswerCount:t.commonAnswerCount,hiddenAnswerCount:t.hiddenAnswerCount,permission:Object(To.G)(e)}}function wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Et(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ot(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function Ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _t(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function kt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function St(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Pt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function At(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function xt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function It(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Dt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function qt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ut(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function zt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ft(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Qt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Vt(e,t){var n=e.currentUser,r=e.question.bio,o=e.entities,a=o.questions,i=o.users,s=e.topic.bios,c=t.question.id,l=a[c],u=(r[c]||{result:{type:"headline"}}).result;return{isFetching:s.isFetching,currentBio:{type:u.type,topic:u.topic},bios:l.topics.map(function(e){return{topic:e,bio:s[e.id]}}),question:l,user:i[n]}}function Ht(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function Wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Kt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function $t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Jt(e,t){var n=e.question.bio,r=e.topic.bios,o=e.answers.newAnswer,a=t.question.id,i=(n[a]||{result:{type:"headline"}}).result;return"topic"===i.type&&(i.bio=r[i.topic.id]||i.bio),{questionBio:i,newAnswer:o}}function Zt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function en(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function tn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function nn(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function rn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function on(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function an(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ln(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function un(e,t){var n=t.question.id,r=lt(e,{id:n,resource:"collapsedAnswers"}),o=r.isFetching,a=r.isDrained,i=r.ids;return{isFetching:o,isDrained:a,items:vu(i,e.entities.answers)}}function pn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function dn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function hn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function bn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function vn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function wn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function gn(e,t){var n=e.explore.recommendations,r=n.items;return{isLoading:n.isLoading,isDrained:n.isDrained,isError:n.isError,items:r,similarQuestions:e.question.similarQuestions[t.question.id]}}function En(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function On(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Cn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function jn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Sn(e,t){return{items:e.question.similarQuestions[t.question.id]}}function Pn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Nn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function An(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Rn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function In(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ln(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Dn(e,t){var n=e.question.relatedCommodities,r=t.question.id,o=n[r];return{attachedInfo:(o||[]).attachedInfo,items:o}}function qn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Un(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function zn(e){var t=e.entities,n=e.question.brand,r={};return n&&n.target&&n.target.urlToken&&(r=t.users[n.target.urlToken]||{}),{brand:n,brandMember:r}}function Fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Vn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Hn(e){var t=e.text,n=e.from,r=e.score;return vo.a.createElement("span",null,n||t,r&&vo.a.createElement("strong",null,r))}function Wn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Kn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Gn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function $n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Jn(e){return{brand:e.question.brand}}function Zn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function er(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function tr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function nr(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function rr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function or(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ar(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ir(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function cr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function lr(e,t){var n=t.question.id,r=t.answerId,o=e.entities.answers,a=e.question,i=a.answers[n]||{ids:[],isDrained:!1};return{isDrained:i.isDrained,items:i.ids.filter(function(e){return e!==Number(r)}).slice(0,mh).map(function(e){return o[e]}),isWechat:e.env.userAgent.Wechat}}function ur(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function fr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function dr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function mr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function br(e,t){var n=t.answer,r=n.author,o=n.author.urlToken,a=e.entities.users,i=o?a[o]:r;return{currentUser:Object(Ha.c)(e),isDrained:Sh(i),user:i,isSelf:Object(Ha.g)(e,i)}}function vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function wr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function gr(e,t){var n=t.answer.id,r=e.entities.favlists,o=e.answers.favlists[n]||{isFetching:!1,isDrained:!1,totals:0,ids:[]};return{items:o.ids.map(function(e){return r[e]}),count:o.totals,isFetching:o.isFetching,isDrained:o.isDrained}}function Er(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Or(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Cr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _r(e,t){var n=t.answer.id,r=e.entities.copyrightApplicants,o=e.answers.copyrightApplicants[n]||{isFetching:!1,isDrained:!1,totals:0,ids:[]};return{items:o.ids.map(function(e){return r[e]}),count:o.totals,isFetching:o.isFetching,isDrained:o.isDrained}}function kr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Sr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Pr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Nr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ar(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Rr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ir(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Lr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Dr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Br(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ur(e,t){var n=t.answer.id,r=e.entities,o=r.copyrightApplicants,a=r.favlists,i=e.answers.copyrightApplicants[n]||{totals:0,ids:[]},s=e.answers.favlists[n]||{totals:0,ids:[]};return{copyrightApplicants:i.ids.map(function(e){return o[e]}),copyrightApplicantCount:i.totals,favlists:s.ids.map(function(e){return a[e]}),favlistCount:s.totals}}function zr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Qr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Wr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Yr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Gr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Xr(e,t){var n=t.params,r=n.id,o=n.answerId,a=Object(To.I)(e,{id:r}),i=Object(ci.c)(e,{id:o}),s=(a||{}).relationship||{myAnswer:{isDelete:!1}};return{question:a,answer:i&&im({},i,{isDelete:(i.relationship||{}).isAuthor&&(s.myAnswer||{}).isDeleted}),isMuteSpecial:Object(To.n)(a)}}function $r(e){var t=e.params.answerId;return Object(ci.l)(t)}function Jr(){var e=document.querySelector("#QuestionAnswers-answers");return e?e.offsetTop:0}Object.defineProperty(t,"__esModule",{value:!0});var Zr,eo,to,no,ro,oo,ao,io,so,co,lo,uo,po,fo,ho,mo,bo=n(0),vo=n.n(bo),yo=n(16),wo=n(2),go=n.n(wo),Eo=n(6),Oo=n(111),Co=n.n(Oo),_o=n(314),ko=n.n(_o),jo=n(548),So=n(4),Po=n(178),To=n(109),No=(n(2510),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Ao=(Zr=Object(Eo.connect)(null,{updateQuestionAnonymous:To.N}))((no=to=function(e){function t(){var e,n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),a.handleToggleAnonymousConfirm=function(){var e=a.props,t=e.question.id,n=e.updateQuestionAnonymous;(0,e.onClose)(),n(t).then(function(){var e=a.props,t=e.isCheckedCircle,n=e.onChangecircleSettings;t&&n(!1)})},i=n,o(a,i)}return a(t,e),No(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.question,r=e.shown,o=e.showCircle,a=n.relationship.isAnonymous;return vo.a.createElement(Po.b,{title:a?"确认取消匿名身份？":"确认使用匿名身份？",onClose:t,size:"default"},r&&vo.a.createElement("div",null,a?vo.a.createElement("div",{className:"Anonymous-confirm"},vo.a.createElement("p",null,"取消匿名身份后， 提问、回答、赞同和关注将以实名显示。")):vo.a.createElement("div",{className:"Anonymous-confirm"},vo.a.createElement("p",null,"使用匿名身份后"),vo.a.createElement("ul",null,vo.a.createElement("li",null,"提问、回答、赞同、关注会显示为匿名"),vo.a.createElement("li",null,"除提问者本人，不能匿名编辑问题"),vo.a.createElement("li",null,"不能邀请别人回答问题"),vo.a.createElement("li",null,"不能使用视频功能"),o&&vo.a.createElement("li",null,"自动关闭圈内说"))),vo.a.createElement(Po.a,{direction:"horizontal"},vo.a.createElement(So.c,{onClick:t,color:"grey"},"取消"),vo.a.createElement(So.c,{preset:"primary",color:"blue",onClick:this.handleToggleAnonymousConfirm},"确认"))))}}]),t}(bo.Component),to.propTypes={question:go.a.object.isRequired},eo=no))||eo,xo=Ao,Ro=n(3),Io=n.n(Ro),Mo=(n(2511),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Lo=(oo=ro=function(e){function t(){var e,n,r,o;i(this,t);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={time:r.props.seconds},r.handleClearInterval=function(){r.interval&&clearInterval(r.interval)},o=n,s(r,o)}return c(t,e),Mo(t,[{key:"componentDidMount",value:function(){var e=this,t=document.querySelector(".AppHeader");t&&(t.style.display="none"),this.interval=setInterval(function(){e.setState({time:e.state.time-1},function(){if(0===e.state.time){e.handleClearInterval();var t=e.props.id;location.href="/question/"+t}})},1e3)}},{key:"componentWillUnmount",value:function(){this.handleClearInterval()}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.destination,r=this.state.time;return vo.a.createElement("div",{className:"Redirector"},vo.a.createElement("div",{className:"Redirector-body"},vo.a.createElement("div",null,vo.a.createElement("img",{src:"//static.zhihu.com/static/img/logo_black_trans.png",srcSet:"//static.zhihu.com/static/img/logo_black_trans@2x.png 2x",alt:"知乎"}),vo.a.createElement("span",null," - 404")),vo.a.createElement("div",{className:Io()("Redirector-content",{"Redirector-mobileContent":!1})},vo.a.createElement("div",{className:"Redirector-title"},t),vo.a.createElement("div",{className:"Redirector-counter"},r," 秒后自动跳转至",n),vo.a.createElement("a",{className:"Redirector-link",href:"/",onClick:this.handleClearInterval},"返回首页"))))}}]),t}(bo.Component),ro.defaultProps={seconds:5,destination:"回答所在的问题页",title:"该回答已被删除"},oo),Do=n(557),qo=n.n(Do),Bo=n(28),Uo=n(552),zo=n(1559),Fo=n(319),Qo=n(550),Vo=n(1602),Ho=n(187),Wo=n(1632),Yo=n(76),Ko=n(191),Go=n(9),Xo=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),$o=(io=ao=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),Xo(t,[{key:"render",value:function(){var e=this.props,t=e.badgeClassName,n=e.size,r=e.center,o=e.badge,a=Object(Ko.a)(o)||{},i=a.identityInfo,s=a.bestAnswererInfo;return s&&i?vo.a.createElement(Go.l,{className:t,size:n,center:r}):s?vo.a.createElement(Go.n,{className:t,size:n,center:r}):i?vo.a.createElement(Go.m,{className:t,size:n,center:r}):null}}]),t}(vo.a.Component),ao.propTypes={badge:go.a.array,size:go.a.number,center:go.a.bool,badgeClassName:go.a.string},ao.defaultProps={size:16,center:!0,badgeClassName:""},io),Jo=(n(2512),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Zo="SpecialQuestionAuthor",ea=(co=so=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),Jo(t,[{key:"render",value:function(){var e=this.props,t=e.author,n=e.className,r=e.isMobile,o=t.avatarUrl,a=t.name,i=t.badge;return vo.a.createElement("div",{className:Io()(Zo+"-Wrapper",n)},vo.a.createElement(yo.Link,{className:Io()(""+Zo,f({},"ROOT_CLASS--mobile",r)),to:"/"+(t.isOrg?"org":"people")+"/"+(t.urlToken||t.id)},vo.a.createElement(Yo.a,{size:r?22:28,url:o,alt:a,round:!0}),vo.a.createElement("span",{className:Zo+"-Author"},t.name),vo.a.createElement($o,{badge:i,size:r?16:18,center:!0,badgeClassName:Zo+"-Badge"}),vo.a.createElement("span",{className:Zo+"-Suffix"},"的提问")))}}]),t}(bo.Component),so.propTypes={author:go.a.object.isRequired,isMobile:go.a.bool},co),ta=n(609),na=n(288),ra=n(1534),oa=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),aa=(lo=Object(na.a)(function(e){return{module:"TopicItem",content:{type:"Topic",token:e.item.id},trackCardShow:!0}}))(uo=function(e){function t(){return b(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,e),oa(t,[{key:"render",value:function(){var e=this.props.item;return vo.a.createElement(ta.a,{className:"QuestionTopic"},vo.a.createElement(ra.a,{noHoverCard:!1,topic:e}))}}]),t}(bo.Component))||uo,ia=aa,sa=n(77),ca=n(39),la=n(185),ua=n(581),pa=n(579),fa=n(586),da=n(17),ha=(n(2112),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),ma=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ba=[{value:"标点或格式错误",text:"标点或格式错误"},{value:"不构成提问",text:"不构成提问"},{value:"包含主观判断",text:"包含主观判断"},{value:"缺乏可信来源",text:"缺乏可信来源"},{value:"other",text:"其他"}],va=[{title:"为什么修改问题？",subtitle:"请选择修改理由"},{title:"修改问题",subtitle:"描述精确的问题更易得到解答"},{title:"其他",subtitle:"请对你的举报补充说明"}],ya={title:"",step:0,isEditingTitle:!0,detail:{toHTML:function(){return""}},showToolbar:!1,reason:null,otherReason:"",videoQuestionConfirmShown:!1,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"",videoQuestionConfirmText:"",uploadModalShown:!1,errors:{title:null,detail:null,reason:null}},wa=function(e){return{notification:e.notification[da.c]||e.notification.updateQuestion}},ga=(po=Object(Eo.connect)(wa,{showNotification:da.g,updateQuestion:To.M}))((mo=ho=function(e){function t(){w(this,t);var e=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handleModalClose=function(){if(e.editable&&e.editable.hasVideo("upload"))return void e.setState({uploadModalShown:!0});e.setState({step:0}),e.props.onClose()},e.handleVideoQuestionModalHide=function(){e.setState({videoQuestionConfirmShown:!1})},e.handleUploadModalHide=function(){e.setState({uploadModalShown:!1})},e.handleUploadModalConfirm=function(){e.setState({uploadModalShown:!1}),e.props.onClose()},e.handleSubmit=function(){e.setState({errors:e.validate()},function(){for(var t=e.state.errors,n=["title","reason"],r=0;r<n.length;r++){var o=n[r],a=t[o];if(a&&"error"===a.level){var i=e[o+"Input"];return void(i&&i.focus())}}return e.editable.hasVideo("upload")?void e.props.showNotification("请等待视频上传完成后发布","red",da.c):e.editable.hasImage("upload")?void e.props.showNotification("请等待图片上传完成后发布","red",da.c):e.editable.hasVideo()&&!e.context.currentUser.isOrg?void e.setState({videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!0,videoQuestionConfirmText:"包含视频的编辑将在审核完成后生效，是否继续？"}):e.editable.hasImage("error")||e.editable.hasVideo("error")&&!e.editable.hasVideo("error-review")?void e.setState({videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"上传失败",videoQuestionConfirmText:"草稿中含有上传失败的内容，请更改后重新提交"}):e.editable.hasVideo("error-review")||e.editable.hasVideo("censor")?void e.setState({videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"视频未通过审核",videoQuestionConfirmText:"视频中包含未通过审核的信息，请更改后重新提交"}):void e.handleSubmitEditQuestion()})},e.handleSubmitEditQuestion=function(){var t=e.props.detail,n=e.state,r=n.title,o=n.detail,a=n.reason,i=n.otherReason,s={question:{title:r},meta:{reason:"other"===a?i:a}},c=o.toHTML();c!==t&&(s.question.detail=c),Object.keys(s.question).length>0&&e.props.updateQuestion(e.props.id,s)},e.triggerImageUpload=function(){e.editable.handleKeyCommand("insert-image")},e.triggerVideoUpload=function(){e.editable.handleKeyCommand("insert-video")},e.handleError=function(t,n){Object(fa.b)(t,n,e.props.showNotification,da.c)},e.handleBeforeVideoUpload=function(){return!e.props.isAnonymous},e.handleUploadError=function(t,n){switch(n){case"video":e.handleError("video-upload-error");break;case"image":e.handleError("image-upload-error",t)}},e.state=ya,e.onChangeTitle=e.handleChangeTitle.bind(e),e.onBlurTitle=e.handleBlurTitle.bind(e),e.onChangeDetail=e.handleChangeDetail.bind(e),e.onChangeReason=e.handleChangeReason.bind(e),e.onChangeOtherReason=e.handleChangeOtherReason.bind(e),e.toggleToolbar=e.toggleToolbar.bind(e),e}return E(t,e),ma(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props,r=n.notification,o=n.show,a=n.onClose,i=e.notification,s=e.show,c=e.title,l=e.detail;if(!o&&s&&this.setState({title:c,detail:{toHTML:function(){return l}}}),r!==i){var u=i.code,p=i.text;if(i.id)this.setState(ya),a();else switch(u){case 103003:this.setState(function(e){var t=e.errors;return{errors:ha({},t,{title:{level:"error",text:"已经存在的问题"}})}},function(){return t.titleInput.focus()});break;case 103001:this.setState(function(e){var t=e.errors;return{errors:ha({},t,{detail:{level:"error",text:"过长的补充说明"}})}},function(){return t.editable.focus()});break;default:this.setState(function(e){var t=e.errors;return{errors:ha({},t,{overall:p})}})}}}},{key:"handleChangeTitle",value:function(e){this.setState({title:e.target.value,isEditingTitle:!0})}},{key:"handleBlurTitle",value:function(){this.setState({errors:this.validate("title",!0),isEditingTitle:!1})}},{key:"handleChangeDetail",value:function(e){this.setState({detail:e})}},{key:"handleChangeReason",value:function(e){var t=this,n=this.state.step;this.setState({reason:e,step:1},function(){if(0===n)return void setTimeout(function(){return t.titleInput.focus()});"other"===e&&t.reasonInput.focus()})}},{key:"handleChangeOtherReason",value:function(e){this.setState({otherReason:e.target.value})}},{key:"validate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.state.errors;if(!e||"title"===e){var r=this.state.title,o=null;0!==r.length||t?r.length>51?o={level:"error",text:"问题标题超出 "+(r.length-51)+" 个字"}:r.length>0&&r.length<3?o={level:"error",text:"问题字数太少了吧"}:r.length>0&&-1===r.indexOf("?")&&-1===r.indexOf("？")?o={level:"error",text:"你还没有给问题添加问号"}:(r.match(/(\?|？)/g)||[]).length>1&&(o={level:"warning",text:"多个问题建议拆分"}):o={level:"error",text:"问题标题不能为空"},n=ha({},n,{title:o})}if(!e||"reason"===e){var a=null,i=this.state,s=i.reason,c=i.otherReason;s&&("other"!==s||c)||(a={level:"error",text:"必选"}),n=ha({},n,{reason:a})}return n}},{key:"toggleToolbar",value:function(){this.setState(function(e){return{showToolbar:!e.showToolbar}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.show,r=t.detail,o=t.questionType,a=this.state,i=a.title,s=a.step,c=a.isEditingTitle,l=a.showToolbar,u=a.reason,p=a.otherReason,f=a.uploadModalShown,d=a.videoQuestionConfirmShown,h=a.videoQuestionConfirmAllowContinue,m=a.videoQuestionConfirmTitle,b=a.videoQuestionConfirmText,v=a.errors,y=v.title,w=v.detail,g=v.reason,E=v.overall,O=null;if(c){var C=51-i.length;C>=0?C<10&&(O="还可以输入 "+C+" 个字"):O=vo.a.createElement("span",{className:"QuestionAsk-error"},"问题标题超出 ",-C," 个字")}else y&&(O=vo.a.createElement("span",{className:"QuestionAsk-"+y.level},y.text));var _=null;return 0===s?_=vo.a.createElement("div",null,ba.map(function(t){return vo.a.createElement("div",{className:"QuestionEdit-reason",key:t.value,onClick:function(){e.onChangeReason(t.value)}},t.text,vo.a.createElement(Go.i,null))})):1===s&&(_=vo.a.createElement("div",{className:"QuestionAsk"},vo.a.createElement(ca.b,{title:m,onClose:this.handleVideoQuestionModalHide},d&&vo.a.createElement("div",{className:"QuestionAsk-videoAlert"},b,vo.a.createElement(ca.a,null,h&&vo.a.createElement(So.c,{preset:"primary",color:"blue",onClick:this.handleSubmitEditQuestion},"发布"),vo.a.createElement(So.c,{onClick:this.handleVideoQuestionModalHide},"继续编辑")))),vo.a.createElement(ca.b,{onClose:this.handleUploadModalHide},f&&vo.a.createElement("div",{className:"QuestionAsk-onUploadModal"},"关闭弹窗将丢失上传中的视频内容",vo.a.createElement(ca.a,null,vo.a.createElement(So.c,{preset:"primary",color:"blue",onClick:this.handleUploadModalConfirm},"确认"),vo.a.createElement(So.c,{onClick:this.handleUploadModalHide},"取消")))),vo.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},noValidate:!0},vo.a.createElement("div",{className:"QuestionAsk-section"},vo.a.createElement(sa.a,{className:"QuestionAsk-title",onRef:function(t){e.titleInput=t},required:!0,multiline:!0,spread:!0,large:!0,rows:2,placeholder:"问题标题",value:i,onChange:this.onChangeTitle,onBlur:this.onBlurTitle})),O&&vo.a.createElement("div",{className:"QuestionAsk-section"},vo.a.createElement("div",{className:"QuestionAsk-sectionHeader"},vo.a.createElement("div",{className:"QuestionAsk-sectionHeaderRight"},O))),vo.a.createElement("div",{className:"QuestionAsk-section QuestionAsk-DetailSection"},vo.a.createElement("div",{className:"QuestionAsk-sectionHeader"},vo.a.createElement("span",{className:"QuestionAsk-label"},"问题描述（可选）："),vo.a.createElement("div",{className:"QuestionAsk-sectionHeaderRight"},vo.a.createElement(ua.a,{label:(l?"收起":"展开")+"工具栏",isActive:l,icon:Go.Y,onClick:this.toggleToolbar}),vo.a.createElement(ua.a,{label:"插入图片",icon:Go._17,onClick:this.triggerImageUpload}),vo.a.createElement(ua.a,{label:"上传视频",icon:Go._23,onClick:this.triggerVideoUpload}))),vo.a.createElement(pa.a,{onRef:function(t){e.editable=t},spread:!0,large:!0,allowDragAndDrop:!0,allowLinkCard:!0,minRows:2,allowToolbar:l,allowVideoTitleChange:!0,placeholder:"问题背景、条件等详细信息",defaultValue:r,onError:this.handleError,onUploadError:this.handleUploadError,onChange:this.onChangeDetail,onBeforeVideoUpload:this.handleBeforeVideoUpload})),w&&vo.a.createElement("div",{className:"QuestionAsk-section"},vo.a.createElement("div",{className:"QuestionAsk-sectionHeader"},vo.a.createElement("div",{className:"QuestionAsk-sectionHeaderRight"},vo.a.createElement("span",{className:"QuestionAsk-"+w.level},w.text)))),vo.a.createElement("div",{className:"QuestionAsk-section"},vo.a.createElement("div",{className:"QuestionAsk-sectionHeader"},vo.a.createElement(la.b,{className:"QuestionEdit-reasonSelect",needsReposition:!0,plain:!0,text:u?null:"请选择一个修改理由",value:u,onChange:this.onChangeReason},ba.map(function(e){return vo.a.createElement(la.a,{key:e.value,value:e.value,text:e.text})})),(!u||"other"===u&&!p)&&(g?vo.a.createElement("span",{className:"QuestionAsk-"+g.level},g.text):"必选"),"org"===o||"commercial"===o||vo.a.createElement("div",{className:"QuestionAsk-sectionHeaderRight"},vo.a.createElement(yo.Link,{className:"QuestionEdit-why",target:"blank",to:"/question/19550238/answer/95068125"},"为什么问题可以被公共编辑？"))),"other"===u&&vo.a.createElement(sa.a,{onRef:function(t){e.reasonInput=t},spread:!0,large:!0,value:p,placeholder:"请输入修改理由",onChange:this.onChangeOtherReason})),vo.a.createElement(ca.a,null,vo.a.createElement(So.c,{preset:"primary",color:"blue",onClick:this.handleSubmit},"提交修改"))))),vo.a.createElement(ca.b,{className:1===s&&"QuestionAsk-Modal",title:va[s].title,subtitle:va[s].subtitle,footer:E,onClose:this.handleModalClose,hotKeyClosable:!1,maskClosable:!1},n&&_)}}]),t}(bo.Component),ho.propTypes={id:go.a.number,title:go.a.string,detail:go.a.string,show:go.a.bool.isRequired,onClose:go.a.func.isRequired,isAnonymous:go.a.bool},ho.contextTypes={currentUser:go.a.object},fo=mo))||fo,Ea=n(23),Oa=n.n(Ea),Ca=n(193),_a=n(14),ka=n.n(_a),ja=n(115),Sa=(n(2513),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Pa=function(e){function t(){C(this,t);var e=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={items:[],value:""},e.position=e.position.bind(e),e.handleRemove=e.handleRemove.bind(e),e.handleKeyDown=e.handleKeyDown.bind(e),e.handleChange=e.handleChange.bind(e),e.handleSelect=e.handleSelect.bind(e),e}return k(t,e),Sa(t,[{key:"handleRemove",value:function(e){var t=this.props,n=t.value,r=t.onChange,o=t.onRemove;if(o&&o(e),r){var a=n.slice(0);a.splice(e,1),r(a)}}},{key:"handleKeyDown",value:function(e){var t=this.props.value;8===e.keyCode&&!this.state.value&&t.length&&this.handleRemove(t.length-1)}},{key:"handleChange",value:function(e){var t=this;if(this.setState({value:e}),!e)return void this.setState({items:[]});this.props.fetchFn(e).then(function(e){t.setState({items:e.filter(function(e){return!t.props.value.find(function(t){return t.urlToken===e.urlToken})})})})}},{key:"handleSelect",value:function(e,t){var n=this.props,r=n.value,o=n.onChange,a=n.onAdd;a&&a(t,this.state.value),o&&o([].concat(O(r),[t])),this.setState({value:"",items:[]})}},{key:"clearInput",value:function(){this.setState({value:"",items:[]})}},{key:"position",value:function(){var e=this.input.getBoundingClientRect(),t=e.left;return{targetContainerStyle:{top:e.bottom+13,left:t-13}}}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.inputProps,o=t.value,a=t.renderTagInner,i=t.alignWithInput,s=t.menuProps,c=t.onRef,l=t.after,u=ka()(t,["className","inputProps","value","renderTagInner","alignWithInput","menuProps","onRef","after"]),p=this.state,f=p.value,d=p.items;return vo.a.createElement(ja.b,Object.assign({},u,{className:Io()("TagInput",{"TagInput--empty":0===o.length},n),value:f,ref:function(t){e.autoComplete=t},onRef:function(t){c&&c(t),e.input=t},items:d,inputProps:Object.assign({},r,{onKeyDown:this.handleKeyDown,before:o.map(function(t,n){return vo.a.createElement(ta.a,{key:n,removable:!0,onRemove:function(){return e.handleRemove(n)}},a(t))}),after:l}),menuProps:Object.assign({position:i?this.position:null,style:{maxHeight:256,overflow:"scroll"}},s),onChange:this.handleChange,onSelect:this.handleSelect}))}}]),t}(bo.Component);Pa.propTypes={fetchFn:go.a.func.isRequired,renderTagInner:go.a.func.isRequired,value:go.a.array.isRequired,after:go.a.node,alignWithInput:go.a.bool,onChange:go.a.func,onAdd:go.a.func,onRemove:go.a.func},Pa.defaultProps={alignWithInput:!1,after:vo.a.createElement(Go._63,{fill:"#afbdcf",size:18})};var Ta,Na,Aa,xa,Ra,Ia,Ma,La,Da,qa,Ba,Ua,za,Fa,Qa=Pa,Va=n(110),Ha=n(18),Wa=n(83),Ya=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ka=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ga=(Ta=Object(Eo.connect)(function(e){return{currentUser:Object(Ha.c)(e)}},{createTopic:Va.d,loadCurrentUser:Ha.j}),Na=Object(Wa.a)({load:function(e){return e.loadCurrentUser("can_edit_topic")},shouldLoad:function(e){var t=e.currentUser;return t&&void 0===t.canEditTopic}}),Ta(Aa=Na((Ra=xa=function(e){function t(){var e,n,r,o;P(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=T(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),Ia.call(r),o=n,T(r,o)}return N(t,e),Ka(t,[{key:"render",value:function(){var e=Oa()(this.props,["onChange"]),t=e.value,n=S(e,["value"]);return vo.a.createElement(Qa,Ya({inputProps:{large:!0,spread:!0,placeholder:"添加话题"+(t.length>0?"（"+t.length+"/5）":""),disabled:t.length>=5},fetchFn:this.fetchTopic,renderTagInner:function(e){return vo.a.createElement("a",{target:"_blank",href:"//www.zhihu.com/topic/"+(e.id||e.urlToken)},e.name)},value:t,alignWithInput:!0,onAdd:this.handleAdd,onRemove:this.handleRemove},n))}}]),t}(bo.Component),Ia=function(){var e=this;this.fetchTopic=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ca.c.apply(void 0,n.concat([[],{topic_filter:1}])).then(function(t){t=t.filter(function(e){return!A(e)});var r=e.props.currentUser,o=n[0];return r&&r.canEditTopic&&!t.find(function(e){return e.name===o})?[].concat(j(t),[{urlToken:"topic",name:"创建 "+o+" 话题",token:o}]):t})},this.createTopic=function(t){(0,e.props.createTopic)(t).then(function(n){var r=n.payload,o=r.id,a=r.avatarUrl,i=e.props,s=i.value,c=i.onChange;c&&c(s.map(function(e){return e.name===t?{urlToken:o,name:t,avatarUrl:a}:e}))}).catch(function(){var n=e.props,r=n.value,o=n.onChange;o&&o(r.filter(function(e){return e.name!==t}))})},this.handleAdd=function(t,n){var r=e.props,o=r.value,a=r.onChange;if(A(t))return e.createTopic(n),void(a&&a([].concat(j(o),[{name:n}])));a&&a([].concat(j(o),[t]))},this.handleRemove=function(t){var n=e.props,r=n.value,o=n.onChange,a=r.slice(0);a.splice(t,1),o&&o(a)}},Aa=Ra))||Aa)||Aa),Xa=Ga,$a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ja=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Za={topics:[],errors:{topics:null,overall:null}},ei=function(e){return{notification:e.notification.updateQuestionTopics}},ti=(La=Ma=function(e){function t(){x(this,t);var e=R(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=Za,e.onChangeTopics=e.handleChangeTopics.bind(e),e.onBlurTopics=e.handleBlurTopics.bind(e),e.onSubmit=e.handleSubmit.bind(e),e}return I(t,e),Ja(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props,r=n.notification,o=n.show,a=n.onClose,i=e.notification,s=e.show,c=e.topics;if(!o&&s&&(setTimeout(function(){return t.topicsInput.focus()}),this.setState({topics:c})),r!==i){var l=i.text;i.id?(this.setState(Za),a()):this.setState(function(e){var t=e.errors;return{errors:$a({},t,{overall:l})}})}}},{key:"handleChangeTopics",value:function(e){this.setState({topics:e})}},{key:"handleBlurTopics",value:function(){this.setState({errors:this.validate("topics",!0)})}},{key:"handleSubmit",value:function(){var e=this;this.setState({errors:this.validate()},function(){for(var t=e.props.topics,n=e.state,r=n.topics,o=n.errors,a=["topics"],i=0;i<a.length;i++){var s=a[i],c=o[s];if(c&&"error"===c.level)return void e[s+"Input"].focus()}if(r!==t){var l={topicUrlTokens:r.map(function(e){return e.urlToken||e.id})};e.props.dispatch(Object(To.R)(e.props.id,l))}})}},{key:"validate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.state.errors;if(!e||"topics"===e){var r=this.state.topics,o=null;0!==r.length||t||(o={level:"error",text:"至少添加一个话题"}),n=$a({},n,{topics:o})}return n}},{key:"render",value:function(){var e=this,t=this.props,n=t.show,r=t.onClose,o=this.state,a=o.topics,i=o.errors,s=i.topics,c=i.overall;return vo.a.createElement(ca.b,{className:"QuestionAsk-Modal",size:"large",title:"修改话题",subtitle:"最多只能为一个问题绑定 5 个话题",footer:c,onClose:r},n&&vo.a.createElement("div",{className:"QuestionAsk"},vo.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},noValidate:!0},vo.a.createElement("div",{className:"QuestionAsk-section"},vo.a.createElement(Xa,{onRef:function(t){e.topicsInput=t},value:a,onChange:this.onChangeTopics,onBlur:this.onBlurTopics})),s&&vo.a.createElement("div",{className:"QuestionAsk-section"},vo.a.createElement("div",{className:"QuestionAsk-sectionHeader"},vo.a.createElement("div",{className:"QuestionAsk-sectionHeaderRight"},vo.a.createElement("span",{className:"QuestionAsk-"+s.level},s.text)))),vo.a.createElement(ca.a,null,vo.a.createElement(So.c,{preset:"primary",color:"blue",onClick:this.onSubmit},"提交修改")))))}}]),t}(bo.Component),Ma.propTypes={show:go.a.bool.isRequired,onClose:go.a.func.isRequired},La),ni=Object(Eo.connect)(ei)(ti),ri=n(1902),oi=n(562),ai=n(7),ii=n(658),si=n(74),ci=n(180),li=(n(2514),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),ui=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),pi=300,fi=(Da=Object(Eo.connect)(function(e,t){return{draft:Object(To.l)(e,{id:t.params.id}),question:Object(To.I)(e,{id:t.params.id})}},{restoreAnswer:ci.v,showNotification:da.g}),Object(yo.withRouter)(qa=Da((Ua=Ba=function(e){function t(){var e,n,r,o;M(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=L(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.getRenderProps=function(){var e=r.props,t=e.draft,n=e.question,o=n.id,a=n.relationship;a=void 0===a?{}:a;var i=a.myAnswer;return i?i.isDeleted?{inner:[vo.a.createElement(Go._79,{key:"icon",size:17,className:"QuestionButton-icon"}),"撤销删除"],props:{onClick:r.handleRestoreAnswer}}:{inner:[vo.a.createElement(Go._50,{key:"icon",size:17,className:"QuestionButton-icon"}),"查看回答"],props:{to:"/question/"+o+"/answer/"+i.answerId,onClick:r.handleFocusAnswer},Wrapper:si.a}:{inner:[vo.a.createElement(Bo.a,{key:"icon",className:"Button-icon",name:"modify"}),t?"编辑回答":"写回答"],props:{onClick:r.handleAddAnswer}}},r.handleFocusAnswer=function(){var e=document.querySelector(".AnswerCard");e&&(e.classList.add("is-focus"),r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(function(){return e.classList.remove("is-focus")},pi))},r.handleRestoreAnswer=function(){var e=r.props,t=e.question,n=t.relationship.myAnswer,o=t.id,a=e.restoreAnswer,i=e.showNotification;n.isDeleted&&a(o,n.answerId).then(function(){return i("已撤销删除回答")})},r.handleAddAnswer=r.context.authRequired(function(e){var t=r.props,n=t.draft,o=t.question.reviewInfo;o=void 0===o?{}:o;var a=o.tips,i=t.zaId;if(a)return void r.props.showNotification(a,"red");i&&ai.default.trackEvent(null,{id:i}),ai.default.trackEvent(r,{action:n&&n.editableContent?"Edit":"Answer",is_intent:!0,name:e.currentTarget.textContent}),r.context.startAddAnswer()}),o=n,L(r,o)}return D(t,e),ui(t,[{key:"componentDidMount",value:function(){Object(ii.b)()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.size,o=e.preset,a=e.color,i=void 0===a?"blue":a,s=e.onClick,c=this.getRenderProps(),l=c.inner,u=c.props,p=c.Wrapper,f=void 0===p?So.c:p;return vo.a.createElement(f,li({},u,s&&{onClick:s},{color:i,size:r,preset:o,className:n}),t||l)}}]),t}(bo.Component),Ba.contextTypes={authRequired:go.a.func,startAddAnswer:go.a.func},qa=Ua))||qa)||qa),di=fi,hi=n(549),mi=n(567),bi=n(75),vi=(n(2515),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),yi=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),wi=(za=Object(Eo.connect)(function(e){return{shouldOia:Object(bi.h)(e),edition:Object(bi.d)(e),referer:Object(bi.g)(e)}}),Object(yo.withRouter)(Fa=za(Fa=function(e){function t(){var e,n,r,o;q(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=B(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.createOpenInAppHandler=function(e){var t=r.props,n=t.question.id,o=t.edition,a=t.location.query,i=t.referer;return function(t){return Object(oi.b)(t,{href:Object(mi.a)({type:"question",id:n},{edition:o,query:a,referer:i,utm_content:e})})}},o=n,B(r,o)}return U(t,e),yi(t,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.question,r=n.relationship,o=n.relationship.isAuthor,a=n.isNormal,i=n.status;i=void 0===i?{}:i;var s=i.isLocked,c=n.questionType,l=n.isMuted,u=n.id,p=e.shouldOia,f=e.inTopBar,d="commercial"===c,h=d&&l;return vo.a.createElement("div",{className:"QuestionButtonGroup"},o&&h?vo.a.createElement(si.a,{preset:"primary",a:!0,to:"https://e.zhihu.com",color:"green"},"推广问题"):vo.a.createElement(hi.a,vi({id:u,zaId:f?3408:3309,type:"question",preset:"primary",isFollowing:(r&&{}.hasOwnProperty.call(r,"isFollowing")?r:t).isFollowing,disabled:h},p&&{onClick:this.createOpenInAppHandler("follow_question")})),a&&!s&&vo.a.createElement(di,vi({color:"blue",zaId:f?3409:3311},p&&{onClick:this.createOpenInAppHandler("write_answer")})))}}]),t}(bo.Component))||Fa)||Fa),gi=wi,Ei=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Oi=function(e){function t(){var e;z(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=F(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return a.state={count:Math.round(a.props.count)},a.next=function(){var e=a.props.onEnd,t=a.state.count-1;a.setState({count:t}),0===t&&(clearInterval(a.handle),e&&e())},a}return Q(t,e),Ei(t,[{key:"componentDidMount",value:function(){this.state.count<=0||(this.handle=setInterval(this.next,this.props.interval))}},{key:"componentWillUnmount",value:function(){clearInterval(this.handle)}},{key:"render",value:function(){var e=this.state.count;return vo.a.createElement("span",null,e)}}]),t}(bo.Component);Oi.propTypes={count:go.a.number.isRequired,interval:go.a.number,onEnd:go.a.func},Oi.defaultProps={interval:1e3};var Ci,_i,ki,ji,Si,Pi,Ti,Ni,Ai,xi,Ri,Ii,Mi,Li,Di,qi,Bi,Ui,zi,Fi,Qi,Vi,Hi,Wi,Yi,Ki,Gi,Xi,$i,Ji,Zi,es,ts,ns,rs,os,as,is,ss,cs,ls=Oi,us=n(320),ps=n(15),fs=n(292),ds=n(290),hs=n(116),ms=n.n(hs),bs=n(547),vs=n(1515),ys=n(80),ws=n(186),gs=n(306),Es=(n(2516),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Os=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Cs=function(e){function t(){return H(this,t),W(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Y(t,e),Os(t,[{key:"render",value:function(){var e=this.props,t=e.to,n=e.className,r=e.children,o=V(e,["to","className","children"]),a=Io()("QuestionMainAction",n);return t?vo.a.createElement(yo.Link,Es({to:t,className:a},o),r):vo.a.createElement(So.c,Es({className:a},o),r)}}]),t}(bo.Component),_s=Cs,ks=n(287),js=n(1526),Ss=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ps=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ts=function(e,t){return e&&e.replace(new RegExp(t,"g"),function(e){return"<em>"+e+"</em>"})},Ns=function(e){function t(){var e,n,r,o;K(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=G(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={mounted:!1},r.handleInvite=function(){var e=r.props,t=e.user.urlToken,n=e.onInvite;ai.default.trackEvent(r,{id:3314}),n(t)},r.getContainer=function(){return document.querySelector(".Modal-content .QuestionInvitation-content")},o=n,G(r,o)}return X(t,e),Ps(t,[{key:"componentDidMount",value:function(){this.setState({mounted:!0})}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.contributionsCount,r=e.topic,o=e.isInvited,a=e.keyword,i=e.reason,s=t.name,c=Ss({},t,{name:vo.a.createElement(fs.a,{tag:"span",html:Ts(s,a)})}),l=vo.a.createElement(js.a,{user:c,status:i||(n?vo.a.createElement("div",null,"在话题 ",vo.a.createElement(ra.a,{topic:r})," 下有 ",vo.a.createElement(yo.Link,{to:"/people/"+t.urlToken+"/answers/topic/"+r.id},Object(ks.formatNumber)(n)," 个回答")):vo.a.createElement(fs.a,{html:t.headline})),action:vo.a.createElement(So.c,{color:o?void 0:"blue",disabled:o,onClick:this.handleInvite},o?"已邀请":"邀请回答"),meta:null}),u=this.props.index,p={module:"UserItem",index:u,content:{member_hash_id:t.id},view:{id:a?4436:4437},extra:{search:{raw_query:a||""}},trackCardShow:!0};return this.state.mounted?vo.a.createElement(Qo.a,Ss({getContainer:this.getContainer},p),l):l}}]),t}(bo.Component),As=Ns,xs=n(1506),Rs=n(324),Is=(n(2517),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Ms=(Ci=Object(Eo.connect)(null,{openAutoInvite:Rs.C,closeAutoInvite:Rs.d}))((ji=ki=function(e){function t(){var e,n,r,o;$(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=J(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleClick=function(){var e=r.props,t=e.questionId,n=e.closeAutoInvite,o=e.openAutoInvite;return"close"===e.item.status?(ai.default.trackEvent(null,{id:3313}),o(t)):n(t)},o=n,J(r,o)}return Z(t,e),Is(t,[{key:"render",value:function(){var e=this.props.item,t=void 0===e?{}:e,n=t.avatar,r=t.description,o=t.status,a=t.title,i="close"===o;return vo.a.createElement(xs.e,{data:t,image:vo.a.createElement(Yo.a,{size:38,url:n}),title:a,meta:vo.a.createElement(xs.d,null,r),className:"AutoInviteItem-wrapper--desktop",extra:vo.a.createElement(So.c,{preset:"link",className:i?"AutoInviteItem-button--closed":"AutoInviteItem-button--open",onClick:this.handleClick},i?"开启邀请":"已开启")})}}]),t}(bo.Component),ki.propTypes={questionId:go.a.number.isRequired,item:go.a.object},_i=ji))||_i,Ls=n(1576),Ds=(n(2518),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),qs=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Bs=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Us=300,zs=function(e){var t=e.user;return vo.a.createElement("div",{className:"InviteeItem"},vo.a.createElement("div",{className:"InviteeItem-content"},vo.a.createElement(Yo.a,{url:t.avatarUrl,size:32,className:"InviteeItem-image"}),vo.a.createElement("h4",{className:"InviteeItem-title"},t.name)))},Fs=(Si=Object(na.a)({module:"InvitationFrame"}))((Ni=Ti=function(e){function t(){var e,n,r,o;ee(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=te(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={expanded:!1,keyword:null},r.onChange=ms()(function(e){r.props.onChange(e)},Us),r.handleChange=function(e){var t=e.target.value;r.setState({keyword:t}),t&&r.onChange(t)},r.handleExpand=function(){(0,r.props.trackEvent)(r,{action:"LoadMore",element:"Button"}),r.setState({expanded:!0})},r.handleInvite=function(e){var t=r.state.keyword;return(0,r.props.onInvite)(e,t)},o=n,te(r,o)}return ne(t,e),Bs(t,[{key:"renderHeader",value:function(){var e=this.props,t=e.invitees,n=(e.expandCount,vo.a.createElement(sa.a,{className:"QuestionInvitation-input",placeholder:"搜索你想邀请的人",onChange:this.handleChange,after:vo.a.createElement(Bo.a,{grey:!0,name:"search"}),"data-tooltip":"也可以搜索职业、公司等资料","data-tooltip-position":"bottom"})),r=[t.length?vo.a.createElement("span",null,"你已邀请 ",vo.a.createElement(ys.a,{toggler:vo.a.createElement(So.c,{className:"Invitees-toggler",preset:"plain"},vo.a.createElement("span",{className:"Invitees-togglerUsers"},t.slice(0,2).map(function(e,t){return vo.a.createElement("span",{key:t},0===t?"":"、",vo.a.createElement("span",null,e.name))})),t.length>2&&" 等 "+t.length+" 人"),toggleEvent:"hover",targetClassName:"Invitees-popover",arrowed:!0},vo.a.createElement("div",{className:"Invitees"},t.map(function(e){return vo.a.createElement(zs,{key:e.urlToken,user:e})})))):vo.a.createElement("h2",{className:"QuestionInvitation-title"},"你可以邀请下面用户，快速获得回答"),n],o=qs(r,2),a=o[0],i=o[1];return vo.a.createElement(Ls.a,{header:a,options:i})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isFetching,r=t.isDrained,o=t.items,a=t.searchItems,i=t.expandCount,s=t.autoInvitationItem,c=t.question;c=void 0===c?{}:c;var l=c.id,u=this.state,p=u.expanded,f=u.keyword,d=f?a:o,h=Boolean((void 0===i||i>0)&&!f&&d.length&&s&&s.status),m=h?i-1:i,b=!m||p,v=i?bs.d:"div";return vo.a.createElement(v,{className:"QuestionInvitation"},this.renderHeader(),n?vo.a.createElement("div",{className:Io()("QuestionInvitation-content","QuestionInvitation-content--centered")},vo.a.createElement(ws.a,null)):vo.a.createElement("div",{className:Io()("QuestionInvitation-content",{"QuestionInvitation-content--centered":!d.length})},d.length?vo.a.createElement(Qo.a,{module:"UserList"},vo.a.createElement(vs.b,null,h&&vo.a.createElement(Ms,{questionId:l,item:s}),(b?d:d.slice(0,m)).map(function(t){return vo.a.createElement(vs.a,{className:Io()({"List-item--mobile":!1}),key:t.user.urlToken},vo.a.createElement(As,Ds({},t,{keyword:f,onInvite:e.handleInvite})))}))):vo.a.createElement(gs.a,{entityType:"users",placeholder:r?"没有可以邀请的人":"没有找到你想邀请的人"}),d.length>m&&!b&&vo.a.createElement(_s,{onClick:this.handleExpand},"更多推荐结果")))}}]),t}(bo.Component),Ti.propTypes={expandCount:go.a.number,items:go.a.array,searchItems:go.a.array,onInvite:go.a.func.isRequired},Pi=Ni))||Pi,Qs=Fs,Vs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hs=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ws=(Ai=Object(Eo.connect)(ie,{loadItems:To.w,updateInvitation:To.L,loadAutoInvitation:To.o}))(xi=function(e){function t(){var e,n,r,o;re(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=oe(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(e){var t=r.props,n=t.question.id;(0,t.loadItems)(n,"invitationCandidates",{keyword:e})},r.handleInvite=function(e,t){r.props.updateInvitation(r.props.question.id,e,t?"search":"normal")},o=n,oe(r,o)}return ae(t,e),Hs(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question,n=t.id,r=t.status;r=void 0===r?{}:r;var o=r.isLocked,a=r.isClose,i=r.isEvaluate,s=r.isSuggest,c=e.loadItems,l=e.loadAutoInvitation;e.isDrained||o||a||i||s||(c(n,"invitationCandidates"),c(n,"invitees"),l(n))}},{key:"render",value:function(){var e=this.props.question.status,t=e.isLocked,n=e.isClose,r=e.isEvaluate,o=e.isSuggest;return t||n||r||o?null:vo.a.createElement(Qs,Vs({onChange:this.handleChange,onInvite:this.handleInvite},this.props))}}]),t}(bo.Component))||xi,Ys=Ws,Ks=n(293),Gs=(n(2519),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Xs=(Ri=Object(Ks.a)({replacement:null}),Ii=Object(Eo.connect)(ue,{loadItems:To.w,loadQuestion:To.y,revokeQuestionRedirection:To.J,deleteInviters:To.j}),Ri(Mi=Object(yo.withRouter)(Mi=Ii((Di=Li=function(e){function t(){var e,n,r,o;se(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=ce(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={redirectionLoading:!1,redirectionHidden:!1,invitersHidden:!1,invitationModalShown:!1},r.redirect=function(){var e=r.props,t=e.router,n=e.location.query,o=e.question,a=o.id,i=o.redirection;i&&i.to&&i.to.id&&"1"!==n.nr&&t.push("/question/"+i.to.id+"?rf="+a)},r.handleRedirectionClose=function(){r.setState({redirectionHidden:!0,invitersHidden:!0}),r.timeout=setTimeout(function(){r.setState({invitersHidden:!1})},1e3)},r.handleCloseInviters=function(){r.setState({invitersHidden:!0})},r.handleDeleteInviters=function(e){var t=r.props,n=t.question.id;(0,t.deleteInviters)(n),r.handleCloseInviters(),ai.default.trackEvent(e.target,{action:"Ignore"})},r.handleCancelAnonymous=function(){(0,r.props.onInvitationTipClose)(),r.context.toggleAnonymous(!1)},r.handleInvite=function(e){r.setState({invitersHidden:!0,invitationModalShown:!0}),ai.default.trackEvent(e.target,{action:"Invite",is_intent:!0})},r.handleInvitationModalHide=function(){r.setState({invitationModalShown:!1})},o=n,ce(r,o)}return le(t,e),Gs(t,[{key:"componentWillMount",value:function(){Object(ps.isBrowser)()&&this.nextQuestion(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.nextQuestion(e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"nextQuestion",value:function(e){var t=this,n=this.context.currentUser,r=e.location.query,o=e.question.id,a=e.fromQuestion,i=e.loadItems,s=e.loadQuestion;clearTimeout(this.timeout),this.setState({redirectionLoading:!1,redirectionHidden:!1,invitersHidden:!1}),n&&"guest"!==n.userType&&i(o,"inviters"),r.rf&&/^\d+$/.test(r.rf)&&!a&&(this.setState({redirectionLoading:!0}),s(Number(r.rf)).catch(function(){}).then(function(){t.setState({redirectionLoading:!1})}))}},{key:"revokeRedirection",value:function(e){var t=this.props,n=t.router,r=t.question.id;(0,t.revokeQuestionRedirection)(e).then(function(){n[e===r?"replace":"push"]("/question/"+e)}),this.handleRedirectionClose()}},{key:"renderCommercialMuteStatus",value:function(){var e=this.props.question,t=e.questionType,n=e.isMuted;return e.relationship.isAuthor&&"commercial"===t&&n?vo.a.createElement("div",{className:"QuestionStatus-bar"},vo.a.createElement("div",{className:"QuestionStatus-bar-inner"},vo.a.createElement("div",{className:"QuestionStatus-bar-commercialMuted"},"该品牌提问尚未激活，无法在社区内流通。请"," ",vo.a.createElement("a",{href:"https://e.zhihu.com",target:"_blank",rel:"noopener noreferrer"},"前往广告平台")," ","进行设置。"),vo.a.createElement("p",null,"未激活的品牌提问页可以添加回答，但相关动态不在社区内流通，包括不会出现在知乎首页、用户主页，也不会被搜索到。当与该品牌提问关联的广告开始投放时，提问被激活，并开始流通。"))):null}},{key:"renderMute",value:function(){if(this.props.isMuteSpecial)return vo.a.createElement("div",{className:"QuestionStatus-bar"},vo.a.createElement("div",{className:"QuestionStatus-bar-inner"},vo.a.createElement("strong",null,"问题已解散。"),vo.a.createElement("p",null,"当前问题下的回答暂时无法查看。")))}},{key:"renderBar",value:function(){var e=this.props.question.status.unnormalDetails;return e&&vo.a.createElement("div",{className:"QuestionStatus-bar"},vo.a.createElement("div",{className:"QuestionStatus-bar-inner"},vo.a.createElement("strong",null,e.description,"。"),vo.a.createElement("em",null,"原因：",e.reason,"。"),1033!==e.reasonId&&vo.a.createElement(fs.a,{html:e.note})))}},{key:"renderNotification",value:function(){var e=this,t=this.props,n=t.location.query,r=t.question,o=r.id,a=r.redirection,i=r.relationship;i=void 0===i?{}:i;var s=i.myAnswer,c=t.inviters,l=t.fromQuestion,u=t.isAnswerPage,p=t.edition,f=this.state,d=f.redirectionLoading,h=f.redirectionHidden,m=f.invitersHidden,b=null,v=null;if(d)v=null;else if(a&&a.to&&a.to.id&&!h){var y=a.to,w=y.id,g=y.title,E="1"!==n.nr&&!p.baidu&&!u;b=E?"redirect-countdown":"redirect",v=vo.a.createElement("div",{className:"QuestionStatus-notification-inner"},vo.a.createElement("div",{className:"QuestionStatus-notification-content"},E?vo.a.createElement("span",null,"此问题将在 ",vo.a.createElement(ls,{count:5,onEnd:this.redirect})," ","秒后跳转至"):vo.a.createElement("span",null,"此问题已重定向至")," ",vo.a.createElement(si.a,{preset:"plain",to:"/question/"+w+"?rf="+o},g)),vo.a.createElement("div",{className:"QuestionStatus-notification-actions"},vo.a.createElement(So.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:function(){return e.revokeRedirection(o)}},"撤销重定向"),vo.a.createElement("div",{className:"QuestionStatus-notification-divider"}),vo.a.createElement(So.c,{preset:"plain",onClick:this.handleRedirectionClose},"关闭")))}else if(l&&l.redirection&&l.redirection.to&&l.redirection.to.id&&l.redirection.to.id===o&&!h){var O=l.id,C=l.title;b="redirect-from",v=vo.a.createElement("div",{className:"QuestionStatus-notification-inner"},vo.a.createElement("div",{className:"QuestionStatus-notification-content"},"从问题"," ",vo.a.createElement(si.a,{preset:"plain",to:"/question/"+O+"?nr=1"},C)," ","跳转而来"),vo.a.createElement("div",{className:"QuestionStatus-notification-actions"},vo.a.createElement(So.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:function(){return e.revokeRedirection(O)}},"撤销重定向"),vo.a.createElement("div",{className:"QuestionStatus-notification-divider"}),vo.a.createElement(So.c,{preset:"plain",onClick:this.handleRedirectionClose},"关闭")))}else c&&c.length&&!m&&!s&&(v=vo.a.createElement(Qo.a,{module:"InvitationCard",trackCardShow:!0},vo.a.createElement("div",{className:"QuestionStatus-notification-inner"},vo.a.createElement("div",{className:"QuestionStatus-notification-content"},c.map(function(e,t){return vo.a.createElement("span",{key:e.urlToken},0!==t&&"、",vo.a.createElement(ds.a,{user:e,noBadge:!0,noHoverCard:!0,"data-za-detail-view-element_name":"User"}))})," ","邀请你回答此问题"),vo.a.createElement("div",{className:"QuestionStatus-notification-actions"},vo.a.createElement(So.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:this.handleInvite},"邀请别人"),vo.a.createElement("div",{className:"QuestionStatus-notification-divider"}),vo.a.createElement(So.c,{preset:"plain",onClick:this.handleDeleteInviters},"忽略邀请")),vo.a.createElement("div",null,vo.a.createElement(So.c,{className:"QuestionStatus-notification-closeButton",preset:"plain",onClick:this.handleCloseInviters},vo.a.createElement(Bo.a,{name:"remove",width:11,height:11}))))));return vo.a.createElement(us.a,{className:"QuestionStatus-notification",notification:v?{key:b,text:v}:null})}},{key:"renderInvitationTip",value:function(){var e=this.props,t=e.invitationTipShown,n=e.onInvitationTipClose;return vo.a.createElement(us.a,{className:"QuestionStatus-notification",notification:t?{text:vo.a.createElement("div",{className:"QuestionStatus-notification-inner"},vo.a.createElement("div",{className:"QuestionStatus-notification-content"},"在匿名状态下无法邀请他人回答"),vo.a.createElement("div",{className:"QuestionStatus-notification-actions"},vo.a.createElement(So.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:this.handleCancelAnonymous},"取消匿名"),vo.a.createElement("div",{className:"QuestionStatus-notification-divider"}),vo.a.createElement(So.c,{preset:"plain",onClick:n},"关闭")))}:null})}},{key:"render",value:function(){var e=this.props.question,t=this.state.invitationModalShown;return vo.a.createElement("div",{className:"QuestionStatus"},this.renderCommercialMuteStatus(),this.renderMute(),this.renderBar(),this.renderNotification(),this.renderInvitationTip(),vo.a.createElement(Po.b,{size:"fullPage",onClose:this.handleInvitationModalHide},t&&vo.a.createElement(Ys,{question:e})))}}]),t}(bo.Component),Li.contextTypes={currentUser:go.a.object,toggleAnonymous:go.a.func},Mi=Di))||Mi)||Mi)||Mi),$s=Xs,Js=n(559),Zs=n(1565),ec=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),tc=(qi=Object(Eo.connect)(me,{loadQuestionFollowers:To.B}))(Bi=function(e){function t(){var e,n,r,o;pe(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=fe(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.load=function(){var e=r.props,t=e.parent.id;(0,e.loadQuestionFollowers)(t)},o=n,fe(r,o)}return de(t,e),ec(t,[{key:"render",value:function(){var e=this.props,t=e.parent.followerCount,n=e.isFetching,r=e.isDrained,o=e.items,a=e.currentUser;return vo.a.createElement(Zs.a,{currentUser:a,isFetching:n,isDrained:r,items:o,voteupCount:t,onLoad:this.load,text:"关注了"})}}]),t}(bo.Component))||Bi,nc=tc,rc=(n(2520),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),oc=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["","也关注了该问题"],["","也关注了该问题"]),ac=(Ui=Object(Eo.connect)(function(e,t){var n=t.params;return{currentUser:Object(Ha.c)(e),concernedFollowers:Object(To.e)(e,{id:n.id})}},{loadQuestionConcernedFollowers:To.A}),zi=Object(Wa.a)({shouldLoad:function(e){return e.currentUser&&!e.concernedFollowers},load:function(e){return e.loadQuestionConcernedFollowers(e.params.id)}}),Object(yo.withRouter)(Fi=Ui(Fi=zi(Fi=function(e){function t(){var e,n,r,o;be(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=ve(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={followersShown:!1},r.showFollowers=function(){r.setState({followersShown:!0})},r.closeFollowers=function(){r.setState({followersShown:!1})},o=n,ve(r,o)}return ye(t,e),rc(t,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.currentUser,r=e.concernedFollowers,o=t.followerCount,a=t.visitCount,i=this.state.followersShown;return vo.a.createElement("div",{className:"QuestionFollowStatus"},vo.a.createElement(Js.a,{divider:!0,className:"QuestionFollowStatus-counts"},n?vo.a.createElement(Js.a.Item,{tag:So.c,preset:"plain",onClick:this.showFollowers,name:"关注者",value:o}):vo.a.createElement(Js.a.Item,{name:"关注者",value:o}),vo.a.createElement(Js.a.Item,{name:"被浏览",value:a})),Boolean(r&&r.length)&&vo.a.createElement(So.c,{preset:"plain",className:"QuestionFollowStatus-people",onClick:this.showFollowers},vo.a.createElement("span",{className:"QuestionFollowStatus-people-tip"},qo()(oc,1===r.length?r[0].name:"他们")),r.map(function(e){return vo.a.createElement(ds.a,{user:e,avatar:!0,avatarProps:{size:26,round:!0},noLink:!0,noBadge:!0,noHoverCard:!0,key:e.id})})),vo.a.createElement(ca.b,{size:"fullPage",onClose:this.closeFollowers},i&&vo.a.createElement(nc,{parent:t})))}}]),t}(bo.Component))||Fi)||Fi)||Fi),ic=ac,sc=n(63),cc=n(1552),lc=n(1511),uc=n(296),pc=(n(2521),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),fc=(Qi=Object(Eo.connect)())(Vi=function(e){function t(){var e,n,r,o;we(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=ge(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={value:"",items:[]},r.handleChange=function(e){var t=r.props.dispatch;r.setState({value:e});var n=e.match(/^https:\/\/www.zhihu.com\/question\/(\d+)/);n?t(Object(To.D)(n[1])).then(function(e){var t=e.payload;r.setState({items:[{name:t.title,urlToken:t.id}]})}):Object(Ca.b)(e).then(function(e){r.setState({items:e})})},r.handleSelect=function(e,t){var n=r.props,o=n.dispatch,a=n.question.id,i=n.onSubmitted,s=t.urlToken,c=o(Object(To.f)(a,s));i&&i({id:s},c)},o=n,ge(r,o)}return Ee(t,e),pc(t,[{key:"render",value:function(){var e=this.state,t=e.value,n=e.items;return vo.a.createElement("div",{className:"QuestionRedirectionCreator"},vo.a.createElement("div",{className:"QuestionRedirectionCreator-content"},vo.a.createElement(ja.b,{value:t,items:n,inputProps:{spread:!0,large:!0,after:vo.a.createElement(Bo.a,{grey:!0,name:"search"})},menuProps:{targetClassName:"QuestionRedirectionCreator-menu"},onChange:this.handleChange,onSelect:this.handleSelect})))}}]),t}(bo.Component))||Vi,dc=fc,hc=n(25),mc=n.n(hc),bc=n(592),vc=n(1735),yc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),wc=(Hi=Object(Eo.connect)(function(e,t){return{isMuteSpecial:Object(To.n)(t.question)}}),Object(yo.withRouter)(Wi=Hi((Ki=Yi=function(e){function t(){var e,n,r,o;Oe(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=Ce(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={commentsShown:!1},r.handleCommentsShow=function(){var e=r.props,t=e.question.reviewInfo.tips,n=e.handleReviewingNotication;if(t)return void n();ai.default.trackEvent(r,{action:"Comment",element:"Button",is_intent:!0}),r.setState({commentsShown:!0})},r.handleCommentsClose=function(){r.setState({commentsShown:!1})},o=n,Ce(r,o)}return _e(t,e),yc(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.router,n=e.router.location,r=n.pathname,o=n.search,a=Boolean(/^\/question\/(\d*)$/.test(r)),i=Object(hc.parse)(location.search.slice(1)),s=i.answer_deleted_redirect;if(a&&"true"!==s){var c=Object(vc.a)(location.hash);this.setState({byComment:c}),c&&(t.replace(""+r+o),this.handleCommentsShow())}}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.setState({commentsShown:!1})}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.textStyle,r=e.isMuteSpecial,o=t.commentCount,a=t.adminClosedComment,i=this.state.commentsShown,s="",c=o&&!a;return s="textNumber"===n?c?"评论 "+Object(ks.formatNumber)(o):"":c?Object(ks.formatNumber)(o)+" 条评论":"添加评论",vo.a.createElement("div",{className:"QuestionHeader-Comment"},vo.a.createElement(So.c,{preset:"plain",onClick:this.handleCommentsShow,icon:Go.A,label:s,disabled:r}),vo.a.createElement(Po.b,{size:"fullPage",onClose:this.handleCommentsClose},i&&vo.a.createElement(bc.a,{type:"question",parent:t,byComment:this.state.byComment,commentNeedsReview:"censor"===t.commentPermission})))}}]),t}(bo.Component),Yi.propTypes={question:go.a.object.isRequired,handleReviewingNotication:go.a.func.isRequired},Wi=Ki))||Wi)||Wi),gc=wc,Ec=n(10),Oc=function(e){var t=e.title,n=e.id,r=e.topics,o=e.answerCount,a=e.commentCount,i=e.created,s=e.updatedTime,c=e.visitsCount,l=e.followerCount;return{name:t,url:"https://www.zhihu.com/question/"+n,keywords:r.map(function(e){return e.name}).join(","),answerCount:o,commentCount:a,dateCreated:new Date(1e3*i).toISOString(),dateModified:new Date(1e3*s).toISOString(),"zhihu:visitsCount":c,"zhihu:followerCount":l}},Cc=(n(2522),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),_c={invitationShown:!1,reportShown:!1,lockTipsShown:!1,deleteShown:!1,redirectionCreatorShown:!1},kc=(Gi=Object(Eo.connect)(function(e,t){return{edition:Object(bi.d)(e),referer:Object(bi.g)(e),shouldOia:Object(bi.h)(e),isMuteSpecial:Object(To.n)(t.question),publicEditPermission:e.publicEditPermission,currentUserUrlToken:e.currentUser,permission:Object(To.G)(e)}},{deleteQuestion:To.k,deleteBrandQuestion:To.h,updateQuestionLocked:To.P,showNotification:da.g,updateQuestionPermission:To.Q}),Object(yo.withRouter)(Xi=Gi((Ji=$i=function(e){function t(){var e,n,r,o;je(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=Se(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state=_c,r.handleReviewingNotication=function(){var e=r.props.question.reviewInfo.tips;r.props.showNotification(e,"red")},r.handleInvite=r.context.authRequired(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.eventId,n=void 0===t?3312:t;ai.default.trackEvent(null,{id:n});var o=r.props,a=o.question,i=a.relationship.isAnonymous,s=a.status;s=void 0===s?{}:s;var c=s.isLocked,l=s.isClose,u=s.isEvaluate,p=s.isSuggest,f=a.reviewInfo;f=void 0===f?{}:f;var d=f.tips,h=o.onInvitationTipShow;if(d)return void r.handleReviewingNotication();if(i)return void h();var m=void 0;if(c?m="锁定":l?m="关闭":(u||p)&&(m="建议修改"),m)return void r.props.showNotification("该问题已被"+m+"，不能邀请人回答此问题","red");r.handleInvitationShow()},Ec.M.invite),r.handleInvitationShow=function(){return r.setState({invitationShown:!0})},r.handleInvitationHide=function(){return r.setState({invitationShown:!1})},r.handleReport=function(){r.setState({reportShown:!r.state.reportShown})},r.handleLock=function(){return r.props.question.status.isLocked?r.handleUpdateQuestionLocked():r.handleLockTipsShow()},r.handleUpdateQuestionLocked=function(){var e=r.props,t=e.question.id;(0,e.updateQuestionLocked)(t)},r.handleLockTipsShow=function(){return r.setState({lockTipsShown:!0})},r.handleLockTipsHide=function(){return r.setState({lockTipsShown:!1})},r.handleDelete=function(){return r.setState({deleteShown:!0})},r.handleDeleteModalClose=function(){return r.setState({deleteShown:!1})},r.handleConfirmDelete=function(){r.handleDeleteModalClose();var e=r.props,t=e.question,n=t.id,o=t.questionType,a=e.deleteQuestion,i=e.deleteBrandQuestion;return("commercial"===o?i:a)(n).then(function(){location.href="/"})},r.handleRedirectionCreatorShow=function(){if(r.props.question.reviewInfo.tips)return void r.handleReviewingNotication();r.setState({redirectionCreatorShown:!0})},r.handleRedirectionCreatorClose=function(){r.setState({redirectionCreatorShown:!1})},r.handleRedirectionCreated=function(e,t){var n=r.props,o=n.router,a=n.question.id,i=e.id;r.handleRedirectionCreatorClose(),t.then(function(){o.push("/question/"+i+"?rf="+a)})},r.handleCommentPermissionChange=function(e){var t=r.props;(0,t.updateQuestionPermission)(t.question.id,e)},r.handleShareMenuTogglerClick=function(){var e=r.props.question.reviewInfo;return e=void 0===e?{}:e,!e.tips||(r.handleReviewingNotication(),!1)},r.toggleAnonymous=function(){var e=r.props.question.reviewInfo,t=e.tips,n=e.editTips;return t?void r.handleReviewingNotication():n?void r.props.showNotification(n,"red"):void r.context.toggleAnonymous()},r.getQuestionStatus=function(){var e=r.props.question.status;e=void 0===e?{}:e;var t=e.isClose,n=e.isEvaluate,o=e.isLocked,a=e.isSuggest;return t?"closed":a?"suggested":n?"evaluated":o?"locked":""},o=n,Se(r,o)}return Pe(t,e),Cc(t,[{key:"componentDidMount",value:function(){var e=this.props.getHandleInvite;e&&e(this.handleInvite)}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.nextQuestion(e)}},{key:"nextQuestion",value:function(){this.setState(_c)}},{key:"render",value:function(){var e=this,t=this.state,n=t.invitationShown,r=t.reportShown,o=t.lockTipsShown,a=t.deleteShown,i=t.redirectionCreatorShown,s=this.context.currentUser,c=this.props,l=c.question,u=c.question,p=u.id,f=u.title,d=u.answerCount,h=u.collapsedAnswerCount,m=u.relationship,b=m.isAuthor,v=m.isAnonymous,y=m.canLock,w=u.status;w=void 0===w?{}:w;var g=w.isLocked,E=u.questionType,O=u.isEditable,C=u.commentPermission,_=u.author.urlToken,k=c.edition,j=c.shouldOia,S=c.location.query,P=c.referer,T=c.isMuteSpecial,N=c.publicEditPermission;N=void 0===N?{}:N;var A=N.isQuestionRedirectEditable,x=c.currentUserUrlToken,R=c.permission.canBrandAdminEdit,I="commercial"===E,M=s&&!b,L=(R||y)&&(0!==d||0!==h),D=!1,q=void 0;I?(D=R,q=g?"开放回答":"关闭回答"):(D=b&&0===d&&0===h,q=g?"取消锁定":"锁定问题");var B=j?vo.a.createElement(sc.b,{onClick:function(e){return Object(oi.b)(e,{href:Object(mi.a)({type:"question",id:p},{edition:k,query:S,referer:P})})}},"查看问题日志"):vo.a.createElement(sc.b,{tag:si.a,a:!0,to:"/question/"+p+"/log"},"查看问题日志"),U=[M&&{text:"举报",icon:Go._61,handler:this.handleReport}].filter(Boolean),z=_===x,F=ke(O,z,A);return vo.a.createElement("div",{className:"QuestionHeaderActions"},vo.a.createElement(So.c,{color:"grey",style:{marginRight:16},onClick:this.handleInvite,label:"邀请回答",icon:Go._24,disabled:T}),vo.a.createElement(gc,{question:l,handleReviewingNotication:this.handleReviewingNotication}),vo.a.createElement(lc.a,{id:p,title:f,href:"/question/"+p,onTogglerClick:this.handleShareMenuTogglerClick,type:"question",disabled:T}),U.map(function(e){var t=e.text,n=e.icon,r=e.handler,o=e.disabled;return vo.a.createElement(So.c,{key:t,preset:"plain",onClick:r,label:t,icon:n,disabled:o})}),vo.a.createElement(sc.c,{toggler:vo.a.createElement(So.c,{preset:"plain","aria-label":"更多",icon:I&&!R?null:Go.I}),menuClassName:"QuestionHeader-menu",itemClassName:Io()("QuestionHeader-menu-item",{"QuestionHeader-menu-item--com":I})},!1,s&&!s.isOrg&&"normal"===E&&vo.a.createElement(sc.b,{onClick:this.toggleAnonymous},v?"取消匿名身份":"使用匿名身份"),I&&[{key:"all",name:"开放评论"},{key:"censor",name:"预审评论"},{key:"nobody",name:"关闭评论"}].map(function(t){var n=t.key,r=t.name;return vo.a.createElement(sc.b,{key:n,onClick:function(){e.handleCommentPermissionChange(n)}},(!C&&"all"===n||C===n)&&vo.a.createElement(Go.w,{className:"MenuItem-icon",text:!0,center:!0})," ",r)}),I&&L&&vo.a.createElement("li",{className:"Menu-divider"}),I&&L&&vo.a.createElement(sc.b,{onClick:this.handleLock},q),I&&vo.a.createElement("li",{className:"Menu-divider"}),D&&vo.a.createElement(sc.b,{onClick:this.handleDelete},"删除问题"),F&&!s.isOrg&&"normal"===E&&vo.a.createElement(sc.b,{onClick:this.handleRedirectionCreatorShow},"问题重定向"),!I&&B),vo.a.createElement(uc.a,{type:"question",urlToken:p,shown:r,status:this.getQuestionStatus(),onClose:this.handleReport,zaEnabled:!0}),vo.a.createElement(Po.b,{size:"fullPage",onClose:this.handleInvitationHide},n&&vo.a.createElement(Ys,{question:l})),vo.a.createElement(cc.a,{title:I?"关闭回答":"锁定问题",subtitle:(I?"关闭":"锁定")+"后该问题将无法添加新回答，你确定要"+(I?"关闭":"锁定")+"吗？",shown:o,onCancel:this.handleLockTipsHide,onSubmit:this.handleUpdateQuestionLocked}),vo.a.createElement(Po.b,{size:"large",title:"问题重定向",onClose:this.handleRedirectionCreatorClose},i&&vo.a.createElement(dc,{question:l,onSubmitted:this.handleRedirectionCreated})),vo.a.createElement(cc.a,{title:"删除问题",subtitle:"你确定要删除这个问题吗？相关的评论也将被删除。",onCancel:this.handleDeleteModalClose,onSubmit:this.handleConfirmDelete,shown:a}))}}]),t}(bo.PureComponent),$i.contextTypes={currentUser:go.a.object,authRequired:go.a.func,toggleAnonymous:go.a.func},Xi=Ji))||Xi)||Xi),jc=kc,Sc=(n(2523),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Pc=function(e){function t(){var e,n,r,o;Te(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=Ne(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleTrackClick=function(e){ai.default.trackEvent(e.target,{id:4026})},o=n,Ne(r,o)}return Ae(t,e),Sc(t,[{key:"componentDidMount",value:function(){ai.default.trackCardShow(this,{id:4025})}},{key:"render",value:function(){var e=this.props.tips,t=e.text,n=e.link;return vo.a.createElement("a",{className:"CircleDiscussion",href:n,onClick:this.handleTrackClick,target:"_blank"},vo.a.createElement(Go._54,{className:"CircleDiscussion-icon",size:16}),vo.a.createElement("span",{className:"CircleDiscussion-text"},t))}}]),t}(bo.Component),Tc=n(619),Nc=(n(2524),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Ac=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),xc=function(e){function t(){return xe(this,t),Re(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ie(t,e),Ac(t,[{key:"render",value:function(){var e=this.props.brand,t=e.name,n=e.logo,r=e.target,o=e.description,a=e.typeDescription,i=r?"a":"div";return vo.a.createElement("div",{className:Io()("BrandQuestionSymbol",{"is-mobile":!1})},vo.a.createElement(i,Nc({className:"BrandQuestionSymbol-brandLink"},r&&{href:this.memberProfileUrl}),vo.a.createElement("img",{role:"presentation",src:n,className:"BrandQuestionSymbol-logo"}),vo.a.createElement("span",{className:"BrandQuestionSymbol-name"},t),r&&vo.a.createElement(Tc.a,{badge:r.badge,isOrg:r.isOrg,noLink:!0})),vo.a.createElement("span",null,o),Boolean(a)&&vo.a.createElement("span",{className:"BrandQuestionSymbol-typeDesc"},a),!this.props.noDivider&&vo.a.createElement("div",{className:"BrandQustionSymbol-divider"}))}},{key:"memberProfileUrl",get:function(){var e=this.props.brand.target;return"/"+("organization"===e.userType?"org":"people")+"/"+e.urlToken}}]),t}(bo.Component),Rc=xc,Ic=n(570),Mc=n.n(Ic),Lc=864e5,Dc=n(2525),qc=n.n(Dc),Bc=(n(2526),n(643)),Uc=(n(2527),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),zc=[266345332,266185274,266775642,266778972,267780752,267982583,267929475,276365408,276391481,276376778,276657010,277278544,277093316,281759589,283200448,283052513,283199328],Fc=(Zi=Object(Eo.connect)(function(e,t){return{question:e.entities.questions[t.question.id]}},{loadBrandQuestionPermission:To.t,loadBrandQuestionAdvancedStyle:To.r,loadBrandQuestionPrize:To.u}),es=Object(Bc.a)(),Zi(ts=es((rs=ns=function(e){function t(){return qe(this,t),Be(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ue(t,e),Uc(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.question,n=t.id,r=t.questionType,o=e.loadBrandQuestionPermission,a=e.loadBrandQuestionAdvancedStyle,i=e.loadBrandQuestionPrize,s=e.isLogin;"commercial"===r&&(s&&o(n),a(n),i(n))}},{key:"render",value:function(){var e=this,t=this.props.question,n=t.id,r=t.permission,o=t.relationship,a=Boolean(o&&o.isAuthor),i=Boolean(r&&r.canEdit);return a&&zc.includes(n)||i?vo.a.createElement(sc.c,{className:"BrandQuestionSettingMenu",toggler:vo.a.createElement(So.c,null,"设置高级样式")},i&&vo.a.createElement(sc.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){e.context.router.push("/organization/question/"+n+"/setting/advanced")}},"编辑品牌推荐"),a&&zc.includes(n)&&vo.a.createElement(sc.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){e.context.router.push("/organization/question/"+n+"/setting/prize")}},"编辑有奖问答")):null}}]),t}(bo.Component),ns.contextTypes={currentUser:go.a.object,router:go.a.object},ts=rs))||ts)||ts),Qc=Fc,Vc=n(573),Hc=n(556),Wc=(n(2528),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Yc=(os=Object(Eo.connect)(function(e,t){return{pin:Object(Hc.g)(e,t.target.id)}},{getPinContents:Hc.e}),as=Object(na.a)(function(e){return{module:"PinItem",card:{content:{type:"Pin",id:e.target.id}}}}),os(is=as((cs=ss=function(e){function t(){var e,n,r,o;ze(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=Fe(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleFollow=function(){var e=r.props.pin;e=void 0===e?{}:e;var t=e.author,n=t.isFollowing?1977:1976;r.handleTrack(n)},r.handleTrack=function(e){var t=r.props.pin;t=void 0===t?{}:t;var n=t.author;ai.default.trackEvent(r,{id:e},{button:{text:n.name}})},o=n,Fe(r,o)}return Qe(t,e),Wc(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.target,r=n.type,o=n.id,a=t.getPinContents;"pin"===r&&a(o).then(function(t){var n=t.payload,r=void 0===n?{}:n,o=r.author;o=void 0===o?{}:o;var a=o.name;ai.default.trackCardShow(e,{id:1969},{button:{text:a}})})}},{key:"render",value:function(){var e=this,t=this.props.pin;if(!t||!t.content)return null;var n=t.author,r=t.id,o=t.content[0].content.replace(/<a.*class="hash_tag".*?<\/a>/g,""),a=n||{},i=a.type,s=a.urlToken,c=a.isFollowing,l="https://www.zhihu.com/pin/"+r;return vo.a.createElement("div",{className:"QuestionRelatedCard"},vo.a.createElement("div",{className:"QuestionRelatedCard-title"},"相关报道"),vo.a.createElement("div",{className:"QuestionRelatedCard-content"},vo.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(Vc.truncateHTML)(o,110).content}}),l&&vo.a.createElement("a",{className:"QuestionRelated-jump",href:l,onClick:function(){e.handleTrack(1975)}},"查看详情")),s&&vo.a.createElement("div",{className:"QuestionRelatedCard-footer"},vo.a.createElement("div",null,"来自",vo.a.createElement("a",{className:"QuestionRelatedCard-from",href:"https://www.zhihu.com/people/"+s,target:"_blank",onClick:function(){e.handleTrack(1971)}},n.name)),vo.a.createElement("div",{onClick:this.handleFollow},vo.a.createElement(hi.a,{className:"QuestionRelatedCard-follow",type:i,id:s,isFollowing:c},vo.a.createElement(Go._48,{key:"icon",text:!0,center:!0}),"关注机构"))))}}]),t}(bo.Component),ss.propTypes={target:go.a.shape({type:go.a.string,id:go.a.string}).isRequired},is=cs))||is)||is),Kc=(n(2529),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Gc=function(e){function t(){return Ve(this,t),He(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return We(t,e),Kc(t,[{key:"render",value:function(){var e=this.props.question.author;return vo.a.createElement("div",{className:"OrgQuestionSymbol"},vo.a.createElement("div",{className:Io()("OrgQuestionSymbol-inner",{"OrgQuestionSymbol-inner--mobile":!1})},vo.a.createElement("div",{className:"OrgQuestionSymbol-main QuestionHeader-main"},vo.a.createElement("div",{className:"OrgQuestionSymbol-avatar"},vo.a.createElement(ds.a,{user:e,avatar:!0,avatarProps:{size:38}})),vo.a.createElement("div",{className:"OrgQuestionSymbol-name"},vo.a.createElement(ds.a,{user:e})," 的提问")),vo.a.createElement("div",{className:"OrgQuestionSymbol-tip"},vo.a.createElement(si.a,{preset:"plain",a:!0,to:"/org-intro#org-question",target:"_blank"},"了解机构提问"))))}}]),t}(bo.Component),Xc=Gc,$c=n(615),Jc=n.n($c),Zc=n(1719),el=n(190),tl=(n(2113),function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["","人评价"],["","人评价"])),nl=function(e){var t=e.percent,n=e.reviewerCount,r=e.ratioStatus,o=e.title;return vo.a.createElement("div",{className:"QuestionTopicReviewCardExtraInfo-cardTitleContainer"},vo.a.createElement("h3",{className:"QuestionTopicReviewCardExtraInfo-cardTitle"},o),"normal"===r?vo.a.createElement("div",null," ",vo.a.createElement("span",{className:"QuestionTopicReviewCardExtraInfo-percentNum"},t,"%")," ",vo.a.createElement("span",null,"知友推荐 · ",qo()(tl,n))):vo.a.createElement("span",null,"  推荐数据积累中"))};nl.propType={percent:go.a.number.isRequired,reviewerCount:go.a.string.isRequired};var rl,ol,al,il,sl,cl,ll,ul,pl,fl,dl,hl,ml,bl,vl,yl,wl,gl,El,Ol,Cl,_l,kl,jl=nl,Sl=n(12),Pl=n(1908),Tl=Object(Sl.compose)(Object(Eo.connect)(null,function(e,t){var n=t.metaInfo.id,r=t.questionId;return{onUpdateVoteTopic:function(t){var o=t.voteFor,a=t.method;return e(Object(Rs.M)({questionId:r,id:n,voteFor:o,method:a}))}}}),yo.withRouter)(Pl.a),Nl=(n(2530),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Al=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),xl=(rl=Object(Ks.a)(null))(ol=function(e){function t(){var e,n,r,o;Ye(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=Ke(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.trackReviewCardOpenUrl=function(e){ai.default.trackEvent(e.target,{id:4175,action:"OpenUrl",name:name})},r.renderNotPublishCard=function(e,t,n){return vo.a.createElement(bs.d,{className:"QuestionHeaderTopicMeta"},r.renderCardImage("QuestionHeaderTopicMeta-SideImg"),vo.a.createElement("div",{className:"QuestionHeaderTopicMeta-Content"},vo.a.createElement("div",{className:"QuestionHeaderTopicMeta-NotPublishTitleContainer"},vo.a.createElement("h3",{className:"QuestionHeaderTopicMeta-NotPublishTitle"},e),"  ",vo.a.createElement("span",{className:"QuestionHeaderTopicMeta-Info QuestionHeaderTopicMeta-NotPublishInfo"},"暂未上映 · ",t," 上映")),vo.a.createElement("div",{className:"QuestionHeaderTopicMeta-Info QuestionHeaderTopicMeta-NotPublishInfo",dangerouslySetInnerHTML:{__html:n}})))},o=n,Ke(r,o)}return Ge(t,e),Al(t,[{key:"renderCardImage",value:function(e){var t=this.props,n=t.meta,r=t.meta.meta,o=r.title,a=r.avatar,i=n.avatarUrl,s=n.category;return vo.a.createElement(Zc.a,{className:Io()(""+e,{"QuestionHeaderTopicMeta-SideImg--goods":"n_goods"===s}),src:a||i,alt:o})}},{key:"renderTopReviewCard",value:function(){var e=this.props,t=e.meta,n=e.questionId,r=t.meta,o=r.title,a=r.summary,i=r.description2,s=r.description1,c=r.pubTimestamp,l=t.excerpt,u=a||l||i||s,p=1e3*c;if(Boolean(p&&Jc()(Date.now(),p))){var f=Mc()(p,"YYYY-MM-DD");return this.renderNotPublishCard(o,f,u)}return vo.a.createElement(bs.d,{className:"QuestionHeaderTopicMeta"},vo.a.createElement("div",{className:"QuestionHeaderTopicMeta-CardMain"},this.renderCardImage("QuestionHeaderTopicMeta-SideImg"),vo.a.createElement("div",{className:"QuestionHeaderTopicMeta-Content"},vo.a.createElement(Tl,{metaInfo:t,questionId:n,ReviewCardExtraInfoComponent:jl,reviewerCountFormatter:ks.formatNumber},vo.a.createElement("div",{className:"QuestionHeaderTopicMeta-Info",dangerouslySetInnerHTML:{__html:u}})))))}},{key:"render",value:function(){var e=this.props.meta,t=e.category,n=e.id,r=e.vote,o=e.isVote,a=r&&o;if(!a)return null;var i=["like","dislike"].includes(r.status);return vo.a.createElement(Qo.a,Nl({module:"TopicItem",moduleName:t},a&&{view:{id:4174,name:i?"已评价":"未评价"}},{card:{content:Nl({type:"Topic"},Object(el.a)("topic",n),{sub_type:"MetaCard"})},trackCardShow:!0}),vo.a.createElement("a",{href:"/topic/"+n,target:"_blank",rel:"noopener noreferrer","data-za-not-track-link":!0,onClick:this.trackReviewCardOpenUrl},this.renderTopReviewCard()))}}]),t}(bo.PureComponent))||ol,Rl=xl,Il=n(1535),Ml=(n(2531),function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),Ll=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Dl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ql=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["","提问："],["","提问："]),Bl=function(e){return vo.a.createElement(So.c,Dl({preset:"plain",className:"QuestionHeader-edit"},e),vo.a.createElement(Bo.a,{name:"modify",left:!0}),"修改")},Ul=(al=Object(Eo.connect)(et,{loadBrand:To.q,updateQuestionLocked:To.P,deleteQuestion:To.k,deleteBrandQuestion:To.h,showNotification:da.g,loadQuestionCommercialBanner:To.z}),Object(yo.withRouter)(il=al((cl=sl=function(e){function t(){var e,n,r,o;$e(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=Je(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={collapsed:!0,editShown:!1,editTopicsShown:!1,invitationTipShown:!1,brandQuestionPrizesExpanded:!1},r.getHandleInvite=function(e){e&&(r.handleInvite=e)},r.handleExpand=function(){r.setState({collapsed:!1})},r.handleCollapse=function(){r.setState({collapsed:!0,shareMenuPositionStatus:"normal"})},r.handleEditShow=r.context.authRequired(function(){var e=r.props.question.reviewInfo,t=e||{},n=t.editTips;if(n)return void r.props.showNotification(n,"red");r.setState({editShown:!0})}),r.handleEditClose=function(){r.setState({editShown:!1})},r.handleEditTopicsShow=r.context.authRequired(function(){var e=r.props.question.reviewInfo,t=e||{},n=t.editTips;if(n)return void r.props.showNotification(n,"red");r.setState({editTopicsShown:!0})}),r.handleEditTopicsClose=function(){r.setState({editTopicsShown:!1})},r.handleInvitationShow=function(){r.setState({invitationModalShown:!0})},r.handleInvitationHide=function(){r.setState({invitationModalShown:!1})},r.handleInvitationTipShow=function(){r.setState({invitationTipShown:!0})},r.handleInvitationTipClose=function(){r.setState({invitationTipShown:!1})},r.handleRedirectionCreatorShow=function(){r.setState({redirectionCreatorShown:!0})},r.handleRedirectionCreatorClose=function(){r.setState({redirectionCreatorShown:!1})},r.handleRedirectionCreated=function(e,t){var n=r.props,o=n.router,a=n.question.id,i=e.id;r.handleRedirectionCreatorClose(),t.then(function(){o.push("/question/"+i+"?rf="+a)})},r.handleDelete=function(){var e=r.props,t=e.question,n=t.id,o=t.questionType,a=e.deleteQuestion,i=e.deleteBrandQuestion;return"commercial"===o?i(n).then(function(){location.href="/"}):a(n).then(function(){location.href="/"})},r.handleConfirmDelete=function(){r.handleDeleteModalClose(),r.handleDelete()},r.handleDeleteModalShow=function(){r.setState({deleteModalShown:!0})},r.handleDeleteModalClose=function(){r.setState({deleteModalShown:!1})},r.handlePositionStatusChange=function(e){r.setState({shareMenuPositionStatus:e})},r.handleUpdateQuestionLocked=function(){var e=r.props,t=e.question.id;(0,e.updateQuestionLocked)(t)},r.handleLockTipsShow=function(){return r.setState({lockTipsShown:!0})},r.handleLockTipsHide=function(){return r.setState({lockTipsShown:!1})},r.handleBrandQuestionPrizesToggle=function(){r.setState({brandQuestionPrizesExpanded:!r.state.brandQuestionPrizesExpanded})},o=n,Je(r,o)}return Ze(t,e),Ll(t,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.isAnswerPage,e.question),n=t.id,r=t.questionType,o=e.loadBrand,a=e.loadQuestionCommercialBanner;this.context.currentUser&&Object(Il.c)("question",n,Il.a),"commercial"===r&&(o(n),a(n))}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,r=t.isAnswerPage,o=e.question,a=o.id,i=o.relationship.isAnonymous,s=e.isAnswerPage;!this.state.collapsed&&e.question&&this.props.question&&e.question.detail.length!==this.props.question.detail.length&&this.setState({collapsed:!0,editShown:!1}),n===a&&r===s||this.setState({collapsed:!0,invitationTipShown:!1}),i||this.setState({invitationTipShown:!1})}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.collapsed,r=t.collapsed;if(n&&!r){var o=this.container.getBoundingClientRect(),a=o.top;window.scrollTo(0,window.pageYOffset+a-document.documentElement.clientHeight)}}},{key:"renderFooter",value:function(){var e=this.props.question,t=e.id,n=e.title,r=e.editableDetail,o=e.topics,a=e.questionType,i=e.relationship.isAnonymous,s=this.state,c=s.collapsed,l=s.editShown,u=s.editTopicsShown,p=this.context.currentUser;return vo.a.createElement("div",{className:"QuestionHeader-footer"},vo.a.createElement("div",{className:"QuestionHeader-footer-inner"},vo.a.createElement("div",{className:"QuestionHeader-main QuestionHeader-footer-main"},vo.a.createElement(gi,{question:e}),"commercial"===a&&!0&&vo.a.createElement(Qc,{question:e}),vo.a.createElement(jc,{question:e,onInvitationTipShow:this.handleInvitationTipShow,getHandleInvite:this.getHandleInvite}),vo.a.createElement("div",{className:"QuestionHeader-actions"},!c&&vo.a.createElement(So.c,{preset:"plain",onClick:this.handleCollapse},"收起",vo.a.createElement(Bo.a,{name:"arrow",className:"QuestionHeader-collapse-icon"}))))),p&&vo.a.createElement(ga,{id:t,title:n,detail:r,show:l,onClose:this.handleEditClose,questionType:a,isAnonymous:i}),p&&vo.a.createElement(ni,{id:t,topics:[].concat(Xe(o)),show:u,onClose:this.handleEditTopicsClose}))}},{key:"renderSpecialQuestionAuthor",value:function(){var e=this.props.question.author;return vo.a.createElement(bo.Fragment,null,vo.a.createElement(ea,{className:"QuestionHeader-specialQuestionAuthor",author:e}),vo.a.createElement("div",{className:"QuestionHeader-topicDivider"}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.location,r=t.question,o=t.isAnswerPage,a=t.brand,i=t.publicEditPermission,s=t.currentUserUrlToken,c=t.meta,l=t.permission.canBrandAdminEdit,u=r.title,p=r.detail,f=r.topics,d=void 0===f?[]:f,h=r.questionType,m=r.author,b=r.showAuthor,v=r.author.urlToken,y=r.excerpt,w=r.isEditable,g=r.id,E=r.reviewInfo,O=r.relatedCards,C=void 0===O?[]:O,_=r.annotationDetail,k=r.circleInfo,j=this.state,S=j.collapsed,P=j.invitationTipShown,T=j.brandQuestionPrizesExpanded,N=Ml(c,1),A=N[0],x=d.map(function(e){return{name:e.name,id:e.id}}),R=i||{},I=R.isQuestionEditable,M=R.isQuestionTopicEditable,L=v===s,D=ke(w,L,I),q=ke(w,L,M);return vo.a.createElement("div",{"data-zop-question":JSON.stringify({title:u,topics:x,id:g,isEditable:w})},vo.a.createElement(Ho.a,null,vo.a.createElement($s,{question:r,location:n,invitationTipShown:P,onInvitationTipClose:this.handleInvitationTipClose,isAnswerPage:o})),"commercial"===r.questionType&&(!S||!o)&&vo.a.createElement(Wo.a,{type:r.type,id:r.id}),vo.a.createElement(Qo.a,{module:"QuestionDescription",card:{content:{type:"Question",token:String(g)}}},vo.a.createElement("div",{className:"QuestionHeader",ref:function(t){e.container=t}},vo.a.createElement("div",{className:"QuestionHeader-content"},vo.a.createElement("div",{className:"QuestionHeader-main"},k&&k.canWriteCircle&&vo.a.createElement(Pc,{tips:k.tips}),vo.a.createElement("div",{className:"QuestionHeader-tags"},"commercial"===h&&vo.a.createElement(Rc,{brand:a}),vo.a.createElement("div",{className:"QuestionHeader-topics"},b&&this.renderSpecialQuestionAuthor(),d.map(function(e){return vo.a.createElement(ia,{item:e,key:e.id})}),(q||l)&&vo.a.createElement(Bl,{onClick:this.handleEditTopicsShow}))),vo.a.createElement("h1",{className:"QuestionHeader-title"},"org"===h&&qo()(ql,m.name),u,(D||l)&&vo.a.createElement(Bl,{onClick:this.handleEditShow})),_&&vo.a.createElement(zo.a,{annotationDetail:_}),C[0]&&vo.a.createElement(Yc,{target:C[0]}),vo.a.createElement(De,{question:r,expanded:T,handleToggle:this.handleBrandQuestionPrizesToggle}),A&&vo.a.createElement(Rl,{meta:A,questionId:g}),vo.a.createElement(ri.a,{html:p,reviewInfo:E,excerpt:y,collapsed:S,onExpand:this.handleExpand,editable:D||l,onEdit:this.handleEditShow})),vo.a.createElement("div",{className:"QuestionHeader-side"},vo.a.createElement("div",{className:"QuestionHeader-follow-status"},vo.a.createElement(ic,{question:r})))),S?this.renderFooter():vo.a.createElement(Uo.a,{bottom:!0,container:function(){return e.container},onPositionStatusChange:this.handlePositionStatusChange},this.renderFooter()),"org"===h&&vo.a.createElement(Xc,{question:r}))),vo.a.createElement(Vo.a,null,vo.a.createElement("div",{className:"QuestionHeader-content"},vo.a.createElement("div",{className:"QuestionHeader-main"},vo.a.createElement("h1",{className:"QuestionHeader-title",onClick:function(){Object(Fo.scrollToTop)()}},u)),vo.a.createElement(Qo.a,{module:"ToolBar",card:{content:{type:"Question",token:String(g)}}},vo.a.createElement("div",{className:"QuestionHeader-side"},vo.a.createElement(gi,{question:r,inTopBar:!0}))))))}}]),t}(bo.Component),sl.contextTypes={authRequired:go.a.func,currentUser:go.a.object},il=cl))||il)||il),zl=Ul,Fl=n(1800),Ql=n(654),Vl=(n(2532),function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),Hl=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Wl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yl="已开启赞赏的回答无法设为匿名，请先关闭赞赏",Kl="匿名回答无法开启圈内说，请先取消匿名",Gl=function(e){var t=Object(jo.parseInputTime)(e);return t?t.getFullYear()+"-"+ot(t.getMonth()+1)+"-"+ot(t.getDate())+"T"+ot(t.getHours())+":"+ot(t.getMinutes())+":"+ot(t.getSeconds()):""},Xl=(ll=Object(Eo.connect)(it,{loadQuestion:To.y,loadDraft:To.v,updateQuestionAnonymous:To.N,showNotification:da.g,getPublicEditPermission:Ql.b}))((fl=pl=function(e){function t(){var e,n,r,o;tt(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=nt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={anonymousConfirmShown:!1,isCheckedCircle:!0,answering:!1,hideIsMutedCover:!1},r.getPublicEditPermission=function(){var e=r.props,t=e.question,n=e.currentUserUrlToken,o=e.getPublicEditPermission,a=ko()(t,"author.urlToken","");ko()(t,"isEditable",!1)&&n&&a!==n&&o()},r.handleToggleAnonymous=function(){var e=r.props,t=e.showNotification,n=e.reward.question,o=void 0===n?{}:n,a=e.id;if(a&&o[a]&&o[a].isRewardable)return void t(Yl,"red");r.setState({anonymousConfirmShown:!r.state.anonymousConfirmShown})},r.startAddAnswer=function(){var e=r.props,t=e.params.answerId,n=e.location.query.group_id;t||n?(r.context.router.push("/question/"+r.props.id),setTimeout(r.focusAddAnswer)):r.focusAddAnswer()},r.focusAddAnswer=function(){at(),r.setState({answering:Date.now()})},r.onChangecircleSettings=function(e){var t=r.props,n=t.question.relationship.isAnonymous,o=t.showNotification;if(n&&e)return o(Kl,"red"),void r.setState({isCheckedCircle:!1});r.setState({isCheckedCircle:e})},o=n,nt(r,o)}return rt(t,e),Hl(t,[{key:"getChildContext",value:function(){return{toggleAnonymous:this.handleToggleAnonymous,startAddAnswer:this.startAddAnswer,onChangecircleSettings:this.onChangecircleSettings,isCheckedCircle:this.state.isCheckedCircle}}},{key:"componentDidMount",value:function(){var e=this.props.question;e?this.readyQuestion(Promise.resolve(e)):this.nextQuestion(),this.getPublicEditPermission()}},{key:"componentDidUpdate",value:function(e){this.props.params.id!==e.params.id&&this.nextQuestion(),this.props.params.answerId||e.draft||!this.props.draft||this.focusAddAnswer()}},{key:"componentWillUnmount",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"nextQuestion",value:function(){var e=this,t=this.props,n=t.id,r=t.loadQuestion;this.readyQuestion(r(n).then(function(){return e.props.question}))}},{key:"readyQuestion",value:function(){var e=this.props.loadDraft;this.context.currentUser&&e(this.props.params.id),this.setState({anonymousConfirmShown:!1}),"#write_answer"===location.hash&&this.focusAddAnswer()}},{key:"renderMeta",value:function(){var e=this.props.question,t=Oc(e);return Object.keys(t).map(function(e){return vo.a.createElement("meta",{key:e,itemProp:e,content:t[e]})})}},{key:"renderJSONLD",value:function(){var e=this.props,t=e.location,n=e.question,r=e.answer,o=e.params.answerId,a=Boolean(o),i=a?r:n;if(i){var s=a?[i.createdTime,i.updatedTime]:[i.created,i.updatedTime],c=Vl(s,2),l=c[0],u=c[1],p=Gl(l),f=Gl(u);return vo.a.createElement("script",{type:"application/ld+json"},'\n        {\n          "@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",\n          "@id": "https://www.zhihu.com'+t.pathname+'",\n          "appid": "否",\n          "pubDate": "'+p+'",\n          "upDate": "'+f+'"\n        }')}}},{key:"render",value:function(){var e=this,t=this.props,n=t.location,r=t.params,o=t.children,a=t.question,i=t.router.location.query,s=t.meta,c=t.firstAnswer,l=Boolean(r.answerId);if(!a)return vo.a.createElement("div",null);if("true"===i.answer_deleted_redirect)return vo.a.createElement(Lo,{id:a.id});var u=a.questionType,p=a.isMuted,f=a.title,d=a.relationship,h=d.isAuthor,m=d.myAnswer,b=this.state,v=b.anonymousConfirmShown,y=b.isCheckedCircle,w=b.answering,g=b.hideIsMutedCover,E=ko()(a,"circleInfo.canWriteCircle",!1);return vo.a.createElement(Qo.a,{module:"QuestionItem",card:{content:{type:"Question",token:String(a.id)}}},vo.a.createElement("div",{className:"QuestionPage",itemScope:!0,itemType:"http://schema.org/Question"},vo.a.createElement(Co.a,Wl({title:f},!l&&{meta:Object(Fl.c)(a,c)})),this.renderMeta(),this.renderJSONLD(),"commercial"===u&&p&&!g&&h&&vo.a.createElement("div",{className:"QuestionPage-commercialIsMutedCover",onClick:function(){e.setState({hideIsMutedCover:!0})}}),vo.a.createElement(zl,{meta:s,question:a,location:n,onToggleAnonymous:this.handleToggleAnonymous,isAnswerPage:l}),Object(bo.cloneElement)(bo.Children.only(o),{question:a,answering:w}),vo.a.createElement(xo,{question:a,myAnswer:m,shown:v,showCircle:E,isCheckedCircle:y,onChangecircleSettings:this.onChangecircleSettings,onClose:this.handleToggleAnonymous})))}}]),t}(bo.PureComponent),pl.fetchData=function(e){var t=e.params,n=t.id,r=t.answerId;return function(e,t){return t().env.userAgent.isBot?Promise.all([e(Object(To.E)(n,r)),e(Object(To.F)(n)),e(Object(To.y)(n))]):e(Object(To.y)(n))}},pl.contextTypes={router:go.a.object,currentUser:go.a.object,authRequired:go.a.func},pl.childContextTypes={toggleAnonymous:go.a.func,startAddAnswer:go.a.func,onChangecircleSettings:go.a.func,isCheckedCircle:go.a.bool},ul=fl))||ul,$l=Xl,Jl=n(291),Zl=n(114),eu=n.n(Zl),tu=n(2533),nu=n.n(tu),ru=n(1510),ou=n(1564),au=n(5),iu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},su=4,cu=5,lu=3,uu=5,pu=20,fu={isDrained:!1,isFetching:!1,ids:[]},du=function(e){return e?vo.a.createElement(nu.a,{data:e}):null},hu=function(e){var t=e.item,n=st(e,["item"]);return vo.a.createElement(ru.a,{key:t.id},vo.a.createElement(ou.a,iu({editable:!0,expanded:!0,relatedTo:"question",answer:t,zaInfos:{cardShow:4351,index:String(n.dataZaIndex)}},n)))},mu=function(e,t,n){var r=t.relationship,o=r.canCollapseAnswers,a=r.canStickAnswers,i=t.hasPublishingDraft,s=e.map(function(e,t){return hu({item:e,canCollapse:o,canStick:a,hasPublishingDraft:i,itemProp:0===t?"acceptedAnswer":"suggestedAnswer",dataZaIndex:t})});return n?s:Object(Ho.b)(2,s)},bu=function(e,t){return e.map(function(e){return t[e]}).filter(function(e){return e&&!e.isDelete})},vu=Object(ps.isBrowser)()?eu()(bu,function(e,t){return e.join(",")+"-"+t.length}):bu,yu=(n(1789),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),wu=(dl=Object(Eo.connect)(ht,{loadNotificationAnswers:To.x}),Object(yo.withRouter)(hl=dl(hl=function(e){function t(){var e,n,r,o;pt(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=ft(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.load=function(){var e=r.props,t=e.isFetching,n=e.id,o=e.loadNotificationAnswers;t||o(n)},o=n,ft(r,o)}return dt(t,e),yu(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.location,n=e.isDrained,r=e.items;n&&!r.length&&this.props.router.replace(t.pathname)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.id,r=e.items;(t||r.length)&&Object(To.x)(n)}},{key:"render",value:function(){var e=this.props,t=e.question,n=t.id,r=t.answerCount,o=e.question,a=e.items,i=e.isFetching,s=e.isDrained;return vo.a.createElement("div",{className:"QuestionAnswers-answers"},vo.a.createElement(bs.d,null,vo.a.createElement(_s,{to:"/question/"+n},"查看全部 ",Object(ks.formatNumber)(r)," 条回答")),vo.a.createElement(bs.d,null,vo.a.createElement(vs.b,null,mu(a,o),i&&vo.a.createElement(Jl.a,{className:"List-item"})),!s&&!i&&vo.a.createElement(_s,{onClick:this.load},"更多")),vo.a.createElement(bs.d,null,vo.a.createElement(_s,{to:"/question/"+n},"查看全部 ",Object(ks.formatNumber)(r)," 条回答")))}}]),t}(bo.PureComponent))||hl)||hl),gu=wu,Eu=n(1549),Ou=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_u=[{text:"默认排序",value:"default"},{text:"按时间排序",value:"updated"}],ku={updatedAnswers:"updated",answers:"default"},ju=(ml=Object(Eo.connect)(yt,{loadBrandQuestionAnswerCount:To.s}),Object(yo.withRouter)(bl=ml(bl=function(e){function t(){var e,n,r,o;mt(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=bt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleResourceChange=function(e){r.props.router.push("/question/"+r.props.question.id+("default"===e?"":"/answers/"+e))},o=n,bt(r,o)}return vt(t,e),Cu(t,[{key:"componentWillReceiveProps",value:function(e){JSON.stringify(this.props.permission)!==JSON.stringify(e.permission)&&this.loadQuestionAnswerCount(e)}},{key:"loadQuestionAnswerCount",value:function(e){var t=e.question,n=t.id,r=t.questionType,o=e.permission.canBrandAdminEdit,a=e.loadBrandQuestionAnswerCount;"commercial"===r&&o&&a(n)}},{key:"renderAnswerListHeader",value:function(){var e=this.props,t=e.resource,n=e.question,r=n.id,o=n.answerCount,a=n.questionType,i=e.commonAnswerCount,s=e.hiddenAnswerCount,c=e.permission.canBrandAdminEdit;return"commercial"===a?c?vo.a.createElement("div",{className:"QuestionAnswers-navs"},vo.a.createElement(So.c,{preset:"plain",className:Io()("QuestionAnswers-nav",{"is--active":["answers","updatedAnswers"].includes(t)}),onClick:function(){location.href="/question/"+r}},Object(ks.formatNumber)(i)," 个回答","，由品牌推荐"),vo.a.createElement(So.c,{preset:"plain",className:Io()("QuestionAnswers-nav",{"is--active":"hiddenAnswers"===t}),onClick:function(){location.href="/question/"+r+"/answers/hidden"}},Object(ks.formatNumber)(s)," 个隐藏回答")):vo.a.createElement("span",null,Object(ks.formatNumber)(o)," 个回答，由品牌推荐"):vo.a.createElement("span",null,Object(ks.formatNumber)(o)," 个回答")}},{key:"render",value:function(){var e=this.props,t=e.resource,n=e.children;return vo.a.createElement(bs.d,{className:"AnswersNavWrapper"},vo.a.createElement(Eu.a,Ou({title:this.renderAnswerListHeader()},{options:"hiddenAnswers"===t?vo.a.createElement("span",null,"按时间排序"):vo.a.createElement(la.b,{listClassName:"Answers-select",needsReposition:!0,plain:!0,value:ku[t],onChange:this.handleResourceChange},_u.map(function(e){var t=e.value,n=e.text;return vo.a.createElement(la.a,{key:t,value:t,text:n})}))}),n))}}]),t}(bo.PureComponent))||bl)||bl),Su=ju,Pu=n(1802),Tu=n(21),Nu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Au=(vl=Object(Eo.connect)(function(e,t){var n=t.page,r=t.question.id,o=lt(e,{id:r,resource:"updatedAnswers"}),a=o.isFetching,i=o.isDrained,s=o.ids,c=Object(au.d)(n,s),l=c.total,u=c.isCurrentLoaded,p=c.isNextLoaded,f=c.items;return{isMuteSpecial:Object(To.n)(t.question),isFetching:a,isDrained:i,total:l,isNextLoaded:p,isCurrentLoaded:u,items:vu(f,e.entities.answers).filter(function(e){return!e.isDelete})}},{loadItems:To.w}),Object(yo.withRouter)(yl=vl(yl=function(e){function t(){var e,n,r,o;wt(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=gt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handlePaginationClick=function(e){r.props.router.push(location.pathname+"?page="+e)},r.handleUpdatedAnswersLoad=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tu.b,n=r.props,o=n.question.id;(0,n.loadItems)(o,"updatedAnswers",{offset:e,limit:t})},o=n,gt(r,o)}return Et(t,e),Nu(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.page,r=e.isDrained,o=e.items,a=e.loadItems;!r&&o.length<Tu.b&&a(t,"updatedAnswers",{offset:Object(au.c)(n)+o.length,limit:Tu.b-o.length})}},{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,r=e.isNextLoaded,o=e.isCurrentLoaded,a=e.page,i=e.items,s=e.total,c=e.question,l=e.isMuteSpecial;return n&&!i.length?vo.a.createElement(bs.d,{className:"Answers-none"},vo.a.createElement(gs.a,{entityType:"answers",placeholder:l?"回答暂时无法查看":"还没有回答"})):vo.a.createElement(Pu.a,{isFetching:t,isDrained:a>=s?n:o,isNextLoaded:r,page:a,total:s,placeholder:vo.a.createElement(Jl.a,{className:"List-item"}),onPaginationClick:this.handlePaginationClick,onLoad:this.handleUpdatedAnswersLoad},mu(i,c))}}]),t}(bo.PureComponent))||yl)||yl),xu=Au,Ru=n(645),Iu=n.n(Ru),Mu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Du=5,qu=(wl=Object(Eo.connect)(function(e,t){var n=lt(e,{id:t.question.id,resource:"answers"}),r=n.isFetching,o=n.isDrained,a=n.ids,i=o||r?a:a.slice(0,Math.max(Du,a.length-5));return{isBot:e.env.userAgent.isBot,isFetching:r,isDrained:o,items:vu(i,e.entities.answers).filter(function(e){return e&&!e.isDelete}),adverts:Object(To.c)(e)}},{loadItems:To.w}))(gl=function(e){function t(){var e,n,r,o;Ct(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=_t(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleLoad=function(){var e=r.props,t=e.question.id,n=e.loadItems,o=e.isFetching,a=e.isDrained,i=e.resource,s=void 0===i?"answers":i;a||o||n(t,s,{limit:Du})},o=n,_t(r,o)}return kt(t,e),Lu(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.isDrained,r=e.items,o=e.loadItems;!n&&r.length<Du&&o(t,"answers",{offset:r.length,limit:Du})}},{key:"render",value:function(){var e=this,t=this.props,n=t.adverts,r=t.isBot,o=t.isFetching,a=t.isDrained,i=t.items,s=t.question,c=s.relationship,l=c.canCollapseAnswers,u=c.canStickAnswers,p=s.hasPublishingDraft,f=[0].concat(Ot(Object.keys(n||{}).map(Number).sort(function(e,t){return e-t}))),d={canCollapse:l,canStick:u,hasPublishingDraft:p};return vo.a.createElement("div",null,vo.a.createElement(Jl.b,{onRef:function(t){e.listEl=t},isLocal:!0,isLoading:o,isDrained:a,onLoad:this.handleLoad,placeholder:vo.a.createElement(Jl.a,{className:"List-item"})},r?i.map(function(e,t){return hu(Mu({item:e,itemProp:0===t?"acceptedAnswer":"suggestedAnswer",dataZaIndex:t},d))}):Object(Ho.b)(2,Iu()(f.map(function(e,t){var r=f[t+1],o=(r?i.slice(e,r):i.slice(e)).map(function(n,r){var o=e+r+t;return hu(Mu({item:n,itemProp:0===o?"acceptedAnswer":"suggestedAnswer",dataZaIndex:o},d))});return r?[].concat(Ot(o),[du(n[r])]):o})))))}}]),t}(bo.Component))||gl,Bu=qu,Uu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),zu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fu=(El=Object(Eo.connect)(function(e,t){var n=t.page,r=t.question.id,o=lt(e,{id:r,resource:"hiddenAnswers"}),a=o.isFetching,i=o.isDrained,s=o.ids,c=Object(au.d)(n,s,Tu.b);return zu({isFetching:a,isDrained:i},c,{items:vu(c.items,e.entities.answers).filter(function(e){return!e.isDelete})})},{loadItems:To.w}),Object(yo.withRouter)(Ol=El(Ol=function(e){function t(){var e,n,r,o;jt(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=St(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handlePaginationClick=function(e){r.props.router.push(location.pathname+"?page="+e)},r.handleHiddenAnswersLoad=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tu.b,n=r.props,o=n.question.id;(0,n.loadItems)(o,"hiddenAnswers",{offset:e,limit:t})},o=n,St(r,o)}return Pt(t,e),Uu(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.page,r=e.isDrained,o=e.items,a=e.loadItems;!r&&o.length<Tu.b&&a(t,"hiddenAnswers",{offset:Object(au.c)(n)+o.length,limit:Tu.b-o.length})}},{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,r=e.isNextLoaded,o=e.isCurrentLoaded,a=e.page,i=e.items,s=e.total,c=e.question;return vo.a.createElement(Pu.a,{isFetching:t,isDrained:a>=s?n:o,isNextLoaded:r,page:a,total:s,placeholder:vo.a.createElement(Jl.a,{className:"List-item"}),onPaginationClick:this.handlePaginationClick,onLoad:this.handleHiddenAnswersLoad},mu(i,c))}}]),t}(bo.PureComponent))||Ol)||Ol),Qu=Fu,Vu=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Hu=(Cl=Object(na.a)({module:"ContentList"}),_l=Object(Eo.connect)(function(e,t){return{isMuteSpecial:Object(To.n)(t.question)}}),Cl(kl=Object(yo.withRouter)(kl=_l(kl=function(e){function t(){return Tt(this,t),Nt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return At(t,e),Vu(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question,n=t.id,r=t.relationship.isAuthor,o=e.resource,a=e.router;"collapsedAnswers"!==o||r||a.push("/question/"+n)}},{key:"render",value:function(){var e=this.props,t=e.resource,n=e.question,r=e.question,o=r.questionType,a=r.answerCount,i=r.reviewInfo.tips,s=e.location;if(e.isMuteSpecial)return vo.a.createElement(bs.d,{className:"Answers-none"},vo.a.createElement(gs.a,{entityType:"answers",placeholder:"回答暂时无法查看"}));if("commercial"!==o&&!a){if(i)return null;var c=n.status||{},l=c.isClose,u=c.isLocked,p=c.isSuggest;return l||u||p?null:vo.a.createElement(bs.d,{className:"Answers-none"},vo.a.createElement(gs.a,{entityType:"answers",placeholder:vo.a.createElement("div",null,"暂时还没有回答，开始",vo.a.createElement(di,{preset:"plain",className:"QuestionAnswers-answerLink"},"写第一个回答"))}))}return vo.a.createElement("div",{id:"QuestionAnswers-answers",className:"QuestionAnswers-answers","data-zop-feedlistmap":"answers"===t?"0,0,1,0":"0,0,1"},vo.a.createElement(Su,{question:n,resource:t},"updatedAnswers"===t&&vo.a.createElement(xu,{question:n,page:Number(s.query.page)||1}),"answers"===t&&vo.a.createElement(Bu,{question:n}),"hiddenAnswers"===t&&vo.a.createElement(Qu,{question:n,page:Number(s.query.page)||1})))}}]),t}(bo.PureComponent))||kl)||kl)||kl),Wu=Hu,Yu=n(1709),Ku=n(577),Gu=n(1633),Xu=n(555),$u=n(65),Ju=(n(2535),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Zu=function(e){function t(){var e;xt(this,t);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=Rt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return a.handleChange=function(e){a.props.onChange(e)},a}return It(t,e),Ju(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=e.name,o=e.type,a=e.value,i=e.checked,s=JSON.stringify(a);return vo.a.createElement("label",{className:Io()("CheckItem",t)},vo.a.createElement("input",{className:"CheckItem-input",type:o,name:r,value:s,onChange:this.handleChange,checked:i}),vo.a.createElement("div",{className:"CheckItem-box"},vo.a.createElement("div",{className:"CheckItem-inner"},n),vo.a.createElement(Go.x,{className:"CheckItem-icon",size:20})))}}]),t}(bo.Component);Zu.propTypes={name:go.a.string,onChange:go.a.func,checked:go.a.bool,className:go.a.string,type:go.a.string,value:go.a.any},Zu.defaultProps={name:"checkitems",type:"checkbox"};var ep,tp,np,rp,op,ap,ip,sp,cp,lp,up,pp,fp,dp,hp,mp,bp,vp,yp,wp,gp,Ep,Op,Cp,_p,kp,jp,Sp,Pp,Tp,Np,Ap,xp,Rp,Ip,Mp,Lp,Dp,qp,Bp,Up,zp,Fp,Qp,Vp,Hp,Wp,Yp,Kp,Gp,Xp,$p,Jp,Zp,ef,tf,nf,rf,of,af,sf,cf,lf,uf,pf,ff,df,hf,mf,bf,vf,yf,wf,gf,Ef,Of,Cf,_f,kf,jf,Sf,Pf,Tf,Nf,Af,xf,Rf=Zu,If=n(576),Mf=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Lf=(tp=ep=function(e){function t(){var e,n,r,o;Mt(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=Lt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={value:null},r.handleModify=function(){r.setState({modifying:!0})},r.handleChange=function(e){r.setState({value:e.target.value})},r.handleCancel=function(){r.setState({value:null,modifying:!1})},r.handleSubmit=function(e){e.preventDefault(),r.props.onBioChange(r.state.value),r.handleCancel()},r.handleSelect=function(){r.props.onSelect(r.props.value)},o=n,Lt(r,o)}return Dt(t,e),Mf(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.bio,r=e.title,o=e.checked,a=e.rich,i=this.state,s=i.modifying,c=i.value;return s?vo.a.createElement("div",{className:"TopicBioItem"},vo.a.createElement("div",{className:"TopicBioItem-title"},r),vo.a.createElement("form",{onSubmit:this.handleSubmit},vo.a.createElement("div",{className:"TopicBioItem-inner"},vo.a.createElement(Xu.a,{className:"TopicBioItem-authorInfo",noLink:!0,author:t},vo.a.createElement(sa.a,{className:"TopicBioItem-input",defaultValue:n,onChange:this.handleChange,placeholder:r,autoFocus:!0}))),vo.a.createElement("div",{className:"TopicBioItem-inputFooter"},vo.a.createElement(If.a,{current:c?c.length:0,max:40}),vo.a.createElement("div",{className:"TopicBioItem-actions"},vo.a.createElement(So.c,{preset:"plain",type:"reset",onClick:this.handleCancel},"取消"),vo.a.createElement(So.c,{preset:"primary",color:"blue",type:"submit"},"保存"))))):n?vo.a.createElement("div",{className:"TopicBioItem"},vo.a.createElement("div",{className:"TopicBioItem-title"},r),vo.a.createElement(Rf,{name:"topic-bio",type:"radio",onChange:this.handleSelect,value:this.props.value,checked:o},vo.a.createElement(Xu.a,{noLink:!0,author:t,className:"TopicBioItem-authorInfo"},vo.a.createElement("div",null,a?vo.a.createElement(fs.a,{tag:"span",className:"TopicBioItem-bio",html:n}):vo.a.createElement("span",{className:"TopicBioItem-bio"},n),vo.a.createElement(Ku.a,{className:"TopicBioItem-modifyButton",onClick:this.handleModify}))))):vo.a.createElement("div",{className:"TopicBioItem"},vo.a.createElement(So.c,{className:"TopicBioItem-addButton",size:"spread",preset:"link",onClick:this.handleModify},vo.a.createElement(Bo.a,{name:"plus",left:!0}),"添加",r))}}]),t}(bo.Component),ep.propTypes={user:go.a.object.isRequired,title:go.a.node.isRequired,value:go.a.object.isRequired,onBioChange:go.a.func.isRequired,onSelect:go.a.func.isRequired,checked:go.a.bool.isRequired},tp),Df=Lf,qf=(n(2536),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Bf=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Uf=function(e,t){var n=e.type,r=e.topic;r=void 0===r?{}:r;var o=r.id,a=t.type,i=t.topic;i=void 0===i?{}:i;var s=i.id;return n===a&&o===s},zf=function(e,t){return e.find(function(e){return e.topic.id===t})},Ff=(rp=np=function(e){function t(){var e,n,r,o;qt(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=Bt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={value:null},r.handleSelect=function(e){return r.setState({value:e})},r.handleChoose=function(){return r.props.onBioChoose(r.state.value)},o=n,Bt(r,o)}return Ut(t,e),Bf(t,[{key:"render",value:function(){var e=this;if(this.props.isFetching)return vo.a.createElement("div",{className:"TopicBios-loading"},vo.a.createElement(ws.a,null));var t=this.props,n=t.user,r=t.question.topics,o=t.bios,a=t.currentBio,i=t.onHeadlineUpdate,s=t.onBioUpdate,c=this.state.value||a,l={type:"headline"};return vo.a.createElement("div",null,vo.a.createElement("div",{className:"TopicBioItems"},vo.a.createElement(Df,{title:"一句话介绍",user:n,bio:n.headline,value:l,onBioChange:i,onSelect:this.handleSelect,checked:Uf(c,l),rich:!0}),r.map(function(t){var r={type:"topic",topic:{id:t.id}};return vo.a.createElement(Df,qf({key:t.id,title:"在 "+t.name+" 话题下的话题经验",user:n},zf(o,t.id),{value:r,onBioChange:function(e){return s(t.id,e)},onSelect:e.handleSelect,checked:Uf(c,r)}))})),vo.a.createElement(ca.a,null,vo.a.createElement(So.c,{color:"blue",preset:"primary",onClick:this.handleChoose},"完成")))}}]),t}(bo.Component),np.propTypes={onHeadlineUpdate:go.a.func.isRequired,onBioUpdate:go.a.func.isRequired,onBioChoose:go.a.func.isRequired,question:go.a.object.isRequired,user:go.a.object.isRequired},rp),Qf=Ff,Vf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hf=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Wf=(op=Object(Eo.connect)(Vt,{updateProfile:$u.i,updateBio:Va.X,chooseBio:To.d,loadBios:To.p}))((sp=ip=function(e){function t(){var e,n,r,o;zt(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=Ft(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleUpdateHeadline=function(e){r.props.updateProfile(null,{headline:e})},r.handleUpdateBio=function(e,t){r.props.updateBio(e,t)},r.handleBioChoose=function(e){e&&r.props.chooseBio(r.props.question.id,e),r.props.onClose()},o=n,Ft(r,o)}return Qt(t,e),Hf(t,[{key:"componentDidMount",value:function(){this.props.loadBios(this.props.question.id)}},{key:"render",value:function(){return vo.a.createElement(Qf,Vf({onHeadlineUpdate:this.handleUpdateHeadline,onBioUpdate:this.handleUpdateBio,onBioChoose:this.handleBioChoose},this.props))}}]),t}(bo.Component),ip.contextTypes={currentUser:go.a.object},ip.propTypes={question:go.a.object.isRequired},ap=sp))||ap,Yf=Wf,Kf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gf=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Xf=(lp=cp=function(e){function t(){return Wt(this,t),Yt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Kt(t,e),Gf(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose,r=Ht(e,["shown","onClose"]);return vo.a.createElement(ca.b,{title:"编辑话题经验",subtitle:vo.a.createElement("span",null,"可以填写你从事的职业、取得的资格或过往经历，",vo.a.createElement("br",null),"让你在这个问题下的回答更具说服力。"),onClose:n,size:"large",hotKeyClosable:!1,maskClosable:!1},t&&vo.a.createElement(Yf,Kf({},r,{onClose:n})))}}]),t}(bo.Component),cp.propTypes=Kf({shown:go.a.bool.isRequired,onClose:go.a.func.isRequired},Yf.propTypes),lp),$f=Xf,Jf=(n(2537),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Zf=(up=Object(Eo.connect)(Jt,{showNotification:da.g,addAnswer:ci.a,getBio:To.m}),Object(yo.withRouter)(pp=up((dp=fp=function(e){function t(){var e,n,r,o;Gt(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=Xt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={topicBiosModalShown:!1},r.onSubmit=function(e){var t=r.props,n=t.question.id;return(0,t.addAnswer)(n,e)},r.focus=function(){r.answerForm.getWrappedInstance().focus()},r.handleToggleAnonymous=function(){var e=r.context,t=e.isCheckedCircle,n=e.toggleAnonymous,o=r.props,a=o.showNotification,i=o.question.relationship.isAnonymous;return t&&!i?(n(),void r.context.onChangecircleSettings(!1)):!i&&r.answerForm.getWrappedInstance().hasVideo()?void a("匿名不能使用视频功能，如需启用匿名请删除草稿中的视频","red"):void n()},r.handleTopicBiosModalShown=function(){return r.setState({topicBiosModalShown:!0})},r.handleTopicBiosModalHide=function(){return r.setState({topicBiosModalShown:!1})},o=n,Xt(r,o)}return $t(t,e),Jf(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id;(0,e.getBio)(t),this.props.answering&&setTimeout(this.focus)}},{key:"componentWillReceiveProps",value:function(e){this.props.answering!==e.answering&&this.focus()}},{key:"renderBio",value:function(){var e=this.props.questionBio,t=this.context.currentUser;return e.bio&&"headline"!==e.type?vo.a.createElement("span",{className:"AnswerAdd-bio"},e.bio):t.headline?vo.a.createElement(fs.a,{className:"AnswerAdd-bio",tag:"span",html:(e||{}).bio||t.headline}):null}},{key:"renderAuthor",value:function(){var e=this.props,t=e.question.relationship.isAnonymous,n=e.question,r=this.context.currentUser;return t?vo.a.createElement(Xu.a,{className:"AnswerAdd-info",noLink:!0,author:Ec.e}):r&&r.isOrg?vo.a.createElement(Xu.a,{className:"AnswerAdd-info",noLink:!0,author:r}):vo.a.createElement(Xu.a,{className:"AnswerAdd-info",noLink:!0,author:r},this.renderBio(),vo.a.createElement(Ku.a,{className:"AnswerAdd-topicBiosButton",text:"编辑话题经验",onClick:this.handleTopicBiosModalShown}),vo.a.createElement($f,{shown:this.state.topicBiosModalShown,question:n,onClose:this.handleTopicBiosModalHide}))}},{key:"render",value:function(){var e=this,t=this.context.currentUser,n=this.props,r=n.question,o=r.relationship.isAnonymous,a=r.questionType,i=n.question;return vo.a.createElement("div",{className:"AnswerAdd"},vo.a.createElement("div",{className:"AnswerAdd-header"},this.renderAuthor(),!t.isOrg&&"normal"===a&&vo.a.createElement(So.c,{className:"AnswerAdd-toggleAnonymous",preset:"plain",onClick:this.handleToggleAnonymous},o?"使用实名身份回答":"使用匿名身份回答")),vo.a.createElement(Gu.a,{ref:function(t){e.answerForm=t},question:i,onSubmit:this.onSubmit}))}}]),t}(bo.Component),fp.contextTypes={currentUser:go.a.object,toggleAnonymous:go.a.func.isRequired,isCheckedCircle:go.a.bool,onChangecircleSettings:go.a.func},pp=dp))||pp)||pp),ed=Zf,td=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),nd=Object(yo.withRouter)((bp=mp=function(e){function t(){return Zt(this,t),en(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return tn(t,e),td(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){return e.scrollIntoView()})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question,r=n.id,o=n.relationship.myAnswer,a=void 0===o?{}:o,i=t.router,s=e.question,c=s.id,l=s.relationship.myAnswer,u=void 0===l?{}:l;r===c&&a.answerId!==u.answerId&&(ai.default.trackEvent(this,{action:"StatusReport"},{status:{result:"Success",event:{action:"Answer"}}}),i.push("/question/"+r+"/answer/"+u.answerId))}},{key:"scrollIntoView",value:function(){if("#draft"===window.location.hash&&this.anchor){var e=this.anchor.getBoundingClientRect().top-document.documentElement.getBoundingClientRect().top;window.scrollTo(0,e-Ec.f-10)}}},{key:"render",value:function(){var e=this;if(!this.context.currentUser)return null;var t=this.props,n=t.question,r=t.question,o=r.relationship.myAnswer,a=r.isNormal,i=r.status;i=void 0===i?{}:i;var s=i.isClose,c=i.isLocked,l=i.isSuggest,u=r.hasPublishingDraft,p=t.answering;return o?null:l?vo.a.createElement("div",{className:"QuestionAnswers-answerTip"},"被建议修改的问题不允许添加新的回答。",vo.a.createElement(si.a,{preset:"plain",to:"/question/21290061"},"问题为什么会被建议修改？")):c?vo.a.createElement("div",{className:"QuestionAnswers-answerTip"},"该问题目前已经被锁定，无法添加新答案。",vo.a.createElement(si.a,{preset:"plain",to:"/question/19604313"},"问题为什么会被锁定？")):s?vo.a.createElement("div",{className:"QuestionAnswers-answerTip"},"被关闭的问题不允许添加新的回答。",vo.a.createElement(si.a,{className:"QuestionAnswers-iconLink",preset:"plain",to:"/question/21290061","data-tooltip":"为什么部分问题会被「关闭」「建议修改」？"},vo.a.createElement(Bo.a,{name:"questionMark"}))):u?vo.a.createElement(bs.d,{className:"QuestionAnswers-answerTipCard"},"你创建的回答正在发布中…"):a?vo.a.createElement(Yu.CSSTransitionGroup,{className:"QuestionAnswers-statusWrapper",transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"expand",component:"div"},p&&vo.a.createElement(bs.d,{className:"QuestionAnswers-answerAdd"},vo.a.createElement("a",{name:"draft",ref:function(t){return e.anchor=t}}),vo.a.createElement(ed,{question:n,answering:p}))):null}}]),t}(bo.PureComponent),mp.contextTypes={currentUser:go.a.object},hp=bp))||hp,rd=nd,od=(n(2538),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),ad=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),id=function(e){function t(){return rn(this,t),on(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return an(t,e),ad(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=nn(e,["className","children"]);return vo.a.createElement("div",od({},r,{className:Io()("QuestionMainDivider",t)}),vo.a.createElement("span",{className:"QuestionMainDivider-inner"},n))}}]),t}(bo.Component),sd=id,cd=(n(2539),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),ld=(vp=Object(Eo.connect)(un,{loadItems:To.w}))((gp=wp=function(e){function t(){var e,n,r,o;sn(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=cn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={opened:!1},r.handleLoad=function(){var e=r.props,t=e.question.id;return(0,e.loadItems)(t,"collapsedAnswers")},r.handleOpen=function(){r.handleLoad(),r.setState({opened:!0})},o=n,cn(r,o)}return ln(t,e),cd(t,[{key:"render",value:function(){var e=this.props,t=e.isDrained,n=e.isFetching,r=e.items,o=e.question,a=e.question,i=a.collapsedAnswerCount,s=a.questionType,c=this.state.opened,l="org"===s,u=Object(ks.formatNumber)(i)+" 个回答被"+(l?"隐藏":"折叠"),p=vo.a.createElement(si.a,{preset:"plain",to:l?"/org-intro#org-question":"/question/20120168",target:"_blank"},"为什么？");return c?vo.a.createElement(bs.d,null,vo.a.createElement(sd,null,u,"（",p,"）"),vo.a.createElement(vs.b,null,mu(r,o),n&&vo.a.createElement(Jl.a,{className:"List-item"})),!t&&!n&&vo.a.createElement(_s,{onClick:this.handleLoad},"更多")):vo.a.createElement("div",{className:"CollapsedAnswers-bar",style:{}},vo.a.createElement(So.c,{preset:"plain",onClick:this.handleOpen},u),"（",p,"）")}}]),t}(bo.Component),wp.contextTypes={currentUser:go.a.object},yp=gp))||yp,ud=ld,pd=n(1810),fd=n.n(pd),dd=n(1811),hd=n(1577),md=n(650),bd=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),vd=(Ep=Object(na.a)(function(e){var t=e.answer;return{module:"AnswerItem",content:{type:"Answer",token:String(t.id),author_member_hash_id:t.author.id},trackCardShow:!0}}))(Op=function(e){function t(){return pn(this,t),fn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return dn(t,e),bd(t,[{key:"render",value:function(){var e=this.props.answer,t=e.id,n=e.voteupCount,r=e.question,o=r.id,a=r.title;return vo.a.createElement("div",{className:"SimilarQuestions-item"},vo.a.createElement(si.a,{preset:"plain",to:"/question/"+o+"/answer/"+t,target:"_blank"},a)," ",n&&Object(ks.formatNumber)(n)+" 个赞同")}}]),t}(bo.Component))||Op,yd=vd,wd=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),gd=(Cp=Object(na.a)(function(e){var t=e.article;return{module:"PostItem",content:{type:"Post",token:String(t.id),author_member_hash_id:t.author.id},trackCardShow:!0}}))(_p=function(e){function t(){return hn(this,t),mn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return bn(t,e),wd(t,[{key:"render",value:function(){var e=this.props.article,t=e.id,n=e.title,r=e.voteupCount;return vo.a.createElement("div",{className:"SimilarQuestions-item"},vo.a.createElement(si.a,{preset:"plain",a:!0,to:Ec.h+"/p/"+t,target:"_blank"},n)," ",r&&Object(ks.formatNumber)(r)+" 个赞同")}}]),t}(bo.Component))||_p,Ed=gd,Od=(n(2540),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Cd=(kp=Object(Eo.connect)(gn,{loadRecommendations:md.b}),jp=Object(na.a)({module:"EditorRecommendList"}),kp(Sp=jp(Sp=function(e){function t(){return vn(this,t),yn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return wn(t,e),Od(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.similarQuestions,r=t.isLoading,o=t.isDrained,a=t.isError,i=t.loadRecommendations;e.similarQuestions||!n||n.length||r||o||a||i(),!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.similarQuestions;return n&&n.length||!t||!t.length?null:vo.a.createElement(bs.d,null,vo.a.createElement(bs.b,{className:"Recommendations-title"},"优质推荐"),vo.a.createElement(bs.c,{className:"Recommendations-list"},t.map(function(e){var t=e.answer,n=e.article;return t?vo.a.createElement(yd,{answer:t,key:t.id}):vo.a.createElement(Ed,{article:n,key:n.id})})))}}]),t}(bo.Component))||Sp)||Sp),_d=Cd,kd=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),jd=(Pp=Object(na.a)(function(e){var t=e.question;return{module:"QuestionItem",content:{type:"Question",token:String(t.id),author_member_hash_id:(t.author||{}).id},trackCardShow:!0}}))(Tp=function(e){function t(){return En(this,t),On(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Cn(t,e),kd(t,[{key:"render",value:function(){var e=this.props.question,t=e.id,n=e.title,r=e.answerCount,o=e.followerCount,a="/question/"+t;return vo.a.createElement("div",{className:"SimilarQuestions-item",itemProp:"zhihu:similarQuestion",itemType:"http://schema.org/Question",itemScope:!0},vo.a.createElement("meta",{itemProp:"name",content:n}),vo.a.createElement("meta",{itemProp:"url",content:"https://www.zhihu.com"+a}),vo.a.createElement("meta",{itemProp:"answerCount",content:r}),vo.a.createElement("meta",{itemProp:"zhihu:followerCount",content:o}),vo.a.createElement(si.a,{preset:"plain",to:a,target:"_blank"},n)," ",Object(ks.formatNumber)(r)," 个回答")}}]),t}(bo.Component))||Tp,Sd=jd,Pd=(n(2541),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Td=(Np=Object(Eo.connect)(Sn,{loadSimilarQuestions:To.F}),Ap=Object(na.a)({module:"RelatedQuestions"}),Np(xp=Ap(xp=function(e){function t(){return _n(this,t),kn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return jn(t,e),Pd(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id;(0,e.loadSimilarQuestions)(t)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,r=t.loadSimilarQuestions,o=e.question.id;n!==o&&r(o)}},{key:"componentDidUpdate",value:function(e){!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props.items;return e&&e.length?vo.a.createElement(bs.d,null,vo.a.createElement(bs.b,{className:"SimilarQuestions-title"},"相关问题"),vo.a.createElement(bs.c,{className:"SimilarQuestions-list"},e.map(function(e){return vo.a.createElement(Sd,{question:e,key:e.id})}))):null}}]),t}(bo.Component))||xp)||xp),Nd=Td,Ad=n(8),xd=n(177),Rd=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Id=function(e){function t(){var e,n,r,o;Pn(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=Tn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={hideDescription:!1},r.handleRef=function(e){r.title=e},o=n,Tn(r,o)}return Nn(t,e),Rd(t,[{key:"componentDidMount",value:function(){this.title.offsetWidth<this.title.scrollWidth&&this.setState({hideDescription:!0})}},{key:"render",value:function(){var e=this.props,t=e.link,n=e.title,r=e.description,o=e.meta,a=e.imageUrl,i=this.state.hideDescription;return vo.a.createElement(si.a,{preset:"plain",a:!0,to:t,className:"RelatedCommodities-item",target:"_blank"},vo.a.createElement("img",{className:"RelatedCommodities-image",src:Object(xd.imgUrl)(a,{quality:90,size:"250x0"}),alt:"live"}),vo.a.createElement("div",{className:"RelatedCommodities-content"},vo.a.createElement("div",{className:Io()("RelatedCommodities-subject",{"RelatedCommodities-subject-two":i}),style:{},ref:this.handleRef,"data-tooltip":n},n),i||vo.a.createElement("div",{className:"RelatedCommodities-description"},r),vo.a.createElement("div",{className:"RelatedCommodities-meta"},o)))}}]),t}(bo.Component),Md=Id,Ld=n(1637),Dd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qd=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Bd=function(e){function t(){var e,n,r,o;An(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=xn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleListen=function(e){var t=e.target.closest("a").href+"?extra_auto_play=1";e.preventDefault(),e.stopPropagation(),ai.default.trackEvent(e.target,{action:"OpenUrl",element_name:"Play"},{link:{url:t}}),window.open(t,"_blank")},o=n,xn(r,o)}return Rn(t,e),qd(t,[{key:"render",value:function(){var e=this.props.item;switch(e.type){case"live":var t=e.id,n=e.subject,r=e.reviewScore,o=e.seats,a=(e.startsAt,e.speaker.member),i=a.name,s=a.avatarUrl;return vo.a.createElement(Md,{link:"/lives/"+t,imageUrl:s,title:n,description:i,meta:vo.a.createElement("div",{className:"RelatedCommodities-scoreWrapper"},vo.a.createElement(Ld.a,{score:r}),o&&o.taken&&o.taken+" 人参与",!1)});case"remix_album":case"podcast":case"remix":var c=e.id,l=e.artwork,u=e.title,p=e.author;p=void 0===p?{}:p;var f=p.user,d=e.trackCount,h="/remix/albums/"+c;return vo.a.createElement(Md,{link:h,imageUrl:l,title:u,description:f&&f.name,meta:vo.a.createElement("div",{className:"RelatedCommodities-remixMeta"},vo.a.createElement("div",null,"共 ",Object(ks.formatNumber)(d)," 节课"),vo.a.createElement(So.c,{className:"RelatedCommodities-remixListen",onClick:this.handleListen,preset:"plain"},"试听"))});case"special":var m=e.id,b=e.subject,v=e.liveCount,y=e.liveMemberCount,w=e.speakers,g=e.artworkMobile,E=w.slice(0,2).map(function(e){return e.member.name}).join("、");return vo.a.createElement(Md,{link:"/lives/specials/"+m,imageUrl:g,title:b,description:E+(w.length>=2?" 等":""),meta:Object(ks.formatNumber)(v)+" 场 Live, "+Object(ks.formatNumber)(y)+" 次参与"});case"book":var O=e.id,C=e.title,_=e.cover,k=e.authorName,j=e.readCount;return vo.a.createElement(Md,{link:"/pub/book/"+O,imageUrl:_,title:C,description:k,meta:vo.a.createElement("div",{className:"RelatedCommodities-bookMeta"},Object(ks.formatNumber)(j)+" 人读过",vo.a.createElement("span",{className:"RelatedCommodities-bookRead"},vo.a.createElement(Go.P,{width:13,height:14,center:!0}),"阅读"))});default:return null}}}]),t}(bo.Component),Ud=Object(na.a)(function(e){var t=e.item,n=e.index;if("book"===t.type)return{module:"EBookItem",index:n,content:{type:"EBook",token:String(t.id)},trackCardShow:!0};var r="special"===t.type?"LiveAlbum":Object(Ad.pascalize)(t.type);return{module:r+"Item",index:n,content:Dd({type:r,id:t.id},"live"===t.type&&{author_member_hash_id:t.speaker.member.id}),trackCardShow:!0}})(Bd),zd=(n(2542),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Fd=(Rp=Object(Eo.connect)(Dn,{loadRelatedCommodities:To.E}),Ip=Object(na.a)(function(e){return{attachedInfoBytes:e.attachedInfo,module:"ContentList",moduleName:"相关推荐"}}),Rp(Mp=Ip(Mp=function(e){function t(){return In(this,t),Mn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ln(t,e),zd(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.answer;(0,e.loadRelatedCommodities)(t,n&&n.id)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,r=t.loadRelatedCommodities,o=e.question.id;n!==o&&r(o)}},{key:"componentDidUpdate",value:function(e){!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props.items;return e&&e.length?vo.a.createElement(bs.d,null,vo.a.createElement(bs.b,{className:"RelatedCommodities-title"},"相关推荐"),vo.a.createElement(bs.c,{className:"RelatedCommodities-list"},e.slice(0,3).map(function(e){return vo.a.createElement(Ud,{item:e,key:e.id})}))):null}}]),t}(bo.Component))||Mp)||Mp),Qd=Fd,Vd=n(2115),Hd=n(637),Wd=(n(2554),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Yd=(Lp=Object(Eo.connect)(zn,{loadBrand:To.q,loadProfile:$u.e}))((Bp=qp=function(e){function t(){var e,n,r,o;qn(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=Bn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.goToBrand=function(){var e=r.props.brand.target;e&&(location.href="/org/"+e.urlToken)},o=n,Bn(r,o)}return Un(t,e),Wd(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.brand,n=e.brand,r=e.loadProfile;t&&n&&t.name!==n.name&&n.target&&n.target.urlToken&&r(n.target.urlToken,!1)}},{key:"render",value:function(){var e=this.props,t=e.brand,n=t.logo,r=t.name,o=t.target,a=t.isPuQuestion,i=e.brandMember,s=this.context.currentUser,c=a?"关于大咖":"关于品牌";return vo.a.createElement(bs.d,{className:Io()({MobileBrandQuestionAuthor:!1})},vo.a.createElement(bs.b,{className:"BrandQuestionAuthor-header"},vo.a.createElement("span",{className:"BrandQuestionAuthor-headerText"},c)),vo.a.createElement(bs.c,{className:Io()("BrandQuestionAuthor",o&&"is-clickable"),onClick:this.goToBrand},vo.a.createElement("img",{src:n,className:"BrandQuestionAuthor-icon",alt:"brand"}),vo.a.createElement("div",{className:"BrandQuestionAuthor-content"},vo.a.createElement("div",{className:"BrandQuestionAuthor-name"},r,o&&o.urlToken&&vo.a.createElement(Tc.a,{className:"BrandQuestionAuthor-badge",badge:o.badge,isOrg:o.isOrg,noLink:!0})),o&&o.headline&&vo.a.createElement("div",{className:"BrandQuestionAuthor-intro"},o.headline))),i&&i.id&&s&&s.id!==i.id&&vo.a.createElement(Hd.a,{className:"BrandQuestionAuthor-buttons",user:i}))}}]),t}(bo.Component),qp.contextTypes={currentUser:go.a.object},Dp=Bp))||Dp,Kd=function(e){var t=e.scores,n=void 0===t?[]:t,r=e.tags,o=void 0===r?[]:r;return n.length>0?n:o.length>0?o:[]},Gd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xd=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),$d=(zp=Up=function(e){function t(){return Fn(this,t),Qn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Vn(t,e),Xd(t,[{key:"renderCardImage",value:function(){var e=this.props.meta,t=e.avatar,n=e.title;return t?vo.a.createElement(Zc.a,{className:Io()("QuestionSidebarTopicMeta-cardImage"),src:t,alt:n}):null}},{key:"renderGoodsCard",value:function(){var e=this.props.meta,t=e.title;return vo.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardMain QuestionSidebarTopicMeta-goods"},this.renderCardImage(),vo.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardContent"},vo.a.createElement("h3",{className:"QuestionSidebarTopicMeta-cardTitle"},t)))}},{key:"renderGeneralCard",value:function(){var e=this.props.meta,t=e.title,n=e.description1,r=e.description2,o=Kd(e),a=o.length?o.map(function(e,t){return vo.a.createElement(Hn,Gd({key:t},e))}):r;return vo.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardMain"},this.renderCardImage(),vo.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardContent"},vo.a.createElement("h3",{className:"QuestionSidebarTopicMeta-cardTitle"},t),n&&vo.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardDesc"},n),a&&vo.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardScore"},a)))}},{key:"renderCard",value:function(){return"n_goods"===this.props.meta.category?this.renderGoodsCard():this.renderGeneralCard()}},{key:"renderModule",value:function(){var e=this.props,t=e.meta,n=e.excerpt,r=e.metaCardDisplay,o=t.summary,a=o||n;return vo.a.createElement(bs.d,null,this.renderCard(),"normal"===r&&vo.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardMore"},a&&vo.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardMoreInner",dangerouslySetInnerHTML:{__html:a}}),vo.a.createElement("div",{className:"QuestionSidebarTopicMeta-cardLink"},"查看更多",vo.a.createElement(Go.i,{center:!0}))))}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.meta,r=e.metaCardDisplay;if(!n||"none"===r)return null;var o=n.category;return vo.a.createElement(Qo.a,{module:"TopicItem",moduleName:o,card:{content:Gd({type:"Topic"},Object(el.a)("topic",t),{sub_type:"MetaCard"})},trackCardShow:!0},vo.a.createElement("a",{href:"/topic/"+t,target:"_blank",rel:"noopener noreferrer"},this.renderModule()))}}]),t}(bo.PureComponent),Up.propTypes={id:go.a.string.isRequired,excerpt:go.a.string,meta:go.a.shape({category:go.a.string,avatar:go.a.string,title:go.a.string,description1:go.a.string,description2:go.a.string,summary:go.a.string,scores:go.a.arrayOf(go.a.shape({url:go.a.string,score:go.a.string,from:go.a.string})),tags:go.a.arrayOf(go.a.shape({text:go.a.string}))}).isRequired,metaCardDisplay:go.a.oneOf(["normal","none"])},zp),Jd=(n(2555),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Zd=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),eh=(Fp=Object(Eo.connect)(function(e,t){var n=t.params;return{questionId:n.id,items:Object(To.H)(e,{id:n.id})}},{loadQuestionMetaTopics:To.C}),Qp=Object(Ks.a)(null),Object(yo.withRouter)(Vp=Fp(Vp=Qp(Vp=function(e){function t(){return Wn(this,t),Yn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Kn(t,e),Zd(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.params.id,n=e.items,r=e.loadQuestionMetaTopics;n||r(t)}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.questionId;if(!t||!t.length)return null;var r=t.filter(function(e){return e&&e.meta});if(!r||r.length<1)return null;var o=r[0],a=o.vote,i=o.isVote,s=a&&i,c="normal";return s&&(c="none"),vo.a.createElement("div",{className:"QuestionSidebarTopicMeta"},vo.a.createElement($d,Jd({metaCardDisplay:c},o,{questionId:n})))}}]),t}(bo.Component))||Vp)||Vp)||Vp),th=eh,nh=n(1585),rh=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),oh=(Hp=Object(Ks.a)(null),Wp=Object(na.a)({module:"RightSideBar"}),Yp=Object(Eo.connect)(Jn,{loadBrand:To.q,loadProfile:$u.e}),Hp(Kp=Wp(Kp=Yp(Kp=function(e){function t(){var e,n,r,o;Gn(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=Xn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onHeightChange=function(){r.dynamicSticky&&r.dynamicSticky.check()},o=n,Xn(r,o)}return $n(t,e),rh(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.question,n=t.id,r=t.questionType,o=e.loadBrand;"commercial"===r&&o(n)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.brand,n=e.brand,r=e.loadProfile;t&&n&&t.name!==n.name&&n.target&&r(n.target.urlToken,!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.question,r=t.question,o=r.id,a=r.questionType,i=t.brand;return vo.a.createElement(nh.a,{className:"Question-sideColumn Question-sideColumn--sticky",onRef:function(t){e.sidebar=t},offset:Ec.f+10,ref:function(t){e.dynamicSticky=t}},"commercial"===a&&vo.a.createElement(Vd.a,{questionId:o,pageType:"question",onLoad:this.onHeightChange}),"commercial"===a&&i&&vo.a.createElement(Yd,{brand:i}),"commercial"!==a&&vo.a.createElement(dd.a,{type:"question",getSidebar:function(){return e.sidebar}}),"normal"===a&&vo.a.createElement("div",{className:"Card"},vo.a.createElement(fd.a,{isMobile:!1,id:"question/"+o,location:"new_question_up",query:{question_token:o},onHeightChange:this.onHeightChange})),vo.a.createElement(th,null),"commercial"!==a&&vo.a.createElement(_d,{question:n,onLoad:this.onHeightChange}),"normal"===a&&vo.a.createElement(Nd,{question:n,onLoad:this.onHeightChange}),"normal"===a&&vo.a.createElement(Qd,{question:n,onLoad:this.onHeightChange}),"normal"===a&&vo.a.createElement("div",{className:"Card"},vo.a.createElement(fd.a,{isMobile:!1,id:"question/"+o,location:"new_question_down_sticky",query:{question_token:o},delay:500,onHeightChange:this.onHeightChange})),"commercial"===a&&vo.a.createElement(dd.a,{type:"question",getSidebar:function(){return e.sidebar}}),vo.a.createElement(hd.a,null))}}]),t}(bo.Component))||Kp)||Kp)||Kp),ah=oh,ih=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),sh=(Gp=Object(Eo.connect)(ut))((Jp=$p=function(e){function t(){return Zn(this,t),er(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return tr(t,e),ih(t,[{key:"renderAnswers",value:function(){var e=this.props,t=e.resource,n=e.question,r=n.questionType,o=n.collapsedAnswerCount,a=n.answerCount,i=n.isNormal,s=n.status;s=void 0===s?{}:s;var c=s.isLocked,l=e.question,u=e.location,p=e.answering,f=e.invitationShowCount,d=e.isDrained,h=e.isMuteSpecial,m="updatedAnswers"===t||d,b="commercial"!==r&&!a;return vo.a.createElement("div",null,vo.a.createElement(rd,{question:l,answering:p}),Boolean(f)&&!h&&vo.a.createElement(Ys,{expandCount:f,question:l}),vo.a.createElement(Wu,{resource:t,question:l,location:u}),i&&!c&&"updatedAnswers"!==t&&d&&!b&&vo.a.createElement(Qo.a,{module:"BottomBar"},vo.a.createElement(bs.d,null,vo.a.createElement(di,{className:"QuestionAnswers-answerButton",size:"spread"}))),m&&o>0&&!h&&vo.a.createElement(ud,{question:l}))}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.isNormalNotification,r=e.notificationId,o=e.location;return vo.a.createElement("div",{className:"Question-main"},vo.a.createElement("div",{className:"Question-mainColumn"},n?vo.a.createElement(gu,{location:o,question:t,id:r}):this.renderAnswers()),vo.a.createElement(Ho.a,null,vo.a.createElement(ah,{question:t})))}}]),t}(bo.PureComponent),$p.fetchData=ct,Xp=Jp))||Xp,ch=sh,lh=ch,uh=n(289),ph=(n(2117),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),fh=(Zp=Object(Eo.connect)(null,{loadAnswer:ci.l}),Object(yo.withRouter)(ef=Zp((nf=tf=function(e){function t(){var e,n,r,o;rr(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=or(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={contentRef:null},r.contentRef=vo.a.createRef(),r.handleCloseComment=function(){var e=r.props,t=e.location,n=t.pathname,o=t.search;e.byComment&&r.props.router.replace(""+n+o)},r.handleCloseEditing=function(){var e=r.props,t=e.location,n=t.pathname,o=t.query,a=e.router,i=o.editing,s=nr(o,["editing"]);if(i){var c=mc.a.stringify(s)||"";a.replace(""+n+(c&&"?")+c)}},o=n,or(r,o)}return ar(t,e),ph(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.question.id,n=e.answer;(!n||n.question&&n.question.id!==t||n.isDelete)&&this.props.router.replace("/question/"+t)}},{key:"componentDidMount",value:function(){var e=this.props.answer.id;this.context.currentUser&&Object(Il.c)("answer",e,Il.a),this.setState({contentRef:this.contentRef.current})}},{key:"render",value:function(){var e=this.props,t=e.question,n=t.relationship,r=n.canCollapseAnswers,o=n.canStickAnswers,a=t.hasPublishingDraft,i=e.answer,s=e.location,c=s.hash,l=s.query;return vo.a.createElement(bs.d,{className:"AnswerCard"},vo.a.createElement("div",{className:"QuestionAnswer-content",ref:this.contentRef,tabIndex:0},vo.a.createElement(uh.d.Provider,{value:this.state.contentRef},vo.a.createElement(ou.a,{relatedTo:"answer",answer:i,byComment:Object(vc.a)(c),onCloseComment:this.handleCloseComment,onCloseEditing:this.handleCloseEditing,canCollapse:r,canStick:o,editing:l&&"true"===l.editing,editable:!0,expanded:!0,hasPublishingDraft:a,itemProp:"mainEntityOfPage"}))))}}]),t}(bo.Component),tf.contextTypes={currentUser:go.a.object},ef=nf))||ef)||ef),dh=fh,hh=(n(2556),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),mh=2,bh=(rf=Object(Eo.connect)(lr,{loadAnswer:ci.l,loadItems:To.w}))(of=function(e){function t(){return ir(this,t),sr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return cr(t,e),hh(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.items;t||n.length||this.loadItems()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.question.id,n=e.question.id,r=e.isDrained,o=e.items;n!==t&&!r&&o.length<mh&&this.loadItems()}},{key:"loadItems",value:function(){var e=this.props,t=e.question.id;return(0,e.loadItems)(t,"answers",{limit:3})}},{key:"render",value:function(){var e=this.props,t=e.question.relationship.canCollapseAnswers,n=e.items,r=e.isWechat;return Boolean(n.length)&&vo.a.createElement(bs.d,{className:"MoreAnswers"},vo.a.createElement(vs.b,{title:"更多回答","data-zop-feedlist":!0},n.map(function(e){return vo.a.createElement(ru.a,{key:e.id},vo.a.createElement(ou.a,{relatedTo:"question",answer:e,canCollapse:t,lastreadTouchable:!0,blockReading:!r}))})))}}]),t}(bo.Component))||of,vh=bh,yh=n(330),wh=n(564),gh=n(82),Eh=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Oh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ch=function(e,t){var n=t.urlToken||t.id,r=e.people.mutualsByUser,o=r[n]||{isDrained:!1,isFetching:!1,ids:[]};return{isDrained:o.isDrained,isFetching:o.isFetching,items:o.ids.map(function(t){var n=Object(gh.c)(e,{id:t});return n.code?null:n}).filter(Boolean)}},_h=(af=Object(Eo.connect)(function(e,t){var n=t.author;return Oh({currentUser:Object(Ha.c)(e)},n&&Ch(e,{urlToken:n.urlToken}))},{loadItems:$u.d}),sf=Object(Wa.a)({shouldLoad:function(e){return e.currentUser&&e.author&&e.author.urlToken&&e.currentUser.urlToken!==e.author.urlToken&&!e.isDrained},load:function(e){return e.loadItems(e.author.urlToken,"mutuals")}}),af(cf=sf((uf=lf=function(e){function t(){return ur(this,t),pr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return fr(t,e),Eh(t,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.author;return t&&t.length?vo.a.createElement("div",{className:"AnswerAuthor-item"},vo.a.createElement("span",{className:"AnswerAuthor-item-icon"},vo.a.createElement(Go._80,{text:!0,center:!0})),vo.a.createElement("div",{className:"AnswerAuthor-item-value"},vo.a.createElement(wh.CJKSpace,null,t.slice(0,3).map(function(e,t){return vo.a.createElement("span",{key:e.urlToken},0!==t&&"、",vo.a.createElement(ds.a,{user:e,noBadge:!0,noHoverCard:!0},e.name))}),"也关注了",Ec.E[n.gender]))):null}}]),t}(bo.Component),lf.propTypes={author:go.a.object.isRequired},cf=uf))||cf)||cf),kh=_h,jh=(n(2557),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Sh=function(e){return e&&void 0!==e.answerCount&&"undefined"!=typeof articlesCount&&"undefined"!=typeof followerCount&&void 0!==e.badge},Ph=(pf=Object(Eo.connect)(br,{loadProfile:$u.e}))(ff=function(e){function t(){return dr(this,t),hr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return mr(t,e),jh(t,[{key:"componentDidMount",value:function(){this.nextItem()}},{key:"componentWillReceiveProps",value:function(e){this.props.answer.author.urlToken!==e.answer.author.urlToken&&this.nextItem(e)}},{key:"componentDidUpdate",value:function(e){!e.user&&this.props.user&&this.props.onLoad&&this.props.onLoad()}},{key:"nextItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.answer.author.urlToken,n=e.loadProfile,r=e.isDrained;t&&(r||n(t))}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.isSelf;if(!t)return null;var r=t.urlToken,o=t.isOrg,a=t.headline,i=t.badge,s=t.answerCount,c=t.articlesCount,l=t.followerCount,u=Object(Ko.a)(i)||{},p=u.identityInfo,f=u.bestAnswererInfo,d=u.bestAnswererTopics,h=o?"org":"people";return vo.a.createElement(bs.d,{className:"AnswerAuthor"},vo.a.createElement(bs.b,{className:"AnswerAuthor-title"},"关于作者"),vo.a.createElement(bs.c,null,vo.a.createElement("div",{className:"AnswerAuthor-user"},vo.a.createElement("div",{className:"AnswerAuthor-user-avatar"},vo.a.createElement(ds.a,{user:t,avatar:!0,avatarProps:{size:60},noHoverCard:!0})),vo.a.createElement("div",{className:"AnswerAuthor-user-content"},vo.a.createElement("div",{className:"AnswerAuthor-user-name"},vo.a.createElement(ds.a,{user:t,noBadge:!0,noHoverCard:!0})),a&&vo.a.createElement("div",{className:"AnswerAuthor-user-headline"},vo.a.createElement(fs.a,{html:a}))))),vo.a.createElement(bs.c,null,p&&vo.a.createElement("div",{className:"AnswerAuthor-item"},vo.a.createElement("a",{className:"AnswerAuthor-item-icon",href:"/account/verification/intro",target:"_blank"},vo.a.createElement(Bo.a,{name:"badgeCert"})),vo.a.createElement("div",{className:"AnswerAuthor-item-value"},p.slice(0,2).join("，"))),d&&d.length>0&&vo.a.createElement("div",{className:"AnswerAuthor-item"},vo.a.createElement("span",{className:"AnswerAuthor-item-icon"},vo.a.createElement(Bo.a,{name:"badgeGlorious"})),vo.a.createElement("div",null,vo.a.createElement(yh.a,{topics:d,user:t,noHoverCard:!0}),"的",f)),t&&!n&&vo.a.createElement(kh,{author:t})),r&&vo.a.createElement(bs.c,null,vo.a.createElement("div",{className:"AnswerAuthor-counts"},vo.a.createElement(Js.a,null,vo.a.createElement(Js.a.Item,{tag:si.a,preset:"plain",to:"/"+h+"/"+r+"/answers",name:"回答",value:s,"data-za-detail-view-element_name":"Answer"}),vo.a.createElement(Js.a.Item,{tag:si.a,preset:"plain",to:"/"+h+"/"+r+"/posts",name:"文章",value:c,"data-za-detail-view-element_name":"Post"}),vo.a.createElement(Js.a.Item,{tag:si.a,preset:"plain",to:"/"+h+"/"+r+"/followers",name:"关注者",value:l,"data-za-detail-view-element_name":"Follower"}))),!n&&vo.a.createElement(Hd.a,{className:"AnswerAuthor-buttons",user:t})))}}]),t}(bo.Component))||ff,Th=Ph,Nh=n(1687),Ah=(n(2558),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),xh=(df=Object(Eo.connect)(gr,{loadAnswerFavlists:ci.p}),hf=Object(na.a)({module:"CollectionList"}),df(mf=hf(mf=function(e){function t(){var e,n,r,o;vr(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=yr(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.load=function(){var e=r.props,t=e.answer.id;(0,e.loadAnswerFavlists)(t)},o=n,yr(r,o)}return wr(t,e),Ah(t,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.count,r=e.isFetching,o=e.isDrained;return vo.a.createElement("div",{className:"AnswerFavlists"},vo.a.createElement("div",{className:"AnswerFavlists-header"},vo.a.createElement("div",{className:"AnswerFavlists-title"},"被收藏 ",Object(ks.formatNumber)(n)," 次")),!(o&&!t.length)&&vo.a.createElement(Jl.b,{className:"AnswerFavlists-list",isLocal:!0,isLoading:r,isDrained:o,onLoad:this.load,getContainer:function(e){return e},placeholder:vo.a.createElement(Jl.a,{className:"AnswerFavlists-item",small:!0})},t.map(function(e){var t=e.id,n=e.type,r=e.creator,o=e.isFollowing,a=e.answerCount,i=e.followerCount;return vo.a.createElement(vs.a,{key:t},vo.a.createElement(Nh.a,{favlist:e,action:vo.a.createElement(hi.a,{preset:"primary",id:t,type:n,isFollowing:o}),status:vo.a.createElement(xs.d,null,vo.a.createElement("span",null,"由"," ",vo.a.createElement(ds.a,{user:r,noBadge:!0,noHoverCard:!0,target:"_blank"})," ","创建"),vo.a.createElement("span",null,Object(ks.formatNumber)(a)," 条内容"),vo.a.createElement("span",null,Object(ks.formatNumber)(i)," 人关注"))}))})))}}]),t}(bo.Component))||mf)||mf),Rh=xh,Ih=(n(2559),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Mh=(bf=Object(Eo.connect)(_r,{loadAnswerCopyrightApplicants:ci.o}))(vf=function(e){function t(){var e,n,r,o;Er(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=Or(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.load=function(){var e=r.props,t=e.answer.id;(0,e.loadAnswerCopyrightApplicants)(t)},o=n,Or(r,o)}return Cr(t,e),Ih(t,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.count,r=e.isFetching,o=e.isDrained;return vo.a.createElement("div",{className:"AnswerCopyrightApplicants"},vo.a.createElement("div",{className:"AnswerCopyrightApplicants-header"},vo.a.createElement("div",{className:"AnswerCopyrightApplicants-title"},"授权转载 ",Object(ks.formatNumber)(n)," 次")),!(o&&!t.length)&&vo.a.createElement(Jl.b,{className:"AnswerCopyrightApplicants-list",isLocal:!0,isLoading:r,isDrained:o,onLoad:this.load,getContainer:function(e){return e},placeholder:vo.a.createElement(Jl.a,{className:"AnswerCopyrightApplicants-item",small:!0})},t.map(function(e){var t=e.applier,n=e.accountType,r=e.accountUsername,o=e.createdAt;return vo.a.createElement("div",{className:"AnswerCopyrightApplicants-item",key:t.name+"."+o},vo.a.createElement(js.a,{user:t,meta:n+" "+r,status:null,action:vo.a.createElement("div",{className:"AnswerCopyrightApplicants-time"},"申请于 ",Object(jo.toDateString)(o))}))})))}}]),t}(bo.Component))||vf,Lh=Mh,Dh=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),qh=function(e){function t(){return kr(this,t),jr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Sr(t,e),Dh(t,[{key:"render",value:function(){var e=this.props.copyrightApplicant,t=e.applier,n=e.accountType,r=e.accountUsername,o=e.createdAt;return vo.a.createElement("div",{className:"AnswerInfo-copyright-applicant",key:t.name+"."+o},vo.a.createElement(ds.a,{user:t,noBadge:!0,noHoverCard:!0,target:"_blank"}),"，",n," ",r)}}]),t}(bo.Component),Bh=qh,Uh=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),zh=function(e){function t(){return Pr(this,t),Tr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Nr(t,e),Uh(t,[{key:"render",value:function(){var e=this.props.copyrightApplicants;return vo.a.createElement(bs.c,{className:"AnswerInfo-copyright-applicants",key:"content"},e.map(function(e,t){return vo.a.createElement(Bh,{key:t,copyrightApplicant:e})}))}}]),t}(bo.Component),Fh=zh,Qh=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Vh=(yf=Object(na.a)(function(e){var t=e.favlist;return{module:"CollectionItem",content:{type:"Collection",token:String(t.id),follower_num:t.followerCount,author_member_hash_id:t.creator.id},trackCardShow:!0}}))(wf=function(e){function t(){return Ar(this,t),xr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Rr(t,e),Qh(t,[{key:"render",value:function(){var e=this.props.favlist,t=e.id,n=e.title,r=e.followerCount,o=e.creator;return vo.a.createElement("div",{className:"AnswerInfo-favlist",key:t},vo.a.createElement("div",{className:"AnswerInfo-favlist-title"},vo.a.createElement(si.a,{preset:"plain",a:!0,to:"/collection/"+t,target:"_blank","data-za-detail-view-element_name":"Collection",title:n},n)),vo.a.createElement("div",{className:"AnswerInfo-favlist-author"},vo.a.createElement(ds.a,{user:o,noBadge:!0,noHoverCard:!0,target:"_blank","data-za-detail-view-element_name":"Author"})," ","创建"),vo.a.createElement("div",{className:"AnswerInfo-favlist-followers"},Object(ks.formatNumber)(r)," 人关注"))}}]),t}(bo.Component))||wf,Hh=Vh,Wh=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Yh=(gf=Object(na.a)({module:"CollectionList"}))(Ef=function(e){function t(){return Ir(this,t),Mr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Lr(t,e),Wh(t,[{key:"render",value:function(){var e=this.props.favlists;return vo.a.createElement(bs.c,{className:"AnswerInfo-favlists",key:"content"},e.map(function(e){return vo.a.createElement(Hh,{favlist:e,key:e.id})}))}}]),t}(bo.Component))||Ef,Kh=Yh,Gh=(n(2560),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Xh=(Of=Object(Eo.connect)(Ur,{loadAnswerCopyrightApplicants:ci.o,loadAnswerFavlists:ci.p}))(Cf=function(e){function t(){var e,n,r,o;Dr(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=qr(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={copyrightApplicantsModalShown:!1,favlistsModalShown:!1},r.handleCopyrightApplicantsModalShow=function(){ai.default.trackEvent(r,{action:"Click",element:"Button",name:"转载授权"}),r.setState({copyrightApplicantsModalShown:!0})},r.handleCopyrightApplicantsModalHide=function(){r.setState({copyrightApplicantsModalShown:!1})},r.handleFavlistsModalShow=function(){ai.default.trackEvent(r,{action:"Click",element:"Button",name:"被收藏"}),r.setState({favlistsModalShown:!0})},r.handleFavlistsModalClose=function(){r.setState({favlistsModalShown:!1})},o=n,qr(r,o)}return Br(t,e),Gh(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer.id,n=e.copyrightApplicants,r=e.favlists,o=e.loadAnswerCopyrightApplicants,a=e.loadAnswerFavlists;n.length||r.length||(o(t),a(t))}},{key:"componentDidUpdate",value:function(e){this.props.onLoad&&(!e.copyrightApplicants.length&&this.props.copyrightApplicants.length||!e.favlists.length&&this.props.favlists.length)&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.answer,n=e.copyrightApplicants,r=e.copyrightApplicantCount,o=e.favlists,a=e.favlistCount,i=this.state,s=i.favlistsModalShown,c=i.copyrightApplicantsModalShown;return n.length||o.length?vo.a.createElement(bs.d,null,Boolean(n.length)&&[vo.a.createElement(bs.b,{className:"AnswerInfo-title",key:"header"},"授权转载"," ",vo.a.createElement(So.c,{preset:"plain",onClick:this.handleCopyrightApplicantsModalShow},Object(ks.formatNumber)(r))," ","次"),vo.a.createElement(Fh,{copyrightApplicants:n.slice(0,5),key:"content"})],Boolean(o.length)&&[vo.a.createElement(bs.b,{className:"AnswerInfo-title",key:"header"},"被收藏"," ",vo.a.createElement(So.c,{preset:"plain",onClick:this.handleFavlistsModalShow},Object(ks.formatNumber)(a))," ","次"),vo.a.createElement(Kh,{favlists:o.slice(0,5),key:"content"})],vo.a.createElement(ca.b,{size:"fullPage",onClose:this.handleFavlistsModalClose},s&&vo.a.createElement(Rh,{answer:t})),vo.a.createElement(ca.b,{size:"fullPage",onClose:this.handleCopyrightApplicantsModalHide},c&&vo.a.createElement(Lh,{answer:t}))):null}}]),t}(bo.Component))||Cf,$h=Xh,Jh=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Zh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},em=(_f=Object(Ks.a)(null),kf=Object(na.a)(function(e){var t=e.answer;return{module:"RightSideBar",content:Zh({},t.author&&{member_hash_id:t.author.id})}}),_f(jf=kf(jf=function(e){function t(){var e,n,r,o;zr(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=Fr(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.onHeightChange=function(){r.dynamicSticky&&r.dynamicSticky.check()},o=n,Fr(r,o)}return Qr(t,e),Jh(t,[{key:"shouldComponentUpdate",value:function(e){return e.answer.id!==this.props.answer.id}},{key:"render",value:function(){var e=this,t=this.props,n=t.question,r=t.question,o=r.id,a=r.questionType,i=t.answer,s=Object(ci.k)(i)||Object(ci.i)(i);return vo.a.createElement(nh.a,{className:"Question-sideColumn Question-sideColumn--sticky",onRef:function(t){e.sidebar=t},offset:Ec.f+10,ref:function(t){e.dynamicSticky=t}},vo.a.createElement(dd.a,{type:"question",getSidebar:function(){return e.sidebar}}),s||"normal"===a&&vo.a.createElement("div",{className:"Question-sideColumnAdContainer"},vo.a.createElement(fd.a,{isMobile:!1,id:"question/"+o+"/answer/"+i.id,location:"new_answer_up",query:{question_token:o,answer_token:i.id},onHeightChange:this.onHeightChange})),"commercial"===a&&vo.a.createElement(Vd.a,{questionId:o}),i.author&&vo.a.createElement(Th,{answer:i,onLoad:this.onHeightChange}),vo.a.createElement(th,null),vo.a.createElement($h,{answer:i,onLoad:this.onHeightChange}),s||"commercial"!==a&&vo.a.createElement(_d,{question:n,onLoad:this.onHeightChange}),s||"normal"===a&&vo.a.createElement(Nd,{question:n,onLoad:this.onHeightChange}),s||"normal"===a&&vo.a.createElement(Qd,{answer:i,question:n,onLoad:this.onHeightChange}),s||"normal"===a&&vo.a.createElement("div",null,vo.a.createElement(fd.a,{isMobile:!1,id:"question/"+o+"/answer/"+i.id,location:"new_answer_down_sticky",query:{question_token:o,answer_token:i.id},delay:1e3,onHeightChange:this.onHeightChange})),vo.a.createElement(hd.a,null))}}]),t}(bo.Component))||jf)||jf),tm=em,nm=(n(2561),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),rm=(Sf=Object(na.a)(function(e){return{module:"MessageItem",content:{item_num:e.itemNum}}}))(Pf=function(e){function t(){return Vr(this,t),Hr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Wr(t,e),nm(t,[{key:"render",value:function(){var e=this.props,t=e.to,n=e.itemNum,r=e.questionType;e.bottom;return vo.a.createElement(bs.d,{className:Io()("ViewAll",{"ViewAll--bottom":!1})},vo.a.createElement(_s,{className:"ViewAll-QuestionMainAction",to:t,"data-za-detail-view-element_name":"ViewAll",style:{}},"commercial"===r?"查看 "+Object(ks.formatNumber)(n)+" 个品牌推荐的回答":"查看全部 "+Object(ks.formatNumber)(n)+" 个回答"))}}]),t}(bo.Component))||Pf,om=rm,am=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),im=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sm=(Tf=Object(Eo.connect)(Xr,{loadAnswer:ci.l}))((xf=Af=function(e){function t(){return Yr(this,t),Kr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Gr(t,e),am(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer,n=e.params.answerId,r=e.loadAnswer;t||r(n)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.params.answerId,n=e.params.answerId,r=e.loadAnswer;n!==t&&r(n)}},{key:"render",value:function(){if(!this.props.answer)return null;var e=this.props,t=e.answer,n=e.answer.id,r=e.question,o=e.question,a=o.id,i=o.answerCount,s=o.questionType,c=e.location,l=e.isMuteSpecial;return vo.a.createElement("div",{className:"Question-main"},vo.a.createElement(Co.a,{meta:Object(Fl.a)(t)}),vo.a.createElement(uh.b,{selector:[".ViewAll-QuestionMainAction",".QuestionAnswer-content",".List-item"].join(",")},vo.a.createElement("div",{className:"Question-mainColumn","data-zop-questionanswerlist":!0},Object(ci.k)(t)||Object(ci.i)(t)||i>0&&!l&&vo.a.createElement(om,{itemNum:i,to:"/question/"+a,questionType:s}),vo.a.createElement(dh,{question:r,location:c,answer:t}),Object(ci.k)(t)||Object(ci.i)(t)||vo.a.createElement(vh,{question:r,answerId:n}),i>0&&!l&&vo.a.createElement(om,{itemNum:i,to:"/question/"+a,questionType:s}))),vo.a.createElement(Ho.a,null,vo.a.createElement(tm,{question:r,answer:t})))}}]),t}(bo.Component),Af.fetchData=$r,Nf=xf))||Nf,cm=sm,lm=cm;t.default=vo.a.createElement(yo.Route,{path:":id",component:$l,name:"Question"},vo.a.createElement(yo.Route,{sticky:Jr},vo.a.createElement(yo.IndexRoute,{component:lh,entity:"answers",resource:"answers",name:"QuestionPage",zaPageId:3378}),vo.a.createElement(yo.Route,{path:"answers/hidden",component:lh,entity:"answers",resource:"hiddenAnswers",name:"QuestionHiddenAnswers"}),vo.a.createElement(yo.Route,{path:"answers/updated",component:lh,resource:"updatedAnswers",name:"QuestionUpdatedAnswers"}),vo.a.createElement(yo.Redirect,{from:"answers/created",to:"answers/updated"})),vo.a.createElement(yo.Route,{path:"answer/:answerId",component:lm,name:"AnswerPage",zaPageId:2012}),vo.a.createElement(yo.Redirect,{from:"noti-answers",to:"."}))}});
//# sourceMappingURL=main.question-routes.a10f00821e30bbd5821a.js.map