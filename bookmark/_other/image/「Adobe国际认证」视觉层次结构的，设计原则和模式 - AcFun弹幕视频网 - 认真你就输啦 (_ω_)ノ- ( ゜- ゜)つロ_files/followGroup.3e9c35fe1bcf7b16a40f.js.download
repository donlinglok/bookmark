(window.webpackJsonp=window.webpackJsonp||[]).push([["common/widget/followGroup/followGroup"],{"./common/widget/followGroup/followGroup.es6":function(o,e,t){"use strict";t.r(e);t("../node_modules/@ac/Ajs/dist/A.min.js");var n=t("../node_modules/jquery/dist/jquery.js"),r=t.n(n);function l(o,e){var t="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(t)return(t=t.call(o)).next.bind(t);if(Array.isArray(o)||(t=function(o,e){if(!o)return;if("string"==typeof o)return a(o,e);var t=Object.prototype.toString.call(o).slice(8,-1);"Object"===t&&o.constructor&&(t=o.constructor.name);if("Map"===t||"Set"===t)return Array.from(o);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a(o,e)}(o))||e&&o&&"number"==typeof o.length){t&&(o=t);var n=0;return function(){return n>=o.length?{done:!0}:{done:!1,value:o[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(o,e){(null==e||e>o.length)&&(e=o.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=o[t];return n}A.ready((function(){new A.Widget({el:document.getElementById("pop-follow"),events:{"click #btn-to-follow":"addFollow","click #win-btn-close":"cancel"},created:function(){var o=this;this.action=1,A.on("popFollow::show",(function(e,t,n){o.show(e,t),o.upInfoData=t,o.groupList=e,void 0!==n&&(o.action=n)}))},methods:{addFollow:function(){for(var o,e="",t=r()("#ipt-group-follow").val(),n=this,a=l(this.groupList);!(o=a()).done;){var i=o.value;i.groupId==t&&(e=i.groupName)}r.a.post("/rest/pc-direct/relation/follow",{toUserId:n.upInfoData.userId,action:this.action,groupId:t}).done((function(o){if(0==o.result){var t=n.upInfoData.isFollowed,l=t?"已互粉":"已关注";r()(".up-operate").find(".focus").text(l),r()(".up-operate").find(".focus").attr("data-status",1),r()(".up-operate").find(".focus").css({color:"#999",background:"#eee"}),A.emit("FOLLOW_UP_OWNER",{up_id:String(n.upInfoData.userId)},"CLICK"),A.emit("popFollow::addFollowed"),t?A.emit("global::success","你们成为互粉的好友啦"):A.emit("global::success","向["+e+"]中添加关注["+n.upInfoData.userName+"]成功");var a=r()("#up-info .up-census"),i=a.find(".follow .count").text();-1==i.indexOf("万")&&(i=parseInt(i.replace(",",""),10),a.find(".follow .count").text(r.a.parsePts(++i)));var u=r()(".follow-up");if(u.length){var s=window.videoInfo.user.fanCountValue;s=r.a.parsePts(++s),u.removeClass("not-follow").addClass("followed").attr("data-status",1).html(l+"&nbsp;"+s)}}else A.emit("global::warning",o.error_msg)})).fail((function(o){A.emit("global::warning",o.responseJSON.error_msg)})),this.cancel()},cancel:function(){r()("#pop-follow").hide(),r()("#shade-layer").hide()},show:function(o,e){var t=r()("#pop-follow"),n=r()(window).scrollTop()+200,a=r()(window).width()/2-170,i="";r()("#ipt-group-follow").empty();for(var u,s=l(o);!(u=s()).done;){var p=u.value;i+="<option value='"+p.groupId+"'>"+p.groupName+"("+p.followingCountShow+")</option>"}r()("#ipt-group-follow").append(i),t.css({top:n,left:a}),r()("#pop-follow").find(".win-hint-ensure").text("关注  "+e.userName),r()("#shade-layer").show(),r()("#pop-follow").show()}}})}))}},[["./common/widget/followGroup/followGroup.es6","runtime","jquery","@ac/Ajs"]]]);