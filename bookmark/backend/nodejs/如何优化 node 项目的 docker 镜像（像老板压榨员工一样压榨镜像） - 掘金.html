<!DOCTYPE html>
<!-- saved from url=(0042)https://juejin.cn/post/6991689670027542564 -->
<html lang="zh" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22zh%22%7D%7D"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金</title><meta data-n-head="ssr" name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover"><meta data-n-head="ssr" name="apple-itunes-app" content="app-id=987739104"><meta data-n-head="ssr" name="theme-color" content="#ffffff"><meta data-n-head="ssr" name="msapplication-TileColor" content="#da532c"><meta data-n-head="ssr" vmid="description" name="description" content="本文将以 Node 程序展示如何优化 Docker 镜像（优化思想是通用的，不分程序），主要解决镜像大小过大、CI/CD 构建镜像速度，本文演示如何一步步优化 Dockerfile 文件，绝对的干货，"><meta data-n-head="ssr" vmid="keywords" name="keywords" content="Docker,Node.js"><link data-n-head="ssr" rel="preconnect" href="https://lf3-cdn-tos.bytescm.com/" crossorigin="anonymous"><link data-n-head="ssr" rel="preconnect" href="https://mcs.snssdk.com/" crossorigin="anonymous"><link data-n-head="ssr" rel="preconnect" href="https://i.snssdk.com/" crossorigin="anonymous"><link data-n-head="ssr" rel="dns-prefetch" href="https://lf3-cdn-tos.bytescm.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://api.juejin.cn/"><link data-n-head="ssr" rel="dns-prefetch" href="https://lf-cdn-tos.bytescm.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://unpkg.byted-static.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p1-juejin.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p3-juejin.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p6-juejin.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p9-juejin.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p1-jj.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://mcs.snssdk.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://i.snssdk.com/"><link data-n-head="ssr" rel="apple-touch-icon" sizes="180x180" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/apple-touch-icon.png"><link data-n-head="ssr" rel="icon" type="image/png" sizes="32x32" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/favicon-32x32.png"><link data-n-head="ssr" rel="icon" type="image/png" sizes="16x16" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/favicon-16x16.png"><link data-n-head="ssr" rel="mask-icon" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/safari-pinned-tab.svg" color="#1E80FF"><link data-n-head="ssr" rel="manifest" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/site.webmanifest"><link data-n-head="ssr" rel="search" title="掘金" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/search.xml" type="application/opensearchdescription+xml"><link data-n-head="ssr" rel="stylesheet" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/ionicons.min.css"><link data-n-head="ssr" rel="stylesheet" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/index.css"><link data-n-head="ssr" rel="stylesheet" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/iconfont.css"><link data-n-head="ssr" rel="stylesheet" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/bytedesign.min.css"><link data-n-head="ssr" rel="canonical" href="https://juejin.cn/post/6991689670027542564"><script async="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/browser.cn.js.download" crossorigin="anonymous"></script><script async="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/analytics.js.download"></script><script data-n-head="ssr" type="text/javascript" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/acrawler.js.download"></script><script data-n-head="ssr" type="application/ld+json">[{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://juejin.cn/post/6991689670027542564"},"headline":"如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像）","description":"本文将以 Node 程序展示如何优化 Docker 镜像（优化思想是通用的，不分程序），主要解决镜像大小过大、CI/CD 构建镜像速度，本文演示如何一步步优化 Dockerfile 文件，绝对的干货，","image":[],"author":{"@type":"Organization","name":"iamc"},"publisher":{"@type":"Organization","name":"掘金","logo":{"@type":"ImageObject","url":"//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/e08da34488b114bd4c665ba2fa520a31.svg"}},"datePublished":"2021年08月02日","dateModified":"2022年09月29日"},{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","name":"稀土掘金","position":1,"item":"https://juejin.cn"},{"@type":"ListItem","name":"前端","position":2,"item":"https://juejin.cn/frontend"},{"@type":"ListItem","name":"文章","position":3}]}]</script><link rel="preload" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/c264b05.js.download" as="script"><link rel="preload" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/f968a2f.js.download" as="script"><link rel="preload" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/729499a.js.download" as="script"><link rel="preload" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/app.ab9b18a.css" as="style"><link rel="preload" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/32aaed6.js.download" as="script"><link rel="preload" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/default.2050f18.css" as="style"><link rel="preload" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/c9e6c98.js.download" as="script"><link rel="preload" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/51.68eb1f9.css" as="style"><link rel="preload" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/54d646a.js.download" as="script"><link rel="preload" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/197.3d69a3b.css" as="style"><link rel="preload" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/f40002f.js.download" as="script"><link rel="stylesheet" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/app.ab9b18a.css"><link rel="stylesheet" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/default.2050f18.css"><link rel="stylesheet" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/51.68eb1f9.css"><link rel="stylesheet" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/197.3d69a3b.css">
  <script charset="utf-8" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/2b17b3e.js.download"></script><script charset="utf-8" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/0af9490.js.download"></script><script charset="utf-8" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/ed50d86.js.download"></script><script charset="utf-8" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/5bc9aa6.js.download"></script><style>@import url(https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap);</style><style>.MuiTooltip-popper{z-index:10000000 !important}
</style><style>@font-face {
	font-family: "wticons";
	src: url("data:font/woff2;charset=utf-8;base64,d09GMgABAAAAABvsAAsAAAAAQWQAABuZAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHIkYBlYAjBAK2wjJJQE2AiQDgnALgToABCAFhAoHhmkb/zZVIbBxAJAwnRJRlKxNSPb/lwRtSqgsHtJ2L2jGrCDbKXsRiTT6VKRF0Id2GfkKHqN91UWaMTRaXFt/9RUqyF1PyS/vqG/cUEp4/pmr9wYGlpASniTDWCBWe76uFIBCVtlXIACueZ/i74sCqaZZ4ejR5in8gMM1TT8AhmibB0+Y0IoNIoIVIAISEjZKmcGibFwaxSrMrV2pm4vWZTtxlS7ahS6So7U2tnpiey/iRDxTyZ8yMRKatkbIHgGD80IecRCDOTWpOZScYaA04NCAWVCEjZ/kA+vuJ939HKcEaRsaMBv2l+pvO/17+nCxW/fY2xjjTEAQGpB4QsRNETa1Oa5TOll9KgiDzbfWr97eV0NMLpHFvBTS7Nx9/s7O7RffHczuL7boHSaWROwEc288kiWT1z3TIdEsUgqlWK3QiMBD3KuaMe0HPM8eYkjGnJZYWuqFYg3W6iXqlRZNIK0YV7faTd+Bm7kipJ+x2e+B07u2GpkyLETM5f3cERQw7JJDHaSLTcbz17/6hGU6s18FSd1K/v67r5M0/OglzorkWRwfw6R9ob/5KVbKJq5UIe3VHrpI79iVT7xfLFDFzVMlmEwWm8Ol0Xg8CZPOhbre840XsXEGX38RUwKhSFogw2fIShqWFzAVFJUYcnLGDLFUVEkyLMGkW+azOOKWaAjZZaUSYk2UGKFz6ip0d+IcA1t0SIibpliCACzfUlIScHgMrqhZHLLwt5KftbosvqiDm1fFrZswwlLjqAsTfVxChEseDpVwp9a9uBXc+VGx2Z2mLZL9jO7qsnhb1uo7EAo06CcWuLm6sgf9yAxr3xdG+ZqRhzongZr00V2Bs4UHGiKOwKW4SknAVYypWdPinlQYHYmTYvxP0z5N0jHLlUkxsOtRpqmeJ4aSipy05FqyMex2IWaFbma+hMXnUHVDLZMsh2YqsELnaLBKxEVLkits+VVtlizLIl2ksVIbTNp0bNWILM2VGa+vH8iON6L1KwvEjbtU9JavPGcmFUwMWY9U5NdTU2oi+8ZEarAkYivJyEMZI+ccGqGTDnuFU3vN0MiOGNTqCuzSVFGrQndP71h06IYVCkBmTTRbZ07Ak1mfXEv14Wpm4IBOmowZw/Nzx/n7C88pBuKEFbpH48Tj7m4SGOwEaBCHIjln7nvsiWsd2rGsnIqahj4l/H8ZJBiL1d8APwY3XvlAMwhBFYswN6N6iN7iL7qlP/8B/ejtdWvBADGggdNrmr/aoZZTaqBF4inN8Mf+0QMVmDVJo0srKmvoeN9nfij9///xdaqe8Os+9EUJa64pKmatW9Tm/rlkyIOWgbqMno62rpSiPkOTyVtTKKsrRApySkRLhT+Tpm1lNU+q0hTB3mGOSUgaMmLUuAmTpsyYNWfegiXLVqxas2HTlm279uw7cOTYqTPnLly6cu3GrTv3HjxBSTFNtDb1TK8DMEQJpBbwWgzpGGu+J21k8/DPPy05VgX4A9cuq56qCqDOUYD2gKo14DtTtECKAQiog5AMiOiBNB1QpA3K7S5vAUiBRrvIXgD64HUM8AZN8CYmeAsPvE0A3qEB3iUL3iMP3icCH1IAH5EDH1MCn+CAT7HAZ1TAF/jgS0LwFS74Ght8Qxl8Sw18xxP4nir4IZuGYIOgRQAaBHQIxCAiAdEiCTFiCGLFCMSJUYgX45BITEBiMQlJxBQkFTOQTMxCcjEHKcQ8pBQLkEosQYJYhtRiBdIQq5CmWIO0xAakLTYhHbEF6YptSE/sQvpiDzIQ+5ChOICMxBFkLI4hE3EKmYozyEycQ+biArIQl5CluIKsxDVkLW4gG3EL2Yo7yE7cQ/biAXIorp0lvOR98BN+M34E4eUzmCMsguKT6ZERseJYIgvRXBBqKjQnBpYpxdRmyAhbYCixNSlb4Cw4bUW75gbv21zUvcQ+i2uRoWjn1DVauVxQP9bUWd3v8Rdp6p3nUT1Y+VlRGWOt/3bzg5PSFY0kbrbbxnpVOX/GXjdfxH7Njjq1ljwPIR2GINVxwTHrXfsAvaZw4fsCG98u8cL3A3xCR1Hlq273YZ+43igSPap33vzQ9iEeILokNgODOoHiXiCY+3+tNrfm/orbr5fdXHU3ctmFgr846Cn6abMDDLtJ3PiiPj0znn6Un69z3iEAAQwwxE0EGwz6bD89/WXrH+DnB1xJPm6yf/0b/PXnX/BvvYkJ2JZDMh0wOwDo5kOgGtfe4YnK86BwCUGcBeesbkGnJ0gLwokFm/mknR2i7UcmtM4bTkYoifIXdT/QipBPPGnUZA0fPMJ+9QT6xOMKzefXyaewz09P5N7i92nzc0dIa7fJYU6PsnPxA948Khcj1eDfeeeqcUQuRmmny7kWnx8aDvNx8rv4gf2sa51fefMq2NpipiedmLW1p65XHg0ORMh49c34ijQ6Eo80++FZDkLjpAjSufRliE/kJdr8LFCNDFN5kZMZI4uZkbmdE3mVJfkZnaRcZy+4B2XD4GgUK+8gzap4SlwUsrOqgDWAlUxHlVMSCO4PhjkNhg+G5zKOIYOIcAQYAot0xPqeuwhJ+2k5QfLjUwAmgxggqAHj2aeJ9vnyQkT++eczOoW1W9q5/JXS7r4Q9lMkHekoDlihrlDusxsxe4qNkuz2W8uxmnenKTnnHu0qvX5/Llo52/TcbEYCmXJvbaosBYUVshBMt+AiJHOwqlYBaM01/ymgwUoMjAxCvg4Mm4GOcpt2lnSX9XvTuqrRskIh02xG6Z5ym3Q8ZnFHoBAJzsxOc23mhkJWaLQ0FMismm0GzPToaC5noKu0q6x7Fi+D4kxvGShkYn2ZBDTNkBXu7r/STDhsU0FpMthZAlqk/2WCncEkLBurtWPxcKhvap83rX9hdzhlcSNstOEDnkUo32MnAlkgeNJnLO6ZLLvBPQb7Sj8zFy0D9h+N/X/q4drQaRDiAq5AVbYzrqw+OlwsveEpZ/E1Y9FVW7pLnkO/+C6/Gt+cH+1kFMlEAYB8GNxYm1fN+CcEM6tuIhb2Oo9BrJbfixJx/b18e3XzS9SHG80A7WW4o3gM/KNbBvasulsV8fSGGNEsVvE8PAsQFLEckpFMvWvTHc/PG8PKOa31fsLqQ5wW7Opqt1fS+dfAM+v7XHER5foGtA6B8fDYRjekUewv0qqLsA87Lb4CdrDlqufH8XVxBqi6nbW08pOznJvdXlkKaTnoK52Wmmwa6tI8Lc0cpXl3x7taWozIva8TCWXa4/IrMK7Nz67PHg6Gf8SfxK/cgOI7km8jiQW590R4HlbvovkPWDkOMBKFdVTIHDp05Hvs8YKuLjPOEnQTK2DhGUE+ox3232XD/tf2whpZhLbHmsb/NK7+QixTJglpMgdBdqvOkiWWBM19ZhJvX2woyI+mLEKYZQYIIX0oHaA359DRjUIgLedaLZZ5oh417BofoBsC9rMrEfdzgzzUt6V8Ue3ZcmAVRE2klaRboeH/SBUCmAE/hBrwMzUPAwTxyDs6N841G7YtXReOI9OgvriHbzQIHZHbIrwTIv2JZXnAsJfZZJLLbrtQvPhCCIXIpVvV0N603OVP317nqF4IzufhxN3IoAkyV8+7H+Dx6l6QZu1IS8aOteWGdDVbBdut7r0KCXTbkkGq5ihaUoVnHXyenoXt+eEYs0bROHkzQDpKOkuCrVlVX8RZ8aKajSzGKg8hqr/flny2HxTQVxvVvVijY4DOANOuhUJCD7HT/DCpgagSqhs3+DCHd91y6DkR4HtXfWW8SvjmbJ/rj6+r34+HV8Gzsx3U0jp6bV25KgSuebzg+YdyIzW6qXCOMCsdqFCmy1i4mm1XcPNWeIeqZyLwdANfcnjH2khrCz0pV91dl0l41Nta+SD+ZOEV+HGXQ06Obn9CqPciQlFK5GMPLR3bQhqJPVyVmd0dv7IxVoXXpT0M3tntJDWanSPhJxt/AHFjIF13fPEO6EYxTSYDxEQyxDKziWEiJK0Qux3LI6vnO9AlyphlhXkKqyDNz+OpFMYqCVq3ooCSw9zbnUSEpvIFZE1u7gqGyLJ0ZBVL0PIOo2QKmc9XZ+csp5ivHIuvpQvZtG7WG4nhOMrz2l8HYjxST8Rj+VBvMWebMjSae3I00yzHr9kFjeeHhx6/fhloaU3OSWI1LzVv7Lf0uWy8+gHF5fd6AwWNzZDfBQ0jwnglYZDycwg+nYUgaQO8/6UAJDNAnWXKP2CfyN0v5+kaiEEVwPDxxzzWnrTmEC5rkfbRpdC3DIRCsrb1X370v5mow+ocVYDSz08ZoDou4FEr/VQBx4k1r0ZNGRb/1O+e8FM8PKXLRRcQzxAnjosZ7bEW44kMcXyAi67sIe1HTWQNWor2PusfoNZqtX2LFilQd3h9H+22Z2oGb4hGAL5c0EHw0dQ70HB/OgzKzKQCcOkaQsKkdaxqs764LfQ4fdz1jJAaGj0rKmpWdFr+wovO/f3zHjy4kHiV89wKqq7eEYo0IJMeRGtCuLekTr1jx5E3b8bGOkBl+qJFnwYGVqz8D7yqRguL2M9oQ0O8dPxKdjY/u53X7oC/Vi6h4CkhS9GYjr6b7Ick7RLALGNnU/AO7byO7BReaRGnmiQdOh9vNj958vSJAayfGkDF3/z0Kdhbe9ym59cgg7GWyRH4fQroFZNiYtZmxg0ulrw/3bxnr9lksvLu1HR4h1qf9+z57ONkPhqKA8aHpVjG5vQB3aNmHyewcSN4xBK+Q13jM/6xGzdhAb+h0xlqoIvRRbZw4TufKW0DokMX5PIWjAzz7iDzDclZQephWoq9xDJ/Ym9uP7Ncz5CEGEiZvSRAVwyaWwyETwv7B47YRzoooiv4ReEFeeF6wacifj6Xm88rqqrILQ3Pz+Pp+YZ4o//c/n53T8Ijb07erTSfOO/oaO84n70C9vaO3u3f+7pH5hfNYahmJOsakpNjZyRVFulm6+xUk+o9UGiCFI2a44NsSWmdJaPRi4E8+NJpm3kTBmV05kXm7T04Ya3LaY8zAo/C3YX3Uj5nv37nITjjsRWj3ujqqCvBlOJO4UoxtiW+oOturhEB+9XdInsh8D1tniXFNyki2qJBR/97uP2ZZP7E3FlUU1lSxBTLmWoL3coPCwJhuKOFRRY4QnCL85IZjSrs1N+5GVboHNllPAhc3PaRNUC+SuZdw5Lve1g1u7+F0mrWHmD54Tv6zAZYrf3uILYvqH5fjo2ykSsKDnTfIMbSCDB/Ct8jBFeQuwSOpsdZaUnRl0/FbV+1NGrx0EecY0LRtvrTZ861+H7tA/+DuftLNxXubtNMTfNNcoCQLkmW8U5oIo8hQ6lUBYce9QyiWgExl6a2KxySDT77U37+5cni0jJt+7QySyukRXKCLQlLENinVdShHIIHu3tjv82aANMadxAOPu5svfel1n1VkVbHnpTAcwqhEO3YR9pocapFk9f0bo1U78ldVrLv7rzpO5fMWf6ekECbb7UORsg+JCMpyHHGMmlxZGSxtAwn4GrFkWVSHLGFxiyqzk2zUgHAI9WrtmW7PpmoIeo7t9cmwpPghaHwxC9ybGhi2EyFZ2P1Y08ncmdeazcgSVLQk/RPeaNp4IlZ6RRfpwb0XktdYeiuzIB7v9Y0PTAsM7CVNSLPsJyw3Tcbbu7O4YQxhcVKaD11xDfczxQx7M/zG77/NSs93hCvzFKuNqzur+qukh9oCWGokyeB3LeG5wELJtA8W96GVlNT1vP1S1n1i/3E0G2IXlAQdNhoz3L0UKtFDR3e1H6OTH6nyI8r0XN5RfVjQ3rOrEL2oEmEMwR4TE3sOmsEzDM++tN6o5Kq/KmgXqNynQe6yRQfzwWN3LCGRlFjXKOwEbhJ7ys9XZl1tQoYz7+oaYPPY/S8WTlVpwjmagDvd82cd78ME2kjDVWfbb9OUATggT8qnk7HFSQZ4WR8jFUSUXb4ZHxLfbVs6o1HWMt4eWvp3n1nG31GdsI+0ihdDI2jUTIlWiCmwBDO2VbJEOCRpUmqA4eu9vQhKmDwvOWkWDAY2ffsXfnBm7K8JTdPy7ewgtCaWGsSBibwjCk8W0DBHzd28sZtE2Cqpg785sfzm+6O1LiXF2pl5wgKeI7B9gRy6LZVbtGihZMXrt4SnL8xaVne3ovTM9csnlNzkRDjVm/ZCsdlNUqIkcTo2uniKULhFPF0uIArTxFOF0PAk4n6a0Gqm8pVWR35m/8PNKmP8GdPwKi/S8+eJYcfvrp8+dXD7ev2dLr4j/o7oqA9pyDU0NSQQI02MIR6a2X9LVqIJjBQE+LHR1FOf/jw0zTyc0ztZaH4qI6Ax/4unfxVJOxfUg6trI9fSABf/8G4cTO3YHvrX/8xM8s8Z46Nzeirc52lF2yttaVjhm1DbAGmow9j6JgmjbVtCAaQe90aQ7f96CpBJMKQkGWcHgfBGwxwJNxWuhEHtSzWo2gF8Fw41qAT0MhQKsojNROONCkzYa8BR2IZyf23MkT5253kbpaavVxchSa3MDdThGv7iOwA3kgIIxjxe4Iza5V8Z6SbSej61n6NVfA68m4U5URdbrCXuMmKu4i0DOHWvXh2SDijNhPtMhGORmDmxovwSGoiippJQCEI0zUqmqc6uSus6+7ULmwX0N8AbLPOUUkP6AqgK3ugNXqdX8DjFVQBmK2IBAEQGGuWOIeUWrI4ialhZc/I4mSwQzM42Q8TJPjA3vIZ2RpWErNkMSn1radeqfcEGrqcYYqj+wsU9+z7uWXUBHmk7wkU/vQ4U+xIHN0hAv9ZxwhiZ/gI49bTEh3p/JHYET7dSUlbL4zL8GEH6Rif8REO9LgRifvDjFcZ+CbC8j7LAE5at393JJlHkpxo2BkOifVrNhujQPvmtfpEDuDMRjMNUA1EWFYUQ7MLnIT2mQwVQw7V07MInr9DU5DOOjgKsp0QHYJHUOOQrnG3h7d+fLoyEk+S31vJggXCLWQwAMGJEhgEO8oHEDizABw87h5lt+1+3388C4/t63r2zcr+FP30EZ0wsV50+YZ2RrnEOJdgJNSgtfK5PfmHSs6SMplSllwV7Seb/TevCN2GGvP+zvaTRauwNKZUypSzQPAKfbmy/FGCazM4aORdrlqlV6lQjipfe7vYs9MTl4xT5trEz/TXuksk7lp/kXCyUo7T4zoP3nLlqlHk766VSLS5xEG1s0TDdqvqaRY291S5sfGJO6trb90SL5n4ICa/Jj/m8wNaEI+blx9eLuC9zQuiPQBb35gnNb+YOAum782OQmXxA3z6ozAYOtTq1WldNtiRvNmKvQ5hg3Q4btwA+pCLrcMXeSwjU7etOsa9ML/nollViBoEYdmEJRFhCtp3yr6pKc6iMYMWwHCan0wchel9u10rtHiEz3joiUOHWrw5VZgDxsZufb70vNvgeQCyZzCWb8L3w6TBCiZFHLXoHq4X70PxbPjJjAqWBhtx+MrccE0gPzkkhqIxGFKcooN1/EBVWHYFnIBff8fe7GddNnavd6ugSJbMixJJ0Gpv5NnZyPTuUoq3ghUJJQLivo4IPZ+vj5DHF98jZ2LKLTXO6QmrNIdfHkuLFRQ6Zbnq50QI9EX81Cryt5SVLMJ1+7edLs5ZLnuAr9fzQeDQOI6kjJD6cmJrYqyhwEzGjw+YfPR2dCu6HfXqt72dyaAirGNiazi+UviSqGwZ+LFtUO2Z2I5e01isrUtsTPiOZHeHpJnVNpmhtpkzJhU7bK01MeGxBBwxxl2tSaGHq04roehfG8ONxV9b5yVjMmVqgfBSR2JZi9uA0DINIobMvw089tjku5c0+itPOPNxh9bO6pHE29GcdSqNAn/NWZajt3ng6MDAKGmvHdZuc/qvOltrMll7dXs7/eMB6rBi9dMW1TPkEtSSZ7EsKM53rXmhpbVgYPlAUX/RIgFvAVie6Jjpwd/nwY0Tc9jUU9JHtMyPdqN2aHIzgsebjMYSgJu0pSSXm83hZHNzRwQMPrDbP/J6nZ3FGq1Gs/639vczeMYObneEUBnParWBr9ug8C524YZtmqnRESoKHGWbaxmPgTT2nOaAbLO5IS/fSlXjkHXbdFtrhBMZE+FJx2qeva656N4+qw1pKNTK5YnMWrT6YHB+tqmeBs0POMk1F3WPet5As24NwGA2v5nh8A6Gy1MhdZCM2QyyG3qrpJEqyAZcreAnCsDd8FkAPYTYEIlGIYwfvB7Umi6GsV+g5ygCqyFqOToHjwbXf9BIObkH3cr2GwM1Ig4pqntTZYkMHYSKfAR6hpVAlsO/A/dWBrdOeFc/ztA5iCCN0MIFqH6o2/wPgHSzDiOroK0QkanQxhzXQm/caeXoIPQACRbQJREi4jh0kKFRickeqAO55kNTI9qp0F2/HmjOytEFKDDLtFApg/rtHHiIzlDS/b/sNw08ia/MycEKvllYQ28AwHTL58drAii+XZAKFsD18oAAiDnLoc787/8/SP+nSH7uShwd38o4+35mM6gLXn9KBZh4QFvd4O8WQbGsj3hCW1+hq1CXKJsgh81m3ExTaioYlREA1EMA5Kj5H38zTXhAyCgA4q5kFdjLT3/bJ34gv2aDZary94PZIAIAZ9hKgAENAQDeKgXgH0rk4PwclUCAZubgf8pUCcUWGEosyLEVsAbOsTVAA2ZsD3yA/8ojQARpAAIwhCWAAQyYeqDgFrMoyMJIISxaYyOBHdgcGwUwoD+2FUgGFzfGGngWKP8G8Zow34ArQbHh7i/sATh7wqbvNoiTcQgIrARMM543eeY2RWxjmWJzQCgQAjWJ6Qm0dBORtLW+bmlPXacpLgziNWG+AVeCYnpzMtIH4IyhPmkNPR0b5dQhRpb4lYDhx3NPN8/cJmLxtnEaZIoNB3yQEQWM6AMnuuYJNCYdEw5N2mLdap9lxV3HXNy/eGW00Fx+x1lFRkGFGg1adP959WONMcEUM8wBRJhQxoVU2ljngzCKkzTLi7Kqm7brh3Gal3Xbj/O6n/f7/VQQRulMNpcvFEvlSrVWbzRb7U631x+89LJxVh1bU0FZC3as7ZfVY97pYHMD2b/AHitX6chFhZHWYNuv6gN6+kqT3EYVQh1XnTHhGq6v7Vd0p/maqzzp9Tqqse1rUzmq9vza9IC7lVewCsPEFfxJoRn5a9P2I5tgxkpP39sKAcweoO1KBoYVW2gq29xYTSuurFQujTfejZqfkaPKv0gMK/5aeh3SShe+K+EExHT/1j70DD4i3YCmGAGNEk+YPyQ1XKDlpskNDOwFVlNkgdqjx2ahqbBOA9GX+Daocw9E+fA6M+JBCeGtPmzbf+b6J+vMu4l8J9GuwjvmJw2gQ81nAxd0W5yDLDRfcaqkONT84feG+VSD1ltx6ynIhwwoWmsN+88qpgB5lFPEo8t1PsTFhkfyCbFXoSo3sN8dK0MwvntsNlIQdooI4Yf0OdT2i88UjRRIGOwGyLwXe5xgYupWNJPMDXZZY9vOHLiw79HOWgAAAAA=") format("woff2");
}

.wticons {
	line-height: 1;
}

.wticons:before {
	font-family: wticons !important;
	font-style: normal;
	font-weight: normal !important;
	vertical-align: top;
}

.wticon-account:before {
	content: "\f101";
}
.wticon-add:before {
	content: "\f102";
}
.wticon-cardResizeDrag:before {
	content: "\f103";
}
.wticon-casual:before {
	content: "\f104";
}
.wticon-check:before {
	content: "\f105";
}
.wticon-checkSmall:before {
	content: "\f106";
}
.wticon-chevron:before {
	content: "\f107";
}
.wticon-copy:before {
	content: "\f108";
}
.wticon-copySmall:before {
	content: "\f109";
}
.wticon-dismiss:before {
	content: "\f10a";
}
.wticon-downChevron:before {
	content: "\f10b";
}
.wticon-error:before {
	content: "\f10c";
}
.wticon-expand:before {
	content: "\f10d";
}
.wticon-feedback:before {
	content: "\f10e";
}
.wticon-filledDownArrow:before {
	content: "\f10f";
}
.wticon-find:before {
	content: "\f110";
}
.wticon-formal:before {
	content: "\f111";
}
.wticon-gift:before {
	content: "\f112";
}
.wticon-grayLogo:before {
	content: "\f113";
}
.wticon-ignore:before {
	content: "\f114";
}
.wticon-info:before {
	content: "\f115";
}
.wticon-leftChevron:before {
	content: "\f116";
}
.wticon-logo:before {
	content: "\f117";
}
.wticon-love:before {
	content: "\f118";
}
.wticon-noRecommendations:before {
	content: "\f119";
}
.wticon-paragraphRewrite:before {
	content: "\f11a";
}
.wticon-paste:before {
	content: "\f11b";
}
.wticon-pin:before {
	content: "\f11c";
}
.wticon-premium:before {
	content: "\f11d";
}
.wticon-premiumDetail:before {
	content: "\f11e";
}
.wticon-premiumFull:before {
	content: "\f11f";
}
.wticon-recommendationLight:before {
	content: "\f120";
}
.wticon-recommendationLightCard:before {
	content: "\f121";
}
.wticon-recommendationLightNoSuggestions:before {
	content: "\f122";
}
.wticon-refine:before {
	content: "\f123";
}
.wticon-rewrite:before {
	content: "\f124";
}
.wticon-rightChevron:before {
	content: "\f125";
}
.wticon-rocket:before {
	content: "\f126";
}
.wticon-sentenceExamples:before {
	content: "\f127";
}
.wticon-settings:before {
	content: "\f128";
}
.wticon-shorten:before {
	content: "\f129";
}
.wticon-tutorial:before {
	content: "\f12a";
}
.wticon-unlock:before {
	content: "\f12b";
}
.wticon-warn:before {
	content: "\f12c";
}
.wticon-WordtuneButton:before {
	content: "\f12d";
}
.wticon-x:before {
	content: "\f12e";
}

/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcmMvc2hhcmVkL0ljb25zLmZvbnQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Q0FDQyxzQkFBc0I7Q0FDdEIsNjNTQUE2M1M7QUFDOTNTOztBQUVBO0NBQ0MsY0FBYztBQUNmOztBQUVBO0NBQ0MsK0JBQStCO0NBQy9CLGtCQUFrQjtDQUNsQiw4QkFBOEI7Q0FDOUIsbUJBQW1CO0FBQ3BCOztBQUVBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCO0FBQ0E7Q0FDQyxnQkFBZ0I7QUFDakI7QUFDQTtDQUNDLGdCQUFnQjtBQUNqQjtBQUNBO0NBQ0MsZ0JBQWdCO0FBQ2pCIiwic291cmNlc0NvbnRlbnQiOlsiQGZvbnQtZmFjZSB7XG5cdGZvbnQtZmFtaWx5OiBcInd0aWNvbnNcIjtcblx0c3JjOiB1cmwoXCJkYXRhOmZvbnQvd29mZjI7Y2hhcnNldD11dGYtODtiYXNlNjQsZDA5R01nQUJBQUFBQUJ2c0FBc0FBQUFBUVdRQUFCdVpBQUVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUhJa1lCbFlBakJBSzJ3akpKUUUyQWlRRGduQUxnVG9BQkNBRmhBb0hobWtiL3paVkliQnhBSkF3blJKUmxLeE5TUGIvbHdSdFNxZ3NIdEoyTDJqR3JDRGJLWHNSaVRUNlZLUkYwSWQyR2ZrS0hxTjkxVVdhTVRSYVhGdC85UlVxeUYxUHlTL3ZxRy9jVUVwNC9wbXI5d1lHbHBBU25pVERXQ0JXZTc2dUZJQkNWdGxYSUFDdWVaL2k3NHNDcWFaWjRlalI1aW44Z01NMVRUOEFobWliQjArWTBJb05Jb0lWSUFJU0VqWkttY0dpYkZ3YXhTck1yVjJwbTR2V1pUdHhsUzdhaFM2U283VTJ0bnBpZXkvaVJEeFR5Wjh5TVJLYXRrYklIZ0dEODBJZWNSQ0RPVFdwT1pTY1lhQTA0TkNBV1ZDRWpaL2tBK3Z1SjkzOUhLY0VhUnNhTUJ2MmwrcHZPLzE3K25DeFcvZlkyeGpqVEVBUUdwQjRRc1JORVRhMU9hNVRPbGw5S2dpRHpiZldyOTdlVjBOTUxwSEZ2QlRTN054OS9zN083UmZmSGN6dUw3Ym9IU2FXUk93RWMyODhraVdUMXozVElkRXNVZ3FsV0szUWlNQkQzS3VhTWUwSFBNOGVZa2pHbkpaWVd1cUZZZzNXNmlYcWxSWk5JSzBZVjdmYVRkK0JtN2tpcEoreDJlK0IwN3UyR3BreUxFVE01ZjNjRVJRdzdKSkRIYVNMVGNiejE3LzZoR1U2czE4RlNkMUsvdjY3cjVNMC9PZ2x6b3JrV1J3Znc2UjlvYi81S1ZiS0pxNVVJZTNWSHJwSTc5aVZUN3hmTEZERnpWTWxtRXdXbThPbDBYZzhDWlBPaGJyZTg0MFhzWEVHWDM4UlV3S2hTRm9ndzJmSVNocVdGekFWRkpVWWNuTEdETEZVVkVreUxNR2tXK2F6T09LV2FBalpaYVVTWWsyVUdLRno2aXAwZCtJY0ExdDBTSWlicGxpQ0FDemZVbElTY0hnTXJxaFpITEx3dDVLZnRib3N2cWlEbTFmRnJac3d3bExqcUFzVGZWeENoRXNlRHBWd3A5YTl1QlhjK1ZHeDJaMm1MWkw5ak83cXNuaGIxdW83RUFvMDZDY1d1TG02c2dmOXlBeHIzeGRHK1pxUmh6b25nWnIwMFYyQnM0VUhHaUtPd0tXNFNrbkFWWXlwV2RQaW5sUVlIWW1UWXZ4UDB6NU4wakhMbFVreHNPdFJwcW1lSjRhU2lweTA1RnF5TWV4MklXYUZibWEraE1YblVIVkRMWk1zaDJZcXNFTG5hTEJLeEVWTGtpdHMrVlZ0bGl6TElsMmtzVkliVE5wMGJOV0lMTTJWR2Erdkg4aU9ONkwxS3d2RWpidFU5SmF2UEdjbUZVd01XWTlVNU5kVFUyb2krOFpFYXJBa1lpdkp5RU1aSStjY0dxR1REbnVGVTN2TjBNaU9HTlRxQ3V6U1ZGR3JRbmRQNzFoMDZJWVZDa0JtVFRSYlowN0FrMW1mWEV2MTRXcG00SUJPbW93WncvTnp4L243Qzg4cEJ1S0VGYnBINDhUajdtNFNHT3dFYUJDSElqbG43bnZzaVdzZDJyR3NuSXFhaGo0bC9IOFpKQmlMMWQ4QVB3WTNYdmxBTXdoQkZZc3dONk42aU43aUw3cWxQLzhCL2VqdGRXdkJBREdnZ2ROcm1yL2FvWlpUYXFCRjRpbk44TWYrMFFNVm1EVkpvMHNyS212b2VOOW5maWo5Ly8veGRhcWU4T3MrOUVVSmE2NHBLbWF0VzlUbS9ybGt5SU9XZ2JxTW5vNjJycFNpUGtPVHlWdFRLS3NyUkFweVNrUkxoVCtUcG0xbE5VK3EwaFRCM21HT1NVZ2FNbUxVdUFtVHBzeVlOV2ZlZ2lYTFZxeGFzMkhUbG0yNzl1dzdjT1RZcVRQbkxseTZjdTNHclR2M0hqeEJTVEZOdERiMVRLOERNRVFKcEJid1dnenBHR3UrSjIxazgvRFBQeTA1VmdYNEE5Y3VxNTZxQ3FET1VZRDJnS28xNER0VHRFQ0tBUWlvZzVBTWlPaUJOQjFRcEEzSzdTNXZBVWlCUnJ2SVhnRDY0SFVNOEFaTjhDWW1lQXNQdkUwQTNxRUIzaVVMM2lNUDNpY0NIMUlBSDVFREgxTUNuK0NBVDdIQVoxVEFGL2pnUzBMd0ZTNzRHaHQ4UXhsOFN3MTh4eFA0bmlyNEladUdZSU9nUlFBYUJIUUl4Q0FpQWRFaUNURmlDR0xGQ01TSlVZZ1g0NUJJVEVCaU1RbEp4QlFrRlRPUVRNeENjakVIS2NROHBCUUxrRW9zUVlKWWh0UmlCZElRcTVDbVdJTzB4QWFrTFRZaEhiRUY2WXB0U0Uvc1F2cGlEeklRKzVDaE9JQ014QkZrTEk0aEUzRUttWW96eUV5Y1ErYmlBcklRbDVDbHVJS3N4RFZrTFc0Z0czRUwyWW83eUU3Y1EvYmlBWElvcnAwbHZPUjk4Qk4rTTM0RTRlVXptQ01zZ3VLVDZaRVJzZUpZSWd2UlhCQnFLalFuQnBZcHhkUm15QWhiWUNpeE5TbGI0Q3c0YlVXNzVnYnYyMXpVdmNRK2kydVJvV2puMURWYXVWeFFQOWJVV2QzdjhSZHA2cDNuVVQxWStWbFJHV090LzNiemc1UFNGWTBrYnJiYnhucFZPWC9HWGpkZnhIN05qanExbGp3UElSMkdJTlZ4d1RIclhmc0F2YVp3NGZzQ0c5OHU4Y0wzQTN4Q1IxSGxxMjczWVorNDNpZ1NQYXAzM3Z6UTlpRWVJTG9rTmdPRE9vSGlYaUNZKzMrdE5yZm0vb3JicjVmZFhIVTNjdG1GZ3I4NDZDbjZhYk1EREx0SjNQaWlQajB6bm42VW42OXozaUVBQVF3d3hFMEVHd3o2YkQ4OS9XWHJIK0RuQjF4SlBtNnlmLzBiL1BYblgvQnZ2WWtKMkpaRE1oMHdPd0RvNWtPZ0d0ZmU0WW5LODZCd0NVR2NCZWVzYmtHbkowZ0x3b2tGbS9ta25SMmk3VWNtdE00YlRrWW9pZklYZFQvUWlwQlBQR25VWkEwZlBNSis5UVQ2eE9NS3plZlh5YWV3ejA5UDVON2k5Mm56YzBkSWE3ZkpZVTZQc25QeEE5NDhLaGNqMWVEZmVlZXFjVVF1Um1tbnk3a1dueDhhRHZOeDhydjRnZjJzYTUxZmVmTXEyTnBpcGllZG1MVzFwNjVYSGcwT1JNaDQ5YzM0aWpRNkVvODArK0ZaRGtManBBalN1ZlJsaUUva0pkcjhMRkNOREZONWtaTVpJNHVaa2JtZEUzbVZKZmtabmFSY1p5KzRCMlhENEdnVUsrOGd6YXA0U2x3VXNyT3FnRFdBbFV4SGxWTVNDTzRQaGprTmhnK0c1ektPSVlPSWNBUVlBb3QweFBxZXV3aEorMms1UWZMalV3QW1neGdncUFIajJhZUo5dm55UWtUKytlY3pPb1cxVzlxNS9KWFM3cjRROWxNa0hla29EbGlocmxEdXN4c3hlNHFOa3V6Mlc4dXhtbmVuS1Rubkh1MHF2WDUvTGxvNTIvVGNiRVlDbVhKdmJhb3NCWVVWc2hCTXQrQWlKSE93cWxZQmFNMDEveW1nd1VvTWpBeEN2ZzRNbTRHT2NwdDJsblNYOVh2VHVxclJza0loMDJ4RzZaNXltM1E4Wm5GSG9CQUp6c3hPYzIzbWhrSldhTFEwRk1pc21tMEd6UFRvYUM1bm9LdTBxNng3RmkrRDRreHZHU2hrWW4yWkJEVE5rQlh1N3IvU1REaHNVMEZwTXRoWkFscWsvMldDbmNFa0xCdXJ0V1B4Y0todmFwODNyWDloZHpobGNTTnN0T0VEbmtVbzMyTW5BbGtnZU5KbkxPNlpMTHZCUFFiN1NqOHpGeTBEOWgrTi9YL3E0ZHJRYVJEaUFxNUFWYll6cnF3K09sd3N2ZUVwWi9FMVk5RlZXN3BMbmtPLytDNi9HdCtjSCsxa0ZNbEVBWUI4R054WW0xZk4rQ2NFTTZ0dUloYjJPbzlCckpiZml4SngvYjE4ZTNYelM5U0hHODBBN1dXNG8zZ00vS05iQnZhc3Vsc1Y4ZlNHR05Fc1Z2RThQQXNRRkxFY2twRk12V3ZUSGMvUEc4UEtPYTMxZnNMcVE1d1c3T3BxdDFmUytkZkFNK3Y3WEhFUjVmb0d0QTZCOGZEWVJqZWtVZXd2MHFxTHNBODdMYjRDZHJEbHF1Zkg4WFZ4QnFpNm5iVzA4cE96bkp2ZFhsa0thVG5vSzUyV21td2E2dEk4TGMwY3BYbDN4N3RhV296SXZhOFRDV1hhNC9Jck1LN056NjdQSGc2R2Y4U2Z4Sy9jZ09JN2ttOGppUVc1OTBSNEhsYnZvdmtQV0RrT01CS0ZkVlRJSERwMDVIdnM4WUt1TGpQT0VuUVRLMkRoR1VFK294MzIzMlhEL3RmMndocFpoTGJIbXNiL05LNytRaXhUSmdscE1nZEJkcXZPa2lXV0JNMTlaaEp2WDJ3b3lJK21MRUtZWlFZSUlYMG9IYUEzNTlEUmpVSWdMZWRhTFpaNW9oNDE3Qm9mb0JzQzlyTXJFZmR6Z3p6VXQ2VjhVZTNaY21BVlJFMmtsYVJib2VIL1NCVUNtQUUvaEJyd016VVBBd1R4eURzNk44NDFHN1l0WFJlT0k5T2d2cmlIYnpRSUhaSGJJcndUSXYySlpYbkFzSmZaWkpMTGJydFF2UGhDQ0lYSXBWdlYwTjYwM09WUDMxN25xRjRJenVmaHhOM0lvQWt5VjgrN0grRHg2bDZRWnUxSVM4YU90ZVdHZERWYkJkdXQ3cjBLQ1hUYmtrR3E1aWhhVW9WbkhYeWVub1h0K2VFWXMwYlJPSGt6UURwS09rdUNyVmxWWDhSWjhhS2FqU3pHS2c4aHFyL2ZsbnkySHhUUVZ4dlZ2VmlqWTRET0FOT3VoVUpDRDdIVC9EQ3BnYWdTcWhzMytEQ0hkOTF5NkRrUjRIdFhmV1c4U3ZqbWJKL3JqNityMzQrSFY4R3pzeDNVMGpwNmJWMjVLZ1N1ZWJ6ZytZZHlJelc2cVhDT01Dc2RxRkNteTFpNG1tMVhjUE5XZUllcVp5THdkQU5mY25qSDJraHJDejBwVjkxZGwwbDQxTnRhK1NEK1pPRVYrSEdYUTA2T2JuOUNxUGNpUWxGSzVHTVBMUjNiUWhxSlBWeVZtZDBkdjdJeFZvWFhwVDBNM3RudEpEV2FuU1BoSnh0L0FIRmpJRjEzZlBFTzZFWXhUU1lEeEVReXhES3ppV0VpSkswUXV4M0xJNnZuTzlBbHlwaGxoWGtLcXlETnorT3BGTVlxQ1ZxM29vQ1N3OXpiblVTRXB2SUZaRTF1N2dxR3lMSjBaQlZMMFBJT28yUUttYzlYWitjc3A1aXZISXV2cFF2WnRHN1dHNG5oT01yejJsOEhZanhTVDhSaitWQnZNV2ViTWpTYWUzSTAweXpIcjlrRmplZUhoeDYvZmhsb2FVM09TV0kxTHpWdjdMZjB1V3k4K2dIRjVmZDZBd1dOelpEZkJRMGp3bmdsWVpEeWN3ZytuWVVnYVFPOC82VUFKRE5BbldYS1AyQ2Z5TjB2NStrYWlFRVZ3UER4eHp6V25yVG1FQzVya2ZiUnBkQzNESVJDc3JiMVgzNzB2NW1vdytvY1ZZRFN6MDhab0RvdTRGRXIvVlFCeDRrMXIwWk5HUmIvMU8rZThGTThQS1hMUlJjUXp4QW5qb3NaN2JFVzQ0a01jWHlBaTY3c0llMUhUV1FOV29yMlB1c2ZvTlpxdFgyTEZpbFFkM2g5SCsyMloyb0diNGhHQUw1YzBFSHcwZFE3MEhCL09nekt6S1FDY09rYVFzS2tkYXhxczc2NExmUTRmZHoxakpBYUdqMHJLbXBXZEZyK3dvdk8vZjN6SGp5NGtIaVY4OXdLcXE3ZUVZbzBJSk1lUkd0Q3VMZWtUcjFqeDVFM2I4YkdPa0JsK3FKRm53WUdWcXo4RDd5cVJndUwyTTlvUTBPOGRQeEtkalkvdTUzWDdvQy9WaTZoNENraFM5R1lqcjZiN0ljazdSTEFMR05uVS9BTzdieU83QlJlYVJHbm1pUWRPaDl2Tmo5NTh2U0pBYXlmR2tERjMvejBLZGhiZTl5bTU5Y2dnN0dXeVJINGZRcm9GWk5pWXRabXhnMHVscncvM2J4bnI5bGtzdkx1MUhSNGgxcWY5K3o1N09Oa1BocUtBOGFIcFZqRzV2UUIzYU5tSHlld2NTTjR4QksrUTEzak0vNnhHemRoQWIraDB4bHFvSXZSUmJadzRUdWZLVzBEb2tNWDVQSVdqQXp6N2lEekRjbFpRZXBoV29xOXhESi9ZbTl1UDdOY3o1Q0VHRWladlNSQVZ3eWFXd3lFVHd2N0I0N1lSem9vb2l2NFJlRUZlZUY2d2FjaWZqNlhtODhycXFySUxRM1B6K1BwK1laNG8vL2MvbjUzVDhJamIwN2VyVFNmT08vb2FPODRuNzBDOXZhTzN1M2YrN3BINWhmTllhaG1KT3Nha3BOalp5UlZGdWxtNit4VWsrbzlVR2lDRkkyYTQ0TnNTV21kSmFQUmk0RTgrTkpwbTNrVEJtVjA1a1htN1QwNFlhM0xhWTh6QW8vQzNZWDNVajVudjM3bklUampzUldqM3VqcXFDdkJsT0pPNFVveHRpVytvT3R1cmhFQis5WGRJbnNoOEQxdG5pWEZOeWtpMnFKQlIvOTd1UDJaWlA3RTNGbFVVMWxTeEJUTG1Xb0wzY29QQ3dKaHVLT0ZSUlk0UW5DTDg1SVpqU3JzMU4rNUdWYm9ITmxsUEFoYzNQYVJOVUMrU3VaZHc1THZlMWcxdTcrRjBtcldIbUQ1NFR2NnpBWllyZjN1SUxZdnFINWZqbzJ5a1NzS0RuVGZJTWJTQ0RCL0N0OGpCRmVRdXdTT3BzZFphVW5SbDAvRmJWKzFOR3J4MEVlY1kwTFJ0dnJUWjg2MStIN3RBLytEdWZ0TE54WHVidE5NVGZOTmNvQ1FMa21XOFU1b0lvOGhRNmxVQlljZTlReWlXZ0V4bDZhMkt4eVNEVDc3VTM3KzVjbmkwakp0KzdReVN5dWtSWEtDTFFsTEVOaW5WZFNoSElJSHUzdGp2ODJhQU5NYWR4QU9QdTVzdmZlbDFuMVZrVmJIbnBUQWN3cWhFTzNZUjlwb2NhcEZrOWYwYm8xVTc4bGRWckx2N3J6cE81Zk1XZjZla0VDYmI3VU9Sc2crSkNNcHlISEdNbWx4WkdTeHRBd240R3JGa1dWU0hMR0Z4aXlxemsyelVnSEFJOVdydG1XN1BwbW9JZW83dDljbXdwUGdoYUh3eEM5eWJHaGkyRXlGWjJQMVkwOG5jbWRlYXpjZ1NWTFFrL1JQZWFOcDRJbFo2UlJmcHdiMFhrdGRZZWl1eklCN3Y5WTBQVEFzTTdDVk5TTFBzSnl3M1RjYmJ1N080WVF4aGNWS2FEMTF4RGZjenhReDdNL3pHNzcvTlNzOTNoQ3Z6Rkt1TnF6dXIrcXVraDlvQ1dHb2t5ZUIzTGVHNXdFTEp0QThXOTZHVmxOVDF2UDFTMW4xaS8zRTBHMklYbEFRZE5ob3ozTDBVS3RGRFIzZTFINk9USDZueUk4cjBYTjVSZlZqUTNyT3JFTDJvRW1FTXdSNFRFM3NPbXNFekRNKyt0TjZvNUtxL0ttZ1hxTnluUWU2eVJRZnp3V04zTENHUmxGalhLT3dFYmhKN3lzOVhabDF0UW9Zejcrb2FZUFBZL1M4V1RsVnB3am1hZ0R2ZDgyY2Q3OE1FMmtqRFZXZmJiOU9VQVRnZ1Q4cW5rN0hGU1FaNFdSOGpGVVNVWGI0Wkh4TGZiVnM2bzFIV010NGVXdnAzbjFuRzMxR2RzSSswaWhkREkyalVUSWxXaUNtd0JETzJWYkpFT0NScFVtcUE0ZXU5dlFoS21Ed3ZPV2tXREFZMmZmc1hmbkJtN0s4SlRkUHk3ZXdndENhV0dzU0JpYndqQ2s4VzBEQkh6ZDI4c1p0RTJDcXBnNzg1c2Z6bSs2TzFMaVhGMnBsNXdnS2VJN0I5Z1J5NkxaVmJ0R2loWk1YcnQ0U25MOHhhVm5lM292VE05Y3NubE56a1JEalZtL1pDc2RsTlVxSWtjVG8ydW5pS1VMaEZQRjB1SUFyVHhGT0YwUEFrNG42YTBHcW04cFZXUjM1bS84UE5LbVA4R2RQd0tpL1M4K2VKWWNmdnJwOCtkWEQ3ZXYyZExyNGovbzdvcUE5cHlEVTBOU1FRSTAyTUlSNmEyWDlMVnFJSmpCUUUrTEhSMUZPZi9qdzB6VHljMHp0WmFINHFJNkF4LzR1bmZ4VkpPeGZVZzZ0ckk5ZlNBQmYvOEc0Y1RPM1lIdnJYLzh4TThzOFo0Nk56ZWlyYzUybEYyeXR0YVZqaG0xRGJBR21vdzlqNkpnbWpiVnRDQWFRZTkwYVE3Zjk2Q3BCSk1LUWtHV2NIZ2ZCR3d4d0pOeFd1aEVIdFN6V28yZ0Y4Rnc0MXFBVDBNaFFLc29qTlJPT05Da3pZYThCUjJJWnlmMjNNa1Q1MjUza2JwYWF2VnhjaFNhM01EZFRoR3Y3aU93QTNrZ0lJeGp4ZTRJemE1VjhaNlNiU2VqNjFuNk5WZkE2OG00VTVVUmRickNYdU1tS3U0aTBET0hXdlhoMlNEaWpOaFB0TWhHT1JtRG14b3Z3U0dvaWlwcEpRQ0VJMHpVcW1xYzZ1U3VzNis3VUxtd1gwTjhBYkxQT1VVa1A2QXFnSzN1Z05YcWRYOERqRlZRQm1LMklCQUVRR0d1V09JZVVXckk0aWFsaFpjL0k0bVN3UXpNNDJROFRKUGpBM3ZJWjJScFdFck5rTVNuMXJhZGVxZmNFR3JxY1lZcWord3NVOSt6N3VXWFVCSG1rN3drVS92UTRVK3hJSE4waEF2OVp4d2hpWi9nSTQ5YlRFaDNwL0pIWUVUN2RTVWxiTDR6TDhHRUg2UmlmOFJFTzlMZ1JpZnZEakZjWitDYkM4ajdMQUU1YXQzOTNKSmxIa3B4bzJCa09pZlZyTmh1alFQdm10ZnBFRHVETVJqTU5VQTFFV0ZZVVE3TUxuSVQybVF3VlF3N1YwN01JbnI5RFU1RE9PamdLc3AwUUhZSkhVT09Rcm5HM2g3ZCtmTG95RWsrUzMxdkpnZ1hDTFdRd0FNR0pFaGdFTzhvSEVEaXpBQnc4N2g1bHQrMSszMzg4QzQvdDYzcjJ6Y3IrRlAzMEVaMHdzVjUwK1laMlJybkVPSmRnSk5TZ3RmSzVQZm1IU3M2U01wbFNsbHdWN1NlYi9UZXZDTjJHR3ZQK3p2YVRSYXV3TktaVXlwU3pRUEFLZmJteS9GR0Nhek00YU9SZHJscWxWNmxRamlwZmU3dllzOU1UbDR4VDV0ckV6L1RYdWtzazdscC9rWEN5VW83VDR6b1AzbkxscWxIazc2NlZTTFM1eEVHMXMwVERkcXZxYVJZMjkxUzVzZkdKTzZ0cmI5MFNMNW40SUNhL0pqL204d05hRUkrYmx4OWVMdUM5elF1aVBRQmIzNWduTmIrWU9BdW03ODJPUW1YeEEzejZvekFZT3RUcTFXbGROdGlSdk5tS3ZRNWhnM1E0YnR3QStwQ0xyY01YZVN3alU3ZXRPc2E5TUwvbm9sbFZpQm9FWWRtRUpSRmhDdHAzeXI2cEtjNmlNWU1Xd0hDYW4wd2NoZWw5dTEwcnRIaUV6M2pvaVVPSFdydzVWWmdEeHNadWZiNzB2TnZnZVFDeVp6Q1diOEwzdzZUQkNpWkZITFhvSHE0WDcwUHhiUGpKakFxV0JodHgrTXJjY0UwZ1B6a2tocUl4R0ZLY29vTjEvRUJWV0hZRm5JQmZmOGZlN0dkZE5uYXZkNnVnU0piTWl4SkowR3B2NU5uWnlQVHVVb3EzZ2hVSkpRTGl2bzRJUFordmo1REhGOThqWjJMS0xUWE82UW1yTklkZkhrdUxGUlE2WmJucTUwUUk5RVg4MUNyeXQ1U1ZMTUoxKzdlZExzNVpMbnVBcjlmelFlRFFPSTZrakpENmNtSnJZcXlod0V6R2p3K1lmUFIyZEN1NkhmWHF0NzJkeWFBaXJHTmlhemkrVXZpU3FHd1orTEZ0VU8yWjJJNWUwMWlzclV0c1RQaU9aSGVIcEpuVk5wbWh0cGt6SmhVN2JLMDFNZUd4QkJ3eHhsMnRTYUdIcTA0cm9laGZHOE9OeFY5YjV5VmpNbVZxZ2ZCU1IySlppOXVBMERJTklvYk12dzA4OXRqa3U1YzAraXRQT1BOeGg5Yk82cEhFMjlHY2RTcU5Bbi9OV1phanQzbmc2TURBS0dtdkhkWnVjL3F2T2x0ck1sbDdkWHM3L2VNQjZyQmk5ZE1XMVRQa0V0U1NaN0VzS001M3JYbWhwYlZnWVBsQVVYL1JJZ0Z2QVZpZTZKanB3ZC9ud1kwVGM5alVVOUpIdE15UGRxTjJhSEl6Z3NlYmpNWVNnSnUwcFNTWG04M2haSE56UndRTVByRGJQL0o2blozRkdxMUdzLzYzOXZjemVNWU9ibmVFVUJuUGFyV0JyOXVnOEM1MjRZWnRtcW5SRVNvS0hHV2JheG1QZ1RUMm5PYUFiTE81SVMvZlNsWGprSFhiZEZ0cmhCTVpFK0ZKeDJxZXZhNjU2TjQrcXcxcEtOVEs1WW5NV3JUNllIQit0cW1lQnMwUE9NazFGM1dQZXQ1QXMyNE53R0EydjVuaDhBNkd5MU1oZFpDTTJReXlHM3FycEpFcXlBWmNyZUFuQ3NEZDhGa0FQWVRZRUlsR0lZd2Z2QjdVbWk2R3NWK2c1eWdDcXlGcU9Ub0hqd2JYZjlCSU9ia0gzY3IyR3dNMUlnNHBxbnRUWllrTUhZU0tmQVI2aHBWQWxzTy9BL2RXQnJkT2VGYy96dEE1aUNDTjBNSUZxSDZvMi93UGdIU3pEaU9yb0swUWthblF4aHpYUW0vY2FlWG9JUFFBQ1JiUUpSRWk0amgwa0tGUmlja2VxQU81NWtOVEk5cXAwRjIvSG1qT3l0RUZLRERMdEZBcGcvcnRISGlJemxEUy9iL3NOdzA4aWEvTXljRUt2bGxZUTI4QXdIVEw1OGRyQWlpK1haQUtGc0QxOG9BQWlEbkxvYzc4Ny84L1NQK25TSDd1U2h3ZDM4bzQrMzVtTTZnTFhuOUtCWmg0UUZ2ZDRPOFdRYkdzajNoQ1cxK2hxMUNYS0pzZ2g4MW0zRXhUYWlvWWxSRUExRU1BNUtqNUgzOHpUWGhBeUNnQTRxNWtGZGpMVDMvYkozNGd2MmFEWmFyeTk0UFpJQUlBWjloS2dBRU5BUURlS2dYZ0gwcms0UHdjbFVDQVp1YmdmOHBVQ2NVV0dFb3N5TEVWc0FiT3NUVkFBMlpzRDN5QS84b2pRQVJwQUFJd2hDV0FBUXlZZXFEZ0ZyTW95TUpJSVN4YVl5T0JIZGdjR3dVd29EKzJGVWdHRnpmR0duZ1dLUDhHOFpvdzM0QXJRYkhoN2kvc0FUaDd3cWJ2Tm9pVGNRZ0lyQVJNTTU0M2VlWTJSV3hqbVdKelFDZ1FBaldKNlFtMGRCT1J0TFcrYm1sUFhhY3BMZ3ppTldHK0FWZUNZbnB6TXRJSDRJeWhQbWtOUFIwYjVkUWhScGI0bFlEaHgzTlBOOC9jSm1MeHRuRWFaSW9OQjN5UUVRV002QU1udXVZSk5DWWRFdzVOMm1MZGFwOWx4VjNIWE55L2VHVzAwRngreDFsRlJrR0ZHZzFhZFA5NTlXT05NY0VVTTh3QlJKaFF4b1ZVMmxqbmd6Q0trelRMaTdLcW03YnJoM0dhbDNYYmovTzZuL2Y3L1ZRUVJ1bE1OcGN2RkV2bFNyVldielJiN1U2MzF4Kzg5TEp4VmgxYlUwRlpDM2FzN1pmVlk5N3BZSE1EMmIvQUhpdFg2Y2hGaFpIV1lOdXY2Z042K2txVDNFWVZRaDFYblRIaEdxNnY3VmQwcC9tYXF6enA5VHFxc2UxclV6bXE5dnphOUlDN2xWZXdDc1BFRmZ4Sm9SbjVhOVAySTV0Z3hrcFAzOXNLQWN3ZW9PMUtCb1lWVzJncTI5eFlUU3V1ckZRdWpUZmVqWnFma2FQS3YwZ01LLzVhZWgzU1NoZStLK0VFeEhULzFqNzBERDRpM1lDbUdBR05FaytZUHlRMVhLRGxwc2tORE93RlZsTmtnZHFqeDJhaHFiQk9BOUdYK0Rhb2N3OUUrZkE2TStKQkNlR3RQbXpiZitiNkordk11NGw4SjlHdXdqdm1KdzJnUTgxbkF4ZDBXNXlETERSZmNhcWtPTlQ4NGZlRytWU0QxbHR4NnluSWh3d29XbXNOKzg4cXBnQjVsRlBFbzh0MVBzVEZoa2Z5Q2JGWG9TbzNzTjhkSzBNd3ZudHNObElRZG9vSTRZZjBPZFQyaTg4VWpSUklHT3dHeUx3WGU1eGdZdXBXTkpQTURYWlpZOXZPSExpdzc5SE9XZ0FBQUFBPVwiKSBmb3JtYXQoXCJ3b2ZmMlwiKTtcbn1cblxuLnd0aWNvbnMge1xuXHRsaW5lLWhlaWdodDogMTtcbn1cblxuLnd0aWNvbnM6YmVmb3JlIHtcblx0Zm9udC1mYW1pbHk6IHd0aWNvbnMgIWltcG9ydGFudDtcblx0Zm9udC1zdHlsZTogbm9ybWFsO1xuXHRmb250LXdlaWdodDogbm9ybWFsICFpbXBvcnRhbnQ7XG5cdHZlcnRpY2FsLWFsaWduOiB0b3A7XG59XG5cbi53dGljb24tYWNjb3VudDpiZWZvcmUge1xuXHRjb250ZW50OiBcIlxcZjEwMVwiO1xufVxuLnd0aWNvbi1hZGQ6YmVmb3JlIHtcblx0Y29udGVudDogXCJcXGYxMDJcIjtcbn1cbi53dGljb24tY2FyZFJlc2l6ZURyYWc6YmVmb3JlIHtcblx0Y29udGVudDogXCJcXGYxMDNcIjtcbn1cbi53dGljb24tY2FzdWFsOmJlZm9yZSB7XG5cdGNvbnRlbnQ6IFwiXFxmMTA0XCI7XG59XG4ud3RpY29uLWNoZWNrOmJlZm9yZSB7XG5cdGNvbnRlbnQ6IFwiXFxmMTA1XCI7XG59XG4ud3RpY29uLWNoZWNrU21hbGw6YmVmb3JlIHtcblx0Y29udGVudDogXCJcXGYxMDZcIjtcbn1cbi53dGljb24tY2hldnJvbjpiZWZvcmUge1xuXHRjb250ZW50OiBcIlxcZjEwN1wiO1xufVxuLnd0aWNvbi1jb3B5OmJlZm9yZSB7XG5cdGNvbnRlbnQ6IFwiXFxmMTA4XCI7XG59XG4ud3RpY29uLWNvcHlTbWFsbDpiZWZvcmUge1xuXHRjb250ZW50OiBcIlxcZjEwOVwiO1xufVxuLnd0aWNvbi1kaXNtaXNzOmJlZm9yZSB7XG5cdGNvbnRlbnQ6IFwiXFxmMTBhXCI7XG59XG4ud3RpY29uLWRvd25DaGV2cm9uOmJlZm9yZSB7XG5cdGNvbnRlbnQ6IFwiXFxmMTBiXCI7XG59XG4ud3RpY29uLWVycm9yOmJlZm9yZSB7XG5cdGNvbnRlbnQ6IFwiXFxmMTBjXCI7XG59XG4ud3RpY29uLWV4cGFuZDpiZWZvcmUge1xuXHRjb250ZW50OiBcIlxcZjEwZFwiO1xufVxuLnd0aWNvbi1mZWVkYmFjazpiZWZvcmUge1xuXHRjb250ZW50OiBcIlxcZjEwZVwiO1xufVxuLnd0aWNvbi1maWxsZWREb3duQXJyb3c6YmVmb3JlIHtcblx0Y29udGVudDogXCJcXGYxMGZcIjtcbn1cbi53dGljb24tZmluZDpiZWZvcmUge1xuXHRjb250ZW50OiBcIlxcZjExMFwiO1xufVxuLnd0aWNvbi1mb3JtYWw6YmVmb3JlIHtcblx0Y29udGVudDogXCJcXGYxMTFcIjtcbn1cbi53dGljb24tZ2lmdDpiZWZvcmUge1xuXHRjb250ZW50OiBcIlxcZjExMlwiO1xufVxuLnd0aWNvbi1ncmF5TG9nbzpiZWZvcmUge1xuXHRjb250ZW50OiBcIlxcZjExM1wiO1xufVxuLnd0aWNvbi1pZ25vcmU6YmVmb3JlIHtcblx0Y29udGVudDogXCJcXGYxMTRcIjtcbn1cbi53dGljb24taW5mbzpiZWZvcmUge1xuXHRjb250ZW50OiBcIlxcZjExNVwiO1xufVxuLnd0aWNvbi1sZWZ0Q2hldnJvbjpiZWZvcmUge1xuXHRjb250ZW50OiBcIlxcZjExNlwiO1xufVxuLnd0aWNvbi1sb2dvOmJlZm9yZSB7XG5cdGNvbnRlbnQ6IFwiXFxmMTE3XCI7XG59XG4ud3RpY29uLWxvdmU6YmVmb3JlIHtcblx0Y29udGVudDogXCJcXGYxMThcIjtcbn1cbi53dGljb24tbm9SZWNvbW1lbmRhdGlvbnM6YmVmb3JlIHtcblx0Y29udGVudDogXCJcXGYxMTlcIjtcbn1cbi53dGljb24tcGFyYWdyYXBoUmV3cml0ZTpiZWZvcmUge1xuXHRjb250ZW50OiBcIlxcZjExYVwiO1xufVxuLnd0aWNvbi1wYXN0ZTpiZWZvcmUge1xuXHRjb250ZW50OiBcIlxcZjExYlwiO1xufVxuLnd0aWNvbi1waW46YmVmb3JlIHtcblx0Y29udGVudDogXCJcXGYxMWNcIjtcbn1cbi53dGljb24tcHJlbWl1bTpiZWZvcmUge1xuXHRjb250ZW50OiBcIlxcZjExZFwiO1xufVxuLnd0aWNvbi1wcmVtaXVtRGV0YWlsOmJlZm9yZSB7XG5cdGNvbnRlbnQ6IFwiXFxmMTFlXCI7XG59XG4ud3RpY29uLXByZW1pdW1GdWxsOmJlZm9yZSB7XG5cdGNvbnRlbnQ6IFwiXFxmMTFmXCI7XG59XG4ud3RpY29uLXJlY29tbWVuZGF0aW9uTGlnaHQ6YmVmb3JlIHtcblx0Y29udGVudDogXCJcXGYxMjBcIjtcbn1cbi53dGljb24tcmVjb21tZW5kYXRpb25MaWdodENhcmQ6YmVmb3JlIHtcblx0Y29udGVudDogXCJcXGYxMjFcIjtcbn1cbi53dGljb24tcmVjb21tZW5kYXRpb25MaWdodE5vU3VnZ2VzdGlvbnM6YmVmb3JlIHtcblx0Y29udGVudDogXCJcXGYxMjJcIjtcbn1cbi53dGljb24tcmVmaW5lOmJlZm9yZSB7XG5cdGNvbnRlbnQ6IFwiXFxmMTIzXCI7XG59XG4ud3RpY29uLXJld3JpdGU6YmVmb3JlIHtcblx0Y29udGVudDogXCJcXGYxMjRcIjtcbn1cbi53dGljb24tcmlnaHRDaGV2cm9uOmJlZm9yZSB7XG5cdGNvbnRlbnQ6IFwiXFxmMTI1XCI7XG59XG4ud3RpY29uLXJvY2tldDpiZWZvcmUge1xuXHRjb250ZW50OiBcIlxcZjEyNlwiO1xufVxuLnd0aWNvbi1zZW50ZW5jZUV4YW1wbGVzOmJlZm9yZSB7XG5cdGNvbnRlbnQ6IFwiXFxmMTI3XCI7XG59XG4ud3RpY29uLXNldHRpbmdzOmJlZm9yZSB7XG5cdGNvbnRlbnQ6IFwiXFxmMTI4XCI7XG59XG4ud3RpY29uLXNob3J0ZW46YmVmb3JlIHtcblx0Y29udGVudDogXCJcXGYxMjlcIjtcbn1cbi53dGljb24tdHV0b3JpYWw6YmVmb3JlIHtcblx0Y29udGVudDogXCJcXGYxMmFcIjtcbn1cbi53dGljb24tdW5sb2NrOmJlZm9yZSB7XG5cdGNvbnRlbnQ6IFwiXFxmMTJiXCI7XG59XG4ud3RpY29uLXdhcm46YmVmb3JlIHtcblx0Y29udGVudDogXCJcXGYxMmNcIjtcbn1cbi53dGljb24tV29yZHR1bmVCdXR0b246YmVmb3JlIHtcblx0Y29udGVudDogXCJcXGYxMmRcIjtcbn1cbi53dGljb24teDpiZWZvcmUge1xuXHRjb250ZW50OiBcIlxcZjEyZVwiO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */</style><link rel="preload" as="style" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/134.092fb39.css"><script charset="utf-8" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/2960e18.js.download"></script><link rel="preload" as="style" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/176.290e99d.css"><script charset="utf-8" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/eff3d5c.js.download"></script><style type="text/css">.code-editor-container{display:block;position:relative;overflow:hidden;box-sizing:border-box;}iframe.code-editor-frame{width:100%;height:100%;border:none;border-radius:8px;box-sizing:border-box;border:0.5px solid rgba(128,128,128,0.4);}</style><script charset="utf-8" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/be5fa41.js.download"></script><link rel="preload" as="style" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/22.f94fff0.css"><script charset="utf-8" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/8c7faf1.js.download"></script><style type="text/css">.medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}</style><script src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/monitors.3.6.47.cn.js.download" async="" crossorigin="anonymous"></script><script src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/sentry.3.6.47.cn.js.download" async="" crossorigin="anonymous"></script><link rel="preload" as="style" href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/36.5774bd0.css"><script charset="utf-8" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/b07e175.js.download"></script><style data-jss="" data-meta="MuiSnackbar">
.MuiSnackbar-root {
  left: 8px;
  right: 8px;
  display: flex;
  z-index: 1400;
  position: fixed;
  align-items: center;
  justify-content: center;
}
.MuiSnackbar-anchorOriginTopCenter {
  top: 8px;
}
@media (min-width:600px) {
  .MuiSnackbar-anchorOriginTopCenter {
    top: 24px;
    left: 50%;
    right: auto;
    transform: translateX(-50%);
  }
}
.MuiSnackbar-anchorOriginBottomCenter {
  bottom: 8px;
}
@media (min-width:600px) {
  .MuiSnackbar-anchorOriginBottomCenter {
    left: 50%;
    right: auto;
    bottom: 24px;
    transform: translateX(-50%);
  }
}
.MuiSnackbar-anchorOriginTopRight {
  top: 8px;
  justify-content: flex-end;
}
@media (min-width:600px) {
  .MuiSnackbar-anchorOriginTopRight {
    top: 24px;
    left: auto;
    right: 24px;
  }
}
.MuiSnackbar-anchorOriginBottomRight {
  bottom: 8px;
  justify-content: flex-end;
}
@media (min-width:600px) {
  .MuiSnackbar-anchorOriginBottomRight {
    left: auto;
    right: 24px;
    bottom: 24px;
  }
}
.MuiSnackbar-anchorOriginTopLeft {
  top: 8px;
  justify-content: flex-start;
}
@media (min-width:600px) {
  .MuiSnackbar-anchorOriginTopLeft {
    top: 24px;
    left: 24px;
    right: auto;
  }
}
.MuiSnackbar-anchorOriginBottomLeft {
  bottom: 8px;
  justify-content: flex-start;
}
@media (min-width:600px) {
  .MuiSnackbar-anchorOriginBottomLeft {
    left: 24px;
    right: auto;
    bottom: 24px;
  }
}
</style><style data-emotion="css" data-s=""></style></head>
  <body data-new-gr-c-s-check-loaded="14.1085.0" data-gr-ext-installed="">
    <div id="__nuxt"><div id="__layout"><div id="juejin"><!----> <div class="view-container" data-v-4b9f9746="" data-v-1ee0c924=""><div class="main-header-box" data-v-4b9f9746=""><header data-fetch-key="0" class="main-header main-header unauthorized visible" data-v-611bc442="" data-v-4b9f9746="" visible="visible"><div class="container" data-v-611bc442=""><a href="https://juejin.cn/" class="logo" data-v-611bc442=""><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/e08da34488b114bd4c665ba2fa520a31.svg" alt="稀土掘金" class="logo-img" data-v-611bc442=""> <img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/6c61ae65d1c41ae8221a670fa32d05aa.svg" alt="稀土掘金" class="mobile" data-v-611bc442=""></a> <!----> <!----> <nav role="navigation" class="main-nav" data-v-611bc442=""><ul class="nav-list" data-v-611bc442=""><!----> <li class="main-nav-list" data-v-611bc442=""><div class="phone-show-menu isResourceVisible" data-v-611bc442=""><span data-v-611bc442="">首页</span> <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="unfold16-icon" data-v-611bc442=""><path d="M2.45025 4.82431C2.17422 4.49957 2.40501 4.00049 2.83122 4.00049H9.16878C9.59498 4.00049 9.82578 4.49957 9.54975 4.82431L6.38097 8.55229C6.1813 8.78719 5.8187 8.78719 5.61903 8.55229L2.45025 4.82431Z" data-v-611bc442=""></path></svg></div> <ul class="phone-hide isResourceVisible" data-v-611bc442=""><li class="nav-item link-item route-active" data-v-611bc442=""><a href="https://juejin.cn/" data-v-611bc442="">首页</a></li> <li class="nav-item link-item activities" data-v-611bc442=""><a href="https://juejin.cn/pins" data-v-611bc442=""><span class="text" data-v-611bc442="">
                  沸点
                  </span></a></li> <li class="nav-item link-item book" data-v-611bc442=""><a href="https://juejin.cn/course" data-v-611bc442="">
                课程
                <span data-v-611bc442="" class="tablead">
                    返场5折
                  </span></a></li> <li class="nav-item link-item" data-v-611bc442=""><a href="https://juejin.cn/live" data-v-611bc442="">直播</a></li> <li class="nav-item link-item" data-v-611bc442=""><a href="https://juejin.cn/events/all" data-v-611bc442="">活动</a></li> <nav class="nav-item link-item" data-v-611bc442=""><a href="https://detail.youzan.com/show/goods/newest?kdt_id=104340304" target="_blank" rel="nofollow noopener noreferrer" class="nav-item link-item no-border" data-v-611bc442=""><span data-v-611bc442="">商城</span></a> <!----></nav> <nav class="nav-item link-item download-icon isResourceVisible" data-v-611bc442=""><a href="https://juejin.cn/app?utm_source=jj_nav" target="_blank" class="download-app no-border" data-v-611bc442="">
                APP
              </a> <span data-v-611bc442="" class="tablead">邀请有礼</span></nav> <nav class="nav-item link-item extension-icon" data-v-611bc442=""><a href="https://juejin.cn/extension?utm_source=jj_nav" target="_blank" rel="nofollow noopener noreferrer" class="broswer-extension no-border isResourceVisible" data-v-611bc442=""><span data-v-611bc442="">插件</span></a></nav> <li tag="li" class="nav-item link-item" data-v-611bc442=""><a target="_blank" href="https://juejin.cn/challenge/1?utm_source=web_nav" class="activity no-hover special-activity" data-v-611bc442=""><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/759e2aa805c0461b840e0f0f09ed05fa_tplv-k3u1fbpfcp-zoom-1.image" style="max-width: 115px; vertical-align: middle" data-v-611bc442=""></a></li></ul></li> <ul class="right-side-nav" data-v-611bc442=""><li class="search-add" data-v-611bc442=""><ul class="search-add-ul isResourceVisible" data-v-611bc442=""><li class="nav-item search" data-v-611bc442=""><form role="search" class="search-form isResourceVisible" data-v-611bc442=""><input type="search" maxlength="32" placeholder="探索稀土掘金" value="" class="search-input isResourceVisible" data-v-611bc442=""> <div class="seach-icon-container" data-v-611bc442=""><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/1e8ab9a22f0ddc36349f60b38900d0bd.svg" alt="搜索" class="search-icon" data-v-611bc442=""></div> <div class="typehead" style="display:none;" data-v-611bc442=""><!----> <div class="title" data-v-611bc442=""><span data-v-611bc442="">搜索历史</span> <span class="clear" data-v-611bc442="">
                        清空
                      </span></div> <div class="list" data-v-611bc442=""></div></div></form></li> <li class="nav-item add creator-item" data-v-611bc442=""><div class="add-group" data-v-3a3133c9="" data-v-611bc442=""><svg data-v-3a3133c9="" width="38" height="20" viewBox="0 0 38 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="update-icon"><rect data-v-3a3133c9="" y="1" width="38" height="16" rx="8" fill="#F53F3F"></rect><path data-v-3a3133c9="" d="M7.5 7.93H11.47V9.02H7.5V7.93ZM11.47 9.65V10.71H7.5V9.65H11.47ZM11.47 11.34V12.48C11.47 12.72 11.34 12.84 11.08 12.84C10.75 12.84 10.39 12.82 10.01 12.8L10.19 13.46H11.31C11.87 13.44 12.15 13.19 12.15 12.7V7.3H7.51C7.75 6.93 7.96 6.54 8.16 6.14H13.43V5.44H8.46C8.6 5.09 8.72 4.73 8.84 4.36L8.11 4.27C7.99 4.66 7.84 5.05 7.67 5.44H4.69V6.14H7.34C6.65 7.43 5.68 8.57 4.42 9.57L4.89 10.18C5.61 9.6 6.26 8.95 6.82 8.25V13.48H7.5V11.34H11.47ZM14.72 4.73V5.4H18.64V6.27H15.58V10.23H18.51C18.41 10.75 18.23 11.18 17.99 11.52C17.43 11.23 16.91 10.89 16.44 10.5L15.89 10.88C16.38 11.3 16.92 11.67 17.5 11.99C16.86 12.45 15.84 12.73 14.45 12.84L14.76 13.5C16.35 13.32 17.5 12.94 18.2 12.34C19.69 13.02 21.44 13.41 23.45 13.49L23.63 12.8C21.71 12.74 20.05 12.41 18.65 11.82C18.93 11.42 19.12 10.89 19.24 10.23H22.46V6.27H19.36V5.4H23.29V4.73H14.72ZM21.75 9.6H19.33L19.36 8.89V8.54H21.75V9.6ZM18.61 9.6H16.29V8.54H18.64V8.89C18.64 9.13 18.63 9.37 18.61 9.6ZM16.29 7.94V6.89H18.64V7.94H16.29ZM19.36 6.89H21.75V7.94H19.36V6.89ZM32.94 4.43C31.97 4.85 30.88 5.08 29.67 5.1V9.38C29.62 10.9 29.3 12.09 28.71 12.95L29.22 13.49C29.94 12.47 30.32 11.1 30.37 9.38V8.19H31.85V13.53H32.56V8.19H33.6V7.5H30.37V5.68C31.45 5.62 32.42 5.41 33.3 5.07L32.94 4.43ZM24.61 5.2V5.86H29.12V5.2H27.23C27.09 4.84 26.95 4.51 26.8 4.21L26.06 4.33C26.23 4.59 26.38 4.88 26.52 5.2H24.61ZM24.51 7.47V8.12H26.53V9.24H24.67V9.9H26.53V12.56C26.53 12.8 26.4 12.92 26.14 12.92C26 12.92 25.85 12.9 25.69 12.87L25.84 13.54H26.38C26.96 13.54 27.25 13.27 27.25 12.73V9.9H29.01V9.24H27.25V8.12H29.18V7.47H28.05C28.24 7.13 28.41 6.74 28.57 6.31L27.92 6.09C27.77 6.57 27.6 7.03 27.4 7.47H26.3C26.14 6.93 25.96 6.48 25.77 6.11L25.13 6.34C25.33 6.69 25.51 7.07 25.66 7.47H24.51ZM25.37 10.44C25.15 11.32 24.81 12.12 24.34 12.84L24.94 13.22C25.4 12.47 25.77 11.59 26.03 10.58L25.37 10.44ZM28.24 10.37L27.64 10.53C27.92 11.13 28.15 11.75 28.34 12.38L28.94 12.15C28.78 11.61 28.54 11.02 28.24 10.37Z" fill="white"></path><path data-v-3a3133c9="" d="M18.8284 14L21.6568 16.8284L19.1112 19.374C18.955 19.5302 18.7017 19.5302 18.5455 19.374L15.9999 16.8284L18.8284 14Z" fill="#F53F3F"></path></svg> <button class="add-btn" data-v-3a3133c9="">
    创作者中心
  </button> <div class="more" data-v-3a3133c9=""><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="unfold12-icon" data-v-3a3133c9=""><path d="M2.45025 4.82383C2.17422 4.49908 2.40501 4 2.83122 4H9.16878C9.59499 4 9.82578 4.49908 9.54975 4.82382L6.38097 8.5518C6.1813 8.7867 5.8187 8.7867 5.61903 8.5518L2.45025 4.82383Z" fill="white" data-v-3a3133c9=""></path></svg></div> <ul class="more-list" data-v-3a3133c9=""><li class="item" data-v-3a3133c9=""><span class="icon write-article" data-v-3a3133c9="">写文章</span></li><li class="item" data-v-3a3133c9=""><span class="icon issue-points" data-v-3a3133c9="">发沸点</span></li><li class="item" data-v-3a3133c9=""><span class="icon write-note" data-v-3a3133c9="">写笔记</span></li><li class="item" data-v-3a3133c9=""><span class="icon create-jcode" data-v-3a3133c9="">写代码</span></li><li class="item" data-v-3a3133c9=""><span class="icon drafts" data-v-3a3133c9="">草稿箱</span></li></ul> <!----> </div></li></ul></li> <!----> <li class="nav-item vip-entry" data-v-611bc442=""><div class="vip-title" data-v-611bc442=""><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/24127194d5b158d7eaf8f09a256c5d01.svg" alt="vip" class="vip-img" data-v-611bc442=""> <div class="vip-words" data-v-611bc442="">会员</div></div> <div class="vip-content" style="display:none;" data-v-611bc442=""><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/a0ef799e93fdbfcffe8553ecf2beb5ba.svg" alt="doll" class="icon" data-v-611bc442=""> <div class="content" data-v-611bc442=""><span data-v-611bc442="">掘金会员，新权益到账啦~!</span> <span data-v-611bc442="">字节内部课程，VIP免费学习</span></div> <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="close" data-v-611bc442=""><path d="M14.3029 3.69629L8.99959 8.99957L3.69629 14.3029" stroke="#8A919F" stroke-width="1.5" stroke-linecap="round" data-v-611bc442=""></path><path d="M3.69629 3.69629L8.99959 8.99957L14.3029 14.3029" stroke="#8A919F" stroke-width="1.5" stroke-linecap="round" data-v-611bc442=""></path></svg> <img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/fef2eb8d28949cc43248bad54cb1579a.svg" class="mask" data-v-611bc442=""></div></li> <!----> <!----> <li class="nav-item auth" data-v-611bc442=""><div class="login-button-wrap" data-v-611bc442=""><button class="login-button" data-v-611bc442="">
                登录
                <div data-v-611bc442="" class="login-button-inner"><div data-v-611bc442="" class="login-button-line"></div>
                  注册
                </div></button> <div data-v-611bc442="" class="login-popover"><div data-v-0bf18450="" data-v-611bc442="" class="login-guide-wrap login-guide-popover-wrap"><!----> <div data-v-0bf18450="" class="login-guide-title">登录掘金后可立即获得以下权益：</div> <ul data-v-0bf18450="" class="login-guide-list"><li data-v-0bf18450="" class="login-guide-list-item"><div data-v-0bf18450="" class="login-guide-icon-wrap"><svg data-v-0bf18450="" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="login-guide-icon"><path data-v-0bf18450="" d="M4.62218 2.68165C3.64897 2.29236 2.59033 3.0091 2.59033 4.05728V13.961C2.59033 14.2639 2.77476 14.5363 3.05601 14.6488L8.88416 16.98C9.59939 17.2661 10.3973 17.2661 11.1125 16.98L16.9406 14.6488C17.2219 14.5363 17.4063 14.2639 17.4063 13.961V4.05728C17.4063 3.0091 16.3477 2.29236 15.3745 2.68165L11.1125 4.38644C10.3973 4.67253 9.59939 4.67253 8.88416 4.38644L4.62218 2.68165Z" stroke="currentColor" stroke-width="1.2"></path><path data-v-0bf18450="" d="M9.99609 7.42676V14.094" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"></path></svg></div> <span data-v-0bf18450="" class="login-guide-text">免费试学课程</span></li><li data-v-0bf18450="" class="login-guide-list-item"><div data-v-0bf18450="" class="login-guide-icon-wrap"><svg data-v-0bf18450="" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="login-guide-icon"><path data-v-0bf18450="" fill-rule="evenodd" clip-rule="evenodd" d="M3.11548 4.64889C3.11548 3.21507 4.27782 2.05273 5.71163 2.05273H12.4864C13.9202 2.05273 15.0825 3.21507 15.0825 4.64889V13.3522C15.0825 14.786 13.9202 15.9483 12.4864 15.9483H5.71163C4.27782 15.9483 3.11548 14.786 3.11548 13.3522V4.64889ZM5.71163 3.0912C4.85134 3.0912 4.15394 3.7886 4.15394 4.64889V13.3522C4.15394 14.2125 4.85134 14.9099 5.71163 14.9099H12.4864C13.3466 14.9099 14.0441 14.2125 14.0441 13.3522V4.64889C14.0441 3.7886 13.3466 3.0912 12.4864 3.0912H5.71163Z" fill="currentColor"></path><path data-v-0bf18450="" fill-rule="evenodd" clip-rule="evenodd" d="M5.88452 6.82197C5.88452 6.5352 6.11699 6.30273 6.40375 6.30273L11.7939 6.30273C12.0806 6.30273 12.3131 6.5352 12.3131 6.82197C12.3131 7.10873 12.0806 7.3412 11.7939 7.3412L6.40375 7.3412C6.11699 7.3412 5.88452 7.10873 5.88452 6.82197Z" fill="currentColor"></path><path data-v-0bf18450="" fill-rule="evenodd" clip-rule="evenodd" d="M5.84717 9.74188C5.84717 9.45512 6.07964 9.22265 6.3664 9.22266L9.09855 9.22268C9.38531 9.22268 9.61777 9.45515 9.61777 9.74191C9.61777 10.0287 9.3853 10.2611 9.09854 10.2611L6.36639 10.2611C6.07963 10.2611 5.84717 10.0286 5.84717 9.74188Z" fill="currentColor"></path></svg></div> <span data-v-0bf18450="" class="login-guide-text">精准推荐内容</span></li><li data-v-0bf18450="" class="login-guide-list-item"><div data-v-0bf18450="" class="login-guide-icon-wrap"><svg data-v-0bf18450="" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="login-guide-icon"><path data-v-0bf18450="" fill-rule="evenodd" clip-rule="evenodd" d="M12.1337 10.5801C12.4205 10.5801 12.653 10.8125 12.653 11.0993V11.8658H13.4194C13.7062 11.8658 13.9387 12.0983 13.9387 12.385C13.9387 12.6718 13.7062 12.9043 13.4194 12.9043H12.1337C11.847 12.9043 11.6145 12.6718 11.6145 12.385V11.0993C11.6145 10.8125 11.847 10.5801 12.1337 10.5801Z" fill="currentColor"></path><path data-v-0bf18450="" fill-rule="evenodd" clip-rule="evenodd" d="M2.05225 4.64889C2.05225 3.21507 3.21458 2.05273 4.6484 2.05273H11.4231C12.8569 2.05273 14.0193 3.21507 14.0193 4.64889V9.32197H12.9808V4.64889C12.9808 3.7886 12.2834 3.0912 11.4231 3.0912H4.6484C3.78811 3.0912 3.09071 3.7886 3.09071 4.64889V13.3522C3.09071 14.2125 3.78811 14.9099 4.6484 14.9099H12.2143V15.9483H4.6484C3.21459 15.9483 2.05225 14.786 2.05225 13.3522V4.64889Z" fill="currentColor"></path><path data-v-0bf18450="" fill-rule="evenodd" clip-rule="evenodd" d="M12.214 9.51893C10.7255 9.51893 9.51893 10.7255 9.51893 12.214C9.51893 13.7024 10.7255 14.909 12.214 14.909C13.7024 14.909 14.909 13.7024 14.909 12.214C14.909 10.7255 13.7024 9.51893 12.214 9.51893ZM8.48047 12.214C8.48047 10.152 10.152 8.48047 12.214 8.48047C14.2759 8.48047 15.9475 10.152 15.9475 12.214C15.9475 14.2759 14.2759 15.9475 12.214 15.9475C10.152 15.9475 8.48047 14.2759 8.48047 12.214Z" fill="currentColor"></path><path data-v-0bf18450="" fill-rule="evenodd" clip-rule="evenodd" d="M4.82129 5.4372C4.82129 5.15044 5.05376 4.91797 5.34052 4.91797L10.7306 4.91797C11.0174 4.91797 11.2499 5.15044 11.2499 5.4372C11.2499 5.72396 11.0174 5.95643 10.7306 5.95643L5.34052 5.95643C5.05376 5.95643 4.82129 5.72396 4.82129 5.4372Z" fill="currentColor"></path><path data-v-0bf18450="" fill-rule="evenodd" clip-rule="evenodd" d="M4.78394 8.35712C4.78394 8.07035 5.01641 7.83789 5.30317 7.83789L8.03531 7.83791C8.32208 7.83791 8.55454 8.07038 8.55454 8.35715C8.55454 8.64391 8.32207 8.87637 8.03531 8.87637L5.30316 8.87635C5.0164 8.87635 4.78393 8.64388 4.78394 8.35712Z" fill="currentColor"></path></svg></div> <span data-v-0bf18450="" class="login-guide-text">查阅浏览足迹</span></li><li data-v-0bf18450="" class="login-guide-list-item"><div data-v-0bf18450="" class="login-guide-icon-wrap"><svg data-v-0bf18450="" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="login-guide-icon"><path data-v-0bf18450="" fill-rule="evenodd" clip-rule="evenodd" d="M8.99999 3.37781L7.26101 6.9014C7.15913 7.10768 6.96219 7.25119 6.73392 7.28433L2.84544 7.84938L5.65897 10.5919C5.65903 10.592 5.6589 10.5919 5.65897 10.5919C5.82418 10.7529 5.89936 10.9849 5.8605 11.2116L5.19624 15.0845L8.67423 13.256C8.87818 13.1488 9.12181 13.1488 9.32576 13.256L12.8037 15.0845L12.1395 11.2117C12.1006 10.9849 12.1756 10.7531 12.3408 10.5921C12.3409 10.592 12.3408 10.5922 12.3408 10.5921L15.1545 7.84938L11.2663 7.28437C11.038 7.25122 10.8409 7.10782 10.739 6.90153L8.99999 3.37781ZM9.26883 2.83308C9.26888 2.83298 9.26878 2.83318 9.26883 2.83308V2.83308ZM9.62775 2.39022C9.37097 1.86993 8.62901 1.86993 8.37224 2.39022L6.43408 6.3174L2.10014 6.94718C1.52608 7.03061 1.29661 7.73615 1.71217 8.14119C1.71216 8.14118 1.71219 8.14121 1.71217 8.14119L4.84822 11.1981L4.10789 15.5145C4.00989 16.0863 4.61 16.5224 5.12357 16.2525L8.99999 14.2145L12.8764 16.2525C13.3899 16.5224 13.9901 16.0863 13.8921 15.5146L13.1518 11.1981L16.2877 8.14126C16.7035 7.73618 16.4739 7.0306 15.8999 6.94718L11.5659 6.3174L9.62775 2.39022ZM4.96134 11.3084C4.96141 11.3084 4.96128 11.3083 4.96134 11.3084V11.3084Z" fill="currentColor"></path></svg></div> <span data-v-0bf18450="" class="login-guide-text">收藏有用文章</span></li><li data-v-0bf18450="" class="login-guide-list-item"><div data-v-0bf18450="" class="login-guide-icon-wrap"><svg data-v-0bf18450="" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="login-guide-icon"><path data-v-0bf18450="" fill-rule="evenodd" clip-rule="evenodd" d="M5.21627 3.23729H2.91894L2.91894 14.2645H5.21627V3.23729ZM2.91894 2.31836C2.41142 2.31836 2 2.72978 2 3.23729V14.2645C2 14.772 2.41142 15.1835 2.91894 15.1835H5.21627C5.72379 15.1835 6.13521 14.772 6.13521 14.2645V3.23729C6.13521 2.72978 5.72379 2.31836 5.21627 2.31836H2.91894Z" fill="currentColor"></path><path data-v-0bf18450="" fill-rule="evenodd" clip-rule="evenodd" d="M8.43258 3.23729H6.13524L6.13524 14.2645H8.43258V3.23729ZM6.13524 2.31836C5.62773 2.31836 5.21631 2.72978 5.21631 3.23729V14.2645C5.21631 14.772 5.62773 15.1835 6.13524 15.1835H8.43258C8.9401 15.1835 9.35152 14.772 9.35152 14.2645V3.23729C9.35152 2.72978 8.9401 2.31836 8.43258 2.31836H6.13524Z" fill="currentColor"></path><path data-v-0bf18450="" fill-rule="evenodd" clip-rule="evenodd" d="M12.0205 3.1255L9.80149 3.7201L12.6555 14.3716L14.8746 13.777L12.0205 3.1255ZM9.56365 2.83247C9.07343 2.96383 8.78251 3.46772 8.91386 3.95794L11.7679 14.6094C11.8993 15.0996 12.4032 15.3906 12.8934 15.2592L15.1124 14.6646C15.6027 14.5333 15.8936 14.0294 15.7622 13.5391L12.9082 2.88767C12.7768 2.39744 12.2729 2.10653 11.7827 2.23788L9.56365 2.83247Z" fill="currentColor"></path></svg></div> <span data-v-0bf18450="" class="login-guide-text">订阅优质专栏</span></li><li data-v-0bf18450="" class="login-guide-list-item"><div data-v-0bf18450="" class="login-guide-icon-wrap"><svg data-v-0bf18450="" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="login-guide-icon"><circle data-v-0bf18450="" cx="10.0004" cy="5.46816" r="3.62539" stroke="currentColor" stroke-width="1.2"></circle><path data-v-0bf18450="" d="M12.176 11.8125H7.82554C5.0224 11.8125 2.75 14.0849 2.75 16.888C2.75 17.5888 3.3181 18.1569 4.01889 18.1569H15.9827C16.6834 18.1569 17.2515 17.5888 17.2515 16.888C17.2515 14.0849 14.9792 11.8125 12.176 11.8125Z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"></path></svg></div> <span data-v-0bf18450="" class="login-guide-text">关注优秀作者</span></li></ul> <button data-v-0bf18450="" type="button" class="login-guide-login-button byte-btn byte-btn--primary byte-btn--normal"><!----><!----><span>
    立即登录
  </span></button> <div data-v-0bf18450="" class="login-guide-register">
    首次使用？
    <div data-v-0bf18450="" class="login-guide-register-button">
      点我注册
    </div></div></div></div></div></li></ul></ul></nav></div> <!----></header></div>  <main class="container main-container" style="max-width:1140px;" data-v-4b9f9746=""><div class="view column-view" data-v-4b9f9746="" data-v-1ee0c924=""><div class="main-area article-area" data-v-4b9f9746="" data-v-1ee0c924=""><article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="6991689670027542564" data-draft-id="6991672289368473608" data-original-type="0" class="article" data-v-1ee0c924="" data-v-4b9f9746=""><!----> <meta itemprop="headline" content="如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像）"> <meta itemprop="keywords" content="Docker,Node.js"> <meta itemprop="datePublished" content="2021-08-02T04:49:00.000Z"> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="iamc"> <meta itemprop="url" content="https://juejin.cn/user/4072246798979719"></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="掘金"> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"> <meta itemprop="width" content="180"> <meta itemprop="height" content="180"></div></div> <h1 class="article-title" data-v-1ee0c924="">
            如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像）
            <!----></h1> <div class="author-info-block" data-v-1ee0c924=""><a href="https://juejin.cn/user/4072246798979719" target="_blank" rel="" class="avatar-link" data-v-1ee0c924=""><img loading="eager" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/49c6deba3c8765f3d6a19ff34b32f926_100x100.awebp" alt="" class="lazy avatar avatar" data-v-248050e4="" data-v-47508ed8="" data-v-1ee0c924=""></a> <div class="author-info-box" data-v-1ee0c924=""><div class="author-name" data-v-1ee0c924=""><a href="https://juejin.cn/user/4072246798979719" target="_blank" rel="" class="username username ellipsis" data-v-0ef8bafa="" data-v-1ee0c924=""><span class="name" style="max-width:128px;" data-v-0ef8bafa="">
    iamc
  </span> <span blank="true" class="rank" data-v-3de16c56="" data-v-0ef8bafa=""><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/lv-3.7938ebc.png" alt="lv-3" title="创作等级" data-v-3de16c56=""></span> <!----> <!----> </a> <!----></div> <div class="meta-box" data-v-1ee0c924=""><time datetime="2021-08-02T04:49:00.000Z" title="Mon Aug 02 2021 12:49:00 GMT+0800 (China Standard Time)" class="time" data-v-1ee0c924="">
                    2021年08月02日 12:49
                  </time> <span class="views-count" data-v-1ee0c924="">
                    ·&nbsp;&nbsp;阅读 10307
                  </span> <!----></div> <!----></div> <button class="follow-button follow" data-v-565dd611="" data-v-1ee0c924=""><span class="icon icon-follow" data-v-565dd611=""></span> <span data-text="取消关注" class="text" data-v-565dd611="">关注</span></button></div> <!----> <!----> <!----> <div itemprop="articleBody" class="article-content" data-v-1ee0c924=""><div class="markdown-body cache"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote>p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"•";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><p>本文将以 Node 程序展示如何优化 Docker 镜像（优化思想是通用的，不分程序），主要解决镜像大小过大、CI/CD 构建镜像速度，本文演示如何一步步优化 Dockerfile 文件，绝对的干货，建议先赞再看，看完不是干货再取消赞也不是不行😅。优化的结果如下：</p>
<ol>
<li><strong>大小从 1.06G 到 73.4M</strong></li>
<li><strong>构建速度从 29.6 秒到 1.3 秒</strong>（对比的是第二次构建的速度）</li>
</ol>
<h2 data-id="heading-0">Node 项目</h2>
<p>简单写了一个自己用的 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fiamobj%2Fwechat-bot" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/iamobj/wechat-bot" ref="nofollow noopener noreferrer">wechat-bot</a> ，接下来就以这个项目演示怎么去优化 Docker 镜像</p>
<p>以下是我没有仔细研究 Docker 刚开始写的 Dockerfile 文件</p>
<pre><code class="hljs language-dockerfile copyable" lang="dockerfile">FROM node:14.17.3

# 设置环境变量
ENV NODE_ENV=production
ENV APP_PATH=/node/app

# 设置工作目录
WORKDIR $APP_PATH

# 把当前目录下的所有文件拷贝到镜像的工作目录下 .dockerignore 指定的文件不会拷贝
COPY . $APP_PATH

# 安装依赖
RUN yarn

# 暴露端口
EXPOSE 4300

CMD yarn start
<span class="copy-code-btn">复制代码</span></code></pre>
<p>build 之后，如下图，我这个简单的 Node 程序镜像竟然有 <strong>1G</strong> 多，接下来我们将逐步去优化减少这个大小</p>
<p><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/e446948e70c843c592906d1277be0472_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="image-20210731140907227" loading="lazy" class="medium-zoom-image"></p>
<h2 data-id="heading-1">优化前言</h2>
<p>在优化之前，有些东西我们必须了解，解决问题的第一步就是先找出导致问题的原因</p>
<ol>
<li>
<p>Dockerfile 文件，其内包含了一条条的指令，每一条指令构建一层，因此每一条指令的内容，就是描述该层如何构建</p>
</li>
<li>
<p>Docker 镜像并非只是一个文件，而是由一堆文件组成，最主要的文件是 <strong>层</strong>（Layers）</p>
<ul>
<li>
<p>镜像构建时，会一层层构建，前一层是后一层的基础</p>
<p>每一层构建完就不会再发生改变，后一层上的任何改变只发生在自己这一层。比如，删除前一层文件的操作，实际不是真的删除前一层的文件，而是仅在当前层标记为该文件已删除。在最终容器运行的时候，虽然不会看到这个文件，但是实际上该文件会一直跟随镜像</p>
</li>
<li>
<p>镜像层将会被缓存和复用（这也是从第二次开始构建镜像时，速度会快的原因，优化镜像构建速度的原理也是利用缓存原理来做）</p>
</li>
<li>
<p>当 Dockerfile 的指令修改了，操作的文件变化了，或者构建镜像时指定的变量不同了，对应的镜像层缓存就会失效</p>
<p><strong>docker build 的缓存机制，docker 是怎么知道文件变化的呢？</strong></p>
<p>Docker 采取的策略是：获取 Dockerfile 下内容（包括文件的部分 inode 信息），计算出一个唯一的 hash 值，若 hash 值未发生变化，则可以认为文件内容没有发生变化，可以使用缓存机制，反之亦然。</p>
</li>
<li>
<p>某一层的镜像缓存失效之后，它之后的镜像层缓存都会失效</p>
</li>
<li>
<p>镜像的每一层只记录文件变更，在容器启动时，Docker 会将镜像的各个层进行计算，最后生成一个文件系统</p>
<p>当我知道这点时，我恍然大悟，我们使用的操作系统，比如安卓、ios、win、mac 等，其实就是一个文件系统，我们的软件界面交互等，其实就是在读写文件，我们网页写个弹框，操作 dom，就是在读写本地文件或者是读写内存里的数据，个人的一些见解不知道对不对，本人非科班出身的前端 coder 😅</p>
</li>
</ul>
<p>参考资料：<a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.cnblogs.com%2Fhandwrit2000%2Fp%2F12871493.html" target="_blank" rel="nofollow noopener noreferrer" title="https://www.cnblogs.com/handwrit2000/p/12871493.html" ref="nofollow noopener noreferrer">docker 镜像分层原理</a></p>
</li>
</ol>
<p>ok，我们已经知道镜像是由多层文件系统组成，想要优化它的大小，就需要去减少层数、每一层尽量只包含该层需要的东西，任何额外的东西应该在该层构建结束前清理掉，下面开始正文</p>
<p><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/97d480b0a42c48edbb600927824f4d35_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="eXxZUW" loading="lazy" class="medium-zoom-image"></p>
<h2 data-id="heading-2">优化 Dockerfile</h2>
<h3 data-id="heading-3">优化第一层 <code>FROM node:14.17.3</code></h3>
<h4 data-id="heading-4">方案一：使用 node 的 Alpine 版本</h4>
<p>这也是绝多数人知道的优化镜像手段，Alpine 是一个很小的 Linux 发行版，只要选择 Node 的 Alpine 版本，就会有很大改进，我们把这一句改成指令改成 <code>FROM node:14.17.4-alpine </code> （可以去 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fhub.docker.com%2F_%2Fnode%3Ftab%3Ddescription%26page%3D1%26ordering%3Dlast_updated" target="_blank" rel="nofollow noopener noreferrer" title="https://hub.docker.com/_/node?tab=description&amp;page=1&amp;ordering=last_updated" ref="nofollow noopener noreferrer">dockerhub</a> 查看 node 有哪些版本标签），build 后镜像大小如下图，瞬间<strong>从 1.06G 降到 238M</strong>，可以说是效果显著</p>
<p><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/949e308a873342f7abe612a62f67fc9e_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="image-20210731171210360" loading="lazy" class="medium-zoom-image"></p>
<p>还可以使用其它的基础小镜像，比如 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fmhart%2Falpine-node" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/mhart/alpine-node" ref="nofollow noopener noreferrer">mhart/alpine-node</a>，这个还能再小，改成 <code>FROM mhart/alpine-node:14.17.3</code> 再试试，可以看到又小了 <strong>5M</strong>​ 😂，虽然不多，但是秉着能压榨一点是一点的“老板原则”，积少成多，极致压榨</p>
<p><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/a52f444f82bc485981eed9deaf114b84_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="image-20210731171706746" loading="lazy" class="medium-zoom-image"></p>
<h4 data-id="heading-5">方案二：使用纯净 Alpine 镜像手动装 Node</h4>
<p>既然 Alpine 是最小的 Linux，那我们试下用纯净的 Alpine 镜像，自己再装 Node 试试</p>
<pre><code class="hljs language-dockerfile copyable" lang="dockerfile">FROM alpine:latest

# 使用 apk 命令安装 nodejs 和 yarn，如果使用 npm 启动，就不需要装 yarn
RUN apk add --no-cache --update nodejs=14.17.4-r0 yarn=1.22.10-r0

# ... 后面的步骤不变
<span class="copy-code-btn">复制代码</span></code></pre>
<p>build 后看下图，只有 <strong>174M</strong> 了，又小了不少</p>
<p><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/f102c75f7d984fbca5c9d0d66f5732d0_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="image-20210731174258226" loading="lazy" class="medium-zoom-image"></p>
<p>结论就是不嫌麻烦追求极致就用方案二，<strong>从 1.06G 减少到 174M</strong></p>
<p><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/9ade7d0c09a947ab8b7a3804a3ca7ac5_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="apG8c7" loading="lazy" class="medium-zoom-image"></p>
<blockquote>
<p>注意：由于 alpine 的包仓库，提供的包版本是会有变动的，指定版本安装包（eg: nodejs、yarn）会在往后构建导致找不到包对应的版本导致构建失败</p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fpkgs.alpinelinux.org%2Fpackages%3Fname%3Dnodejs%26branch%3Dedge" target="_blank" rel="nofollow noopener noreferrer" title="https://pkgs.alpinelinux.org/packages?name=nodejs&amp;branch=edge" ref="nofollow noopener noreferrer">alpine 仓库</a>查询包版本示意图如下：</p>
<p><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/05ba62cb81bb459497b6fbb1e1e02214_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="image-20220617150447876" loading="lazy" class="medium-zoom-image"></p>
<p>下图引自热心评论里构建失败的图，提示没有找到对应包的版本，导致构建失败</p>
<p><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/67207e70ac7744a991b6608323235857_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="image-20220617145552502" loading="lazy" class="medium-zoom-image"></p>
<p>我想到两种解决办法：</p>
<ol>
<li>
<p>在安装包时不指定版本</p>
<p><code>RUN apk add --no-cache --update nodejs yarn</code></p>
</li>
<li>
<p>自制一个 alpine-node 基础镜像</p>
<p>可以参考我自制的 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fiamobj%2Falpine-node" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/iamobj/alpine-node" ref="nofollow noopener noreferrer">alpine-node 基础镜像</a>，我 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fiamobj%2Fwechat-bot" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/iamobj/wechat-bot" ref="nofollow noopener noreferrer">wechat-bot</a> 项目就是用的自制的</p>
</li>
</ol>
<p>两种解决办法，个人是不建议用第一个，毕竟我们项目往往是要指定版本的，不同版本会导致项目的一些依赖运行差异，其实方案二纯属个人爱折腾，闲麻烦的直接用方案一，用现成的 node 的 Alpine 版本。</p>
</blockquote>
<h3 data-id="heading-6">减少层数、不经常变动的层提到前面去</h3>
<ul>
<li>
<p><code>ENV</code> 指令是可以一次性设置多个环境变量，能一次指令执行完，就不用两次，多一个指令就多一层</p>
</li>
<li>
<p><code>EXPOSE</code> 指令是暴露端口，其实也可以不用写这个指令，在启动容器的时候自己映射端口，如果写了这个指令的话，因为端口不经常变，所以把这个指令提前，写上这个指令有两个好处：</p>
<ol>
<li>帮助镜像使用者理解这个镜像服务的守护端口，以方便配置映射</li>
<li>在运行时使用随机端口映射时，也就是 <code>docker run -P</code> 时，会自动随机映射 <code>EXPOSE</code> 的端口</li>
</ol>
<p>至于写还是不写，看个人吧，我个人一般不写，因为我在项目启动命令会指定项目端口，启动容器的时候映射出来就好，这样我就要维护一个地方，Dockerfile 也写了的话，项目端口变了，这里也要修改，多了点维护成本，当然也有办法让两边端口变量取自配置文件，只要改配置文件即可</p>
<p><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/b89a75058fd34f6fa2dc3d0c81631a7c_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="WyN8ZF" loading="lazy" class="medium-zoom-image"></p>
</li>
</ul>
<p>下面是改写后的 Dockerfile</p>
<pre><code class="hljs language-dockerfile copyable" lang="dockerfile">FROM alpine:latest

# 使用 apk 命令安装 nodejs 和 yarn，如果使用 npm 启动，就不需要装 yarn
RUN apk add --no-cache --update nodejs=14.17.4-r0 yarn=1.22.10-r0

# 暴露端口
EXPOSE 4300

# 设置环境变量
ENV NODE_ENV=production \
    APP_PATH=/node/app

# 设置工作目录
WORKDIR $APP_PATH

# 把当前目录下的所有文件拷贝到镜像的工作目录下 .dockerignore 指定的文件不会拷贝
COPY . $APP_PATH

# 安装依赖
RUN yarn

# 启动命令
CMD yarn start
<span class="copy-code-btn">复制代码</span></code></pre>
<p>这一步的优化，无论从镜像大小还是构建镜像速度都看不到明显的差别，因为改动的层内容少（体现不出来），但是可以查看到镜像的层是变少了的，可以自行试试查看镜像的层试试</p>
<p>减少镜像层数是“好老板”的传统优良习惯，不让“员工”浪费资源</p>
<p><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/837074c4e3eb47f3a71d86284f7278db_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="PChFeZ" loading="lazy" class="medium-zoom-image"></p>
<h3 data-id="heading-7">package.json 提前提高编译速度</h3>
<p>从下图可以看到每次我们 build 的时候最耗时的就是在执行 <code>yarn</code> 命令装依赖的时候，大部分时候我们只是改代码，依赖不变，这时候如果可以让这一步缓存起来，依赖没有变化的时候，就不需要重新装依赖，就可以大大改进编译速度</p>
<p><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/cbb2c1d5994d40efbdbc3cba6cb36006_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="image-20210731211548456" loading="lazy" class="medium-zoom-image"></p>
<p>前面我们说了镜像构建时，是一层层构建，前一层是后一层的基础，既然是这样的话，我们就把 package.json 文件单独提前拷贝到镜像，然后下一步装依赖，执行命令装依赖这层的前一层是拷贝 package.json 文件，因为安装依赖命令不会变化，所以只要 package.json 文件没变化，就不会重新执行 <code>yarn</code> 安装依赖，它会复用之前安装好的依赖，原理讲清楚了，下面我们看效果</p>
<p>改变后的 Dockerfile 文件</p>
<pre><code class="hljs language-dockerfile copyable" lang="dockerfile">FROM alpine:latest

# 使用 apk 命令安装 nodejs 和 yarn，如果使用 npm 启动，就不需要装 yarn
RUN apk add --no-cache --update nodejs=14.17.4-r0 yarn=1.22.10-r0

# 暴露端口
EXPOSE 4300

# 设置环境变量
ENV NODE_ENV=production \
    APP_PATH=/node/app

# 设置工作目录
WORKDIR $APP_PATH

# 拷贝 package.json 到工作跟目录下
COPY package.json .

# 安装依赖
RUN yarn

# 把当前目录下的所有文件拷贝到镜像的工作目录下 .dockerignore 指定的文件不会拷贝
COPY . .

# 启动命令
CMD yarn start
<span class="copy-code-btn">复制代码</span></code></pre>
<p>build 看下图，编译时间从 29.6s 到 1.3s，使用了缓存的层前面会有个 CACHED 字眼，仔细看下图可以看到</p>
<p><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/fdf55a6a1fc34fa482673d89eded7cbb_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="image-20210731215943833" loading="lazy" class="medium-zoom-image"></p>
<p>充分利用 docker 缓存特性是优化构建速度的利器</p>
<p><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/c9a55b691a4b4e468e077d793758abc6_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="nSjmZb" loading="lazy" class="medium-zoom-image"></p>
<h3 data-id="heading-8">使用多阶段构建再次压榨镜像大小</h3>
<p>多阶段构建这里不多说了，不了解的可以先搜相关资料了解</p>
<p>因为我们运行 node 程序是只需要生产的依赖和最终 node 可以运行的文件，就是说我们运行项目只需要 package.js 文件里 dependencies 里的依赖，devDependencies 依赖只是编译阶段用的，比如 eslint 等这些工具在项目运行时是用不到的，再比如我们项目是用 typescript 写的，node 是不能直接运行 ts 文件，ts 文件需要编译成 js 文件，运行项目我们只需要编译后的文件和 dependencies 里的依赖就可以运行，也就是说最终镜像只需要我们需要的东西，任何其他东西都可以删掉，下面我们使用多阶段改写 Dockerfile</p>
<pre><code class="hljs language-dockerfile copyable" lang="dockerfile"># 构建基础镜像
    FROM alpine:3.14 AS base

    # 设置环境变量
    ENV NODE_ENV=production \
        APP_PATH=/node/app
    
    # 设置工作目录
    WORKDIR $APP_PATH

    # 安装 nodejs 和 yarn
    RUN apk add --no-cache --update nodejs=14.17.4-r0 yarn=1.22.10-r0

# 使用基础镜像 装依赖阶段
    FROM base AS install

    # 拷贝 package.json 到工作跟目录下
    COPY package.json ./

    # 安装依赖
    RUN yarn

# 最终阶段，也就是输出的镜像是这个阶段构建的，前面的阶段都是为这个阶段做铺垫
    FROM base

    # 拷贝 装依赖阶段 生成的 node_modules 文件夹到工作目录下
    COPY --from=install $APP_PATH/node_modules ./node_modules

    # 将当前目录下的所有文件（除了.dockerignore排除的路径），都拷贝进入镜像的工作目录下
    COPY . .

    # 启动
    CMD yarn start
<span class="copy-code-btn">复制代码</span></code></pre>
<p>细心的朋友会发现我这里有指定 alpine 版本，而上面都是用的 latest 版本，因为就在刚刚发现有个坑需要注意下，就是我们选择 alpine 版本的时候，最好不要选择 latest 版本，因为后面要装的软件版本可能会在 alpine 的 latest 版本没有对应软件的版本号，就会安装错误，我刚刚就翻车了，<a href="https://link.juejin.cn/?target=https%3A%2F%2Fpkgs.alpinelinux.org%2Fpackages%3Fname%3Dnodejs%26branch%3Dv3.13" target="_blank" rel="nofollow noopener noreferrer" title="https://pkgs.alpinelinux.org/packages?name=nodejs&amp;branch=v3.13" ref="nofollow noopener noreferrer">点击查看 alpine 版本下的包信息</a></p>
<p><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/fbb478618a3342dbaf8b3fe5ae7b63a6_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="image-20210731225710215" loading="lazy" class="medium-zoom-image"></p>
<p>build 后，我们看看镜像大小，上次的是 174M 再次降到 73.4M，极致压榨。镜像：”放过我把，我真的没有了“😂</p>
<p><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/ca4ea3cbf85a46d19102182759f4cf27_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="image-20210731225924299" loading="lazy" class="medium-zoom-image"></p>
<p><strong>讲解：</strong></p>
<p>我把这个构建分成了三个阶段：</p>
<ol>
<li>
<p>第一阶段：构建基础镜像</p>
<p>安装依赖、编译、运行等等阶段，就是所有阶段共用的东西都在第一阶段封到一个基础镜像里供其它阶段使用，比如设置环境变量、设置工作目录、安装 nodejs、yarn 等等</p>
</li>
<li>
<p>第二阶段：装依赖阶段</p>
<p>在这个阶段，装依赖，如果项目需要编译，可以在这个阶段装依赖编译好</p>
<p>这里在说下装依赖的小细节，就是执行 <code>yarn --production</code> 加个 production 参数或者环境变量 <code>NODE_ENV</code> 为 <code>production</code>，yarn 将不会安装 devDependencies 中列出的任何软件包，<a href="https://link.juejin.cn/?target=https%3A%2F%2Fclassic.yarnpkg.com%2Fen%2Fdocs%2Fcli%2Finstall%23toc-yarn-install-production-true-false" target="_blank" rel="nofollow noopener noreferrer" title="https://classic.yarnpkg.com/en/docs/cli/install#toc-yarn-install-production-true-false" ref="nofollow noopener noreferrer">点我查看官方文档说明</a>，因为我设置了环境变量所以就没加这个参数</p>
</li>
<li>
<p>第三阶段：最终使用镜像</p>
<p>拷贝第二阶段安装的好的依赖文件夹，然后在拷贝代码文件到工作目录，执行启动命令，第二阶段装依赖多出的一些垃圾我们不需要，我们就只拷贝我们要用的东西，大大减少镜像的大小</p>
<p>如果项目需要编译，在拷贝编译后的文件夹，不需要拷贝编译前的代码，有编译后的代码和依赖就可以跑起项目</p>
</li>
</ol>
<p>多阶段构建，最后生成的镜像只能是最后一个阶段的结果，但是，能够将前置阶段中的文件拷贝到后边的阶段中，这就是多阶段构建的最大意义。</p>
<p>最终优化成果：</p>
<ol>
<li><strong>大小从 1.06G 到 73.4M</strong></li>
<li><strong>构建速度从 29.6 秒到 1.3 秒</strong>（对比的是第二次构建的速度）</li>
</ol>
<p>至此，压榨镜像手段就完了，如果各位老板还有压榨手段可以分享分享</p>
<p>镜像内心独白：”你礼貌吗？还来“</p>
<h2 data-id="heading-9">github 的 actions 构建镜像问题</h2>
<p>github 提供的 actions，每次都是一个干净的实例，什么意思，就是每次执行，都是干净的机器，这会导致一个问题，会导致 docker 没法使用缓存，那有没有解决办法呢，这里提供三种解决办法：</p>
<ol>
<li>
<p>先构建一个已经安装好依赖包的镜像，然后基于此镜像再次构建，相当于多阶段构建，把前两个阶段构建的镜像产物推送到镜像仓库，再以这个镜像为基础去构建后续部分。借助镜像仓库存储基础镜像从而达到缓存的效果（此方案来源于评论里的大佬）</p>
<pre><code class="hljs language-dockerfile copyable" lang="dockerfile"># 以这个镜像为基础去构建，这个镜像是已经装好项目依赖的镜像并推送到镜像仓库里，这里从镜像仓库拉下来
FROM project-base-image:latest

COPY . .

CMD yarn start
<span class="copy-code-btn">复制代码</span></code></pre>
<p>我用的是这种，这也是现在普遍大家都在用的</p>
</li>
<li>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fdocker%2Fbuild-push-action%2Fblob%2Fmaster%2Fdocs%2Fadvanced%2Fcache.md" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/docker/build-push-action/blob/master/docs/advanced/cache.md" ref="nofollow noopener noreferrer">docker 官方提供的 action 缓存方案</a></p>
</li>
<li>
<p>自托管 actions 运行机器</p>
<p>相当于 gitlab 的 runner 一样，自己提供运行器，自己提供的就不会每次都是干净的机器，<a href="https://link.juejin.cn/?target=https%3A%2F%2Fdocs.github.com%2Fcn%2Factions%2Fhosting-your-own-runners%2Fabout-self-hosted-runners%23requirements-for-self-hosted-runner-machines" target="_blank" rel="nofollow noopener noreferrer" title="https://docs.github.com/cn/actions/hosting-your-own-runners/about-self-hosted-runners#requirements-for-self-hosted-runner-machines" ref="nofollow noopener noreferrer">详情看 actions 官方文档</a></p>
</li>
</ol>
<p>参考资料：</p>
<ul>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fevilmartians.com%2Fchronicles%2Fbuild-images-on-github-actions-with-docker-layer-caching" target="_blank" rel="nofollow noopener noreferrer" title="https://evilmartians.com/chronicles/build-images-on-github-actions-with-docker-layer-caching" ref="nofollow noopener noreferrer">在 GitHub Actions 上使用 Docker 层缓存构建镜像</a></li>
</ul>
<h2 data-id="heading-10">最后</h2>
<p>项目仓库地址 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fiamobj%2Fwechat-bot" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/iamobj/wechat-bot" ref="nofollow noopener noreferrer">wechat-bot</a></p>
<p>文章有错误的地方欢迎指正，避免误人子弟</p>
<p><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/6cad5611ee6c48d88274698ba9ea978a_tplv-k3u1fbpfcp-zoom-in-crop-mark_4536_0_0_0.awebp" alt="img" loading="lazy" class="medium-zoom-image"></p></div><style>.markdown-body pre,.markdown-body pre>code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style></div></article> <div class="article-end" data-v-4b9f9746="" data-v-1ee0c924=""><div class="tag-list-box" data-v-4b9f9746="" data-v-1ee0c924=""><div class="tag-list" data-v-4b9f9746="" data-v-1ee0c924=""><div class="tag-list-title" data-v-4b9f9746="" data-v-1ee0c924="">分类：</div> <a href="https://juejin.cn/frontend" target="_blank" rel="" class="item category-item" data-v-1ee0c924="" data-v-4b9f9746=""><span class="tag-title" data-v-1ee0c924="">前端</span></a></div> <div class="tag-list" data-v-4b9f9746="" data-v-1ee0c924=""><div class="tag-list-title" data-v-4b9f9746="" data-v-1ee0c924="">标签：</div> <div class="tag-list-container" data-v-4b9f9746="" data-v-1ee0c924=""><a href="https://juejin.cn/tag/Docker" target="_blank" rel="" class="item tag-item" data-v-1ee0c924="" data-v-4b9f9746=""><span class="tag-title" data-v-1ee0c924="">Docker</span></a><a href="https://juejin.cn/tag/Node.js" target="_blank" rel="" class="item tag-item" data-v-1ee0c924="" data-v-4b9f9746=""><span class="tag-title" data-v-1ee0c924="">Node.js</span></a></div></div></div> <!----> <div data-fetch-key="1" class="extension-banner" data-v-ae3e6732="" data-v-1ee0c924="" data-v-4b9f9746=""><span class="banner-icon" data-v-ae3e6732=""></span> <div class="banner-wrapper" data-v-ae3e6732=""><a class="banner-title" data-v-ae3e6732="" href="https://juejin.cn/extension/?utm_source=standalone&amp;utm_medium=post&amp;utm_campaign=extension_promotion" target="_blank">
      安装掘金浏览器插件
    </a> <div class="banner-content" data-v-ae3e6732="">多内容聚合浏览、多引擎快捷搜索、多工具便捷提效、多模式随心畅享，你想要的，这里都有！</div></div> <a class="banner-action" data-v-ae3e6732="" href="https://juejin.cn/extension/?utm_source=standalone&amp;utm_medium=post&amp;utm_campaign=extension_promotion" target="_blank">前往安装</a></div></div> <div data-v-6a541d9e="" data-v-1ee0c924="" class="wrap category-course-recommend"><div data-v-6a541d9e="" class="title">相关课程</div> <div data-v-6a541d9e="" class="list"><div data-v-241f54a8="" data-v-6a541d9e="" data-booklet-id="7137945369635192836" class="book-card-wrap"><img data-v-241f54a8="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/5ba9dbd9622749b294312586219562f7_tplv-k3u1fbpfcp-zoom-mark-crop-v2_0_0_160_224.awebp" alt="cover" class="book-card-cover"> <div data-v-241f54a8="" class="book-card-info"><div data-v-241f54a8="" class="book-card-top"><div data-v-241f54a8="" title="SSR 实战：官网开发指南" class="book-card-title"><!----> <span data-v-241f54a8="" class="book-card-title-text">SSR 实战：官网开发指南</span></div> <div data-v-241f54a8="" class="book-card-content"><a data-v-0ef8bafa="" data-v-241f54a8="" href="https://juejin.cn/user/2714061017452557" target="_blank" rel="" class="username author-name"><span data-v-0ef8bafa="" class="name" style="max-width: 128px;">
      祯民
    </span> <!----> <!----> <!----> </a> <div data-v-241f54a8="" class="book-card-count">
          1319购买
        </div></div></div> <div data-v-241f54a8="" class="book-card-price-wrap"><div data-v-241f54a8="" class="book-card-price">¥14.95</div> <div data-v-241f54a8="" class="book-card-sale"><div data-v-241f54a8="" class="book-card-price-before-wrap"><div data-v-241f54a8="" class="book-card-price-before">¥29.9</div> <div data-v-241f54a8="" class="book-card-price-line"></div></div> <div data-v-241f54a8="" class="book-card-sale-text">
          限时优惠·倒计时5天
        </div></div></div></div></div><div data-v-241f54a8="" data-v-6a541d9e="" data-booklet-id="6844733750048210957" class="book-card-wrap"><img data-v-241f54a8="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/166a0387b91066b9_tplv-t2oaga2asx-zoom-mark-crop-v2_0_0_160_224.awebp" alt="cover" class="book-card-cover"> <div data-v-241f54a8="" class="book-card-info"><div data-v-241f54a8="" class="book-card-top"><div data-v-241f54a8="" title="前端性能优化原理与实践" class="book-card-title"><div data-v-241f54a8="" class="book-card-vip">VIP</div> <span data-v-241f54a8="" class="book-card-title-text">前端性能优化原理与实践</span></div> <div data-v-241f54a8="" class="book-card-content"><a data-v-0ef8bafa="" data-v-241f54a8="" href="https://juejin.cn/user/2400989094885495" target="_blank" rel="" class="username author-name"><span data-v-0ef8bafa="" class="name" style="max-width: 128px;">
      修言
    </span> <!----> <!----> <!----> </a> <div data-v-241f54a8="" class="book-card-count">
          12049购买
        </div></div></div> <div data-v-241f54a8="" class="book-card-price-wrap"><div data-v-241f54a8="" class="book-card-price">¥14.95</div> <div data-v-241f54a8="" class="book-card-sale"><div data-v-241f54a8="" class="book-card-price-before-wrap"><div data-v-241f54a8="" class="book-card-price-before">¥29.9</div> <div data-v-241f54a8="" class="book-card-price-line"></div></div> <div data-v-241f54a8="" class="book-card-sale-text">
          限时优惠·倒计时5天
        </div></div></div></div></div></div></div> <div data-v-7691896e="" data-v-1ee0c924="" class="wechat-banner wechat-banner" data-v-4b9f9746=""><img data-v-7691896e="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/default.49d4dd8.png" class="wechat-img"></div> <div data-v-38c0fdbe="" data-v-1ee0c924="" data-jj-helper="comment-container" class="container comment-list-box" id="comment-box" data-v-4b9f9746=""><div data-v-48a7e3c5="" data-v-38c0fdbe="" class="comment-form"><div data-v-48a7e3c5="" class="header"><span data-v-48a7e3c5="" class="header-title">评论</span></div><div data-v-48a7e3c5="" class="content"><div data-v-48a7e3c5="" class="avatar-box"><img data-v-248050e4="" data-v-47508ed8="" data-v-48a7e3c5="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/58aaf1326ac763d8a1054056f3b7f2ef.svg" alt="" class="lazy avatar avatar" loading="lazy"></div><div data-v-48a7e3c5="" class="form-box"><div data-v-7c7c7498="" data-v-48a7e3c5="" class="auth-card"><!----> <div data-v-48a7e3c5="" data-v-7c7c7498="" class="input-box"><div data-v-48a7e3c5="" data-v-7c7c7498="" contenteditable="true" spellcheck="false" placeholder="输入评论（Enter换行，Ctrl + Enter发送）" disabled="disabled" class="rich-input empty"></div><div data-v-48a7e3c5="" data-v-7c7c7498="" class="login-guide"><div data-v-48a7e3c5="" data-v-7c7c7498="" class="login-guide-text">看完啦，</div><div data-v-48a7e3c5="" data-v-7c7c7498="" class="login-guide-button">登录</div><div data-v-48a7e3c5="" data-v-7c7c7498="" class="login-guide-text">分享一下感受吧～</div></div><!----></div></div><div data-v-48a7e3c5="" class="action-box"><div data-v-9fe533ba="" data-v-48a7e3c5="" class="emoji-container emoji-btn" style="display: none;"><div data-v-9fe533ba="" class="emoji-box"><svg data-v-9fe533ba="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon"><path data-v-9fe533ba="" fill-rule="evenodd" clip-rule="evenodd" d="M8.00002 0.666504C12.0501 0.666504 15.3334 3.94975 15.3334 7.99984C15.3334 12.0499 12.0501 15.3332 8.00002 15.3332C3.94993 15.3332 0.666687 12.0499 0.666687 7.99984C0.666687 3.94975 3.94993 0.666504 8.00002 0.666504ZM8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2ZM10.6667 5.66667V7.66667H9.33333V5.66667H10.6667ZM6.66667 5.66667V7.66667H5.33333V5.66667H6.66667ZM10.0767 9.33333H11.0495C11.1804 9.33333 11.2866 9.43951 11.2866 9.57048C11.2866 9.60754 11.2779 9.64409 11.2612 9.67718L11.244 9.71053C10.6294 10.8739 9.40726 11.6667 7.99998 11.6667C6.61523 11.6667 5.40977 10.8991 4.7859 9.76612L4.73786 9.67593C4.67845 9.56052 4.72385 9.4188 4.83926 9.35939C4.87253 9.34226 4.90941 9.33333 4.94683 9.33333H5.92347C6.02396 9.33332 6.11908 9.37865 6.18238 9.4567C6.26207 9.55496 6.32833 9.62955 6.38117 9.68046C6.80074 10.0847 7.37133 10.3333 7.99998 10.3333C8.63289 10.3333 9.20694 10.0814 9.62728 9.67224C9.67791 9.62296 9.74135 9.55121 9.8176 9.45698C9.88089 9.37877 9.97611 9.33333 10.0767 9.33333Z"></path></svg> <span data-v-9fe533ba="">表情</span></div> <!----></div><div data-v-48a7e3c5="" class="image-btn" style="display: none;"><svg data-v-48a7e3c5="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon"><path data-v-48a7e3c5="" fill-rule="evenodd" clip-rule="evenodd" d="M14 1.3335C14.3514 1.3335 14.6394 1.60546 14.6648 1.95041L14.6666 2.00016V14.0002C14.6666 14.3516 14.3947 14.6396 14.0497 14.665L14 14.6668H1.99998C1.64853 14.6668 1.36059 14.3949 1.33514 14.0499L1.33331 14.0002V2.00016C1.33331 1.64871 1.60527 1.36077 1.95023 1.33532L1.99998 1.3335H14ZM13.3333 2.66618H2.66664V13.3328H13.3333V2.66618ZM11.9219 6.7879C11.9719 6.83791 12 6.90574 12 6.97647V11.7993C12 11.9098 11.9104 11.9993 11.8 11.9993H6.81615C6.7975 11.9993 6.77945 11.9968 6.76232 11.992L3.91042 11.9847C3.79996 11.9844 3.71063 11.8947 3.7109 11.7842C3.71102 11.7313 3.73209 11.6807 3.76948 11.6433L6.52468 8.88807C6.62882 8.78393 6.79766 8.78393 6.9018 8.88807L8.17297 10.1593L11.5447 6.7879C11.6489 6.68376 11.8177 6.68376 11.9219 6.7879ZM5.99997 3.99951V5.99951H3.99997V3.99951H5.99997Z"></path></svg><span data-v-48a7e3c5="">图片</span></div><div data-v-48a7e3c5="" class="submit" style="display: none;"><span data-v-48a7e3c5="">Ctrl + Enter</span><button data-v-48a7e3c5="" disabled="disabled" class="submit-btn">发表评论</button></div></div></div><input data-v-48a7e3c5="" type="file" class="hidden"></div></div> <div data-v-03178cda="" data-v-38c0fdbe="" class="container hot-list"><div data-v-5ca9a68f="" data-v-03178cda="" class="image-viewer-box"><!----></div> <div data-v-03178cda="" class="title">
    热门评论
    <svg data-v-03178cda="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-03178cda="" d="M12.8 5.2C13.9532 6.46 14.8 8.2 14.8 10C14.7039 12.8937 12.6843 15.1706 9.97973 15.8159C10.359 12.3442 7.77588 9.35406 7.77588 9.35406C7.77588 9.35406 7.99512 13.7064 6.79514 15.8104C4.03715 15.1428 2 12.7806 2 9.8C2 7.776 2.9336 5.9728 4.4 4.8C5.8608 3.7056 6.8 1.9656 6.8 0C9.684 0.4368 11.894 2.9264 11.894 5.932C11.894 6.5012 11.746 7.0652 11.6 7.6C12.1264 6.9024 12.6184 6.0876 12.8 5.2Z" fill="#F53F3F"></path></svg></div> <div data-v-03178cda="" class="list"><div data-v-28fac216="" data-v-03178cda="" class="comment" data-jj-helper-comment-id="6993127893660910349" data-jj-helper-item-id="" data-jj-helper-item-type=""><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-28fac216="" class="popover-box user-popover popover"><!---->  <a data-v-28fac216="" href="https://juejin.cn/user/888061123629997" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-28fac216="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/7be11c8779dcbc61d92167b6fb4ef39e_100x100.awebp" alt="无责任此方_修行中的头像" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-28fac216="" class="content-box"><div data-v-28fac216="" class="comment-main"><span data-v-28fac216="" class="delete">
        删除
      </span> <div data-v-28fac216="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-28fac216="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-28fac216="" href="https://juejin.cn/user/888061123629997" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 128px;">
    无责任此方_修行中
  </span> <span data-v-3de16c56="" data-v-0ef8bafa="" blank="true" class="rank"><img data-v-3de16c56="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/lv-4.a78c420.png" alt="lv-4" title="创作等级"></span> <img data-v-7b42e73d="" data-v-0ef8bafa="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/9b2f31c663d17de59dd9e5fff272bb85.svg" alt="掘友等级" title="掘友等级" class="jueyou-level"> <!----> </a></div> <!----> <span data-v-28fac216="" class="position">
          全干工程师 @ 公众号：此方的手账
        </span> <time data-v-28fac216="" datetime="1628214473000" title="Fri Aug 06 2021 09:47:53 GMT+0800 (Hong Kong Standard Time)" class="time">
          1年前
        </time></div> <div data-v-28fac216="" class="content">浅显易懂的文章，非常棒。给 Node image 瘦身也是我这边的需求之一，非常受用。感谢作者的分享。</div> <div data-v-28fac216="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-28fac216="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <div data-v-28fac216="" class="action-box"><div data-v-28fac216="" class="item dig-item"><svg data-v-28fac216="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-28fac216="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          1
        </div> <div data-v-28fac216="" class="item"><svg data-v-28fac216="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-28fac216="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          2
        </div></div></div> <div data-v-28fac216="" class="subcomment-wrapper"><!----> <div data-v-57847950="" data-v-28fac216="" class="sub-comment-list"><div data-v-57847950=""><div data-v-d11b5ece="" data-v-57847950="" class="subcomment sub-comment" data-jj-helper-comment-id="6993176857928254215" data-jj-helper-item-id="" data-jj-helper-item-type=""><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-d11b5ece="" href="https://juejin.cn/user/4072246798979719" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-d11b5ece="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/49c6deba3c8765f3d6a19ff34b32f926_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-d11b5ece="" class="content-box"><div data-v-d11b5ece="" class="content-wrapper"><span data-v-d11b5ece="" class="delete">
        删除
      </span> <div data-v-d11b5ece="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-d11b5ece="" href="https://juejin.cn/user/4072246798979719" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 10em;">
    iamc
  </span> <!----> <!----> <!----> </a></div> <span data-v-d11b5ece="" class="author-badge-text">
          （作者）
        </span> <!----> <time data-v-d11b5ece="" datetime="1628225873000" title="Fri Aug 06 2021 12:57:53 GMT+0800 (Hong Kong Standard Time)" class="time">
          1年前
        </time></div> <div data-v-d11b5ece="" class="content">感谢认可，花精力写的这篇干货分享出来就是希望能帮到大家<img class="emoji" draggable="false" "="" loading="lazy" alt="[呲牙]" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/jj_emoji_2.cd1e2bd.png"></div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <!----> <div data-v-d11b5ece="" class="action-box"><div data-v-d11b5ece="" class="item dig-item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-d11b5ece="" class="item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div><div data-v-d11b5ece="" data-v-57847950="" class="subcomment sub-comment" data-jj-helper-comment-id="7000668846680195848" data-jj-helper-item-id="" data-jj-helper-item-type=""><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-d11b5ece="" href="https://juejin.cn/user/888061123629997" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-d11b5ece="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/7be11c8779dcbc61d92167b6fb4ef39e_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-d11b5ece="" class="content-box"><div data-v-d11b5ece="" class="content-wrapper"><span data-v-d11b5ece="" class="delete">
        删除
      </span> <div data-v-d11b5ece="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-d11b5ece="" href="https://juejin.cn/user/888061123629997" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 10em;">
    无责任此方_修行中
  </span> <!----> <!----> <!----> </a></div> <!----> <div data-v-d11b5ece="" class="rely-box"><span data-v-d11b5ece="">回复</span> <div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-d11b5ece="" href="https://juejin.cn/user/4072246798979719" target="" rel="" class="repliedname" data-v-f1a2074a="" style="max-width: 10em;">
              iamc
            </a></div></div> <time data-v-d11b5ece="" datetime="1629970236000" title="Thu Aug 26 2021 17:30:36 GMT+0800 (Hong Kong Standard Time)" class="time">
          1年前
        </time></div> <div data-v-d11b5ece="" class="content">今天为新服务写Dockerfile，再次回来参考本文。因为是后端项目，图方便直接用了 node-alphine 的镜像然后装了一点点插件。打出来的镜像只有现有项目的1/3大小，很开心</div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <div data-v-d11b5ece="" class="parent-wrapper"><div data-v-d11b5ece="">“</div> <div data-v-d11b5ece="" class="parent-content">感谢认可，花精力写的这篇干货分享出来就是希望能帮到大家<img class="emoji" draggable="false" "="" loading="lazy" alt="[呲牙]" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/jj_emoji_2.cd1e2bd.png"></div> <div data-v-d11b5ece="">”</div></div> <div data-v-d11b5ece="" class="action-box"><div data-v-d11b5ece="" class="item dig-item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-d11b5ece="" class="item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div></div> <!----></div></div></div></div><div data-v-28fac216="" data-v-03178cda="" class="comment" data-jj-helper-comment-id="7130575158863512327" data-jj-helper-item-id="" data-jj-helper-item-type=""><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-28fac216="" class="popover-box user-popover popover"><!---->  <a data-v-28fac216="" href="https://juejin.cn/user/1415826705752104" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-28fac216="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/3176c78030e1ef3534b3e3e4e663e6d4_100x100.awebp" alt="Yangcn的头像" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-28fac216="" class="content-box"><div data-v-28fac216="" class="comment-main"><span data-v-28fac216="" class="delete">
        删除
      </span> <div data-v-28fac216="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-28fac216="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-28fac216="" href="https://juejin.cn/user/1415826705752104" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 128px;">
    Yangcn
  </span> <!----> <img data-v-7b42e73d="" data-v-0ef8bafa="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/65a6a28f15d70e5a77bf881c5ec5340d.svg" alt="掘友等级" title="掘友等级" class="jueyou-level"> <!----> </a></div> <!----> <span data-v-28fac216="" class="position">
          FE
        </span> <time data-v-28fac216="" datetime="1660216491000" title="Thu Aug 11 2022 19:14:51 GMT+0800 (Hong Kong Standard Time)" class="time">
          2月前
        </time></div> <div data-v-28fac216="" class="content">为什么最后一步要拷贝 node_modules，打包后的 dist 不就可以直接运行吗</div> <div data-v-28fac216="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-28fac216="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <div data-v-28fac216="" class="action-box"><div data-v-28fac216="" class="item dig-item"><svg data-v-28fac216="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-28fac216="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-28fac216="" class="item"><svg data-v-28fac216="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-28fac216="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          2
        </div></div></div> <div data-v-28fac216="" class="subcomment-wrapper"><!----> <div data-v-57847950="" data-v-28fac216="" class="sub-comment-list"><div data-v-57847950=""><div data-v-d11b5ece="" data-v-57847950="" class="subcomment sub-comment" data-jj-helper-comment-id="7148786226227675940" data-jj-helper-item-id="" data-jj-helper-item-type=""><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-d11b5ece="" href="https://juejin.cn/user/4072246798979719" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-d11b5ece="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/49c6deba3c8765f3d6a19ff34b32f926_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-d11b5ece="" class="content-box"><div data-v-d11b5ece="" class="content-wrapper"><span data-v-d11b5ece="" class="delete">
        删除
      </span> <div data-v-d11b5ece="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-d11b5ece="" href="https://juejin.cn/user/4072246798979719" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 10em;">
    iamc
  </span> <!----> <!----> <!----> </a></div> <span data-v-d11b5ece="" class="author-badge-text">
          （作者）
        </span> <!----> <time data-v-d11b5ece="" datetime="1664456572000" title="Thu Sep 29 2022 21:02:52 GMT+0800 (Hong Kong Standard Time)" class="time">
          27天前
        </time></div> <div data-v-d11b5ece="" class="content">因为我示例的项目不用打包，如果是打包后的产物，那就不需要</div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <!----> <div data-v-d11b5ece="" class="action-box"><div data-v-d11b5ece="" class="item dig-item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-d11b5ece="" class="item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div><div data-v-d11b5ece="" data-v-57847950="" class="subcomment sub-comment" data-jj-helper-comment-id="7152727326605296398" data-jj-helper-item-id="" data-jj-helper-item-type=""><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-d11b5ece="" href="https://juejin.cn/user/4125023360005463" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-d11b5ece="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/27c337a37e60222770d1db6a1ccd1e6c_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-d11b5ece="" class="content-box"><div data-v-d11b5ece="" class="content-wrapper"><span data-v-d11b5ece="" class="delete">
        删除
      </span> <div data-v-d11b5ece="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-d11b5ece="" href="https://juejin.cn/user/4125023360005463" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 10em;">
    Jackzhou
  </span> <!----> <!----> <!----> </a></div> <!----> <!----> <time data-v-d11b5ece="" datetime="1665374242000" title="Mon Oct 10 2022 11:57:22 GMT+0800 (Hong Kong Standard Time)" class="time">
          17天前
        </time></div> <div data-v-d11b5ece="" class="content">node端项目不行的，比如nest,只有dist是没法运行的，因为不像纯前端工程项目，打包的时候会通过打包工具把依赖打包进去</div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <!----> <div data-v-d11b5ece="" class="action-box"><div data-v-d11b5ece="" class="item dig-item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-d11b5ece="" class="item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div></div> <!----></div></div></div></div></div></div> <div data-v-38c0fdbe="" class="comment-list-wrapper"><div data-v-38c0fdbe="" class="title">
      全部评论 15
      <div data-v-38c0fdbe="" class="sort"><div data-v-38c0fdbe="" class="item active"><svg data-v-38c0fdbe="" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-38c0fdbe="" fill-rule="evenodd" clip-rule="evenodd" d="M5.99951 0.5C9.03708 0.5 11.4995 2.96243 11.4995 6C11.4995 9.03757 9.03708 11.5 5.99951 11.5C2.96195 11.5 0.499512 9.03757 0.499512 6C0.499512 2.96243 2.96195 0.5 5.99951 0.5ZM6.25 3.49988C6.38807 3.49988 6.5 3.61181 6.5 3.74988V5.49988H8.25C8.38807 5.49988 8.5 5.61181 8.5 5.74988V6.24988C8.5 6.38795 8.38807 6.49988 8.25 6.49988H5.75C5.61193 6.49988 5.5 6.38795 5.5 6.24988V3.74988C5.5 3.61181 5.61193 3.49988 5.75 3.49988H6.25Z"></path></svg>
          最新
        </div> <div data-v-38c0fdbe="" class="item"><svg data-v-38c0fdbe="" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-38c0fdbe="" d="M4.88933 0.613974C4.92947 0.616946 4.96831 0.629568 5.00253 0.650767C6.67348 1.68589 7.55141 3.13884 7.63632 5.00962C7.947 5.00962 8.2245 4.65999 8.46882 3.96072L8.49487 3.88447C8.53862 3.75351 8.68025 3.68282 8.8112 3.72656C8.83398 3.73417 8.85554 3.74502 8.87522 3.75878C9.96316 4.5193 10.5048 5.50231 10.5 6.70782C10.4999 6.73762 10.4982 6.76675 10.495 6.7952C10.4985 6.86294 10.5 6.93131 10.5 7.00005C10.5 9.48533 8.48528 11.5 6 11.5C3.51472 11.5 1.5 9.48533 1.5 7.00005C1.5 6.90255 1.5031 6.80578 1.50921 6.70983C1.5062 6.70917 1.5031 6.70849 1.5 6.70782C1.50864 6.60849 1.52139 6.50994 1.53824 6.41219C1.54515 6.35775 1.55321 6.30373 1.56222 6.25003L1.57017 6.24983C1.7622 5.3813 2.28426 4.57601 3.13635 3.83394C4.00892 3.07405 4.50079 2.11523 4.61198 0.957499L4.62156 0.844839C4.63175 0.707146 4.75163 0.603784 4.88933 0.613974Z"></path></svg>
          最热
        </div></div></div> <div data-v-065db163="" data-v-38c0fdbe="" class="comment-list comment-list"><div data-v-5ca9a68f="" data-v-065db163="" class="image-viewer-box"><!----></div> <div data-v-28fac216="" data-v-065db163="" class="comment" data-jj-helper-comment-id="7130575158863512327"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-28fac216="" class="popover-box user-popover popover"><!---->  <a data-v-28fac216="" href="https://juejin.cn/user/1415826705752104" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-28fac216="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/3176c78030e1ef3534b3e3e4e663e6d4_100x100.awebp" alt="Yangcn的头像" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-28fac216="" class="content-box"><div data-v-28fac216="" class="comment-main"><span data-v-28fac216="" class="delete">
        删除
      </span> <div data-v-28fac216="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-28fac216="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-28fac216="" href="https://juejin.cn/user/1415826705752104" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 128px;">
    Yangcn
  </span> <!----> <img data-v-7b42e73d="" data-v-0ef8bafa="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/65a6a28f15d70e5a77bf881c5ec5340d.svg" alt="掘友等级" title="掘友等级" class="jueyou-level"> <!----> </a></div> <!----> <span data-v-28fac216="" class="position">
          FE
        </span> <time data-v-28fac216="" datetime="1660216491000" title="Thu Aug 11 2022 19:14:51 GMT+0800 (Hong Kong Standard Time)" class="time">
          2月前
        </time></div> <div data-v-28fac216="" class="content">为什么最后一步要拷贝 node_modules，打包后的 dist 不就可以直接运行吗</div> <div data-v-28fac216="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-28fac216="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <div data-v-28fac216="" class="action-box"><div data-v-28fac216="" class="item dig-item"><svg data-v-28fac216="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-28fac216="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-28fac216="" class="item"><svg data-v-28fac216="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-28fac216="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          2
        </div></div></div> <div data-v-28fac216="" class="subcomment-wrapper"><!----> <div data-v-57847950="" data-v-28fac216="" class="sub-comment-list"><div data-v-57847950=""><div data-v-d11b5ece="" data-v-57847950="" class="subcomment sub-comment" data-jj-helper-comment-id="7148786226227675940"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-d11b5ece="" href="https://juejin.cn/user/4072246798979719" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-d11b5ece="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/49c6deba3c8765f3d6a19ff34b32f926_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-d11b5ece="" class="content-box"><div data-v-d11b5ece="" class="content-wrapper"><span data-v-d11b5ece="" class="delete">
        删除
      </span> <div data-v-d11b5ece="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-d11b5ece="" href="https://juejin.cn/user/4072246798979719" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 10em;">
    iamc
  </span> <!----> <!----> <!----> </a></div> <span data-v-d11b5ece="" class="author-badge-text">
          （作者）
        </span> <!----> <time data-v-d11b5ece="" datetime="1664456572000" title="Thu Sep 29 2022 21:02:52 GMT+0800 (Hong Kong Standard Time)" class="time">
          27天前
        </time></div> <div data-v-d11b5ece="" class="content">因为我示例的项目不用打包，如果是打包后的产物，那就不需要</div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <!----> <div data-v-d11b5ece="" class="action-box"><div data-v-d11b5ece="" class="item dig-item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-d11b5ece="" class="item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div><div data-v-d11b5ece="" data-v-57847950="" class="subcomment sub-comment" data-jj-helper-comment-id="7152727326605296398"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-d11b5ece="" href="https://juejin.cn/user/4125023360005463" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-d11b5ece="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/27c337a37e60222770d1db6a1ccd1e6c_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-d11b5ece="" class="content-box"><div data-v-d11b5ece="" class="content-wrapper"><span data-v-d11b5ece="" class="delete">
        删除
      </span> <div data-v-d11b5ece="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-d11b5ece="" href="https://juejin.cn/user/4125023360005463" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 10em;">
    Jackzhou
  </span> <!----> <!----> <!----> </a></div> <!----> <!----> <time data-v-d11b5ece="" datetime="1665374242000" title="Mon Oct 10 2022 11:57:22 GMT+0800 (Hong Kong Standard Time)" class="time">
          17天前
        </time></div> <div data-v-d11b5ece="" class="content">node端项目不行的，比如nest,只有dist是没法运行的，因为不像纯前端工程项目，打包的时候会通过打包工具把依赖打包进去</div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <!----> <div data-v-d11b5ece="" class="action-box"><div data-v-d11b5ece="" class="item dig-item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-d11b5ece="" class="item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div></div> <!----></div></div></div></div><div data-v-28fac216="" data-v-065db163="" class="comment" data-jj-helper-comment-id="7102718079603589895"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-28fac216="" class="popover-box user-popover popover"><!---->  <a data-v-28fac216="" href="https://juejin.cn/user/3456520290051566" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-28fac216="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/f68dd7dd10f2f50ee3738057bdc113c1_100x100.awebp" alt="孤寂无情的头像" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-28fac216="" class="content-box"><div data-v-28fac216="" class="comment-main"><span data-v-28fac216="" class="delete">
        删除
      </span> <div data-v-28fac216="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-28fac216="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-28fac216="" href="https://juejin.cn/user/3456520290051566" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 128px;">
    孤寂无情
  </span> <span data-v-3de16c56="" data-v-0ef8bafa="" blank="true" class="rank"><img data-v-3de16c56="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/lv-2.99ba5b2.png" alt="lv-2" title="创作等级"></span> <img data-v-7b42e73d="" data-v-0ef8bafa="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/8c6985e2aa4c06f307ae3734da4b43ac.svg" alt="掘友等级" title="掘友等级" class="jueyou-level"> <!----> </a></div> <!----> <span data-v-28fac216="" class="position">
          web前端工程师 @ 杭州某公司
        </span> <time data-v-28fac216="" datetime="1653730515000" title="Sat May 28 2022 17:35:15 GMT+0800 (Hong Kong Standard Time)" class="time">
          5月前
        </time></div> <div data-v-28fac216="" class="content hasimage">不太理解 总是错误在这一行<br>executor failed running [/bin/sh -c apk add --no-cache --update nodejs=14.17.4-r0 yarn=1.22.10-r0]: exit code: 2</div> <div data-v-28fac216="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-28fac216="" class="limit-btn" style="display: none;">
        收起
      </div> <img data-v-248050e4="" data-v-28fac216="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/bd33d38b4b8a479ba86dc07e3aaa018d_tplv-k3u1fbpfcp-no-mark_320_320_320_320.awebp" alt="" class="lazy viewable" data-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bd33d38b4b8a479ba86dc07e3aaa018d~tplv-k3u1fbpfcp-watermark.image?" style="" loading="lazy"> <div data-v-28fac216="" class="action-box"><div data-v-28fac216="" class="item dig-item"><svg data-v-28fac216="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-28fac216="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-28fac216="" class="item"><svg data-v-28fac216="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-28fac216="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          1
        </div></div></div> <div data-v-28fac216="" class="subcomment-wrapper"><!----> <div data-v-57847950="" data-v-28fac216="" class="sub-comment-list"><div data-v-57847950=""><div data-v-d11b5ece="" data-v-57847950="" class="subcomment sub-comment" data-jj-helper-comment-id="7110146084135093005"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-d11b5ece="" href="https://juejin.cn/user/4072246798979719" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-d11b5ece="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/49c6deba3c8765f3d6a19ff34b32f926_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-d11b5ece="" class="content-box"><div data-v-d11b5ece="" class="content-wrapper"><span data-v-d11b5ece="" class="delete">
        删除
      </span> <div data-v-d11b5ece="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-d11b5ece="" href="https://juejin.cn/user/4072246798979719" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 10em;">
    iamc
  </span> <!----> <!----> <!----> </a></div> <span data-v-d11b5ece="" class="author-badge-text">
          （作者）
        </span> <!----> <time data-v-d11b5ece="" datetime="1655459982000" title="Fri Jun 17 2022 17:59:42 GMT+0800 (Hong Kong Standard Time)" class="time">
          4月前
        </time></div> <div data-v-d11b5ece="" class="content">在方案二下更新了你这种情况的说明，有对应的解决办法</div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <!----> <div data-v-d11b5ece="" class="action-box"><div data-v-d11b5ece="" class="item dig-item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-d11b5ece="" class="item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div></div> <!----></div></div></div></div><div data-v-28fac216="" data-v-065db163="" class="comment" data-jj-helper-comment-id="7046369378379776805"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-28fac216="" class="popover-box user-popover popover"><!---->  <a data-v-28fac216="" href="https://juejin.cn/user/2770425032216648" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-28fac216="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/4f0450bdb1fca0b5eaff494bdeaa2648_100x100.awebp" alt="张小米儿的头像" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-28fac216="" class="content-box"><div data-v-28fac216="" class="comment-main"><span data-v-28fac216="" class="delete">
        删除
      </span> <div data-v-28fac216="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-28fac216="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-28fac216="" href="https://juejin.cn/user/2770425032216648" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 128px;">
    张小米儿
  </span> <span data-v-3de16c56="" data-v-0ef8bafa="" blank="true" class="rank"><img data-v-3de16c56="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/lv-2.99ba5b2.png" alt="lv-2" title="创作等级"></span> <img data-v-7b42e73d="" data-v-0ef8bafa="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/65a6a28f15d70e5a77bf881c5ec5340d.svg" alt="掘友等级" title="掘友等级" class="jueyou-level"> <!----> </a></div> <!----> <span data-v-28fac216="" class="position">
          前端工程师
        </span> <time data-v-28fac216="" datetime="1640610719000" title="Mon Dec 27 2021 21:11:59 GMT+0800 (Hong Kong Standard Time)" class="time">
          10月前
        </time></div> <div data-v-28fac216="" class="content">方案2貌似太纯净了<img class="emoji" draggable="false" "="" loading="lazy" alt="[捂脸]" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/jj_emoji_28.8981538.png">，redis报这个错：queueMicrotask is not defined</div> <div data-v-28fac216="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-28fac216="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <div data-v-28fac216="" class="action-box"><div data-v-28fac216="" class="item dig-item"><svg data-v-28fac216="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-28fac216="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-28fac216="" class="item"><svg data-v-28fac216="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-28fac216="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <div data-v-28fac216="" class="subcomment-wrapper"><!----> <!----></div></div></div><div data-v-28fac216="" data-v-065db163="" class="comment" data-jj-helper-comment-id="6993715642411287333"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-28fac216="" class="popover-box user-popover popover"><!---->  <a data-v-28fac216="" href="https://juejin.cn/user/2436173498420910" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-28fac216="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/b37e2e59f5113e27a81ec9d80bae19aa_100x100.awebp" alt="netwjx招前端的头像" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-28fac216="" class="content-box"><div data-v-28fac216="" class="comment-main"><span data-v-28fac216="" class="delete">
        删除
      </span> <div data-v-28fac216="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-28fac216="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-28fac216="" href="https://juejin.cn/user/2436173498420910" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 128px;">
    netwjx招前端
  </span> <span data-v-3de16c56="" data-v-0ef8bafa="" blank="true" class="rank"><img data-v-3de16c56="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/lv-3.7938ebc.png" alt="lv-3" title="创作等级"></span> <img data-v-7b42e73d="" data-v-0ef8bafa="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/9b2f31c663d17de59dd9e5fff272bb85.svg" alt="掘友等级" title="掘友等级" class="jueyou-level"> <!----> </a></div> <!----> <span data-v-28fac216="" class="position">
          前端 @ 快手
        </span> <time data-v-28fac216="" datetime="1628351318000" title="Sat Aug 07 2021 23:48:38 GMT+0800 (Hong Kong Standard Time)" class="time">
          1年前
        </time></div> <div data-v-28fac216="" class="content">多阶段构建这个方案挺好玩的<br>有个疑问? install 这一阶段, 如何知道自己依赖package.json, 当package.json改变时, 需要重新执行, 而不是利用缓存?</div> <div data-v-28fac216="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-28fac216="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <div data-v-28fac216="" class="action-box"><div data-v-28fac216="" class="item dig-item"><svg data-v-28fac216="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-28fac216="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-28fac216="" class="item"><svg data-v-28fac216="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-28fac216="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          1
        </div></div></div> <div data-v-28fac216="" class="subcomment-wrapper"><!----> <div data-v-57847950="" data-v-28fac216="" class="sub-comment-list"><div data-v-57847950=""><div data-v-d11b5ece="" data-v-57847950="" class="subcomment sub-comment" data-jj-helper-comment-id="6993853326681604894"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-d11b5ece="" href="https://juejin.cn/user/4072246798979719" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-d11b5ece="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/49c6deba3c8765f3d6a19ff34b32f926_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-d11b5ece="" class="content-box"><div data-v-d11b5ece="" class="content-wrapper"><span data-v-d11b5ece="" class="delete">
        删除
      </span> <div data-v-d11b5ece="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-d11b5ece="" href="https://juejin.cn/user/4072246798979719" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 10em;">
    iamc
  </span> <!----> <!----> <!----> </a></div> <span data-v-d11b5ece="" class="author-badge-text">
          （作者）
        </span> <!----> <time data-v-d11b5ece="" datetime="1628383377000" title="Sun Aug 08 2021 08:42:57 GMT+0800 (Hong Kong Standard Time)" class="time">
          1年前
        </time></div> <div data-v-d11b5ece="" class="content">某一层镜像缓存失效会导致后面的镜像层缓存失效，docker怎么判断文件变化的，在优化前言有说到，你可以翻上去看看</div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <!----> <div data-v-d11b5ece="" class="action-box"><div data-v-d11b5ece="" class="item dig-item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          1
        </div> <div data-v-d11b5ece="" class="item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div></div> <!----></div></div></div></div><div data-v-28fac216="" data-v-065db163="" class="comment" data-jj-helper-comment-id="6993127893660910349"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-28fac216="" class="popover-box user-popover popover"><!---->  <a data-v-28fac216="" href="https://juejin.cn/user/888061123629997" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-28fac216="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/7be11c8779dcbc61d92167b6fb4ef39e_100x100.awebp" alt="无责任此方_修行中的头像" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-28fac216="" class="content-box"><div data-v-28fac216="" class="comment-main"><span data-v-28fac216="" class="delete">
        删除
      </span> <div data-v-28fac216="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-28fac216="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-28fac216="" href="https://juejin.cn/user/888061123629997" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 128px;">
    无责任此方_修行中
  </span> <span data-v-3de16c56="" data-v-0ef8bafa="" blank="true" class="rank"><img data-v-3de16c56="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/lv-4.a78c420.png" alt="lv-4" title="创作等级"></span> <img data-v-7b42e73d="" data-v-0ef8bafa="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/9b2f31c663d17de59dd9e5fff272bb85.svg" alt="掘友等级" title="掘友等级" class="jueyou-level"> <!----> </a></div> <!----> <span data-v-28fac216="" class="position">
          全干工程师 @ 公众号：此方的手账
        </span> <time data-v-28fac216="" datetime="1628214473000" title="Fri Aug 06 2021 09:47:53 GMT+0800 (Hong Kong Standard Time)" class="time">
          1年前
        </time></div> <div data-v-28fac216="" class="content">浅显易懂的文章，非常棒。给 Node image 瘦身也是我这边的需求之一，非常受用。感谢作者的分享。</div> <div data-v-28fac216="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-28fac216="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <div data-v-28fac216="" class="action-box"><div data-v-28fac216="" class="item dig-item"><svg data-v-28fac216="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-28fac216="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          1
        </div> <div data-v-28fac216="" class="item"><svg data-v-28fac216="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-28fac216="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          2
        </div></div></div> <div data-v-28fac216="" class="subcomment-wrapper"><!----> <div data-v-57847950="" data-v-28fac216="" class="sub-comment-list"><div data-v-57847950=""><div data-v-d11b5ece="" data-v-57847950="" class="subcomment sub-comment" data-jj-helper-comment-id="6993176857928254215"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-d11b5ece="" href="https://juejin.cn/user/4072246798979719" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-d11b5ece="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/49c6deba3c8765f3d6a19ff34b32f926_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-d11b5ece="" class="content-box"><div data-v-d11b5ece="" class="content-wrapper"><span data-v-d11b5ece="" class="delete">
        删除
      </span> <div data-v-d11b5ece="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-d11b5ece="" href="https://juejin.cn/user/4072246798979719" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 10em;">
    iamc
  </span> <!----> <!----> <!----> </a></div> <span data-v-d11b5ece="" class="author-badge-text">
          （作者）
        </span> <!----> <time data-v-d11b5ece="" datetime="1628225873000" title="Fri Aug 06 2021 12:57:53 GMT+0800 (Hong Kong Standard Time)" class="time">
          1年前
        </time></div> <div data-v-d11b5ece="" class="content">感谢认可，花精力写的这篇干货分享出来就是希望能帮到大家<img class="emoji" draggable="false" "="" loading="lazy" alt="[呲牙]" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/jj_emoji_2.cd1e2bd.png"></div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <!----> <div data-v-d11b5ece="" class="action-box"><div data-v-d11b5ece="" class="item dig-item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-d11b5ece="" class="item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div><div data-v-d11b5ece="" data-v-57847950="" class="subcomment sub-comment" data-jj-helper-comment-id="7000668846680195848"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-d11b5ece="" href="https://juejin.cn/user/888061123629997" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-d11b5ece="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/7be11c8779dcbc61d92167b6fb4ef39e_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-d11b5ece="" class="content-box"><div data-v-d11b5ece="" class="content-wrapper"><span data-v-d11b5ece="" class="delete">
        删除
      </span> <div data-v-d11b5ece="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-d11b5ece="" href="https://juejin.cn/user/888061123629997" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 10em;">
    无责任此方_修行中
  </span> <!----> <!----> <!----> </a></div> <!----> <div data-v-d11b5ece="" class="rely-box"><span data-v-d11b5ece="">回复</span> <div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-d11b5ece="" href="https://juejin.cn/user/4072246798979719" target="" rel="" class="repliedname" data-v-f1a2074a="" style="max-width: 10em;">
              iamc
            </a></div></div> <time data-v-d11b5ece="" datetime="1629970236000" title="Thu Aug 26 2021 17:30:36 GMT+0800 (Hong Kong Standard Time)" class="time">
          1年前
        </time></div> <div data-v-d11b5ece="" class="content">今天为新服务写Dockerfile，再次回来参考本文。因为是后端项目，图方便直接用了 node-alphine 的镜像然后装了一点点插件。打出来的镜像只有现有项目的1/3大小，很开心</div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <div data-v-d11b5ece="" class="parent-wrapper"><div data-v-d11b5ece="">“</div> <div data-v-d11b5ece="" class="parent-content">感谢认可，花精力写的这篇干货分享出来就是希望能帮到大家<img class="emoji" draggable="false" "="" loading="lazy" alt="[呲牙]" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/jj_emoji_2.cd1e2bd.png"></div> <div data-v-d11b5ece="">”</div></div> <div data-v-d11b5ece="" class="action-box"><div data-v-d11b5ece="" class="item dig-item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-d11b5ece="" class="item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div></div> <!----></div></div></div></div><div data-v-28fac216="" data-v-065db163="" class="comment" data-jj-helper-comment-id="6992085947664548616"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-28fac216="" class="popover-box user-popover popover"><!---->  <a data-v-28fac216="" href="https://juejin.cn/user/342703357306167" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-28fac216="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/338c5fed9cb8b28d199868b2f2906b91_100x100.awebp" alt="一米八的萝卜的头像" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-28fac216="" class="content-box"><div data-v-28fac216="" class="comment-main"><span data-v-28fac216="" class="delete">
        删除
      </span> <div data-v-28fac216="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-28fac216="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-28fac216="" href="https://juejin.cn/user/342703357306167" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 128px;">
    一米八的萝卜
  </span> <span data-v-3de16c56="" data-v-0ef8bafa="" blank="true" class="rank"><img data-v-3de16c56="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/lv-4.a78c420.png" alt="lv-4" title="创作等级"></span> <img data-v-7b42e73d="" data-v-0ef8bafa="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/65a6a28f15d70e5a77bf881c5ec5340d.svg" alt="掘友等级" title="掘友等级" class="jueyou-level"> <div data-v-38a29e30="" data-v-0ef8bafa="" class="vip-level"><span data-v-38a29e30="" class="tooltip"><div class="byte-tooltip byte-tooltip--dark" style="display: none;">
        VIP.3 渐入佳境
      </div><span class="byte-tooltip__wrapper"><img data-v-38a29e30="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/ffdbad884aa0e7884cbcf924226df6ce.svg" alt=""></span></span></div> </a></div> <!----> <span data-v-28fac216="" class="position">
          fe
        </span> <time data-v-28fac216="" datetime="1627971877000" title="Tue Aug 03 2021 14:24:37 GMT+0800 (Hong Kong Standard Time)" class="time">
          1年前
        </time></div> <div data-v-28fac216="" class="content"><img class="emoji old" draggable="false" "="" loading="lazy" alt="👍" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/1f44d.svg_tplv-t2oaga2asx-image.image"> 讲的很好了，文中也说了基本上市面上现有的cicd中镜像的构建都是基于docker in docker的模式 所以每次构建都是一个新的docker实例所以根本没法复用缓存。<br>在node中，构建最耗时的就是node_modules的安装每次构建都要install太慢了。。<br>我司的做法是把构建好的包依赖打成一个镜像，通过镜像去缓存。</div> <div data-v-28fac216="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-28fac216="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <div data-v-28fac216="" class="action-box"><div data-v-28fac216="" class="item dig-item"><svg data-v-28fac216="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-28fac216="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-28fac216="" class="item"><svg data-v-28fac216="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-28fac216="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          1
        </div></div></div> <div data-v-28fac216="" class="subcomment-wrapper"><!----> <div data-v-57847950="" data-v-28fac216="" class="sub-comment-list"><div data-v-57847950=""><div data-v-d11b5ece="" data-v-57847950="" class="subcomment sub-comment" data-jj-helper-comment-id="6992154481433805581"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-d11b5ece="" href="https://juejin.cn/user/4072246798979719" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-d11b5ece="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/49c6deba3c8765f3d6a19ff34b32f926_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-d11b5ece="" class="content-box"><div data-v-d11b5ece="" class="content-wrapper"><span data-v-d11b5ece="" class="delete">
        删除
      </span> <div data-v-d11b5ece="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-d11b5ece="" href="https://juejin.cn/user/4072246798979719" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 10em;">
    iamc
  </span> <!----> <!----> <!----> </a></div> <span data-v-d11b5ece="" class="author-badge-text">
          （作者）
        </span> <!----> <time data-v-d11b5ece="" datetime="1627987832000" title="Tue Aug 03 2021 18:50:32 GMT+0800 (Hong Kong Standard Time)" class="time">
          1年前
        </time></div> <div data-v-d11b5ece="" class="content">是个不错的做法<img class="emoji old" draggable="false" "="" loading="lazy" alt="👏" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/1f44f.svg_tplv-t2oaga2asx-image.image">，我把这点也加上去</div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <!----> <div data-v-d11b5ece="" class="action-box"><div data-v-d11b5ece="" class="item dig-item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-d11b5ece="" class="item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div></div> <!----></div></div></div></div><div data-v-28fac216="" data-v-065db163="" class="comment" data-jj-helper-comment-id="6991712287354848008"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-28fac216="" class="popover-box user-popover popover"><!---->  <a data-v-28fac216="" href="https://juejin.cn/user/4072246798979719" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-28fac216="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/49c6deba3c8765f3d6a19ff34b32f926_100x100.awebp" alt="iamc的头像" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-28fac216="" class="content-box"><div data-v-28fac216="" class="comment-main"><span data-v-28fac216="" class="delete">
        删除
      </span> <div data-v-28fac216="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-28fac216="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-28fac216="" href="https://juejin.cn/user/4072246798979719" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 128px;">
    iamc
  </span> <span data-v-3de16c56="" data-v-0ef8bafa="" blank="true" class="rank"><img data-v-3de16c56="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/lv-3.7938ebc.png" alt="lv-3" title="创作等级"></span> <img data-v-7b42e73d="" data-v-0ef8bafa="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/65a6a28f15d70e5a77bf881c5ec5340d.svg" alt="掘友等级" title="掘友等级" class="jueyou-level"> <!----> </a></div> <span data-v-28fac216="" class="author-badge-text">
          （作者）
        </span> <!----> <time data-v-28fac216="" datetime="1627884876000" title="Mon Aug 02 2021 14:14:36 GMT+0800 (Hong Kong Standard Time)" class="time">
          1年前
        </time></div> <div data-v-28fac216="" class="content hasimage">公司调整，所在部门发展重在后端，前端已经处于一个维护、没有新需求的状态，不想这么混下去，各位大佬们有没有需要前端 coder 的，拉我一个，base 深圳，邮箱 c@rhc.im</div> <div data-v-28fac216="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-28fac216="" class="limit-btn" style="display: none;">
        收起
      </div> <img data-v-248050e4="" data-v-28fac216="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/c837afb0e2b0423d9bbd9aa96d452a64_tplv-k3u1fbpfcp-no-mark_320_320_320_320.awebp" alt="" class="lazy viewable" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c837afb0e2b0423d9bbd9aa96d452a64~tplv-k3u1fbpfcp-watermark.image" style="" loading="lazy"> <div data-v-28fac216="" class="action-box"><div data-v-28fac216="" class="item dig-item"><svg data-v-28fac216="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-28fac216="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-28fac216="" class="item"><svg data-v-28fac216="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-28fac216="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          1
        </div></div></div> <div data-v-28fac216="" class="subcomment-wrapper"><!----> <div data-v-57847950="" data-v-28fac216="" class="sub-comment-list"><div data-v-57847950=""><div data-v-d11b5ece="" data-v-57847950="" class="subcomment sub-comment" data-jj-helper-comment-id="6993218483936985887"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-d11b5ece="" href="https://juejin.cn/user/940837681773917" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-d11b5ece="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/d49a507bb38e3c194048602518cf198d_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-d11b5ece="" class="content-box"><div data-v-d11b5ece="" class="content-wrapper"><span data-v-d11b5ece="" class="delete">
        删除
      </span> <div data-v-d11b5ece="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-d11b5ece="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-d11b5ece="" href="https://juejin.cn/user/940837681773917" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 10em;">
    AnthonyACE
  </span> <!----> <!----> <!----> </a></div> <!----> <!----> <time data-v-d11b5ece="" datetime="1628235565000" title="Fri Aug 06 2021 15:39:25 GMT+0800 (Hong Kong Standard Time)" class="time">
          1年前
        </time></div> <div data-v-d11b5ece="" class="content">感谢分享，文章写得不错，我们公司在招聘前端，发了一份邀请给你。可以交流下</div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-d11b5ece="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <!----> <div data-v-d11b5ece="" class="action-box"><div data-v-d11b5ece="" class="item dig-item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16952C8.66569 2.09661 8.78195 2.06124 8.88247 2.0912C8.97653 2.11923 9.23851 2.25916 9.50988 2.96799C9.64419 3.31881 9.9356 4.2424 9.42155 6.05431C9.29751 6.49152 9.61394 6.95303 10.0926 6.95971L13.492 7.00716L13.492 7.00721H13.4991C13.6049 7.00721 13.7228 7.01986 13.8134 7.05898C13.8544 7.07671 13.8815 7.09639 13.8999 7.116C13.9166 7.13375 13.9368 7.16247 13.9515 7.21636C13.9848 7.33784 14.0228 7.74712 13.9473 8.42262C13.874 9.07857 13.698 9.94479 13.341 10.9598C13.0424 11.8088 12.6601 12.5292 12.0684 13.4879C12.0558 13.5052 12.0462 13.5197 12.0418 13.5265L12.0404 13.5285C12.0292 13.5454 12.0242 13.5531 12.018 13.5618C12.0076 13.5764 12.0018 13.582 11.9983 13.585C11.996 13.587 11.9908 13.5912 11.9777 13.5959C11.9638 13.6009 11.9311 13.61 11.8706 13.61H5.56278L5.56373 6.58489C5.87126 6.41901 6.19881 6.20128 6.54112 5.84059C6.93883 5.42152 7.33789 4.8294 7.76254 3.94183C7.84974 3.75957 7.91745 3.55962 7.97574 3.37762C7.99264 3.32486 8.0087 3.27379 8.02438 3.22393L8.02439 3.22389C8.066 3.09158 8.10495 2.96776 8.14985 2.84312C8.2758 2.49352 8.40247 2.28101 8.56162 2.16952ZM10.452 2.60729C10.1323 1.77209 9.70208 1.28277 9.17063 1.12437C8.64564 0.967902 8.20308 1.18891 7.98278 1.34325C7.55169 1.64525 7.33837 2.11908 7.20071 2.5012C7.14817 2.64705 7.10002 2.80016 7.05661 2.93824C7.0422 2.98405 7.02832 3.02821 7.01496 3.0699C6.95791 3.24804 6.90763 3.39115 6.85248 3.50643C6.45683 4.3334 6.1121 4.8271 5.80935 5.14611C5.51322 5.45815 5.23983 5.6219 4.9473 5.76821C4.71095 5.88641 4.55494 6.12906 4.55491 6.40159L4.55388 13.9125C4.55383 14.3026 4.87002 14.6188 5.26008 14.6188H11.8706C12.2097 14.6188 12.4663 14.5113 12.6519 14.3535C12.7387 14.2797 12.7988 14.2043 12.8387 14.1484C12.8556 14.1248 12.8704 14.1025 12.8786 14.09L12.8813 14.0859L12.8826 14.0839L12.8955 14.0685L12.9142 14.0382C13.5304 13.0414 13.9578 12.247 14.2927 11.2945C14.6745 10.209 14.8679 9.26811 14.9499 8.5347C15.0297 7.82084 15.009 7.25845 14.9246 6.95014C14.805 6.51285 14.5104 6.26112 14.2134 6.13284C13.9385 6.01407 13.661 5.99859 13.5028 5.99836L10.4907 5.95631C10.9296 4.15791 10.648 3.11902 10.452 2.60729ZM1.0008 6.46783C0.981809 6.0652 1.30313 5.72836 1.70621 5.72836H2.75264C3.14266 5.72836 3.45883 6.04454 3.45883 6.43456V13.9442C3.45883 14.3342 3.14266 14.6504 2.75264 14.6504H2.06044C1.68335 14.6504 1.37279 14.3541 1.35502 13.9775L1.0008 6.46783Z"></path></svg>
          点赞
        </div> <div data-v-d11b5ece="" class="item"><svg data-v-d11b5ece="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-d11b5ece="" fill-rule="evenodd" clip-rule="evenodd" d="M2.30136 10.1142L2.30019 3.45191C2.30024 2.6778 2.92779 2.05019 3.70191 2.05019H12.3989C13.1731 2.05019 13.8006 2.67785 13.8006 3.452L13.8018 10.1144C13.8017 10.8885 13.1742 11.516 12.4001 11.516H10.1322C9.97329 11.516 9.81862 11.5675 9.69142 11.6629L6.65162 13.9406C6.62173 13.9598 6.58148 13.9444 6.57209 13.91L6.15416 12.0869C6.07758 11.7528 5.78033 11.516 5.43761 11.516H3.70308C2.92893 11.516 2.30136 10.8884 2.30136 10.1142ZM3.70191 1C2.34776 1 1.25 2.09776 1.25 3.45191L1.25117 10.1144C1.25122 11.4685 2.34896 12.5662 3.70308 12.5662H5.18661L5.54953 14.1495L5.55107 14.1558C5.73515 14.9153 6.62879 15.248 7.26458 14.7937L10.2372 12.5662H12.4001C13.7542 12.5662 14.852 11.4684 14.852 10.1142L14.8508 3.45182C14.8508 2.09771 13.753 1 12.3989 1H3.70191ZM4.78612 7.91404C5.35027 7.91404 5.8076 7.45671 5.8076 6.89257C5.8076 6.32842 5.35027 5.87109 4.78612 5.87109C4.22198 5.87109 3.76465 6.32842 3.76465 6.89257C3.76465 7.45671 4.22198 7.91404 4.78612 7.91404ZM8.98631 6.89257C8.98631 7.45671 8.52898 7.91404 7.96483 7.91404C7.40069 7.91404 6.94336 7.45671 6.94336 6.89257C6.94336 6.32842 7.40069 5.87109 7.96483 5.87109C8.52898 5.87109 8.98631 6.32842 8.98631 6.89257ZM11.1484 7.91404C11.7126 7.91404 12.1699 7.45671 12.1699 6.89257C12.1699 6.32842 11.7126 5.87109 11.1484 5.87109C10.5843 5.87109 10.127 6.32842 10.127 6.89257C10.127 7.45671 10.5843 7.91404 11.1484 7.91404Z"></path></svg>
          回复
        </div></div></div> <!----></div></div></div> <!----></div></div></div></div></div> <!----></div></div> <div data-v-4fa94e66="" data-v-1ee0c924="" class="action-box action-bar" data-v-4b9f9746=""><div data-v-4fa94e66="" class="praise-action action"><div data-v-4fa94e66="" class="action-title-box"><img data-v-4fa94e66="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/00ba359ecd0075e59ffbc3d810af551d.svg"> <span data-v-4fa94e66="" class="action-title">
          147
        </span></div></div> <div data-v-4fa94e66="" class="comment-action action"><div data-v-4fa94e66="" class="action-title-box"><img data-v-4fa94e66="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/336af4d1fafabcca3b770c8ad7a50781.svg"> <span data-v-4fa94e66="" class="action-title">
          15
        </span></div></div> <div data-v-4fa94e66="" class="collect-action action"><div data-v-4fa94e66="" class="action-title-box"><img data-v-4fa94e66="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/3d482c7a948bac826e155953b2a28a9e.svg"> <span data-v-4fa94e66="" class="action-title">收藏</span></div></div> <!----></div></div> <div data-v-1ee0c924="" data-v-4b9f9746="" class="main-area recommended-area shadow"><div data-v-1ee0c924="" data-v-4b9f9746="" class="recommended-list-title-wrapper"><div data-v-1ee0c924="" data-v-4b9f9746="" class="title"><span data-v-1ee0c924="" data-v-4b9f9746="" class="title-content">相关推荐</span></div></div> <div data-v-3ff8f708="" data-v-2bf301c8="" data-v-1ee0c924="" name="entry-list" tag="div" class="entry-list list recommended-entry-list" data-v-4b9f9746=""><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-2be60f5a="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="7025058400157302815" data-original-type="0" data-draft-id="7025058325624520740" class="entry" style="margin-bottom: 0px;"><div data-v-2be60f5a="" class="meta-container"><a data-v-2be60f5a="" href="https://juejin.cn/user/1767670427172280" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-2be60f5a="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-2be60f5a="" class="date">12月前</div> <div data-v-2be60f5a="" class="tag_list"><a data-v-2be60f5a="" href="https://juejin.cn/tag/%E7%A8%8B%E5%BA%8F%E5%91%98" target="_blank" rel="" class="tag">
        程序员
      </a></div></div> <div data-v-2be60f5a="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-2be60f5a="" class="content-main"><div data-v-2be60f5a="" class="title-row"> <!----> <!----> <!----> <a data-v-2be60f5a="" href="https://juejin.cn/post/7025058400157302815" target="_blank" rel="" title="雷军做程序员时写的博客，太牛了。。" class="title">雷军做程序员时写的博客，太牛了。。</a></div> <div data-v-2be60f5a="" class="abstract"><a data-v-2be60f5a="" href="https://juejin.cn/post/7025058400157302815" target="_blank" rel=""><div data-v-2be60f5a="">来源：雷军的博客 blog.sina.com.cn/leijun 这篇文章是在雷总个人博客看到的，里面聊到了他作为程序员的一些经历、初衷以及思考。写的不错，转来给大家看看。 **如果程序</div></a></div> <ul data-v-2be60f5a="" class="action-list jh-timeline-action-area"><li data-v-2be60f5a="" class="item view"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">26.0w</span></li> <li data-v-2be60f5a="" class="item like"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            853
          </span></li> <li data-v-2be60f5a="" class="item comment"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            252
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-2be60f5a="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6844903896637259784" data-original-type="0" data-draft-id="6845076387129196552" class="entry" style="margin-bottom: 0px;"><div data-v-2be60f5a="" class="meta-container"><a data-v-2be60f5a="" href="https://juejin.cn/user/149189280674574" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-2be60f5a="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-2be60f5a="" class="date">3年前</div> <div data-v-2be60f5a="" class="tag_list"><a data-v-2be60f5a="" href="https://juejin.cn/tag/%E9%9D%A2%E8%AF%95" target="_blank" rel="" class="tag">
        面试
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/%E5%89%8D%E7%AB%AF" target="_blank" rel="" class="tag">
        前端
      </a></div></div> <div data-v-2be60f5a="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-2be60f5a="" class="content-main"><div data-v-2be60f5a="" class="title-row"> <!----> <!----> <!----> <a data-v-2be60f5a="" href="https://juejin.cn/post/6844903896637259784" target="_blank" rel="" title="一个合格(优秀)的前端都应该阅读这些文章" class="title">一个合格(优秀)的前端都应该阅读这些文章</a></div> <div data-v-2be60f5a="" class="abstract"><a data-v-2be60f5a="" href="https://juejin.cn/post/6844903896637259784" target="_blank" rel=""><div data-v-2be60f5a="">的确，有些标题党了。起因是微信群里，有哥们问我，你是怎么学习前端的呢？能不能共享一下学习方法。一句话也挺触动我的，我真的不算是什么大佬，对于学习前端知识，我也不能说是掌握了什么捷径。当然，我个人的学习方法这篇文章已经在写了，预计这周末会在我个人公众号发布。而在此之前，我想展(g…</div></a></div> <ul data-v-2be60f5a="" class="action-list jh-timeline-action-area"><li data-v-2be60f5a="" class="item view"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">34.2w</span></li> <li data-v-2be60f5a="" class="item like"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            8745
          </span></li> <li data-v-2be60f5a="" class="item comment"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            390
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-2be60f5a="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/16c24b21d59234c9_tplv-t2oaga2asx-no-mark_240_240_240_160.awebp" alt="一个合格(优秀)的前端都应该阅读这些文章" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-2be60f5a="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6844903702461939725" data-original-type="1" data-draft-id="0" class="entry" style="margin-bottom: 0px;"><div data-v-2be60f5a="" class="meta-container"><a data-v-2be60f5a="" href="https://juejin.cn/user/1802854800040680" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-2be60f5a="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-2be60f5a="" class="date">3年前</div> <div data-v-2be60f5a="" class="tag_list"><a data-v-2be60f5a="" href="https://juejin.cn/tag/Docker" target="_blank" rel="" class="tag">
        Docker
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/%E5%AE%89%E5%85%A8" target="_blank" rel="" class="tag">
        安全
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/HTTPS" target="_blank" rel="" class="tag">
        HTTPS
      </a></div></div> <div data-v-2be60f5a="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-2be60f5a="" class="content-main"><div data-v-2be60f5a="" class="title-row"> <!----> <!----> <!----> <a data-v-2be60f5a="" href="https://juejin.cn/post/6844903702461939725" target="_blank" rel="" title="76%都存在漏洞？！Docker镜像安全扫描应该这样做" class="title">76%都存在漏洞？！Docker镜像安全扫描应该这样做</a></div> <div data-v-2be60f5a="" class="abstract"><a data-v-2be60f5a="" href="https://juejin.cn/post/6844903702461939725" target="_blank" rel=""><div data-v-2be60f5a="">林伟壕，SecDevOpsor，先后在中国电信和网易游戏从事数据网络、网络安全和游戏运维工作。对Linux运维、虚拟化和网络安全防护等研究颇多，目前专注于网络安全自动化检测、防御系统构建。 在之前的文章《从自身漏洞与架构缺陷，谈Docker安全建设》中，我们介绍了Docker存…</div></a></div> <ul data-v-2be60f5a="" class="action-list jh-timeline-action-area"><li data-v-2be60f5a="" class="item view"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">2487</span></li> <li data-v-2be60f5a="" class="item like"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            17
          </span></li> <li data-v-2be60f5a="" class="item comment"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            1
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-2be60f5a="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6844903885488783374" data-original-type="0" data-draft-id="6845076367613100045" class="entry" style="margin-bottom: 0px;"><div data-v-2be60f5a="" class="meta-container"><a data-v-2be60f5a="" href="https://juejin.cn/user/3720403075993373" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-2be60f5a="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-2be60f5a="" class="date">3年前</div> <div data-v-2be60f5a="" class="tag_list"><a data-v-2be60f5a="" href="https://juejin.cn/tag/%E9%9D%A2%E8%AF%95" target="_blank" rel="" class="tag">
        面试
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/%E5%89%8D%E7%AB%AF" target="_blank" rel="" class="tag">
        前端
      </a></div></div> <div data-v-2be60f5a="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-2be60f5a="" class="content-main"><div data-v-2be60f5a="" class="title-row"> <!----> <!----> <!----> <a data-v-2be60f5a="" href="https://juejin.cn/post/6844903885488783374" target="_blank" rel="" title="【1 月最新】前端 100 问：能搞懂 80% 的请把简历给我" class="title">【1 月最新】前端 100 问：能搞懂 80% 的请把简历给我</a></div> <div data-v-2be60f5a="" class="abstract"><a data-v-2be60f5a="" href="https://juejin.cn/post/6844903885488783374" target="_blank" rel=""><div data-v-2be60f5a="">半年时间，几千人参与，精选大厂前端面试高频 100 题，这就是「壹题」。 在 2019 年 1 月 21 日这天，「壹题」项目正式开始，在这之后每个工作日都会出一道高频面试题，主要涵盖阿里、腾讯、头条、百度、网易等大公司和常见题型。得益于大家热情参与，现在每道题都有很多答案，提…</div></a></div> <ul data-v-2be60f5a="" class="action-list jh-timeline-action-area"><li data-v-2be60f5a="" class="item view"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">58.9w</span></li> <li data-v-2be60f5a="" class="item like"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            10252
          </span></li> <li data-v-2be60f5a="" class="item comment"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            353
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-2be60f5a="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6905765245420535822" data-original-type="0" data-draft-id="6905764484976279565" class="entry" style="margin-bottom: 0px;"><div data-v-2be60f5a="" class="meta-container"><a data-v-2be60f5a="" href="https://juejin.cn/user/2013961030742589" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-2be60f5a="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-2be60f5a="" class="date">1年前</div> <div data-v-2be60f5a="" class="tag_list"><a data-v-2be60f5a="" href="https://juejin.cn/tag/Node.js" target="_blank" rel="" class="tag">
        Node.js
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6" target="_blank" rel="" class="tag">
        前端框架
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/%E5%89%8D%E7%AB%AF" target="_blank" rel="" class="tag">
        前端
      </a></div></div> <div data-v-2be60f5a="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-2be60f5a="" class="content-main"><div data-v-2be60f5a="" class="title-row"> <!----> <!----> <!----> <a data-v-2be60f5a="" href="https://juejin.cn/post/6905765245420535822" target="_blank" rel="" title="Node.js 服务性能翻倍的秘密（一）" class="title">Node.js 服务性能翻倍的秘密（一）</a></div> <div data-v-2be60f5a="" class="abstract"><a data-v-2be60f5a="" href="https://juejin.cn/post/6905765245420535822" target="_blank" rel=""><div data-v-2be60f5a="">用过 Node.js 开发过的同学肯定都上手过 koa，因为他简单优雅的写法，再加上丰富的社区生态，而且现存的许多 Node.js 框架都是基于 koa 进行二次封装的。但是说到性能，就不得不提到一个知名框架： fastify ，听名字就知道它的特性就是快，官方给出的Bench…</div></a></div> <ul data-v-2be60f5a="" class="action-list jh-timeline-action-area"><li data-v-2be60f5a="" class="item view"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">4407</span></li> <li data-v-2be60f5a="" class="item like"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            41
          </span></li> <li data-v-2be60f5a="" class="item comment"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            4
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-2be60f5a="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/642e79f17e4248c4b88dfc269a1639a2_tplv-k3u1fbpfcp-no-mark_240_240_240_160.awebp" alt="Node.js 服务性能翻倍的秘密（一）" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-2be60f5a="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6939778401028800542" data-original-type="0" data-draft-id="6939776143902031903" class="entry" style="margin-bottom: 0px;"><div data-v-2be60f5a="" class="meta-container"><a data-v-2be60f5a="" href="https://juejin.cn/user/3245414055699464" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-2be60f5a="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-2be60f5a="" class="date">1年前</div> <div data-v-2be60f5a="" class="tag_list"><a data-v-2be60f5a="" href="https://juejin.cn/tag/Docker" target="_blank" rel="" class="tag">
        Docker
      </a></div></div> <div data-v-2be60f5a="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-2be60f5a="" class="content-main"><div data-v-2be60f5a="" class="title-row"> <!----> <!----> <!----> <a data-v-2be60f5a="" href="https://juejin.cn/post/6939778401028800542" target="_blank" rel="" title="Docker前（vue）後（node）端解決方案" class="title">Docker前（vue）後（node）端解決方案</a></div> <div data-v-2be60f5a="" class="abstract"><a data-v-2be60f5a="" href="https://juejin.cn/post/6939778401028800542" target="_blank" rel=""><div data-v-2be60f5a="">一、Docker安裝装Docker装Docker-compose二、建立项目目录liunx下创建自己的项目目录(以我自己的项目为例)nginx：nginx配置目录static：静态资源存放目录util</div></a></div> <ul data-v-2be60f5a="" class="action-list jh-timeline-action-area"><li data-v-2be60f5a="" class="item view"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">199</span></li> <li data-v-2be60f5a="" class="item like"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            点赞
          </span></li> <li data-v-2be60f5a="" class="item comment"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            1
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-2be60f5a="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6844903702994616334" data-original-type="1" data-draft-id="0" class="entry" style="margin-bottom: 0px;"><div data-v-2be60f5a="" class="meta-container"><a data-v-2be60f5a="" href="https://juejin.cn/user/1978776660493624" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-2be60f5a="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-2be60f5a="" class="date">3年前</div> <!----></div> <div data-v-2be60f5a="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-2be60f5a="" class="content-main"><div data-v-2be60f5a="" class="title-row"> <!----> <!----> <!----> <a data-v-2be60f5a="" href="https://juejin.cn/post/6844903702994616334" target="_blank" rel="" title="76%都存在漏洞？！Docker镜像安全扫描应该这样做" class="title">76%都存在漏洞？！Docker镜像安全扫描应该这样做</a></div> <div data-v-2be60f5a="" class="abstract"><a data-v-2be60f5a="" href="https://juejin.cn/post/6844903702994616334" target="_blank" rel=""><div data-v-2be60f5a="">在之前的文章《从自身漏洞与架构缺陷，谈Docker安全建设》中，我们介绍了Docker存在的安全问题、整套Docker应用架构的安全基线以及安全规则，重头戏是Docker安全规则的各种思路和方案。 本文作为“续集”，考虑到镜像安全问题的普遍性和重要性，将重点围绕Docker镜像…</div></a></div> <ul data-v-2be60f5a="" class="action-list jh-timeline-action-area"><li data-v-2be60f5a="" class="item view"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">262</span></li> <li data-v-2be60f5a="" class="item like"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            点赞
          </span></li> <li data-v-2be60f5a="" class="item comment"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            评论
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-2be60f5a="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6844903956376731656" data-original-type="1" data-draft-id="0" class="entry" style="margin-bottom: 0px;"><div data-v-2be60f5a="" class="meta-container"><a data-v-2be60f5a="" href="https://juejin.cn/user/4195392100501208" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-2be60f5a="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-2be60f5a="" class="date">3年前</div> <div data-v-2be60f5a="" class="tag_list"><a data-v-2be60f5a="" href="https://juejin.cn/tag/Node.js" target="_blank" rel="" class="tag">
        Node.js
      </a></div></div> <div data-v-2be60f5a="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-2be60f5a="" class="content-main"><div data-v-2be60f5a="" class="title-row"> <!----> <!----> <!----> <a data-v-2be60f5a="" href="https://juejin.cn/post/6844903956376731656" target="_blank" rel="" title="Node.js docker 优化实践" class="title">Node.js docker 优化实践</a></div> <div data-v-2be60f5a="" class="abstract"><a data-v-2be60f5a="" href="https://juejin.cn/post/6844903956376731656" target="_blank" rel=""><div data-v-2be60f5a="">最近项目上 k8s，用 jenkins 做 CI，跑得比较顺了，开始考虑优化。 主要有两个问题： docker build 耗时长。 我们把 docker build 单独放在一个 stage， 所以很容易从 Jenkins Stage View 看出这个 stage 最耗时 …</div></a></div> <ul data-v-2be60f5a="" class="action-list jh-timeline-action-area"><li data-v-2be60f5a="" class="item view"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">754</span></li> <li data-v-2be60f5a="" class="item like"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            点赞
          </span></li> <li data-v-2be60f5a="" class="item comment"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            评论
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-2be60f5a="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="7034323356459466760" data-original-type="0" data-draft-id="7034312504008409119" class="entry" style="margin-bottom: 0px;"><div data-v-2be60f5a="" class="meta-container"><a data-v-2be60f5a="" href="https://juejin.cn/user/3984285870341288" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-2be60f5a="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-2be60f5a="" class="date">11月前</div> <div data-v-2be60f5a="" class="tag_list"><a data-v-2be60f5a="" href="https://juejin.cn/tag/%E5%89%8D%E7%AB%AF" target="_blank" rel="" class="tag">
        前端
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/JavaScript" target="_blank" rel="" class="tag">
        JavaScript
      </a></div></div> <div data-v-2be60f5a="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-2be60f5a="" class="content-main"><div data-v-2be60f5a="" class="title-row"> <!----> <!----> <!----> <a data-v-2be60f5a="" href="https://juejin.cn/post/7034323356459466760" target="_blank" rel="" title="如何用 CSS 中写出超级美丽的阴影效果" class="title">如何用 CSS 中写出超级美丽的阴影效果</a></div> <div data-v-2be60f5a="" class="abstract"><a data-v-2be60f5a="" href="https://juejin.cn/post/7034323356459466760" target="_blank" rel=""><div data-v-2be60f5a="">「这是我参与11月更文挑战的第7天，活动详情查看：2021最后一次更文挑战」。 在我看来，最好的网站和Web应用程序对它们具有切实的"真实"质量。实现这种质量涉及很多因素，但阴影是一个关键因素。 然而</div></a></div> <ul data-v-2be60f5a="" class="action-list jh-timeline-action-area"><li data-v-2be60f5a="" class="item view"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">95.1w</span></li> <li data-v-2be60f5a="" class="item like"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            722
          </span></li> <li data-v-2be60f5a="" class="item comment"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            48
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-2be60f5a="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6844903913410314247" data-original-type="0" data-draft-id="6845076416921354247" class="entry" style="margin-bottom: 0px;"><div data-v-2be60f5a="" class="meta-container"><a data-v-2be60f5a="" href="https://juejin.cn/user/4054654613718350" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-2be60f5a="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-2be60f5a="" class="date">3年前</div> <div data-v-2be60f5a="" class="tag_list"><a data-v-2be60f5a="" href="https://juejin.cn/tag/Vue.js" target="_blank" rel="" class="tag">
        Vue.js
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" target="_blank" rel="" class="tag">
        性能优化
      </a></div></div> <div data-v-2be60f5a="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-2be60f5a="" class="content-main"><div data-v-2be60f5a="" class="title-row"> <!----> <!----> <!----> <a data-v-2be60f5a="" href="https://juejin.cn/post/6844903913410314247" target="_blank" rel="" title="Vue 项目性能优化 — 实践指南（网上最全 / 详细）" class="title">Vue 项目性能优化 — 实践指南（网上最全 / 详细）</a></div> <div data-v-2be60f5a="" class="abstract"><a data-v-2be60f5a="" href="https://juejin.cn/post/6844903913410314247" target="_blank" rel=""><div data-v-2be60f5a="">Vue 框架通过数据双向绑定和虚拟 DOM 技术，帮我们处理了前端开发中最脏最累的 DOM 操作部分， 我们不再需要去考虑如何操作 DOM 以及如何最高效地操作 DOM；但 Vue 项目中仍然存在项目首屏优化、Webpack 编译配置优化等问题，所以我们仍然需要去关注 Vue …</div></a></div> <ul data-v-2be60f5a="" class="action-list jh-timeline-action-area"><li data-v-2be60f5a="" class="item view"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">11.9w</span></li> <li data-v-2be60f5a="" class="item like"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            2847
          </span></li> <li data-v-2be60f5a="" class="item comment"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            112
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-2be60f5a="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/16c9242c2189c8e4_tplv-t2oaga2asx-no-mark_240_240_240_160.awebp" alt="Vue 项目性能优化 — 实践指南（网上最全 / 详细）" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-2be60f5a="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6970852325661343780" data-original-type="0" data-draft-id="6970851402180460558" class="entry" style="margin-bottom: 0px;"><div data-v-2be60f5a="" class="meta-container"><a data-v-2be60f5a="" href="https://juejin.cn/user/4406498333033918" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-2be60f5a="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-2be60f5a="" class="date">1年前</div> <div data-v-2be60f5a="" class="tag_list"><a data-v-2be60f5a="" href="https://juejin.cn/tag/Docker" target="_blank" rel="" class="tag">
        Docker
      </a></div></div> <div data-v-2be60f5a="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-2be60f5a="" class="content-main"><div data-v-2be60f5a="" class="title-row"> <!----> <!----> <!----> <a data-v-2be60f5a="" href="https://juejin.cn/post/6970852325661343780" target="_blank" rel="" title="面向WEB开发人员的Docker（八）：将 Docker 镜像推送到仓库" class="title">面向WEB开发人员的Docker（八）：将 Docker 镜像推送到仓库</a></div> <div data-v-2be60f5a="" class="abstract"><a data-v-2be60f5a="" href="https://juejin.cn/post/6970852325661343780" target="_blank" rel=""><div data-v-2be60f5a="">Docker Hub 是Docker的Github，是 Docker 官方维护了一个公共仓库。上面包括很多现成的镜像，如 Apache、PHP、Node.js、Python、MySQL 或 Mongo</div></a></div> <ul data-v-2be60f5a="" class="action-list jh-timeline-action-area"><li data-v-2be60f5a="" class="item view"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">341</span></li> <li data-v-2be60f5a="" class="item like"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            4
          </span></li> <li data-v-2be60f5a="" class="item comment"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            评论
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-2be60f5a="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/74829ae44e4a45b6916c8832ecd5e803_tplv-k3u1fbpfcp-no-mark_240_240_240_160.awebp" alt="面向WEB开发人员的Docker（八）：将 Docker 镜像推送到仓库" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-2be60f5a="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6844903639903895565" data-original-type="0" data-draft-id="6845075576458313741" class="entry" style="margin-bottom: 0px;"><div data-v-2be60f5a="" class="meta-container"><a data-v-2be60f5a="" href="https://juejin.cn/user/1204720475059693" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-2be60f5a="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-2be60f5a="" class="date">4年前</div> <div data-v-2be60f5a="" class="tag_list"><a data-v-2be60f5a="" href="https://juejin.cn/tag/Docker" target="_blank" rel="" class="tag">
        Docker
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/Python" target="_blank" rel="" class="tag">
        Python
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/%E8%BF%90%E7%BB%B4" target="_blank" rel="" class="tag">
        运维
      </a></div></div> <div data-v-2be60f5a="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-2be60f5a="" class="content-main"><div data-v-2be60f5a="" class="title-row"> <!----> <!----> <!----> <a data-v-2be60f5a="" href="https://juejin.cn/post/6844903639903895565" target="_blank" rel="" title="Docker最佳实践：构建最小镜像" class="title">Docker最佳实践：构建最小镜像</a></div> <div data-v-2be60f5a="" class="abstract"><a data-v-2be60f5a="" href="https://juejin.cn/post/6844903639903895565" target="_blank" rel=""><div data-v-2be60f5a="">镜像大小其实是衡量我们容器打包技术的重要指标，我们应该在不影响应用正常运行的情况下，尽量让我们的容器镜像变得更小，这样，不管是从安全还是维护效率角度来讲，都是最佳实践。 本文我们从两种情况阐述我们的问题和解决方案，我们从实现我们的application的编程语言角度，按照语言是…</div></a></div> <ul data-v-2be60f5a="" class="action-list jh-timeline-action-area"><li data-v-2be60f5a="" class="item view"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">3043</span></li> <li data-v-2be60f5a="" class="item like"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            点赞
          </span></li> <li data-v-2be60f5a="" class="item comment"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            评论
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-2be60f5a="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6844903692915703815" data-original-type="0" data-draft-id="6845075629541425159" class="entry" style="margin-bottom: 0px;"><div data-v-2be60f5a="" class="meta-container"><a data-v-2be60f5a="" href="https://juejin.cn/user/307518985747774" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-2be60f5a="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-2be60f5a="" class="date">4年前</div> <div data-v-2be60f5a="" class="tag_list"><a data-v-2be60f5a="" href="https://juejin.cn/tag/%E5%90%8E%E7%AB%AF" target="_blank" rel="" class="tag">
        后端
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/Debug" target="_blank" rel="" class="tag">
        Debug
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/Python" target="_blank" rel="" class="tag">
        Python
      </a></div></div> <div data-v-2be60f5a="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-2be60f5a="" class="content-main"><div data-v-2be60f5a="" class="title-row"> <!----> <!----> <!----> <a data-v-2be60f5a="" href="https://juejin.cn/post/6844903692915703815" target="_blank" rel="" title="Python日志库logging总结-可能是目前为止将logging库总结的最好的一篇文章" class="title">Python日志库logging总结-可能是目前为止将logging库总结的最好的一篇文章</a></div> <div data-v-2be60f5a="" class="abstract"><a data-v-2be60f5a="" href="https://juejin.cn/post/6844903692915703815" target="_blank" rel=""><div data-v-2be60f5a="">在部署项目时，不可能直接将所有的信息都输出到控制台中，我们可以将这些信息记录到日志文件中，这样不仅方便我们查看程序运行时的情况，也可以在项目出现故障时根据运行时产生的日志快速定位问题出现的位置。 Python 标准库 logging 用作记录日志，默认分为六种日志级别（括号为级…</div></a></div> <ul data-v-2be60f5a="" class="action-list jh-timeline-action-area"><li data-v-2be60f5a="" class="item view"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">29.9w</span></li> <li data-v-2be60f5a="" class="item like"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            143
          </span></li> <li data-v-2be60f5a="" class="item comment"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            13
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-2be60f5a="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6844903702680059911" data-original-type="1" data-draft-id="0" class="entry" style="margin-bottom: 0px;"><div data-v-2be60f5a="" class="meta-container"><a data-v-2be60f5a="" href="https://juejin.cn/user/3737995264145063" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-2be60f5a="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-2be60f5a="" class="date">3年前</div> <!----></div> <div data-v-2be60f5a="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-2be60f5a="" class="content-main"><div data-v-2be60f5a="" class="title-row"> <!----> <!----> <!----> <a data-v-2be60f5a="" href="https://juejin.cn/post/6844903702680059911" target="_blank" rel="" title="76%都存在漏洞？！Docker镜像安全扫描应该这样做" class="title">76%都存在漏洞？！Docker镜像安全扫描应该这样做</a></div> <div data-v-2be60f5a="" class="abstract"><a data-v-2be60f5a="" href="https://juejin.cn/post/6844903702680059911" target="_blank" rel=""><div data-v-2be60f5a="">在之前的文章《从自身漏洞与架构缺陷，谈Docker安全建设》中，我们介绍了Docker存在的安全问题、整套Docker应用架构的安全基线以及安全规则，重头戏是Docker安全规则的各种思路和方案。 本文作为“续集”，考虑到镜像安全问题的普遍性和重要性，将重点围绕Docker镜像…</div></a></div> <ul data-v-2be60f5a="" class="action-list jh-timeline-action-area"><li data-v-2be60f5a="" class="item view"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">486</span></li> <li data-v-2be60f5a="" class="item like"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            点赞
          </span></li> <li data-v-2be60f5a="" class="item comment"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            评论
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-2be60f5a="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6844903853859536903" data-original-type="0" data-draft-id="6845076321467383821" class="entry" style="margin-bottom: 0px;"><div data-v-2be60f5a="" class="meta-container"><a data-v-2be60f5a="" href="https://juejin.cn/user/2348212566372104" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-2be60f5a="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-2be60f5a="" class="date">3年前</div> <div data-v-2be60f5a="" class="tag_list"><a data-v-2be60f5a="" href="https://juejin.cn/tag/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6" target="_blank" rel="" class="tag">
        前端框架
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/%E5%89%8D%E7%AB%AF" target="_blank" rel="" class="tag">
        前端
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/%E6%9E%B6%E6%9E%84" target="_blank" rel="" class="tag">
        架构
      </a></div></div> <div data-v-2be60f5a="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-2be60f5a="" class="content-main"><div data-v-2be60f5a="" class="title-row"> <!----> <!----> <!----> <a data-v-2be60f5a="" href="https://juejin.cn/post/6844903853859536903" target="_blank" rel="" title="大型项目前端架构浅谈（8000字原创）" class="title">大型项目前端架构浅谈（8000字原创）</a></div> <div data-v-2be60f5a="" class="abstract"><a data-v-2be60f5a="" href="https://juejin.cn/post/6844903853859536903" target="_blank" rel=""><div data-v-2be60f5a="">我在2年之前，写过一篇中小型项目的前端架构浅谈。随着能力的上升，以及在阿里巴巴工作的经验，是时候写一篇大型项目的前端架构分析了。 本篇文章不会更多侧重于具体技术实现，而是尝试从更高角度出发，分析为什么要这么做，这些设计能解决什么问题，成本和收益如何。 由于作者能力有限，可能会有…</div></a></div> <ul data-v-2be60f5a="" class="action-list jh-timeline-action-area"><li data-v-2be60f5a="" class="item view"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">16.2w</span></li> <li data-v-2be60f5a="" class="item like"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            4273
          </span></li> <li data-v-2be60f5a="" class="item comment"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            283
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-2be60f5a="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6844904038627033095" data-original-type="0" data-draft-id="6845076602372505614" class="entry" style="margin-bottom: 0px;"><div data-v-2be60f5a="" class="meta-container"><a data-v-2be60f5a="" href="https://juejin.cn/user/3386151544061790" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-2be60f5a="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-2be60f5a="" class="date">2年前</div> <div data-v-2be60f5a="" class="tag_list"><a data-v-2be60f5a="" href="https://juejin.cn/tag/Node.js" target="_blank" rel="" class="tag">
        Node.js
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/Docker" target="_blank" rel="" class="tag">
        Docker
      </a></div></div> <div data-v-2be60f5a="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-2be60f5a="" class="content-main"><div data-v-2be60f5a="" class="title-row"> <!----> <!----> <!----> <a data-v-2be60f5a="" href="https://juejin.cn/post/6844904038627033095" target="_blank" rel="" title="[手摸手系列] 使用 docker-compose 构建你的项目" class="title">[手摸手系列] 使用 docker-compose 构建你的项目</a></div> <div data-v-2be60f5a="" class="abstract"><a data-v-2be60f5a="" href="https://juejin.cn/post/6844904038627033095" target="_blank" rel=""><div data-v-2be60f5a="">距离上一次在掘金写文章，已经过去了半年多了（主要还是自己水平差，不知道写什么好了）。 不过新的一年，总要写点东西总结总结一下。 最近也一直在使用docker。所以就想者分享一下这方面的知识。不知道是不是最佳实践，欢迎各位踩我 1. Docker docker的是什么，在掘金平台…</div></a></div> <ul data-v-2be60f5a="" class="action-list jh-timeline-action-area"><li data-v-2be60f5a="" class="item view"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">6355</span></li> <li data-v-2be60f5a="" class="item like"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            61
          </span></li> <li data-v-2be60f5a="" class="item comment"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            8
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-2be60f5a="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/16f760017def71fe_tplv-t2oaga2asx-no-mark_240_240_240_160.awebp" alt="[手摸手系列] 使用 docker-compose 构建你的项目" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-2be60f5a="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="7070196734927831076" data-original-type="0" data-draft-id="7070190492150923301" class="entry" style="margin-bottom: 0px;"><div data-v-2be60f5a="" class="meta-container"><a data-v-2be60f5a="" href="https://juejin.cn/user/3403743728515246" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-2be60f5a="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-2be60f5a="" class="date">7月前</div> <div data-v-2be60f5a="" class="tag_list"><a data-v-2be60f5a="" href="https://juejin.cn/tag/Docker" target="_blank" rel="" class="tag">
        Docker
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/Node.js" target="_blank" rel="" class="tag">
        Node.js
      </a></div></div> <div data-v-2be60f5a="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-2be60f5a="" class="content-main"><div data-v-2be60f5a="" class="title-row"> <!----> <!----> <!----> <a data-v-2be60f5a="" href="https://juejin.cn/post/7070196734927831076" target="_blank" rel="" title="Docker 系列 - 01 - 下载 &amp; 安装" class="title">Docker 系列 - 01 - 下载 &amp; 安装</a></div> <div data-v-2be60f5a="" class="abstract"><a data-v-2be60f5a="" href="https://juejin.cn/post/7070196734927831076" target="_blank" rel=""><div data-v-2be60f5a="">本系列文章将以一个萌新的角度，从 0 入门，从安装 Docker，到将 Nginx、Node.js 以及 Puppeteer 服务部署到 Docker 中……</div></a></div> <ul data-v-2be60f5a="" class="action-list jh-timeline-action-area"><li data-v-2be60f5a="" class="item view"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">1417</span></li> <li data-v-2be60f5a="" class="item like"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            5
          </span></li> <li data-v-2be60f5a="" class="item comment"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            4
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-2be60f5a="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/b692b5101ba64603bcab024992fe18ff_tplv-k3u1fbpfcp-no-mark_240_240_240_160.awebp" alt="Docker 系列 - 01 - 下载 &amp; 安装" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-2be60f5a="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6844903632815521799" data-original-type="0" data-draft-id="6845075533764493325" class="entry" style="margin-bottom: 0px;"><div data-v-2be60f5a="" class="meta-container"><a data-v-2be60f5a="" href="https://juejin.cn/user/3333374984065608" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-2be60f5a="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-2be60f5a="" class="date">4年前</div> <div data-v-2be60f5a="" class="tag_list"><a data-v-2be60f5a="" href="https://juejin.cn/tag/Vue.js" target="_blank" rel="" class="tag">
        Vue.js
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/JavaScript" target="_blank" rel="" class="tag">
        JavaScript
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/%E5%89%8D%E7%AB%AF" target="_blank" rel="" class="tag">
        前端
      </a></div></div> <div data-v-2be60f5a="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-2be60f5a="" class="content-main"><div data-v-2be60f5a="" class="title-row"> <!----> <!----> <!----> <a data-v-2be60f5a="" href="https://juejin.cn/post/6844903632815521799" target="_blank" rel="" title="Vue 项目里戳中你痛点的问题及解决办法（更新）" class="title">Vue 项目里戳中你痛点的问题及解决办法（更新）</a></div> <div data-v-2be60f5a="" class="abstract"><a data-v-2be60f5a="" href="https://juejin.cn/post/6844903632815521799" target="_blank" rel=""><div data-v-2be60f5a="">最近要求使用vue进行前后端分离开发微信公众号，不断摸索踩坑之后，总结出如下几点vue项目开发中常见的问题及解决办法。如果你是vue大佬，请忽略小弟的愚见^V^ 列表进入详情页的传参问题。 列表进入详情页的传参问题。 c页面的路径为http://localhost:8080/#…</div></a></div> <ul data-v-2be60f5a="" class="action-list jh-timeline-action-area"><li data-v-2be60f5a="" class="item view"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">14.4w</span></li> <li data-v-2be60f5a="" class="item like"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            3690
          </span></li> <li data-v-2be60f5a="" class="item comment"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            168
          </span></li> <!----></ul></div> <img data-v-248050e4="" data-v-2be60f5a="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/1646ed05eb69e5f3_tplv-t2oaga2asx-no-mark_240_240_240_160.awebp" alt="Vue 项目里戳中你痛点的问题及解决办法（更新）" class="lazy thumb" loading="lazy" style=""></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-2be60f5a="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6844903652881072141" data-original-type="0" data-draft-id="6845075579771830279" class="entry" style="margin-bottom: 0px;"><div data-v-2be60f5a="" class="meta-container"><a data-v-2be60f5a="" href="https://juejin.cn/user/3333374984065608" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-2be60f5a="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-2be60f5a="" class="date">4年前</div> <div data-v-2be60f5a="" class="tag_list"><a data-v-2be60f5a="" href="https://juejin.cn/tag/Vue.js" target="_blank" rel="" class="tag">
        Vue.js
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/JavaScript" target="_blank" rel="" class="tag">
        JavaScript
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/API" target="_blank" rel="" class="tag">
        API
      </a></div></div> <div data-v-2be60f5a="" class="content-wrapper" style="border-bottom: 1px solid rgba(228, 230, 235, 0.5);"><div data-v-2be60f5a="" class="content-main"><div data-v-2be60f5a="" class="title-row"> <!----> <!----> <!----> <a data-v-2be60f5a="" href="https://juejin.cn/post/6844903652881072141" target="_blank" rel="" title="vue中Axios的封装和API接口的管理" class="title">vue中Axios的封装和API接口的管理</a></div> <div data-v-2be60f5a="" class="abstract"><a data-v-2be60f5a="" href="https://juejin.cn/post/6844903652881072141" target="_blank" rel=""><div data-v-2be60f5a="">回归正题，我们所要的说的axios的封装和api接口的统一管理，其实主要目的就是在帮助我们简化代码和利于后期的更新维护。 在vue项目中，和后台交互获取数据这块，我们通常使用的是axios库，它是基于promise的http库，可运行在浏览器端和node.js中。他有很多优秀的…</div></a></div> <ul data-v-2be60f5a="" class="action-list jh-timeline-action-area"><li data-v-2be60f5a="" class="item view"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">23.7w</span></li> <li data-v-2be60f5a="" class="item like"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            4572
          </span></li> <li data-v-2be60f5a="" class="item comment"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            336
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-v-2bf301c8="" data-growing-container="true" data-growing-title="entryList" class="item"><div data-v-2be60f5a="" data-v-5a9d6e8e="" data-v-2bf301c8="" data-entry-id="6844903472601513998" data-original-type="0" data-draft-id="6845075295418990600" class="entry" style="margin-bottom: 20px;"><div data-v-2be60f5a="" class="meta-container"><a data-v-2be60f5a="" href="https://juejin.cn/user/1503787635705837" target="_blank" rel="" class="user-message"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-2be60f5a="" class="popover-box user-popover"><!---->  
        
      </div></a> <div data-v-2be60f5a="" class="date">5年前</div> <div data-v-2be60f5a="" class="tag_list"><a data-v-2be60f5a="" href="https://juejin.cn/tag/Node.js" target="_blank" rel="" class="tag">
        Node.js
      </a><a data-v-2be60f5a="" href="https://juejin.cn/tag/Docker" target="_blank" rel="" class="tag">
        Docker
      </a></div></div> <div data-v-2be60f5a="" class="content-wrapper" style="border-bottom: 0px;"><div data-v-2be60f5a="" class="content-main"><div data-v-2be60f5a="" class="title-row"> <!----> <!----> <!----> <a data-v-2be60f5a="" href="https://juejin.cn/post/6844903472601513998" target="_blank" rel="" title="当 Node.js 遇见 Docker" class="title">当 Node.js 遇见 Docker</a></div> <div data-v-2be60f5a="" class="abstract"><a data-v-2be60f5a="" href="https://juejin.cn/post/6844903472601513998" target="_blank" rel=""><div data-v-2be60f5a="">... Docker是最流行的的容器工具，没有之一。本文并不打算深入介绍Docker，不过可以从几个简单的角度来理解Docker。 在Linux中，所有的进程构成了一棵树。可以使用pstree命令进行查看: 可知，init进程为所有进程的根(root)，其PID为1。 Dock…</div></a></div> <ul data-v-2be60f5a="" class="action-list jh-timeline-action-area"><li data-v-2be60f5a="" class="item view"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">2661</span></li> <li data-v-2be60f5a="" class="item like"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            85
          </span></li> <li data-v-2be60f5a="" class="item comment"><i data-v-2be60f5a=""></i> <span data-v-2be60f5a="">
            2
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li></div></div> <div st:block="sidebar" class="sidebar sidebar sticky" style="" data-v-3f76886a="" data-v-1ee0c924="" data-v-4b9f9746=""><div class="sidebar-block author-block pure" data-v-71f2d09e="" data-v-2d7c39c6="" data-v-3f76886a=""><a href="https://juejin.cn/user/4072246798979719" target="_blank" rel="" class="user-item item" data-v-2d7c39c6="" data-v-71f2d09e=""><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/49c6deba3c8765f3d6a19ff34b32f926_100x100.awebp" alt="" class="lazy avatar avatar" data-v-248050e4="" data-v-47508ed8="" data-v-2d7c39c6="" loading="lazy"> <div class="info-box" data-v-2d7c39c6=""><a data-v-0ef8bafa="" data-v-2d7c39c6="" href="https://juejin.cn/user/4072246798979719" target="_blank" rel="" class="username"><span data-v-0ef8bafa="" class="name" style="max-width: 128px;">
      iamc
    </span> <span data-v-3de16c56="" data-v-0ef8bafa="" blank="true" class="rank"><img data-v-3de16c56="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/lv-3.7938ebc.png" alt="lv-3" title="创作等级"></span> <!----> <!----> </a> <!----></div></a> <div class="operate-btn" data-v-71f2d09e="" data-v-2d7c39c6=""><button st:name="followBtn" class="ui-btn follow-btn primary large default attention" data-v-05e27314="" data-v-2d7c39c6="" data-v-71f2d09e=""><!----> 
    关注
  </button> <a href="https://juejin.cn/notification/im?participantId=4072246798979719" class="im-button im-btn" data-v-11443840="" data-v-2d7c39c6="" data-v-71f2d09e=""><!----> <div data-v-11443840="">私信</div></a></div> <div class="cut-off" data-v-71f2d09e="" data-v-2d7c39c6=""></div>  <div class="stat-item item" data-v-71f2d09e="" data-v-2d7c39c6=""><svg xmlns="http://www.w3.org/2000/svg" width="25" height="26" viewBox="0 0 25 26" class="zan" data-v-71f2d09e="" data-v-2d7c39c6=""><g fill="none" fill-rule="evenodd" transform="translate(0 .57)" data-v-71f2d09e="" data-v-2d7c39c6=""><ellipse cx="12.5" cy="12.57" fill="#E1EFFF" rx="12.5" ry="12.57" data-v-71f2d09e="" data-v-2d7c39c6=""></ellipse><path fill="#7BB9FF" d="M8.596 11.238V19H7.033C6.463 19 6 18.465 6 17.807v-5.282c0-.685.483-1.287 1.033-1.287h1.563zm4.275-4.156A1.284 1.284 0 0 1 14.156 6c.885.016 1.412.722 1.595 1.07.334.638.343 1.687.114 2.361-.207.61-.687 1.412-.687 1.412h3.596c.38 0 .733.178.969.488.239.317.318.728.21 1.102l-1.628 5.645a1.245 1.245 0 0 1-1.192.922h-7.068v-7.889c1.624-.336 2.623-2.866 2.806-4.029z" data-v-71f2d09e="" data-v-2d7c39c6=""></path></g></svg> <span class="content" data-v-71f2d09e="" data-v-2d7c39c6="">
      获得点赞
      <span class="count" data-v-71f2d09e="" data-v-2d7c39c6="">&nbsp;147</span></span></div> <div class="stat-item item" data-v-71f2d09e="" data-v-2d7c39c6=""><svg width="25" height="25" viewBox="0 0 25 25" class="icon stat-view-icon" data-v-71f2d09e="" data-v-2d7c39c6=""><g fill="none" fill-rule="evenodd" data-v-71f2d09e="" data-v-2d7c39c6=""><circle cx="12.5" cy="12.5" r="12.5" fill="#E1EFFF" data-v-71f2d09e="" data-v-2d7c39c6=""></circle><path fill="#7BB9FF" d="M4 12.5S6.917 7 12.75 7s8.75 5.5 8.75 5.5-2.917 5.5-8.75 5.5S4 12.5 4 12.5zm8.75 2.292c1.208 0 2.188-1.026 2.188-2.292 0-1.266-.98-2.292-2.188-2.292-1.208 0-2.188 1.026-2.188 2.292 0 1.266.98 2.292 2.188 2.292z" data-v-71f2d09e="" data-v-2d7c39c6=""></path></g></svg> <span class="content" data-v-71f2d09e="" data-v-2d7c39c6="">
      文章被阅读
      <span class="count" data-v-71f2d09e="" data-v-2d7c39c6="">&nbsp;10,307</span></span></div> <!----></div> <!----> <div class="sidebar-block app-download-sidebar-block shadow" data-v-71f2d09e="" data-v-11c44dd5="" data-v-3f76886a=""><!----> <div class="block-body" data-v-71f2d09e=""><a href="https://juejin.cn/app" target="_blank" data-v-11c44dd5="" class="" data-v-71f2d09e=""><div class="app-link" data-v-11c44dd5=""><img src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/article.9d13ff7.png" class="qr-img" data-v-11c44dd5=""> <div class="content-box" data-v-11c44dd5=""><div class="headline" data-v-11c44dd5="">下载稀土掘金APP</div> <div class="desc" data-v-11c44dd5="">一个帮助开发者成长的社区</div></div> <!----></div></a></div></div> <!----> <div data-v-71f2d09e="" data-v-54794b76="" data-v-3f76886a="" class="sidebar-block related-entry-sidebar-block shadow" st:block="relatedEntrySidebarBlock"><div data-v-71f2d09e="" class="block-title">相关文章</div> <div data-v-71f2d09e="" class="block-body"><div data-v-54794b76="" data-v-71f2d09e="" class="entry-list"><a data-v-54794b76="" href="https://juejin.cn/post/7034323356459466760" target="_blank" rel="" st:name="link" title="如何用 CSS 中写出超级美丽的阴影效果" class="item" data-v-71f2d09e=""><div data-v-54794b76="" class="entry-title">如何用 CSS 中写出超级美丽的阴影效果</div> <div data-v-54794b76="" class="entry-meta-box"><div data-v-54794b76="" class="entry-meta">722点赞</div> <div data-v-54794b76="" class="entry-meta">&nbsp;·&nbsp;</div> <div data-v-54794b76="" class="entry-meta">48评论</div></div></a><a data-v-54794b76="" href="https://juejin.cn/post/6844903768362860557" target="_blank" rel="" st:name="link" title="vue-cli3 项目从搭建优化到docker部署" class="item" data-v-71f2d09e=""><div data-v-54794b76="" class="entry-title">vue-cli3 项目从搭建优化到docker部署</div> <div data-v-54794b76="" class="entry-meta-box"><div data-v-54794b76="" class="entry-meta">2049点赞</div> <div data-v-54794b76="" class="entry-meta">&nbsp;·&nbsp;</div> <div data-v-54794b76="" class="entry-meta">191评论</div></div></a><a data-v-54794b76="" href="https://juejin.cn/post/6844904082461687822" target="_blank" rel="" st:name="link" title="前端项目 Docker 镜像构建性能优化" class="item" data-v-71f2d09e=""><div data-v-54794b76="" class="entry-title">前端项目 Docker 镜像构建性能优化</div> <div data-v-54794b76="" class="entry-meta-box"><div data-v-54794b76="" class="entry-meta">12点赞</div> <div data-v-54794b76="" class="entry-meta">&nbsp;·&nbsp;</div> <div data-v-54794b76="" class="entry-meta">2评论</div></div></a><a data-v-54794b76="" href="https://juejin.cn/post/6885320503867736078" target="_blank" rel="" st:name="link" title="极限压榨elasticsearch写入速度" class="item" data-v-71f2d09e=""><div data-v-54794b76="" class="entry-title">极限压榨elasticsearch写入速度</div> <div data-v-54794b76="" class="entry-meta-box"><div data-v-54794b76="" class="entry-meta">27点赞</div> <div data-v-54794b76="" class="entry-meta">&nbsp;·&nbsp;</div> <div data-v-54794b76="" class="entry-meta">3评论</div></div></a><a data-v-54794b76="" href="https://juejin.cn/post/6844904062580686856" target="_blank" rel="" st:name="link" title="前端 Docker 镜像体积优化" class="item" data-v-71f2d09e=""><div data-v-54794b76="" class="entry-title">前端 Docker 镜像体积优化</div> <div data-v-54794b76="" class="entry-meta-box"><div data-v-54794b76="" class="entry-meta">9点赞</div> <div data-v-54794b76="" class="entry-meta">&nbsp;·&nbsp;</div> <div data-v-54794b76="" class="entry-meta">2评论</div></div></a></div></div></div> <div class="sticky-block-box" data-v-3f76886a=""><div class="sidebar-block catalog-block catalog-block pure isExpand" style="" data-v-71f2d09e="" data-v-3f76886a=""><nav class="article-catalog" style="" data-v-cb93f23a="" data-v-71f2d09e=""><div class="catalog-title" data-v-cb93f23a="">目录</div> <div class="catalog-body" data-v-cb93f23a=""><ul class="catalog-list" style="margin-top:0px;" data-v-cb93f23a=""><li data-v-cb93f23a="" class="item d1"><div class="a-container"><a href="https://juejin.cn/post/6991689670027542564#heading-0" title="Node 项目" class="catalog-aTag">
      Node 项目
    </a></div> <!----></li><li data-v-cb93f23a="" class="item d1"><div class="a-container"><a href="https://juejin.cn/post/6991689670027542564#heading-1" title="优化前言" class="catalog-aTag">
      优化前言
    </a></div> <!----></li><li data-v-cb93f23a="" class="item d1"><div class="a-container"><a href="https://juejin.cn/post/6991689670027542564#heading-2" title="优化 Dockerfile" class="catalog-aTag">
      优化 Dockerfile
    </a></div> <ul class="sub-list"><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6991689670027542564#heading-3" title="优化第一层 FROM node:14.17.3" class="catalog-aTag">
      优化第一层 FROM node:14.17.3
    </a></div> <ul class="sub-list"><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6991689670027542564#heading-4" title="方案一：使用 node 的 Alpine 版本" class="catalog-aTag">
      方案一：使用 node 的 Alpine 版本
    </a></div> <!----></li><li class="item d3"><div class="a-container"><a href="https://juejin.cn/post/6991689670027542564#heading-5" title="方案二：使用纯净 Alpine 镜像手动装 Node" class="catalog-aTag">
      方案二：使用纯净 Alpine 镜像手动装 Node
    </a></div> <!----></li></ul></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6991689670027542564#heading-6" title="减少层数、不经常变动的层提到前面去" class="catalog-aTag">
      减少层数、不经常变动的层提到前面去
    </a></div> <!----></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6991689670027542564#heading-7" title="package.json 提前提高编译速度" class="catalog-aTag">
      package.json 提前提高编译速度
    </a></div> <!----></li><li class="item d2"><div class="a-container"><a href="https://juejin.cn/post/6991689670027542564#heading-8" title="使用多阶段构建再次压榨镜像大小" class="catalog-aTag">
      使用多阶段构建再次压榨镜像大小
    </a></div> <!----></li></ul></li><li data-v-cb93f23a="" class="item d1 active"><div class="a-container"><a href="https://juejin.cn/post/6991689670027542564#heading-9" title="github 的 actions 构建镜像问题" class="catalog-aTag">
      github 的 actions 构建镜像问题
    </a></div> <!----></li><li data-v-cb93f23a="" class="item d1"><div class="a-container"><a href="https://juejin.cn/post/6991689670027542564#heading-10" title="最后" class="catalog-aTag">
      最后
    </a></div> <!----></li></ul></div></nav></div> <!----></div></div> <div class="article-suspended-panel article-suspended-panel" data-v-b7c4e7d2="" data-v-1ee0c924="" data-v-4b9f9746=""><svg xmlns="http://www.w3.org/2000/svg" style="display:none;" data-v-b7c4e7d2="" class=""><symbol id="icon-collect" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-v-b7c4e7d2=""><path fill-rule="evenodd" clip-rule="evenodd" d="M5.24287 18.3845C4.89724 18.5507 4.48229 18.4053 4.31605 18.0596C4.26029 17.9437 4.23783 17.8146 4.25117 17.6866L4.75725 12.8332C4.77762 12.6379 4.71431 12.443 4.583 12.297L1.29207 8.63594C1.03567 8.35071 1.05905 7.91164 1.34428 7.65524C1.43464 7.574 1.54475 7.5179 1.66358 7.49254L6.47789 6.46509C6.66998 6.42409 6.83572 6.30367 6.93407 6.13365L9.39894 1.87248C9.59098 1.54049 10.0158 1.42704 10.3478 1.61907C10.453 1.67992 10.5403 1.76729 10.6012 1.87248L13.0661 6.13365C13.1644 6.30367 13.3301 6.42409 13.5222 6.46509L18.3365 7.49254C18.7116 7.57259 18.9508 7.94155 18.8707 8.31664C18.8454 8.43547 18.7893 8.54557 18.708 8.63594L15.4171 12.297C15.2858 12.443 15.2225 12.6379 15.2429 12.8332L15.7489 17.6866C15.7887 18.0681 15.5117 18.4096 15.1303 18.4493C15.0023 18.4627 14.8732 18.4402 14.7572 18.3845L10.3011 16.2412C10.1108 16.1497 9.8893 16.1497 9.69906 16.2412L5.24287 18.3845Z" data-v-b7c4e7d2=""></path></symbol><symbol id="icon-comment" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-v-b7c4e7d2=""><path fill-rule="evenodd" clip-rule="evenodd" d="M4.62739 1.25C2.9347 1.25 1.5625 2.6222 1.5625 4.31489L1.56396 12.643C1.56403 14.3356 2.9362 15.7078 4.62885 15.7078H6.48326L6.93691 17.6869L6.93884 17.6948C7.16894 18.6441 8.28598 19.0599 9.08073 18.4921L12.7965 15.7078H15.5001C17.1928 15.7078 18.565 14.3355 18.565 12.6428L18.5635 4.31477C18.5635 2.62213 17.1913 1.25 15.4986 1.25H4.62739ZM5.98265 9.89255C6.68783 9.89255 7.2595 9.32089 7.2595 8.61571C7.2595 7.91053 6.68783 7.33887 5.98265 7.33887C5.27747 7.33887 4.70581 7.91053 4.70581 8.61571C4.70581 9.32089 5.27747 9.89255 5.98265 9.89255ZM9.95604 9.89255C10.6612 9.89255 11.2329 9.32089 11.2329 8.61571C11.2329 7.91053 10.6612 7.33887 9.95604 7.33887C9.25086 7.33887 8.6792 7.91053 8.6792 8.61571C8.6792 9.32089 9.25086 9.89255 9.95604 9.89255ZM15.2124 8.61571C15.2124 9.32089 14.6407 9.89255 13.9355 9.89255C13.2304 9.89255 12.6587 9.32089 12.6587 8.61571C12.6587 7.91053 13.2304 7.33887 13.9355 7.33887C14.6407 7.33887 15.2124 7.91053 15.2124 8.61571Z" data-v-b7c4e7d2=""></path></symbol><symbol id="icon-zan" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-v-b7c4e7d2=""><path fill-rule="evenodd" clip-rule="evenodd" d="M13.0651 3.25923C12.6654 2.21523 12.1276 1.60359 11.4633 1.40559C10.8071 1.21 10.2539 1.48626 9.97848 1.67918C9.43962 2.05668 9.17297 2.64897 9.0009 3.12662C8.93522 3.30893 8.87504 3.50032 8.82077 3.67291L8.82077 3.67292C8.80276 3.73019 8.78541 3.78539 8.76872 3.8375C8.6974 4.06017 8.63455 4.23905 8.56561 4.38315C8.07104 5.41687 7.64014 6.034 7.2617 6.43277C6.89154 6.8228 6.5498 7.0275 6.18413 7.21038C5.8887 7.35813 5.69369 7.66144 5.69365 8.00211L5.69237 17.3908C5.6923 17.8783 6.08754 18.2736 6.57511 18.2736H14.8382C15.2621 18.2736 15.5829 18.1393 15.8149 17.9421C15.9234 17.8497 15.9985 17.7554 16.0484 17.6856C16.0695 17.6561 16.088 17.6282 16.0983 17.6126L16.1017 17.6075L16.1033 17.6051L16.1194 17.5857L16.1428 17.5478C16.913 16.3019 17.4472 15.3088 17.8659 14.1183C18.3431 12.7613 18.5849 11.5853 18.6874 10.6685C18.7871 9.77617 18.7612 9.07318 18.6558 8.68779C18.5062 8.14118 18.138 7.82653 17.7668 7.66617C17.4231 7.51771 17.0763 7.49836 16.8785 7.49807L13.1134 7.44551C13.662 5.19751 13.31 3.89889 13.0651 3.25923ZM1.251 8.0848C1.22726 7.5815 1.62891 7.16046 2.13277 7.16046H3.4408C3.92832 7.16046 4.32354 7.55568 4.32354 8.04321V17.4303C4.32354 17.9178 3.92832 18.313 3.4408 18.313H2.57554C2.10419 18.313 1.71599 17.9427 1.69378 17.4718L1.251 8.0848Z" data-v-b7c4e7d2=""></path></symbol><symbol id="icon-share" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-v-b7c4e7d2=""><path fill-rule="evenodd" clip-rule="evenodd" d="M10.4167 6.40399C5.35406 6.40399 1.25 10.5675 1.25 15.7035C1.25 16.0225 1.28448 16.4512 1.35344 16.9898C1.36807 17.1039 1.47243 17.1846 1.58655 17.17C1.6483 17.1621 1.70328 17.127 1.73643 17.0743L1.86865 16.8676C1.99553 16.6731 2.10644 16.5147 2.20137 16.3925C3.69554 14.4692 6.13777 13.3823 9.35515 13.3378L10.4167 13.3364V17.0757C10.4167 17.3101 10.6086 17.5 10.8453 17.5C10.959 17.5 11.068 17.4553 11.1483 17.3757L18.145 10.45C18.3961 10.2015 18.3961 9.79853 18.145 9.55L11.1483 2.62426C10.981 2.45858 10.7096 2.45858 10.5422 2.62426C10.4618 2.70383 10.4167 2.81174 10.4167 2.92426V6.40399Z" data-v-b7c4e7d2=""></path></symbol><symbol id="icon-report" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-v-b7c4e7d2=""><path fill-rule="evenodd" clip-rule="evenodd" d="M10.8389 1.89381C11.0873 2.03868 11.2939 2.24532 11.4388 2.49366L18.9369 15.0065C19.4007 15.8015 19.1322 16.8221 18.3371 17.2859C18.0822 17.4346 17.7924 17.5129 17.4973 17.5129H2.50041C1.57993 17.5129 0.83374 16.7667 0.83374 15.8462C0.83374 15.5512 0.912088 15.2614 1.06078 15.0065L8.5595 2.49366C9.0233 1.69857 10.0438 1.43001 10.8389 1.89381ZM10.3118 13.3459C10.6283 13.3459 10.8848 13.6025 10.8848 13.9189V14.4918C10.8848 14.8082 10.6283 15.0647 10.3118 15.0647H9.73893C9.42252 15.0647 9.16602 14.8082 9.16602 14.4918V13.9189C9.16602 13.6025 9.42252 13.3459 9.73893 13.3459H10.3118ZM10.8356 7.09513C10.8356 6.86502 10.6491 6.67847 10.419 6.67847H9.58512C9.35501 6.67847 9.16846 6.86502 9.16846 7.09513V12.0956C9.16846 12.3257 9.35501 12.5123 9.58512 12.5123H10.419C10.6491 12.5123 10.8356 12.3257 10.8356 12.0956V7.09513Z" data-v-b7c4e7d2=""></path></symbol><symbol id="icon-immerse" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-v-b7c4e7d2=""><path fill-rule="evenodd" clip-rule="evenodd" d="M0.25 1C0.25 0.585786 0.585786 0.25 1 0.25H4C4.41421 0.25 4.75 0.585786 4.75 1C4.75 1.41421 4.41421 1.75 4 1.75H1.75V4C1.75 4.41421 1.41421 4.75 1 4.75C0.585786 4.75 0.25 4.41421 0.25 4V1ZM0.25 19C0.25 19.4142 0.585786 19.75 1 19.75H4C4.41421 19.75 4.75 19.4142 4.75 19C4.75 18.5858 4.41421 18.25 4 18.25H1.75V16C1.75 15.5858 1.41421 15.25 1 15.25C0.585786 15.25 0.25 15.5858 0.25 16V19ZM19 0.25C19.4142 0.25 19.75 0.585786 19.75 1V4C19.75 4.41421 19.4142 4.75 19 4.75C18.5858 4.75 18.25 4.41421 18.25 4V1.75H16C15.5858 1.75 15.25 1.41421 15.25 1C15.25 0.585786 15.5858 0.25 16 0.25H19ZM19.75 19C19.75 19.4142 19.4142 19.75 19 19.75H16C15.5858 19.75 15.25 19.4142 15.25 19C15.25 18.5858 15.5858 18.25 16 18.25H18.25V16C18.25 15.5858 18.5858 15.25 19 15.25C19.4142 15.25 19.75 15.5858 19.75 16V19ZM7 5C5.89543 5 5 5.89543 5 7V13C5 14.1046 5.89543 15 7 15H13C14.1046 15 15 14.1046 15 13V7C15 5.89543 14.1046 5 13 5H7Z" data-v-b7c4e7d2=""></path></symbol><symbol id="icon-wechat" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-v-b7c4e7d2=""><path fill-rule="evenodd" clip-rule="evenodd" d="M13.5578 5.34061C12.0476 2.85722 8.90911 1.73257 6.11813 2.05358C4.56413 2.23231 3.0449 2.85861 1.88463 3.92471C1.00689 4.72863 0.354462 5.78486 0.109889 6.95889C-0.187864 8.37395 0.125815 9.85314 0.957723 11.0298C1.28982 11.4994 1.68479 11.9193 2.11951 12.2941C2.25136 12.4079 2.38694 12.5172 2.52543 12.6228C2.59301 12.6742 2.66115 12.7249 2.73011 12.7745C2.74195 12.7831 2.75392 12.7902 2.76512 12.7969C2.80389 12.8201 2.83351 12.8378 2.81653 12.8887L2.67458 13.3177C2.53986 13.7252 2.40492 14.1325 2.26998 14.5399C2.22084 14.6883 2.17169 14.8366 2.12256 14.985L2.61572 14.7368C2.85714 14.6151 3.09863 14.4935 3.34012 14.3719C3.58099 14.2507 3.82186 14.1294 4.06266 14.0081L4.40902 13.8337C4.42474 13.8257 4.44104 13.8164 4.45775 13.8069C4.51759 13.7728 4.58265 13.7356 4.64501 13.7481C4.76613 13.7723 4.88708 13.7972 5.00801 13.8221C5.08094 13.8372 5.15386 13.8522 5.22681 13.867C6.06287 14.0373 6.88508 14.1348 7.73859 14.0675C7.4486 13.0669 7.44915 12.0016 7.7559 11.0045C8.09853 9.88624 8.81438 8.89831 9.74448 8.19773C11.0171 7.23915 12.6431 6.81493 14.2212 6.99199C14.0895 6.4081 13.8688 5.85148 13.5578 5.34061ZM4.77922 5.02147C4.28094 5.02147 3.71299 5.35514 3.71299 5.90829C3.71299 6.46088 4.28066 6.79844 4.77922 6.79844C5.29233 6.79844 5.66293 6.42291 5.66293 5.90829C5.66293 5.39311 5.29205 5.02147 4.77922 5.02147ZM10.6158 5.90829C10.6158 6.42444 10.2434 6.79844 9.7296 6.79844C9.23076 6.79844 8.66641 6.46032 8.66641 5.90829C8.66641 5.3557 9.23104 5.02147 9.7296 5.02147C10.2431 5.02147 10.6158 5.39158 10.6158 5.90829ZM17.7911 8.53846C15.3552 6.80489 11.734 6.93368 9.53048 9.01108C8.77779 9.72181 8.22909 10.6485 8.04061 11.6744C7.78288 13.0799 8.22536 14.5441 9.17304 15.605C10.0674 16.6063 11.2889 17.2564 12.5986 17.5166C13.4216 17.6806 14.2559 17.6931 15.0799 17.5344C15.2863 17.4948 15.4911 17.4481 15.6954 17.3986C15.7826 17.3774 15.8697 17.3559 15.9568 17.334C15.9655 17.3319 15.9784 17.3272 15.9934 17.3219C16.0359 17.3068 16.0949 17.2858 16.118 17.2984C16.2476 17.3695 16.3771 17.4408 16.5066 17.5122L17.0557 17.8142L17.0577 17.8153L17.0598 17.8164C17.3912 17.9986 17.7227 18.1809 18.054 18.3634C17.9748 18.0977 17.895 17.832 17.8153 17.5664L17.8146 17.5641L17.6749 17.0981L17.5814 16.7863L17.5332 16.6257C17.5159 16.5675 17.5927 16.5183 17.6556 16.4779C17.6753 16.4653 17.6937 16.4535 17.7073 16.4426C18.0608 16.1622 18.3952 15.8558 18.6963 15.5191C19.1832 14.9747 19.5895 14.3498 19.8161 13.6505C20.0122 13.039 20.0488 12.392 19.9377 11.7604C19.7098 10.438 18.8643 9.30511 17.7911 8.53846ZM15.2396 11.0049C15.1595 10.6088 15.5334 10.1787 15.931 10.1787C16.3063 10.1787 16.7409 10.3931 16.8096 10.7989C16.8724 11.1695 16.556 11.4696 16.227 11.5617C15.8032 11.6802 15.3326 11.4649 15.2396 11.0049ZM12.0348 10.1787C11.6369 10.1787 11.2573 10.6064 11.3385 11.0049C11.4325 11.4667 11.9081 11.68 12.3327 11.5617C12.6626 11.4696 12.9753 11.1695 12.9134 10.7989C12.8453 10.3914 12.4112 10.1787 12.0348 10.1787Z" data-v-b7c4e7d2=""></path></symbol><symbol id="icon-weibo" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-v-b7c4e7d2=""><path fill-rule="evenodd" clip-rule="evenodd" d="M-0.000244141 13.0984C-0.000244141 8.70757 6.6145 3.5004 9.18008 4.57052C10.1717 4.98415 9.97381 6.1693 9.85415 6.88576C9.8069 7.16863 9.77186 7.37844 9.82705 7.43887C9.92921 7.55074 10.2955 7.42054 10.7994 7.2414C11.8362 6.87286 13.4557 6.2972 14.5566 7.19617C15.2665 7.77576 14.9657 8.72382 14.7905 9.27603C14.7289 9.4701 14.6829 9.61528 14.7017 9.6784C14.741 9.81053 14.9858 9.91133 15.317 10.0477C15.926 10.2984 16.8269 10.6692 17.2784 11.5759C18.3716 13.7713 15.2036 18.2504 8.62234 18.2504C3.25024 18.2504 -0.000244141 15.6688 -0.000244141 13.0984ZM8.45309 17.057C11.7733 16.7393 14.2944 14.7397 14.0842 12.5908C13.874 10.4418 11.012 8.95732 7.69179 9.27503C4.37159 9.59274 1.85045 11.5924 2.06068 13.7413C2.2709 15.8902 5.13288 17.3747 8.45309 17.057Z" data-v-b7c4e7d2=""></path><path fill-rule="evenodd" clip-rule="evenodd" d="M10.7098 12.7012C11.1162 14.1374 10.0604 15.6852 8.35157 16.1581C6.64275 16.6311 4.92801 15.8502 4.5216 14.4139C4.11518 12.9777 5.171 11.4299 6.87982 10.957C8.58865 10.484 10.3034 11.2649 10.7098 12.7012ZM7.67026 13.6265C7.89619 14.1072 7.61751 14.7092 7.04779 14.9711C6.47808 15.2331 5.83308 15.0558 5.60715 14.5751C5.38122 14.0945 5.6599 13.4925 6.22962 13.2306C6.79933 12.9686 7.44433 13.1459 7.67026 13.6265ZM8.41746 13.3766C8.63945 13.2745 8.74804 13.0399 8.66001 12.8526C8.57197 12.6654 8.32065 12.5963 8.09866 12.6984C7.87667 12.8004 7.76808 13.035 7.85612 13.2223C7.94415 13.4095 8.19547 13.4786 8.41746 13.3766Z" data-v-b7c4e7d2=""></path><path d="M13.648 3.54836C13.9523 3.47388 14.2712 3.43418 14.6004 3.43418C16.7813 3.43418 18.5492 5.18267 18.5492 7.33955C18.5492 7.81593 18.4633 8.27085 18.3066 8.69104C18.168 9.06261 18.3602 9.47493 18.7359 9.61199C19.1116 9.74904 19.5285 9.55894 19.6671 9.18737C19.8822 8.61063 19.9993 7.98781 19.9993 7.33955C19.9993 4.3906 17.5822 2 14.6004 2C14.1528 2 13.717 2.05403 13.2996 2.15619C12.9109 2.25133 12.6738 2.64011 12.77 3.02455C12.8662 3.40899 13.2593 3.6435 13.648 3.54836Z" data-v-b7c4e7d2=""></path><path d="M14.2887 6.05162C14.388 6.02824 14.4923 6.01569 14.6004 6.01569C15.3397 6.01569 15.939 6.6084 15.939 7.33955C15.939 7.49914 15.9108 7.65062 15.8596 7.7904C15.7232 8.16277 15.9179 8.57396 16.2944 8.70881C16.6709 8.84366 17.0867 8.65112 17.2231 8.27875C17.3307 7.98466 17.3891 7.66805 17.3891 7.33955C17.3891 5.81633 16.1406 4.58152 14.6004 4.58152C14.3784 4.58152 14.1614 4.60734 13.9529 4.65643C13.5633 4.74813 13.3227 5.1348 13.4154 5.52008C13.5082 5.90535 13.8991 6.14333 14.2887 6.05162Z" data-v-b7c4e7d2=""></path></symbol><symbol id="icon-qq" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-v-b7c4e7d2=""><path d="M11.8841 17.1943C11.1815 17.1943 10.5625 17.2136 10.0541 17.26C9.44625 17.2112 8.8365 17.1898 8.22671 17.1956C6.20498 17.1956 4.40588 17.9613 4.40588 18.5263C4.40588 19.0681 5.89998 19.0076 7.91657 18.987C8.64426 18.985 9.3699 18.9096 10.0824 18.7618C10.6796 18.8879 11.4079 18.9677 12.193 18.9741C14.2095 18.9947 15.7024 19.0552 15.7024 18.5173C15.7024 17.9549 13.9045 17.1943 11.8841 17.1943V17.1943Z" data-v-b7c4e7d2=""></path><path d="M16.9138 11.6311C16.5346 10.6112 16.1212 9.60428 15.6745 8.61206C15.6951 8.37141 15.7054 8.12818 15.7054 7.8811C15.7054 4.08086 13.7622 1 10.0649 1C6.36759 1 4.42307 4.08086 4.42307 7.8811C4.42307 8.11274 4.43208 8.34052 4.45138 8.56573C3.99804 9.5756 3.57913 10.6006 3.19536 11.6389C2.41678 13.7494 2.38203 15.6566 2.65357 15.7982C2.84661 15.8985 3.54797 15.1611 4.21845 13.9669C4.66115 16.7801 6.53102 18.8842 10.0649 18.8842C13.5871 18.8842 15.457 16.7916 15.9074 13.99C16.5728 15.1611 17.2664 15.8818 17.4569 15.7814C17.7284 15.6399 17.6937 13.7365 16.9138 11.6311V11.6311Z" data-v-b7c4e7d2=""></path><path d="M8.5542 3.2522C8.00598 3.26507 7.57358 3.90981 7.58902 4.69739C7.60447 5.48369 8.06132 6.11299 8.60954 6.1027C9.15776 6.0924 9.59016 5.44637 9.57472 4.65879C9.56056 3.87249 9.10243 3.24319 8.5542 3.25348V3.2522ZM11.5862 3.26764C11.0315 3.25734 10.5695 3.88278 10.5541 4.66651C10.5386 5.44895 10.9749 6.0924 11.5308 6.1027C12.0842 6.11299 12.5475 5.48755 12.5629 4.70512C12.5784 3.92139 12.1408 3.27794 11.5862 3.26764V3.26764Z" data-v-b7c4e7d2=""></path><path d="M13.6704 9.57861C12.5971 9.76521 11.354 9.87074 10.0285 9.87074C8.7287 9.87074 7.50742 9.76779 6.44959 9.58762C5.71605 10.4962 5.65942 11.8307 5.65942 13.3184C5.65942 16.0505 7.20371 18.2665 10.0645 18.2665C12.924 18.2665 14.4696 16.0505 14.4696 13.3184C14.4696 11.8243 14.4104 10.4859 13.6704 9.57861V9.57861Z" data-v-b7c4e7d2=""></path><path d="M10.0628 6.56616C8.14273 6.56616 6.58557 6.95223 6.58557 7.26238C6.58557 7.57124 8.62146 8.42188 10.0641 8.42188C11.5054 8.42188 13.5413 7.55065 13.5413 7.26238C13.5413 6.97411 11.9842 6.56745 10.0641 6.56745L10.0628 6.56616Z" data-v-b7c4e7d2=""></path><path d="M15.6744 8.6121L15.6757 8.59151C14.264 9.05866 12.2718 9.35078 10.0648 9.35078C7.8513 9.35078 5.85402 9.05737 4.441 8.58765C4.14115 9.25684 3.85546 9.93375 3.58521 10.6171C4.45644 10.9054 5.43192 11.1357 6.48332 11.2992V13.8858C6.48332 13.8858 7.22715 14.0235 7.92981 14.0531C8.42784 14.0737 8.95676 13.9888 8.95676 13.9888V11.5398C9.32095 11.5565 9.6903 11.5656 10.0635 11.5656C12.4919 11.5656 14.7311 11.2142 16.5251 10.6222C16.2566 9.94593 15.9729 9.27571 15.6744 8.6121V8.6121Z" data-v-b7c4e7d2=""></path><path d="M8.87981 4.24829C8.63787 4.24829 8.44226 4.53656 8.44226 4.89174C8.44226 5.24693 8.63787 5.5352 8.87981 5.5352C9.12046 5.5352 9.31736 5.24693 9.31736 4.89174C9.31736 4.53656 9.12046 4.24829 8.87981 4.24829V4.24829ZM12.0997 4.65624C12.0997 4.65624 11.9246 4.41816 11.4819 4.48122C11.0444 4.54428 10.8745 4.83126 10.8423 4.86215C10.8423 4.86215 10.7381 5.0243 10.8115 5.12467C10.8848 5.22505 11.0174 5.06676 11.0174 5.06676C11.0174 5.06676 11.2194 4.78364 11.4806 4.77335C11.6273 4.76349 11.7729 4.80489 11.8925 4.89046C11.8925 4.89046 12.0211 4.99856 12.0984 4.89046C12.1769 4.78364 12.0997 4.65624 12.0997 4.65624V4.65624Z" data-v-b7c4e7d2=""></path></symbol></svg> <div badge="147" class="panel-btn with-badge" data-v-b7c4e7d2=""><svg class="sprite-icon icon-zan" data-v-0f838daa="" data-v-b7c4e7d2=""><use xlink:href="#icon-zan" data-v-0f838daa=""></use></svg></div> <div badge="15" class="panel-btn with-badge" data-v-b7c4e7d2=""><svg class="sprite-icon icon-comment" data-v-0f838daa="" data-v-b7c4e7d2=""><use xlink:href="#icon-comment" data-v-0f838daa=""></use></svg></div> <div class="panel-btn" data-v-b7c4e7d2=""><svg class="sprite-icon icon-collect" data-v-0f838daa="" data-v-b7c4e7d2=""><use xlink:href="#icon-collect" data-v-0f838daa=""></use></svg> <div class="collect-popover" data-v-d0b73df6="" data-v-b7c4e7d2=""><div class="title" data-v-d0b73df6="">收藏成功！</div> <div class="sub-title" data-v-d0b73df6="">
    已添加到「」，
    <span class="modify-btn" data-v-d0b73df6="">点击更改</span></div></div> <!----> <!----></div> <div class="share-btn panel-btn" data-v-b7c4e7d2=""><svg class="sprite-icon icon-share" data-v-0f838daa="" data-v-b7c4e7d2=""><use xlink:href="#icon-share" data-v-0f838daa=""></use></svg> <div class="share-popup" data-v-b7c4e7d2=""><ul data-v-b7c4e7d2=""><li class="share-item wechat" data-v-b7c4e7d2=""><svg class="sprite-icon share-icon icon-wechat" data-v-0f838daa="" data-v-b7c4e7d2=""><use xlink:href="#icon-wechat" data-v-0f838daa=""></use></svg> <span class="share-item-title" data-v-b7c4e7d2="">微信</span> <div class="wechat-qrcode" data-v-b7c4e7d2=""><img src="https://juejin.cn/post/6991689670027542564" class="wechat-qrcode-img" style="display:none;" data-v-b7c4e7d2=""> <span class="wechat-qrcode-title" data-v-b7c4e7d2="">微信扫码分享</span></div></li> <li class="share-item weibo" data-v-b7c4e7d2=""><svg class="sprite-icon share-icon icon-weibo" data-v-0f838daa="" data-v-b7c4e7d2=""><use xlink:href="#icon-weibo" data-v-0f838daa=""></use></svg> <span class="share-item-title" data-v-b7c4e7d2="">新浪微博</span></li> <li class="share-item qq" data-v-b7c4e7d2=""><svg class="sprite-icon share-icon icon-qq" data-v-0f838daa="" data-v-b7c4e7d2=""><use xlink:href="#icon-qq" data-v-0f838daa=""></use></svg> <span class="share-item-title" data-v-b7c4e7d2="">QQ</span></li></ul></div></div> <div class="divider" data-v-b7c4e7d2=""></div> <div class="panel-btn" data-v-b7c4e7d2=""><svg class="sprite-icon icon-report" data-v-0f838daa="" data-v-b7c4e7d2=""><use xlink:href="#icon-report" data-v-0f838daa=""></use></svg></div> <span class="tooltip" data-v-b7c4e7d2=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        沉浸阅读
      </div><span class="byte-tooltip__wrapper"><div class="panel-btn" data-v-b7c4e7d2=""><svg class="sprite-icon icon-immerse" data-v-0f838daa="" data-v-b7c4e7d2=""><use xlink:href="#icon-immerse" data-v-0f838daa=""></use></svg></div></span></span></div></div> <!----></main> <!----></div> <!----> <div class="global-component-box"><div data-v-262fe4c6="" class="alert-list alert-list"></div> <div data-v-0b2d23d8="" class="suspension-panel suspension-panel"><!----> <button data-v-0b2d23d8="" title="回到顶部" class="btn to-top-btn" style=""><svg data-v-0b2d23d8="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-0b2d23d8="" fill-rule="evenodd" clip-rule="evenodd" d="M2.75 1C2.33579 1 2 1.33579 2 1.75C2 2.16421 2.33579 2.5 2.75 2.5H13.25C13.6642 2.5 14 2.16421 14 1.75C14 1.33579 13.6642 1 13.25 1H2.75ZM7.24407 3.87287C7.64284 3.41241 8.35716 3.41241 8.75593 3.87287L13.0622 8.84535C13.6231 9.49299 13.163 10.5 12.3063 10.5H10V14C10 14.5523 9.55228 15 9 15H7C6.44772 15 6 14.5523 6 14V10.5H3.69371C2.83696 10.5 2.37691 9.49299 2.93778 8.84535L7.24407 3.87287Z" fill="#8A919F"></path></svg></button> <button data-v-0b2d23d8="" title="建议反馈" class="btn meiqia-btn" style=""><svg data-v-0b2d23d8="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-feedback"><path data-v-0b2d23d8="" fill-rule="evenodd" clip-rule="evenodd" d="M1.8252 4.002C1.8252 2.80032 2.79935 1.82617 4.00102 1.82617H12.001C13.2027 1.82617 14.1768 2.80032 14.1768 4.002V9.71628C14.1768 10.918 13.2027 11.8921 12.001 11.8921H9.43308L6.92709 14.1281C6.4455 14.5578 5.68234 14.216 5.68234 13.5706V11.8921H4.00102C2.79934 11.8921 1.8252 10.918 1.8252 9.71628V4.002ZM11.2414 7.86753C11.3826 7.65526 11.3249 7.36878 11.1126 7.22764C10.9004 7.08651 10.6139 7.14417 10.4728 7.35643C9.94042 8.15705 9.03153 8.68309 7.99997 8.68309C6.96841 8.68309 6.05952 8.15705 5.52719 7.35643C5.38605 7.14417 5.09957 7.08651 4.88731 7.22764C4.67504 7.36878 4.61738 7.65526 4.75852 7.86753C5.45467 8.91452 6.64645 9.60617 7.99997 9.60617C9.35349 9.60617 10.5453 8.91452 11.2414 7.86753Z" fill="#1E80FF"></path></svg></button></div> <!----> <!----> <!----> <!----> <!----></div> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----></div></div></div><script>window.__NUXT__=(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){t.loading=a;t.skeleton=b;t.cursor=f;t.data=[];t.total=d;t.hasMore=b;return {layout:"default",data:[{skipSSR:a,additionalDataUseCSR:b}],fetch:[{bdPageUrlForNav:"https:\u002F\u002Fbd.juejin.cn?utm_campaign=bd&utm_source=web&utm_medium=nav",queryString:e,isShowUserDropdownList:a,isShowAddMoreList:a,isFocus:a,isPhoneMenuShow:a,visibleBadge:a,placeholder:e,hiddenProperty:"hidden",searchHistoryVisible:a,searchHistoryItems:[],tabBadge:c,isChangePlaceholder:b,showMallBridge:a,isGuideLoginHeaderVisible:a,loginGuideTimer:c,loginGuideStartTime:d,loginGuideNextTime:d,needLoginGuide:a},{articleBanner:{url:"https:\u002F\u002Fjuejin.cn\u002Fextension\u002F?utm_source=standalone&utm_medium=post&utm_campaign=extension_promotion",title:"安装掘金浏览器插件",content:"多内容聚合浏览、多引擎快捷搜索、多工具便捷提效、多模式随心畅享，你想要的，这里都有！"},showExtension:b}],error:c,state:{view:{activityIndex:{activityList:[],pageInfo:{hasNextPage:a,endCursor:e},afterPosition:e,activityListIsLoading:b,activityListIsError:a,userActivityList:[],placeholder:e,actionType:{FETCH:"@\u002Fview\u002Factivity-index\u002FFETCH",FETCH_RECOMMEND_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_RECOMMEND_LIST",RESET_ACTIVITY_LIST:"@\u002Fview\u002Factivity-index\u002FRESET_ACTIVITY_LIST",FETCH_USER_ACTIVITY_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_USER_ACTIVITY_LIST",FETCH_NEW_COUNT:"@\u002Fview\u002Factivity-index\u002FFETCH_NEW_COUNT",DELETE_ACTIVITY:"@\u002Fview\u002Factivity-index\u002FDELETE_ACTIVITY",TOGGLE_FOLLOW_USER:"@\u002Fview\u002Factivity-index\u002FTOGGLE_FOLLOW_USER",FETCH_ENTRY_COMMENT_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_ENTRY_COMMENT_LIST",UPDATE_LIST_LOADING:"@\u002Fview\u002Factivity-index\u002FUPDATE_LIST_LOADING",RESET:"@\u002Fview\u002Factivity-index\u002FRESET"},hotList:{list:[],after:e,loading:a,hasNextPage:a,actionType:{UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FFETCH",RESET:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FRESET"}},sidebar:{bannerList:[],actionType:{RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FRESET",UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FUPDATE_STATE",FETCH_BANNER:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FFETCH_BANNER"},recommend:{pageSize:h,page:d,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FRESET"},after:d},followed:{pageSize:h,page:d,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FRESET"},after:d},recommendPin:{list:[],after:e,loading:a,hasNextPage:b,actionType:{UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FFETCH",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FRESET"}}},topicPinList:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FRESET"},topicId:e,navList:[{type:k,name:k,title:"推荐 ",id:k},{type:l,name:l,title:"热门 ",id:l},{type:r,name:r,title:"关注 ",id:r},{type:i,name:"opensource",title:"开源推荐 ",id:"5c09ea2b092dcb42c740fe73"},{type:i,name:"recruitment",title:"内推招聘",id:"5abb61e1092dcb4620ca3322"},{type:i,name:"dating",title:"掘金相亲",id:"5abcaa67092dcb4620ca335c"},{type:i,name:"slacking",title:"上班摸鱼",id:"5c106be9092dcb2cc5de7257"},{type:i,name:"app",title:"应用安利",id:"5b514af1092dcb61bd72800d"},{type:i,name:"tool",title:"开发工具",id:"5abb67d2092dcb4620ca3324"},{type:i,name:"news",title:"New资讯",id:"5c46a17f092dcb4737217152"}],sortType:s}},search:{search_result_from:d,query:e,list:[],linkList:[],loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fsearch\u002FFETCH",FETCH_MORE:"@\u002Fview\u002Fsearch\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fsearch\u002FRESET"}},columnIndex:{list:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FRESET"},sort:m,category:"all"},hotList:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FUPDATE",FETCH:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFETCH_MORE",RESET:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FRESET"}}},timelineIndex:{tdkTemplates:[],categoryNavList:[],tagNavList:[],splitTagList:[],timelineAdList:[],list:[],sort:s,category:k,categoryId:e,tagId:e,tag:"全部",actionType:{FETCH_TIMELINE_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_TIMELINE_LIST",FETCH_CATEGORY_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_CATEGORY_LIST",FETCH_TAG_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_TAG_LIST",DELETE_ENTRY:"@\u002Fview\u002FtimelineIndex\u002FDELETE_ENTRY",DELETE_USER_ENTRIES:"@\u002Fview\u002FtimelineIndex\u002FDELETE_USER_ENTRIES",DELETE_TAG_ENTRIES:"@\u002Fview\u002FtimelineIndex\u002FDELETE_TAG_ENTRIES",FETCH_MORE:"@\u002Fview\u002FtimelineIndex\u002FFETCH_MORE",FETCH:"@\u002Fview\u002FtimelineIndex\u002FFETCH",RESET:"@\u002Fview\u002FtimelineIndex\u002FRESET"},serverRenderTimelineList:a,timelineList:{list:[],cursor:f,skeleton:b,loading:a,hasMore:b,categoryId:e,tagId:e,sort:e,actionType:{UPDATE_STATE:"timeline-list\u002FUPDATE_STATE",FETCH_MORE:"timeline-list\u002FFETCH_MORE",FETCH:"timeline-list\u002FFETCH",RESET:"timeline-list\u002FRESET"}},recommendList:{list:[],cursor:f,loading:a,skeleton:b,hasMore:b,actionType:{UPDATE_STATE:"recommend-list\u002FUPDATE_STATE",FETCH_MORE:"recommend-list\u002FFETCH_MORE",FETCH:"recommend-list\u002FFETCH",RESET:"recommend-list\u002FRESET"}},followingList:{list:[],cursor:f,skeleton:b,loading:a,hasMore:b,actionType:{UPDATE_STATE:"following-list\u002FUPDATE_STATE",FETCH_MORE:"following-list\u002FFETCH_MORE",FETCH:"following-list\u002FFETCH",RESET:"following-list\u002FRESET"}}},subscribe:{subscribed:{list:[],cursor:f,skeleton:b,loading:a,hasMore:a,actionType:{UPDATE_STATE:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FFETCH_MORE",FETCH:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FFETCH",RESET:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FRESET"}},all:{list:[],cursor:f,loading:a,skeleton:b,hasMore:a,linkList:e,actionType:{UPDATE_STATE:"view\u002Fsubscribe\u002Fall\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fsubscribe\u002Fall\u002Flist\u002FFETCH_MORE",FETCH:"view\u002Fsubscribe\u002Fall\u002Flist\u002FFETCH",RESET:"view\u002Fsubscribe\u002Fall\u002Flist\u002FRESET"}}},entryPublic:{entry:{user:{}},relatedEntryList:[],relatedCollectionList:[],actionType:{FETCH:"@\u002Fview\u002FentryPublic\u002FFETCH",RESET:"@\u002Fview\u002FentryPublic\u002FRESET"}},user:{user:{},serverRendered:a,userAnnuals:[],actionType:{FETCH:"@\u002Fview\u002Fuser\u002FFETCH",RESET:"@\u002Fview\u002Fuser\u002FRESET",UPDATE:"@\u002Fview\u002Fuser\u002FUPDATE",FETCH_ANNUALS:"@\u002Fview\u002Fuser\u002FFETCH_ANNUALS"},detailList:{actionType:{RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FRESET"},likeList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FRESET"}},postList:{list:[],hasMore:a,skeleton:a,loading:a,sort:m,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FRESET"}},searchList:{list:[],hasMore:a,skeleton:a,loading:a,key_word:e,search_type:d,cursor:f,isPostSearch:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FRESET"}},tagList:{list:[],loading:a,skeleton:b,hasMore:a,cursor:f,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FRESET"}},collectionList:{list:[],userId:e,skeleton:b,hasMore:a,cursor:f,type:"created",loading:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FRESET",TOGGLE_FOLLOW_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FTOGGLE_FOLLOW_COLLECTION",FOLLOW_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FFOLLOW_COLLECTION",UNFOLLOW_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FUNFOLLOW_COLLECTION",DELELTE_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FDELELTE_COLLECTION",ADD_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FADD_COLLECTION",EDIT_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FEDIT_COLLECTION"}},followerList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FRESET"}},followingList:{list:[],cursor:f,hasMore:a,skeleton:a,loading:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FRESET"}},followingTeamsList:{list:[],cursor:f,hasMore:a,skeleton:a,loading:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FRESET"}},activityList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FRESET"}},bookList:{list:[],cursor:f,skeleton:b,hasMore:a,loading:a,type:"bought",actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FRESET"}},pinList:{list:[],hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FRESET"}},courseList:{list:[],hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FRESET"}},pinPraisedList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FRESET"}},eventList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FRESET"}},selfColumnList:{list:[],hasMore:a,skeleton:a,loading:a,cursor:f,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FRESET"}},columnFollowedList:{list:[],hasMore:a,skeleton:a,loading:a,cursor:f,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FRESET",FILTER:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FFILTER"}},realtimes:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FRESET",DELETE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FDELETE"}},realtimeliked:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FRESET",DELETE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FDELETE"}}}},tag:{tag:{},actionType:{FETCH:"@\u002Fview\u002Ftag\u002FFETCH",FETCH_LIST:"@\u002Fview\u002Ftag\u002FFETCH_LIST",RESET:"@\u002Fview\u002Ftag\u002FRESET"},list:{list:[],cursor:f,loading:a,skeleton:a,hasMore:a,actionType:{UPDATE_STATE:"@\u002Fview\u002Ftag\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Ftag\u002Flist\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Ftag\u002Flist\u002FFETCH",RESET:"@\u002Fview\u002Ftag\u002Flist\u002FRESET"}}},notification:{user:{actionType:{READ_ALL:"@\u002Fview\u002Fnotification\u002Fuser\u002FREAD_ALL",RESET:"@\u002Fview\u002Fnotification\u002Fuser\u002FRESET"},listState:{list:[],cursor:f,hasMore:a,isLoading:a,messageType:3,msgTotal:d,msgSubMap:{"1":d,"2":d,"3":d,"4":d}},list:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FRESET"}}},system:{actionType:{READ_ALL:"@\u002Fview\u002Fnotification\u002Fsystem\u002FREAD_ALL",RESET:"@\u002Fview\u002Fnotification\u002Fsystem\u002FRESET"},list:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FRESET"}}}},column:{renderPost:b,serverRenderList:a,column:{id:w},entry:{id:w,screenshot:void 0,liked:a,article_id:w,article_info:{article_id:w,user_id:"4072246798979719",category_id:"6809637767543259144",tag_ids:[6809640396788859000,6809640361531539000],visible_level:d,link_url:e,cover_image:e,is_gfw:d,title:"如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像）",brief_content:"本文将以 Node 程序展示如何优化 Docker 镜像（优化思想是通用的，不分程序），主要解决镜像大小过大、CI\u002FCD 构建镜像速度，本文演示如何一步步优化 Dockerfile 文件，绝对的干货，",is_english:d,is_original:g,user_index:d,original_type:d,original_author:e,content:e,ctime:"1627879740",mtime:"1664457045",rtime:"1627970368",draft_id:"6991672289368473608",view_count:10307,collect_count:156,digg_count:147,comment_count:15,hot_index:677,is_hot:d,rank_index:.0038655,status:u,verify_status:g,audit_status:u,mark_content:"---\ntheme: vue-pro\nhighlight: androidstudio\n---\n本文将以 Node 程序展示如何优化 Docker 镜像（优化思想是通用的，不分程序），主要解决镜像大小过大、CI\u002FCD 构建镜像速度，本文演示如何一步步优化 Dockerfile 文件，绝对的干货，建议先赞再看，看完不是干货再取消赞也不是不行😅。优化的结果如下：\n\n1. **大小从 1.06G 到 73.4M**\n2. **构建速度从 29.6 秒到 1.3 秒**（对比的是第二次构建的速度）\n\n## Node 项目\n\n简单写了一个自己用的 [wechat-bot](https:\u002F\u002Fgithub.com\u002Fiamobj\u002Fwechat-bot) ，接下来就以这个项目演示怎么去优化 Docker 镜像\n\n以下是我没有仔细研究 Docker 刚开始写的 Dockerfile 文件\n\n```dockerfile\nFROM node:14.17.3\n\n# 设置环境变量\nENV NODE_ENV=production\nENV APP_PATH=\u002Fnode\u002Fapp\n\n# 设置工作目录\nWORKDIR $APP_PATH\n\n# 把当前目录下的所有文件拷贝到镜像的工作目录下 .dockerignore 指定的文件不会拷贝\nCOPY . $APP_PATH\n\n# 安装依赖\nRUN yarn\n\n# 暴露端口\nEXPOSE 4300\n\nCMD yarn start\n```\n\nbuild 之后，如下图，我这个简单的 Node 程序镜像竟然有 **1G** 多，接下来我们将逐步去优化减少这个大小\n\n![image-20210731140907227](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fe446948e70c843c592906d1277be0472~tplv-k3u1fbpfcp-zoom-1.image)\n\n## 优化前言\n\n在优化之前，有些东西我们必须了解，解决问题的第一步就是先找出导致问题的原因\n\n1. Dockerfile 文件，其内包含了一条条的指令，每一条指令构建一层，因此每一条指令的内容，就是描述该层如何构建\n\n2. Docker 镜像并非只是一个文件，而是由一堆文件组成，最主要的文件是 **层**（Layers）\n\n   - 镜像构建时，会一层层构建，前一层是后一层的基础\n\n     每一层构建完就不会再发生改变，后一层上的任何改变只发生在自己这一层。比如，删除前一层文件的操作，实际不是真的删除前一层的文件，而是仅在当前层标记为该文件已删除。在最终容器运行的时候，虽然不会看到这个文件，但是实际上该文件会一直跟随镜像\n\n   - 镜像层将会被缓存和复用（这也是从第二次开始构建镜像时，速度会快的原因，优化镜像构建速度的原理也是利用缓存原理来做）\n\n   - 当 Dockerfile 的指令修改了，操作的文件变化了，或者构建镜像时指定的变量不同了，对应的镜像层缓存就会失效\n\n     **docker build 的缓存机制，docker 是怎么知道文件变化的呢？**\n\n     Docker 采取的策略是：获取 Dockerfile 下内容（包括文件的部分 inode 信息），计算出一个唯一的 hash 值，若 hash 值未发生变化，则可以认为文件内容没有发生变化，可以使用缓存机制，反之亦然。\n\n   - 某一层的镜像缓存失效之后，它之后的镜像层缓存都会失效\n\n   - 镜像的每一层只记录文件变更，在容器启动时，Docker 会将镜像的各个层进行计算，最后生成一个文件系统\n\n     当我知道这点时，我恍然大悟，我们使用的操作系统，比如安卓、ios、win、mac 等，其实就是一个文件系统，我们的软件界面交互等，其实就是在读写文件，我们网页写个弹框，操作 dom，就是在读写本地文件或者是读写内存里的数据，个人的一些见解不知道对不对，本人非科班出身的前端 coder 😅\n\n   参考资料：[docker 镜像分层原理](https:\u002F\u002Fwww.cnblogs.com\u002Fhandwrit2000\u002Fp\u002F12871493.html)\n\nok，我们已经知道镜像是由多层文件系统组成，想要优化它的大小，就需要去减少层数、每一层尽量只包含该层需要的东西，任何额外的东西应该在该层构建结束前清理掉，下面开始正文\n\n![eXxZUW](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F97d480b0a42c48edbb600927824f4d35~tplv-k3u1fbpfcp-zoom-1.image)\n\n## 优化 Dockerfile\n\n### 优化第一层 `FROM node:14.17.3`\n\n#### 方案一：使用 node 的 Alpine 版本\n\n这也是绝多数人知道的优化镜像手段，Alpine 是一个很小的 Linux 发行版，只要选择 Node 的 Alpine 版本，就会有很大改进，我们把这一句改成指令改成 `FROM node:14.17.4-alpine ` （可以去 [dockerhub](https:\u002F\u002Fhub.docker.com\u002F_\u002Fnode?tab=description&page=1&ordering=last_updated) 查看 node 有哪些版本标签），build 后镜像大小如下图，瞬间**从 1.06G 降到 238M**，可以说是效果显著\n\n![image-20210731171210360](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F949e308a873342f7abe612a62f67fc9e~tplv-k3u1fbpfcp-zoom-1.image)\n\n还可以使用其它的基础小镜像，比如 [mhart\u002Falpine-node](https:\u002F\u002Fgithub.com\u002Fmhart\u002Falpine-node)，这个还能再小，改成 `FROM mhart\u002Falpine-node:14.17.3` 再试试，可以看到又小了 **5M**​ 😂，虽然不多，但是秉着能压榨一点是一点的“老板原则”，积少成多，极致压榨\n\n![image-20210731171706746](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fa52f444f82bc485981eed9deaf114b84~tplv-k3u1fbpfcp-zoom-1.image)\n\n#### 方案二：使用纯净 Alpine 镜像手动装 Node\n\n既然 Alpine 是最小的 Linux，那我们试下用纯净的 Alpine 镜像，自己再装 Node 试试\n\n```dockerfile\nFROM alpine:latest\n\n# 使用 apk 命令安装 nodejs 和 yarn，如果使用 npm 启动，就不需要装 yarn\nRUN apk add --no-cache --update nodejs=14.17.4-r0 yarn=1.22.10-r0\n\n# ... 后面的步骤不变\n```\n\nbuild 后看下图，只有 **174M** 了，又小了不少\n\n![image-20210731174258226](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Ff102c75f7d984fbca5c9d0d66f5732d0~tplv-k3u1fbpfcp-zoom-1.image)\n\n结论就是不嫌麻烦追求极致就用方案二，**从 1.06G 减少到 174M**\n\n![apG8c7](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F9ade7d0c09a947ab8b7a3804a3ca7ac5~tplv-k3u1fbpfcp-zoom-1.image)\n\u003E 注意：由于 alpine 的包仓库，提供的包版本是会有变动的，指定版本安装包（eg: nodejs、yarn）会在往后构建导致找不到包对应的版本导致构建失败\n\u003E\n\u003E [alpine 仓库](https:\u002F\u002Fpkgs.alpinelinux.org\u002Fpackages?name=nodejs&branch=edge)查询包版本示意图如下：\n\u003E\n\u003E ![image-20220617150447876](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F05ba62cb81bb459497b6fbb1e1e02214~tplv-k3u1fbpfcp-zoom-1.image)\n\u003E\n\u003E 下图引自热心评论里构建失败的图，提示没有找到对应包的版本，导致构建失败\n\u003E\n\u003E ![image-20220617145552502](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F67207e70ac7744a991b6608323235857~tplv-k3u1fbpfcp-zoom-1.image)\n\u003E\n\u003E 我想到两种解决办法：\n\u003E\n\u003E 1. 在安装包时不指定版本\n\u003E\n\u003E    `RUN apk add --no-cache --update nodejs yarn`\n\u003E\n\u003E 2. 自制一个 alpine-node 基础镜像\n\u003E\n\u003E    可以参考我自制的 [alpine-node 基础镜像](https:\u002F\u002Fgithub.com\u002Fiamobj\u002Falpine-node)，我 [wechat-bot](https:\u002F\u002Fgithub.com\u002Fiamobj\u002Fwechat-bot) 项目就是用的自制的\n\u003E\n\u003E 两种解决办法，个人是不建议用第一个，毕竟我们项目往往是要指定版本的，不同版本会导致项目的一些依赖运行差异，其实方案二纯属个人爱折腾，闲麻烦的直接用方案一，用现成的 node 的 Alpine 版本。\n\n### 减少层数、不经常变动的层提到前面去\n\n- `ENV` 指令是可以一次性设置多个环境变量，能一次指令执行完，就不用两次，多一个指令就多一层\n\n- `EXPOSE` 指令是暴露端口，其实也可以不用写这个指令，在启动容器的时候自己映射端口，如果写了这个指令的话，因为端口不经常变，所以把这个指令提前，写上这个指令有两个好处：\n\n  1. 帮助镜像使用者理解这个镜像服务的守护端口，以方便配置映射\n  2. 在运行时使用随机端口映射时，也就是 `docker run -P` 时，会自动随机映射 `EXPOSE` 的端口\n\n  至于写还是不写，看个人吧，我个人一般不写，因为我在项目启动命令会指定项目端口，启动容器的时候映射出来就好，这样我就要维护一个地方，Dockerfile 也写了的话，项目端口变了，这里也要修改，多了点维护成本，当然也有办法让两边端口变量取自配置文件，只要改配置文件即可\n\n  ![WyN8ZF](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fb89a75058fd34f6fa2dc3d0c81631a7c~tplv-k3u1fbpfcp-zoom-1.image)\n\n下面是改写后的 Dockerfile\n\n```dockerfile\nFROM alpine:latest\n\n# 使用 apk 命令安装 nodejs 和 yarn，如果使用 npm 启动，就不需要装 yarn\nRUN apk add --no-cache --update nodejs=14.17.4-r0 yarn=1.22.10-r0\n\n# 暴露端口\nEXPOSE 4300\n\n# 设置环境变量\nENV NODE_ENV=production \\\n    APP_PATH=\u002Fnode\u002Fapp\n\n# 设置工作目录\nWORKDIR $APP_PATH\n\n# 把当前目录下的所有文件拷贝到镜像的工作目录下 .dockerignore 指定的文件不会拷贝\nCOPY . $APP_PATH\n\n# 安装依赖\nRUN yarn\n\n# 启动命令\nCMD yarn start\n```\n\n这一步的优化，无论从镜像大小还是构建镜像速度都看不到明显的差别，因为改动的层内容少（体现不出来），但是可以查看到镜像的层是变少了的，可以自行试试查看镜像的层试试\n\n减少镜像层数是“好老板”的传统优良习惯，不让“员工”浪费资源\n\n![PChFeZ](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F837074c4e3eb47f3a71d86284f7278db~tplv-k3u1fbpfcp-zoom-1.image)\n\n### package.json 提前提高编译速度\n\n从下图可以看到每次我们 build 的时候最耗时的就是在执行 `yarn` 命令装依赖的时候，大部分时候我们只是改代码，依赖不变，这时候如果可以让这一步缓存起来，依赖没有变化的时候，就不需要重新装依赖，就可以大大改进编译速度\n\n![image-20210731211548456](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fcbb2c1d5994d40efbdbc3cba6cb36006~tplv-k3u1fbpfcp-zoom-1.image)\n\n前面我们说了镜像构建时，是一层层构建，前一层是后一层的基础，既然是这样的话，我们就把 package.json 文件单独提前拷贝到镜像，然后下一步装依赖，执行命令装依赖这层的前一层是拷贝 package.json 文件，因为安装依赖命令不会变化，所以只要 package.json 文件没变化，就不会重新执行 `yarn` 安装依赖，它会复用之前安装好的依赖，原理讲清楚了，下面我们看效果\n\n改变后的 Dockerfile 文件\n\n```dockerfile\nFROM alpine:latest\n\n# 使用 apk 命令安装 nodejs 和 yarn，如果使用 npm 启动，就不需要装 yarn\nRUN apk add --no-cache --update nodejs=14.17.4-r0 yarn=1.22.10-r0\n\n# 暴露端口\nEXPOSE 4300\n\n# 设置环境变量\nENV NODE_ENV=production \\\n    APP_PATH=\u002Fnode\u002Fapp\n\n# 设置工作目录\nWORKDIR $APP_PATH\n\n# 拷贝 package.json 到工作跟目录下\nCOPY package.json .\n\n# 安装依赖\nRUN yarn\n\n# 把当前目录下的所有文件拷贝到镜像的工作目录下 .dockerignore 指定的文件不会拷贝\nCOPY . .\n\n# 启动命令\nCMD yarn start\n```\n\nbuild 看下图，编译时间从 29.6s 到 1.3s，使用了缓存的层前面会有个 CACHED 字眼，仔细看下图可以看到\n\n![image-20210731215943833](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Ffdf55a6a1fc34fa482673d89eded7cbb~tplv-k3u1fbpfcp-zoom-1.image)\n\n充分利用 docker 缓存特性是优化构建速度的利器\n\n![nSjmZb](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fc9a55b691a4b4e468e077d793758abc6~tplv-k3u1fbpfcp-zoom-1.image)\n\n### 使用多阶段构建再次压榨镜像大小\n\n多阶段构建这里不多说了，不了解的可以先搜相关资料了解\n\n因为我们运行 node 程序是只需要生产的依赖和最终 node 可以运行的文件，就是说我们运行项目只需要 package.js 文件里 dependencies 里的依赖，devDependencies 依赖只是编译阶段用的，比如 eslint 等这些工具在项目运行时是用不到的，再比如我们项目是用 typescript 写的，node 是不能直接运行 ts 文件，ts 文件需要编译成 js 文件，运行项目我们只需要编译后的文件和 dependencies 里的依赖就可以运行，也就是说最终镜像只需要我们需要的东西，任何其他东西都可以删掉，下面我们使用多阶段改写 Dockerfile\n\n```dockerfile\n# 构建基础镜像\n    FROM alpine:3.14 AS base\n\n    # 设置环境变量\n    ENV NODE_ENV=production \\\n        APP_PATH=\u002Fnode\u002Fapp\n    \n    # 设置工作目录\n    WORKDIR $APP_PATH\n\n    # 安装 nodejs 和 yarn\n    RUN apk add --no-cache --update nodejs=14.17.4-r0 yarn=1.22.10-r0\n\n# 使用基础镜像 装依赖阶段\n    FROM base AS install\n\n    # 拷贝 package.json 到工作跟目录下\n    COPY package.json .\u002F\n\n    # 安装依赖\n    RUN yarn\n\n# 最终阶段，也就是输出的镜像是这个阶段构建的，前面的阶段都是为这个阶段做铺垫\n    FROM base\n\n    # 拷贝 装依赖阶段 生成的 node_modules 文件夹到工作目录下\n    COPY --from=install $APP_PATH\u002Fnode_modules .\u002Fnode_modules\n\n    # 将当前目录下的所有文件（除了.dockerignore排除的路径），都拷贝进入镜像的工作目录下\n    COPY . .\n\n    # 启动\n    CMD yarn start\n```\n\n细心的朋友会发现我这里有指定 alpine 版本，而上面都是用的 latest 版本，因为就在刚刚发现有个坑需要注意下，就是我们选择 alpine 版本的时候，最好不要选择 latest 版本，因为后面要装的软件版本可能会在 alpine 的 latest 版本没有对应软件的版本号，就会安装错误，我刚刚就翻车了，[点击查看 alpine 版本下的包信息](https:\u002F\u002Fpkgs.alpinelinux.org\u002Fpackages?name=nodejs&branch=v3.13)\n\n![image-20210731225710215](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Ffbb478618a3342dbaf8b3fe5ae7b63a6~tplv-k3u1fbpfcp-zoom-1.image)\n\nbuild 后，我们看看镜像大小，上次的是 174M 再次降到 73.4M，极致压榨。镜像：”放过我把，我真的没有了“😂\n\n![image-20210731225924299](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fca4ea3cbf85a46d19102182759f4cf27~tplv-k3u1fbpfcp-zoom-1.image)\n\n**讲解：**\n\n我把这个构建分成了三个阶段：\n\n1. 第一阶段：构建基础镜像\n\n   安装依赖、编译、运行等等阶段，就是所有阶段共用的东西都在第一阶段封到一个基础镜像里供其它阶段使用，比如设置环境变量、设置工作目录、安装 nodejs、yarn 等等\n\n2. 第二阶段：装依赖阶段\n\n   在这个阶段，装依赖，如果项目需要编译，可以在这个阶段装依赖编译好\n\n   这里在说下装依赖的小细节，就是执行 `yarn --production` 加个 production 参数或者环境变量 `NODE_ENV` 为 `production`，yarn 将不会安装 devDependencies 中列出的任何软件包，[点我查看官方文档说明](https:\u002F\u002Fclassic.yarnpkg.com\u002Fen\u002Fdocs\u002Fcli\u002Finstall#toc-yarn-install-production-true-false)，因为我设置了环境变量所以就没加这个参数\n\n3. 第三阶段：最终使用镜像\n\n   拷贝第二阶段安装的好的依赖文件夹，然后在拷贝代码文件到工作目录，执行启动命令，第二阶段装依赖多出的一些垃圾我们不需要，我们就只拷贝我们要用的东西，大大减少镜像的大小\n\n   如果项目需要编译，在拷贝编译后的文件夹，不需要拷贝编译前的代码，有编译后的代码和依赖就可以跑起项目\n\n多阶段构建，最后生成的镜像只能是最后一个阶段的结果，但是，能够将前置阶段中的文件拷贝到后边的阶段中，这就是多阶段构建的最大意义。\n\n最终优化成果：\n\n1. **大小从 1.06G 到 73.4M**\n2. **构建速度从 29.6 秒到 1.3 秒**（对比的是第二次构建的速度）\n\n至此，压榨镜像手段就完了，如果各位老板还有压榨手段可以分享分享\n\n镜像内心独白：”你礼貌吗？还来“\n\n## github 的 actions 构建镜像问题\n\ngithub 提供的 actions，每次都是一个干净的实例，什么意思，就是每次执行，都是干净的机器，这会导致一个问题，会导致 docker 没法使用缓存，那有没有解决办法呢，这里提供三种解决办法：\n\n1. 先构建一个已经安装好依赖包的镜像，然后基于此镜像再次构建，相当于多阶段构建，把前两个阶段构建的镜像产物推送到镜像仓库，再以这个镜像为基础去构建后续部分。借助镜像仓库存储基础镜像从而达到缓存的效果（此方案来源于评论里的大佬）\n\n   ```dockerfile\n   # 以这个镜像为基础去构建，这个镜像是已经装好项目依赖的镜像并推送到镜像仓库里，这里从镜像仓库拉下来\n   FROM project-base-image:latest\n   \n   COPY . .\n   \n   CMD yarn start\n   ```\n   我用的是这种，这也是现在普遍大家都在用的\n2. [docker 官方提供的 action 缓存方案](https:\u002F\u002Fgithub.com\u002Fdocker\u002Fbuild-push-action\u002Fblob\u002Fmaster\u002Fdocs\u002Fadvanced\u002Fcache.md)\n\n3. 自托管 actions 运行机器\n\n   相当于 gitlab 的 runner 一样，自己提供运行器，自己提供的就不会每次都是干净的机器，[详情看 actions 官方文档](https:\u002F\u002Fdocs.github.com\u002Fcn\u002Factions\u002Fhosting-your-own-runners\u002Fabout-self-hosted-runners#requirements-for-self-hosted-runner-machines)\n\n参考资料：\n\n- [在 GitHub Actions 上使用 Docker 层缓存构建镜像](https:\u002F\u002Fevilmartians.com\u002Fchronicles\u002Fbuild-images-on-github-actions-with-docker-layer-caching)\n\n## 最后\n\n项目仓库地址 [wechat-bot](https:\u002F\u002Fgithub.com\u002Fiamobj\u002Fwechat-bot)\n\n文章有错误的地方欢迎指正，避免误人子弟\n\n![img](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F6cad5611ee6c48d88274698ba9ea978a~tplv-k3u1fbpfcp-zoom-1.image)\n\n",display_count:d,is_markdown:g},author_user_info:{user_id:"4072246798979719",user_name:"iamc",company:e,job_title:e,avatar_large:"https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F49c6deba3c8765f3d6a19ff34b32f926~300x300.image",level:3,description:e,followee_count:21,follower_count:h,post_article_count:g,digg_article_count:145,got_digg_count:147,got_view_count:10307,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:439,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:4072246798979719,jpower:439,jscore:59.2,jpower_level:3,jscore_level:3,jscore_title:"新星掘友",author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:150,jscore_this_level_mini_score:d},is_vip:a,become_author_days:d,collection_set_article_count:d},category:{category_id:"6809637767543259144",category_name:"前端",category_url:"frontend",rank:u,back_ground:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F8c95587526f346c0.png",icon:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F1c40f5eaba561e32.png",ctime:1457483942,mtime:1432503190,show_type:3,item_type:u,promote_tag_cap:4,promote_priority:u,id:"6809637767543259144",name:"前端",title:"前端",alias:"frontend"},tags:[{entriesCount:void 0,subscribed:a,id:"6809640396788858887",tag_id:"6809640396788858887",tag_name:"Docker",color:"#344D56",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002F1265c034d36735225ac5.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1432604595,mtime:1666843958,id_type:9,tag_alias:e,post_article_count:7992,concern_user_count:156429,title:"Docker",tagId:"6809640396788858887",articleCount:7992,subscribersCount:156429,createdAt:c,updatedAt:c},{entriesCount:void 0,subscribed:a,id:"6809640361531539470",tag_id:"6809640361531539470",tag_name:"Node.js",color:"#e81864",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002Ff16f548d25028a1fdd80.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1432234488,mtime:1666843520,id_type:9,tag_alias:e,post_article_count:15511,concern_user_count:324899,title:"Node.js",tagId:"6809640361531539470",articleCount:15511,subscribersCount:324899,createdAt:c,updatedAt:c}],user_interact:{id:6991689670027543000,omitempty:u,user_id:d,is_digg:a,is_follow:a,is_collect:a},org:{org_info:c,org_user:c,is_followed:a},req_id:"2022102712162801021121702624112F59",status:{push_status:d},author_interact:c,extra:{boost_type:e},title:"如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像）",user:{id:"4072246798979719",self_description:void 0,followed:a,viewerIsFollowing:void 0,community:void 0,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:3,user_id:"4072246798979719",user_name:"iamc",company:e,job_title:e,avatar_large:"https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F49c6deba3c8765f3d6a19ff34b32f926~300x300.image",description:e,followee_count:21,follower_count:h,post_article_count:g,digg_article_count:145,got_digg_count:147,got_view_count:10307,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:439,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:4072246798979719,jpower:439,jscore:59.2,jpower_level:3,jscore_level:3,jscore_title:"新星掘友",author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:150,jscore_this_level_mini_score:d},is_vip:a,become_author_days:d,collection_set_article_count:d,juejinPower:439,jobTitle:e,roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"iamc",blogAddress:void 0,selfDescription:e,beLikedCount:147,beReadCount:10307,followerCount:h,followingCount:21,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:g,pinCount:d,likedArticleCount:145,likedPinCount:d,avatar:"https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F49c6deba3c8765f3d6a19ff34b32f926~300x300.image",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:21,applyEventCount:d,need_lead:d,followTopicCnt:void 0},viewCount:void 0,commentsCount:15,isEvent:void 0,abstract:"本文将以 Node 程序展示如何优化 Docker 镜像（优化思想是通用的，不分程序），主要解决镜像大小过大、CI\u002FCD 构建镜像速度，本文演示如何一步步优化 Dockerfile 文件，绝对的干货，",latestCommentAt:c,createdAt:new Date(1627879740000),updatedAt:c,isTopicEvent:a,likedCount:147,likeCount:147,content:e,originalUrl:e,type:"post",collected:a,viewsCount:10307,username:"iamc",viewerHasLiked:a,draftId:"6991672289368473608",collectionCount:156},entryView:{},author:{id:"4072246798979719",self_description:void 0,followed:a,viewerIsFollowing:void 0,community:void 0,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:3,user_id:"4072246798979719",user_name:"iamc",company:e,job_title:e,avatar_large:"https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F49c6deba3c8765f3d6a19ff34b32f926~300x300.image",description:e,followee_count:21,follower_count:h,post_article_count:g,digg_article_count:145,got_digg_count:147,got_view_count:10307,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:439,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:4072246798979719,jpower:439,jscore:59.2,jpower_level:3,jscore_level:3,jscore_title:"新星掘友",author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:150,jscore_this_level_mini_score:d},is_vip:a,become_author_days:d,collection_set_article_count:d,juejinPower:439,jobTitle:e,roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"iamc",blogAddress:void 0,selfDescription:e,beLikedCount:147,beReadCount:10307,followerCount:h,followingCount:21,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:g,pinCount:d,likedArticleCount:145,likedPinCount:d,avatar:"https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F49c6deba3c8765f3d6a19ff34b32f926~300x300.image",latestLoginedInAt:c,createdAt:c,updatedAt:c,phoneNumber:e,titleDescription:e,followeesCount:21,applyEventCount:d,need_lead:d,followTopicCnt:void 0},adEntryList:[],relatedEntryList:[],userAnnuals:[],columnList:[],cachedHtml:"\u003Cstyle\u003E@charset \"UTF-8\";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:\"#\";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre\u003Ecode{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url(\"data:image\u002Fsvg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=\");margin-left:2px}.markdown-body a[href^=\"#\"]:before{content:\"#\"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url(\"data:image\u002Fsvg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+\");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote\u003Ep{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:\"•\";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:\"\";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url(\"data:image\u002Fsvg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=\");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url(\"data:image\u002Fsvg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=\");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}\u003C\u002Fstyle\u003E\u003Cp\u003E本文将以 Node 程序展示如何优化 Docker 镜像（优化思想是通用的，不分程序），主要解决镜像大小过大、CI\u002FCD 构建镜像速度，本文演示如何一步步优化 Dockerfile 文件，绝对的干货，建议先赞再看，看完不是干货再取消赞也不是不行😅。优化的结果如下：\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\u003Cstrong\u003E大小从 1.06G 到 73.4M\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cstrong\u003E构建速度从 29.6 秒到 1.3 秒\u003C\u002Fstrong\u003E（对比的是第二次构建的速度）\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch2 data-id=\"heading-0\"\u003ENode 项目\u003C\u002Fh2\u003E\n\u003Cp\u003E简单写了一个自己用的 \u003Ca href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fiamobj%2Fwechat-bot\" target=\"_blank\" rel=\"nofollow noopener noreferrer\" title=\"https:\u002F\u002Fgithub.com\u002Fiamobj\u002Fwechat-bot\" ref=\"nofollow noopener noreferrer\"\u003Ewechat-bot\u003C\u002Fa\u003E ，接下来就以这个项目演示怎么去优化 Docker 镜像\u003C\u002Fp\u003E\n\u003Cp\u003E以下是我没有仔细研究 Docker 刚开始写的 Dockerfile 文件\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-dockerfile copyable\" lang=\"dockerfile\"\u003EFROM node:14.17.3\n\n# 设置环境变量\nENV NODE_ENV=production\nENV APP_PATH=\u002Fnode\u002Fapp\n\n# 设置工作目录\nWORKDIR $APP_PATH\n\n# 把当前目录下的所有文件拷贝到镜像的工作目录下 .dockerignore 指定的文件不会拷贝\nCOPY . $APP_PATH\n\n# 安装依赖\nRUN yarn\n\n# 暴露端口\nEXPOSE 4300\n\nCMD yarn start\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ebuild 之后，如下图，我这个简单的 Node 程序镜像竟然有 \u003Cstrong\u003E1G\u003C\u002Fstrong\u003E 多，接下来我们将逐步去优化减少这个大小\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fe446948e70c843c592906d1277be0472~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"image-20210731140907227\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Ch2 data-id=\"heading-1\"\u003E优化前言\u003C\u002Fh2\u003E\n\u003Cp\u003E在优化之前，有些东西我们必须了解，解决问题的第一步就是先找出导致问题的原因\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003EDockerfile 文件，其内包含了一条条的指令，每一条指令构建一层，因此每一条指令的内容，就是描述该层如何构建\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EDocker 镜像并非只是一个文件，而是由一堆文件组成，最主要的文件是 \u003Cstrong\u003E层\u003C\u002Fstrong\u003E（Layers）\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003E镜像构建时，会一层层构建，前一层是后一层的基础\u003C\u002Fp\u003E\n\u003Cp\u003E每一层构建完就不会再发生改变，后一层上的任何改变只发生在自己这一层。比如，删除前一层文件的操作，实际不是真的删除前一层的文件，而是仅在当前层标记为该文件已删除。在最终容器运行的时候，虽然不会看到这个文件，但是实际上该文件会一直跟随镜像\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E镜像层将会被缓存和复用（这也是从第二次开始构建镜像时，速度会快的原因，优化镜像构建速度的原理也是利用缓存原理来做）\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E当 Dockerfile 的指令修改了，操作的文件变化了，或者构建镜像时指定的变量不同了，对应的镜像层缓存就会失效\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003Edocker build 的缓存机制，docker 是怎么知道文件变化的呢？\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EDocker 采取的策略是：获取 Dockerfile 下内容（包括文件的部分 inode 信息），计算出一个唯一的 hash 值，若 hash 值未发生变化，则可以认为文件内容没有发生变化，可以使用缓存机制，反之亦然。\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E某一层的镜像缓存失效之后，它之后的镜像层缓存都会失效\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E镜像的每一层只记录文件变更，在容器启动时，Docker 会将镜像的各个层进行计算，最后生成一个文件系统\u003C\u002Fp\u003E\n\u003Cp\u003E当我知道这点时，我恍然大悟，我们使用的操作系统，比如安卓、ios、win、mac 等，其实就是一个文件系统，我们的软件界面交互等，其实就是在读写文件，我们网页写个弹框，操作 dom，就是在读写本地文件或者是读写内存里的数据，个人的一些见解不知道对不对，本人非科班出身的前端 coder 😅\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E参考资料：\u003Ca href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Fhandwrit2000%2Fp%2F12871493.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\" title=\"https:\u002F\u002Fwww.cnblogs.com\u002Fhandwrit2000\u002Fp\u002F12871493.html\" ref=\"nofollow noopener noreferrer\"\u003Edocker 镜像分层原理\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003Eok，我们已经知道镜像是由多层文件系统组成，想要优化它的大小，就需要去减少层数、每一层尽量只包含该层需要的东西，任何额外的东西应该在该层构建结束前清理掉，下面开始正文\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F97d480b0a42c48edbb600927824f4d35~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"eXxZUW\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Ch2 data-id=\"heading-2\"\u003E优化 Dockerfile\u003C\u002Fh2\u003E\n\u003Ch3 data-id=\"heading-3\"\u003E优化第一层 \u003Ccode\u003EFROM node:14.17.3\u003C\u002Fcode\u003E\u003C\u002Fh3\u003E\n\u003Ch4 data-id=\"heading-4\"\u003E方案一：使用 node 的 Alpine 版本\u003C\u002Fh4\u003E\n\u003Cp\u003E这也是绝多数人知道的优化镜像手段，Alpine 是一个很小的 Linux 发行版，只要选择 Node 的 Alpine 版本，就会有很大改进，我们把这一句改成指令改成 \u003Ccode\u003EFROM node:14.17.4-alpine \u003C\u002Fcode\u003E （可以去 \u003Ca href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fhub.docker.com%2F_%2Fnode%3Ftab%3Ddescription%26page%3D1%26ordering%3Dlast_updated\" target=\"_blank\" rel=\"nofollow noopener noreferrer\" title=\"https:\u002F\u002Fhub.docker.com\u002F_\u002Fnode?tab=description&#x26;page=1&#x26;ordering=last_updated\" ref=\"nofollow noopener noreferrer\"\u003Edockerhub\u003C\u002Fa\u003E 查看 node 有哪些版本标签），build 后镜像大小如下图，瞬间\u003Cstrong\u003E从 1.06G 降到 238M\u003C\u002Fstrong\u003E，可以说是效果显著\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F949e308a873342f7abe612a62f67fc9e~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"image-20210731171210360\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E还可以使用其它的基础小镜像，比如 \u003Ca href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmhart%2Falpine-node\" target=\"_blank\" rel=\"nofollow noopener noreferrer\" title=\"https:\u002F\u002Fgithub.com\u002Fmhart\u002Falpine-node\" ref=\"nofollow noopener noreferrer\"\u003Emhart\u002Falpine-node\u003C\u002Fa\u003E，这个还能再小，改成 \u003Ccode\u003EFROM mhart\u002Falpine-node:14.17.3\u003C\u002Fcode\u003E 再试试，可以看到又小了 \u003Cstrong\u003E5M\u003C\u002Fstrong\u003E​ 😂，虽然不多，但是秉着能压榨一点是一点的“老板原则”，积少成多，极致压榨\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fa52f444f82bc485981eed9deaf114b84~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"image-20210731171706746\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Ch4 data-id=\"heading-5\"\u003E方案二：使用纯净 Alpine 镜像手动装 Node\u003C\u002Fh4\u003E\n\u003Cp\u003E既然 Alpine 是最小的 Linux，那我们试下用纯净的 Alpine 镜像，自己再装 Node 试试\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-dockerfile copyable\" lang=\"dockerfile\"\u003EFROM alpine:latest\n\n# 使用 apk 命令安装 nodejs 和 yarn，如果使用 npm 启动，就不需要装 yarn\nRUN apk add --no-cache --update nodejs=14.17.4-r0 yarn=1.22.10-r0\n\n# ... 后面的步骤不变\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ebuild 后看下图，只有 \u003Cstrong\u003E174M\u003C\u002Fstrong\u003E 了，又小了不少\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Ff102c75f7d984fbca5c9d0d66f5732d0~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"image-20210731174258226\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E结论就是不嫌麻烦追求极致就用方案二，\u003Cstrong\u003E从 1.06G 减少到 174M\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F9ade7d0c09a947ab8b7a3804a3ca7ac5~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"apG8c7\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003E注意：由于 alpine 的包仓库，提供的包版本是会有变动的，指定版本安装包（eg: nodejs、yarn）会在往后构建导致找不到包对应的版本导致构建失败\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fpkgs.alpinelinux.org%2Fpackages%3Fname%3Dnodejs%26branch%3Dedge\" target=\"_blank\" rel=\"nofollow noopener noreferrer\" title=\"https:\u002F\u002Fpkgs.alpinelinux.org\u002Fpackages?name=nodejs&#x26;branch=edge\" ref=\"nofollow noopener noreferrer\"\u003Ealpine 仓库\u003C\u002Fa\u003E查询包版本示意图如下：\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F05ba62cb81bb459497b6fbb1e1e02214~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"image-20220617150447876\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E下图引自热心评论里构建失败的图，提示没有找到对应包的版本，导致构建失败\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F67207e70ac7744a991b6608323235857~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"image-20220617145552502\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E我想到两种解决办法：\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003E在安装包时不指定版本\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003ERUN apk add --no-cache --update nodejs yarn\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E自制一个 alpine-node 基础镜像\u003C\u002Fp\u003E\n\u003Cp\u003E可以参考我自制的 \u003Ca href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fiamobj%2Falpine-node\" target=\"_blank\" rel=\"nofollow noopener noreferrer\" title=\"https:\u002F\u002Fgithub.com\u002Fiamobj\u002Falpine-node\" ref=\"nofollow noopener noreferrer\"\u003Ealpine-node 基础镜像\u003C\u002Fa\u003E，我 \u003Ca href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fiamobj%2Fwechat-bot\" target=\"_blank\" rel=\"nofollow noopener noreferrer\" title=\"https:\u002F\u002Fgithub.com\u002Fiamobj\u002Fwechat-bot\" ref=\"nofollow noopener noreferrer\"\u003Ewechat-bot\u003C\u002Fa\u003E 项目就是用的自制的\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E两种解决办法，个人是不建议用第一个，毕竟我们项目往往是要指定版本的，不同版本会导致项目的一些依赖运行差异，其实方案二纯属个人爱折腾，闲麻烦的直接用方案一，用现成的 node 的 Alpine 版本。\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Ch3 data-id=\"heading-6\"\u003E减少层数、不经常变动的层提到前面去\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003E\u003Ccode\u003EENV\u003C\u002Fcode\u003E 指令是可以一次性设置多个环境变量，能一次指令执行完，就不用两次，多一个指令就多一层\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E\u003Ccode\u003EEXPOSE\u003C\u002Fcode\u003E 指令是暴露端口，其实也可以不用写这个指令，在启动容器的时候自己映射端口，如果写了这个指令的话，因为端口不经常变，所以把这个指令提前，写上这个指令有两个好处：\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E帮助镜像使用者理解这个镜像服务的守护端口，以方便配置映射\u003C\u002Fli\u003E\n\u003Cli\u003E在运行时使用随机端口映射时，也就是 \u003Ccode\u003Edocker run -P\u003C\u002Fcode\u003E 时，会自动随机映射 \u003Ccode\u003EEXPOSE\u003C\u002Fcode\u003E 的端口\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E至于写还是不写，看个人吧，我个人一般不写，因为我在项目启动命令会指定项目端口，启动容器的时候映射出来就好，这样我就要维护一个地方，Dockerfile 也写了的话，项目端口变了，这里也要修改，多了点维护成本，当然也有办法让两边端口变量取自配置文件，只要改配置文件即可\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fb89a75058fd34f6fa2dc3d0c81631a7c~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"WyN8ZF\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E下面是改写后的 Dockerfile\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-dockerfile copyable\" lang=\"dockerfile\"\u003EFROM alpine:latest\n\n# 使用 apk 命令安装 nodejs 和 yarn，如果使用 npm 启动，就不需要装 yarn\nRUN apk add --no-cache --update nodejs=14.17.4-r0 yarn=1.22.10-r0\n\n# 暴露端口\nEXPOSE 4300\n\n# 设置环境变量\nENV NODE_ENV=production \\\n    APP_PATH=\u002Fnode\u002Fapp\n\n# 设置工作目录\nWORKDIR $APP_PATH\n\n# 把当前目录下的所有文件拷贝到镜像的工作目录下 .dockerignore 指定的文件不会拷贝\nCOPY . $APP_PATH\n\n# 安装依赖\nRUN yarn\n\n# 启动命令\nCMD yarn start\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E这一步的优化，无论从镜像大小还是构建镜像速度都看不到明显的差别，因为改动的层内容少（体现不出来），但是可以查看到镜像的层是变少了的，可以自行试试查看镜像的层试试\u003C\u002Fp\u003E\n\u003Cp\u003E减少镜像层数是“好老板”的传统优良习惯，不让“员工”浪费资源\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F837074c4e3eb47f3a71d86284f7278db~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"PChFeZ\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Ch3 data-id=\"heading-7\"\u003Epackage.json 提前提高编译速度\u003C\u002Fh3\u003E\n\u003Cp\u003E从下图可以看到每次我们 build 的时候最耗时的就是在执行 \u003Ccode\u003Eyarn\u003C\u002Fcode\u003E 命令装依赖的时候，大部分时候我们只是改代码，依赖不变，这时候如果可以让这一步缓存起来，依赖没有变化的时候，就不需要重新装依赖，就可以大大改进编译速度\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fcbb2c1d5994d40efbdbc3cba6cb36006~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"image-20210731211548456\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E前面我们说了镜像构建时，是一层层构建，前一层是后一层的基础，既然是这样的话，我们就把 package.json 文件单独提前拷贝到镜像，然后下一步装依赖，执行命令装依赖这层的前一层是拷贝 package.json 文件，因为安装依赖命令不会变化，所以只要 package.json 文件没变化，就不会重新执行 \u003Ccode\u003Eyarn\u003C\u002Fcode\u003E 安装依赖，它会复用之前安装好的依赖，原理讲清楚了，下面我们看效果\u003C\u002Fp\u003E\n\u003Cp\u003E改变后的 Dockerfile 文件\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-dockerfile copyable\" lang=\"dockerfile\"\u003EFROM alpine:latest\n\n# 使用 apk 命令安装 nodejs 和 yarn，如果使用 npm 启动，就不需要装 yarn\nRUN apk add --no-cache --update nodejs=14.17.4-r0 yarn=1.22.10-r0\n\n# 暴露端口\nEXPOSE 4300\n\n# 设置环境变量\nENV NODE_ENV=production \\\n    APP_PATH=\u002Fnode\u002Fapp\n\n# 设置工作目录\nWORKDIR $APP_PATH\n\n# 拷贝 package.json 到工作跟目录下\nCOPY package.json .\n\n# 安装依赖\nRUN yarn\n\n# 把当前目录下的所有文件拷贝到镜像的工作目录下 .dockerignore 指定的文件不会拷贝\nCOPY . .\n\n# 启动命令\nCMD yarn start\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ebuild 看下图，编译时间从 29.6s 到 1.3s，使用了缓存的层前面会有个 CACHED 字眼，仔细看下图可以看到\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Ffdf55a6a1fc34fa482673d89eded7cbb~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"image-20210731215943833\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E充分利用 docker 缓存特性是优化构建速度的利器\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fc9a55b691a4b4e468e077d793758abc6~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"nSjmZb\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Ch3 data-id=\"heading-8\"\u003E使用多阶段构建再次压榨镜像大小\u003C\u002Fh3\u003E\n\u003Cp\u003E多阶段构建这里不多说了，不了解的可以先搜相关资料了解\u003C\u002Fp\u003E\n\u003Cp\u003E因为我们运行 node 程序是只需要生产的依赖和最终 node 可以运行的文件，就是说我们运行项目只需要 package.js 文件里 dependencies 里的依赖，devDependencies 依赖只是编译阶段用的，比如 eslint 等这些工具在项目运行时是用不到的，再比如我们项目是用 typescript 写的，node 是不能直接运行 ts 文件，ts 文件需要编译成 js 文件，运行项目我们只需要编译后的文件和 dependencies 里的依赖就可以运行，也就是说最终镜像只需要我们需要的东西，任何其他东西都可以删掉，下面我们使用多阶段改写 Dockerfile\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-dockerfile copyable\" lang=\"dockerfile\"\u003E# 构建基础镜像\n    FROM alpine:3.14 AS base\n\n    # 设置环境变量\n    ENV NODE_ENV=production \\\n        APP_PATH=\u002Fnode\u002Fapp\n    \n    # 设置工作目录\n    WORKDIR $APP_PATH\n\n    # 安装 nodejs 和 yarn\n    RUN apk add --no-cache --update nodejs=14.17.4-r0 yarn=1.22.10-r0\n\n# 使用基础镜像 装依赖阶段\n    FROM base AS install\n\n    # 拷贝 package.json 到工作跟目录下\n    COPY package.json .\u002F\n\n    # 安装依赖\n    RUN yarn\n\n# 最终阶段，也就是输出的镜像是这个阶段构建的，前面的阶段都是为这个阶段做铺垫\n    FROM base\n\n    # 拷贝 装依赖阶段 生成的 node_modules 文件夹到工作目录下\n    COPY --from=install $APP_PATH\u002Fnode_modules .\u002Fnode_modules\n\n    # 将当前目录下的所有文件（除了.dockerignore排除的路径），都拷贝进入镜像的工作目录下\n    COPY . .\n\n    # 启动\n    CMD yarn start\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E细心的朋友会发现我这里有指定 alpine 版本，而上面都是用的 latest 版本，因为就在刚刚发现有个坑需要注意下，就是我们选择 alpine 版本的时候，最好不要选择 latest 版本，因为后面要装的软件版本可能会在 alpine 的 latest 版本没有对应软件的版本号，就会安装错误，我刚刚就翻车了，\u003Ca href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fpkgs.alpinelinux.org%2Fpackages%3Fname%3Dnodejs%26branch%3Dv3.13\" target=\"_blank\" rel=\"nofollow noopener noreferrer\" title=\"https:\u002F\u002Fpkgs.alpinelinux.org\u002Fpackages?name=nodejs&#x26;branch=v3.13\" ref=\"nofollow noopener noreferrer\"\u003E点击查看 alpine 版本下的包信息\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Ffbb478618a3342dbaf8b3fe5ae7b63a6~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"image-20210731225710215\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003Ebuild 后，我们看看镜像大小，上次的是 174M 再次降到 73.4M，极致压榨。镜像：”放过我把，我真的没有了“😂\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fca4ea3cbf85a46d19102182759f4cf27~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"image-20210731225924299\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003E讲解：\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E我把这个构建分成了三个阶段：\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003E第一阶段：构建基础镜像\u003C\u002Fp\u003E\n\u003Cp\u003E安装依赖、编译、运行等等阶段，就是所有阶段共用的东西都在第一阶段封到一个基础镜像里供其它阶段使用，比如设置环境变量、设置工作目录、安装 nodejs、yarn 等等\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E第二阶段：装依赖阶段\u003C\u002Fp\u003E\n\u003Cp\u003E在这个阶段，装依赖，如果项目需要编译，可以在这个阶段装依赖编译好\u003C\u002Fp\u003E\n\u003Cp\u003E这里在说下装依赖的小细节，就是执行 \u003Ccode\u003Eyarn --production\u003C\u002Fcode\u003E 加个 production 参数或者环境变量 \u003Ccode\u003ENODE_ENV\u003C\u002Fcode\u003E 为 \u003Ccode\u003Eproduction\u003C\u002Fcode\u003E，yarn 将不会安装 devDependencies 中列出的任何软件包，\u003Ca href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fclassic.yarnpkg.com%2Fen%2Fdocs%2Fcli%2Finstall%23toc-yarn-install-production-true-false\" target=\"_blank\" rel=\"nofollow noopener noreferrer\" title=\"https:\u002F\u002Fclassic.yarnpkg.com\u002Fen\u002Fdocs\u002Fcli\u002Finstall#toc-yarn-install-production-true-false\" ref=\"nofollow noopener noreferrer\"\u003E点我查看官方文档说明\u003C\u002Fa\u003E，因为我设置了环境变量所以就没加这个参数\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E第三阶段：最终使用镜像\u003C\u002Fp\u003E\n\u003Cp\u003E拷贝第二阶段安装的好的依赖文件夹，然后在拷贝代码文件到工作目录，执行启动命令，第二阶段装依赖多出的一些垃圾我们不需要，我们就只拷贝我们要用的东西，大大减少镜像的大小\u003C\u002Fp\u003E\n\u003Cp\u003E如果项目需要编译，在拷贝编译后的文件夹，不需要拷贝编译前的代码，有编译后的代码和依赖就可以跑起项目\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E多阶段构建，最后生成的镜像只能是最后一个阶段的结果，但是，能够将前置阶段中的文件拷贝到后边的阶段中，这就是多阶段构建的最大意义。\u003C\u002Fp\u003E\n\u003Cp\u003E最终优化成果：\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\u003Cstrong\u003E大小从 1.06G 到 73.4M\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cstrong\u003E构建速度从 29.6 秒到 1.3 秒\u003C\u002Fstrong\u003E（对比的是第二次构建的速度）\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E至此，压榨镜像手段就完了，如果各位老板还有压榨手段可以分享分享\u003C\u002Fp\u003E\n\u003Cp\u003E镜像内心独白：”你礼貌吗？还来“\u003C\u002Fp\u003E\n\u003Ch2 data-id=\"heading-9\"\u003Egithub 的 actions 构建镜像问题\u003C\u002Fh2\u003E\n\u003Cp\u003Egithub 提供的 actions，每次都是一个干净的实例，什么意思，就是每次执行，都是干净的机器，这会导致一个问题，会导致 docker 没法使用缓存，那有没有解决办法呢，这里提供三种解决办法：\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003E先构建一个已经安装好依赖包的镜像，然后基于此镜像再次构建，相当于多阶段构建，把前两个阶段构建的镜像产物推送到镜像仓库，再以这个镜像为基础去构建后续部分。借助镜像仓库存储基础镜像从而达到缓存的效果（此方案来源于评论里的大佬）\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-dockerfile copyable\" lang=\"dockerfile\"\u003E# 以这个镜像为基础去构建，这个镜像是已经装好项目依赖的镜像并推送到镜像仓库里，这里从镜像仓库拉下来\nFROM project-base-image:latest\n\nCOPY . .\n\nCMD yarn start\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E我用的是这种，这也是现在普遍大家都在用的\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdocker%2Fbuild-push-action%2Fblob%2Fmaster%2Fdocs%2Fadvanced%2Fcache.md\" target=\"_blank\" rel=\"nofollow noopener noreferrer\" title=\"https:\u002F\u002Fgithub.com\u002Fdocker\u002Fbuild-push-action\u002Fblob\u002Fmaster\u002Fdocs\u002Fadvanced\u002Fcache.md\" ref=\"nofollow noopener noreferrer\"\u003Edocker 官方提供的 action 缓存方案\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E自托管 actions 运行机器\u003C\u002Fp\u003E\n\u003Cp\u003E相当于 gitlab 的 runner 一样，自己提供运行器，自己提供的就不会每次都是干净的机器，\u003Ca href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fdocs.github.com%2Fcn%2Factions%2Fhosting-your-own-runners%2Fabout-self-hosted-runners%23requirements-for-self-hosted-runner-machines\" target=\"_blank\" rel=\"nofollow noopener noreferrer\" title=\"https:\u002F\u002Fdocs.github.com\u002Fcn\u002Factions\u002Fhosting-your-own-runners\u002Fabout-self-hosted-runners#requirements-for-self-hosted-runner-machines\" ref=\"nofollow noopener noreferrer\"\u003E详情看 actions 官方文档\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E参考资料：\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fevilmartians.com%2Fchronicles%2Fbuild-images-on-github-actions-with-docker-layer-caching\" target=\"_blank\" rel=\"nofollow noopener noreferrer\" title=\"https:\u002F\u002Fevilmartians.com\u002Fchronicles\u002Fbuild-images-on-github-actions-with-docker-layer-caching\" ref=\"nofollow noopener noreferrer\"\u003E在 GitHub Actions 上使用 Docker 层缓存构建镜像\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 data-id=\"heading-10\"\u003E最后\u003C\u002Fh2\u003E\n\u003Cp\u003E项目仓库地址 \u003Ca href=\"https:\u002F\u002Flink.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fiamobj%2Fwechat-bot\" target=\"_blank\" rel=\"nofollow noopener noreferrer\" title=\"https:\u002F\u002Fgithub.com\u002Fiamobj\u002Fwechat-bot\" ref=\"nofollow noopener noreferrer\"\u003Ewechat-bot\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E文章有错误的地方欢迎指正，避免误人子弟\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F6cad5611ee6c48d88274698ba9ea978a~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp\" alt=\"img\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E",showSidebar:a,actionType:{FETCH:"view\u002Fcolumn\u002FFETCH",FETCH_CACHED_HTML:"view\u002Fcolumn\u002FFETCH_CACHED_HTML",FETCH_ADDITIONAL:"view\u002Fcolumn\u002FFETCH_ADDITIONAL",FETCH_SIDEBAR_ADENTRY:"view\u002Fcolumn\u002FFETCH_SIDEBAR_ADENTRY",FETCH_AUTHOR_EXTRA:"view\u002Fcolumn\u002FFETCH_AUTHOR_EXTRA",RESET:"view\u002Fcolumn\u002FRESET"},recommendedArticleList:{list:[],cursor:f,loading:a,skeleton:a,hasMore:a,articleId:e,actionType:{UPDATE_STATE:"view\u002Fcolumn\u002Frecommend-List\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fcolumn\u002Frecommend-List\u002FFETCH_MORE",FETCH:"view\u002Fcolumn\u002Frecommend-List\u002FFETCH",RESET:"view\u002Fcolumn\u002Frecommend-List\u002FRESET"}}},collection:{collection:{author:{}},actionType:{FETCH:"@\u002Fview\u002Fcollection\u002FFETCH",REFRESH:"@\u002Fview\u002Fcollection\u002FREFRESH",RESET:"@\u002Fview\u002Fcollection\u002FRESET"},list:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fcollection\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fcollection\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fcollection\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fcollection\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fcollection\u002Flist\u002FRESET"},id:e,sort:m}},gettingStarted:{category:{},actionType:{UPDATE_STATE:"@\u002Fview\u002FgettingStarted\u002FUPDATE_STATE",FOLLOW:"@\u002Fview\u002FgettingStarted\u002FFOLLOW",RESET:"@\u002Fview\u002FgettingStarted\u002FRESET",UPDATE_CATEGORY:"@\u002Fview\u002FgettingStarted\u002FUPDATE_CATEGORY"}},pin:{pin:{user:{},imageUrlList:[]},pinList:[],actionType:{FETCH:"@\u002Fview\u002Fpin\u002FFETCH",RESET:"@\u002Fview\u002Fpin\u002FRESET"},sidebar:{list:[],after:e,loading:a,isRecommend:a,hasNextPage:b,actionType:{UPDATE_STATE:"@\u002Fview\u002Fpin\u002Fsidebar\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fpin\u002Fsidebar\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Fpin\u002Fsidebar\u002FFETCH",RESET:"@\u002Fview\u002Fpin\u002Fsidebar\u002FRESET"}},commentList:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fpin\u002FcommentList\u002FUPDATE",FETCH:"@\u002Fview\u002Fpin\u002FcommentList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fpin\u002FcommentList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fpin\u002FcommentList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fpin\u002FcommentList\u002FRESET"},pinId:c},subCommentList:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FUPDATE",FETCH:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FRESET"},commentId:c}},topic:{topic:e,followedTopicList:[],actionType:{FETCH:"@\u002Fview\u002Ftopic\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Ftopic\u002FUPDATE_STATE",RESET:"@\u002Fview\u002Ftopic\u002FRESET"},allTopicList:{pageSize:x,page:d,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FRESET"},sortType:l},pinlist:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FpinList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FpinList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FpinList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FpinList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FpinList\u002FRESET"},sortType:s},sidebar:{actionType:{RESET:"@\u002Fview\u002Ftopic\u002Fsidebar\u002FRESET",UPDATE_STATE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002FUPDATE_STATE"},attender:{pageSize:h,page:g,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FRESET"},topicId:c}},followedList:{pageSize:x,page:d,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FRESET"},after:d}},recommendationIndex:{actionType:{FETCH_USER:"@\u002Fview\u002Frecommendation\u002FFETCH_USER",FETCH_MORE:"@\u002Fview\u002Frecommendation\u002FFETCH_MORE",RESET:"@\u002Fview\u002Frecommendation\u002FRESET",FETCH:"@\u002Fview\u002Frecommendation\u002FFETCH"},cursor:e,hasMore:e,userList:[],loading:a,skeleton:b,category:k,categoryNavList:[],serverRenderUserList:a},event:{event:{},loading:a,user:{},actionType:{FETCH:"view\u002Fevent\u002FFETCH",RESET:"view\u002Fevent\u002FRESET"}},academyIndex:{academy:{},bannerList:[],qualitiedList:[],latestList:[],offlineList:[],loading:a,user:{},actionType:{FETCH:"view\u002Facademy\u002FFETCH",RESET:"view\u002Facademy\u002FRESET"}},coursesIndex:{loading:a,list:[],sort:"online",actionType:{FETCH:"view\u002Fcourses\u002FFETCH",RESET:"view\u002Fcourses\u002FRESET",FETCH_MORE:"view\u002Fcourses\u002FFETCH_MORE"}},team:{team:{},loading:b,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FFETCH",RESET:"@\u002Fview\u002Fteam\u002FRESET",UPDATE:"@\u002Fview\u002Fteam\u002FUPDATE",FOLLOW:"@\u002Fview\u002Fteam\u002FFOLLOW"},detailList:{actionType:{RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002FRESET"},posts:{list:[],hasMore:a,skeleton:a,loading:a,sort:m,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FRESET"}},pins:{list:[],hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FRESET"}},hire:{list:[],hasMore:a,cursor:f,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FRESET"}}}},couponList:{list:{"0":t,"1":t,"2":t}},payment:{selectedDiscount:{},bookletDetail:{},coupons:{availables:[],unavailables:[]}}},component:{indexAside:{bannerList:[],userList:[],actionType:{FETCH_BANNER:"@\u002Fcomponent\u002Faside\u002FFETCH_BANNER",FETCH_USER:"@\u002Fcomponent\u002Faside\u002FFETCH_USER",CLOSE_BANNER:"@\u002Fcomponent\u002Faside\u002FCLOSE_BANNER"}}},ore:{oreCount:d},avatarMenuInfo:{},common:{theme:"light"},env:{ua:"Mozilla\u002F5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\u002F537.36 (KHTML, like Gecko) Chrome\u002F107.0.0.0 Safari\u002F537.36"},auth:{user:c,clientId:e,token:e},tag:{subscribedTagList:[]},entry:{isLikeLoading:a},collection:{},comment:{},bookComment:{},repoComment:{},category:{list:[]},user:{subscribedTagList:[]},notification:{unreadCount:{user:d,system:d,total:d}},follow:{subscribedTagList:[]},error:{location:c,errorView:c,statusCode:200},abTest:{info:{}},suspensionPanel:{needSuspension:b},pinComment:{},pin:{deleteDialogVisible:a,reportDialogVisible:a,targetPin:c,isOnFocus:a},topic:{visible:a},activity:{"2020":{},offer:{is_show:d,start_time:d},voteData:{err_no:d,err_msg:"success",data:{face:{title:e,activity_id:"2023",start_time:1657814400,end_time:1667232000,status:g,image:"https:\u002F\u002Fp9-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F9850073320c24201ae2317af2acbc3af~tplv-k3u1fbpfcp-zoom-1.image",close_image:"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F882fc263e36347ffbf6d598de520870e~tplv-k3u1fbpfcp-image.image",url:"https:\u002F\u002Fjuejin.org\u002FLUCCut",is_show:g},top:{title:n,activity_id:o,start_time:p,end_time:q,status:g,image:"https:\u002F\u002Fp1-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fac22d16bd96248f48b9f63ab747a1e04~tplv-k3u1fbpfcp-zoom-1.image",close_image:"https:\u002F\u002Fp1-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F4e7fb9a08a1d4f13889588806b35d2ba~tplv-k3u1fbpfcp-zoom-1.image?",url:"https:\u002F\u002Fjuejin.cn\u002Fchallenge\u002F1?utm_source=app_nav",is_show:g},web_top:{title:n,activity_id:o,start_time:p,end_time:q,status:g,image:j,close_image:j,url:"https:\u002F\u002Fjuejin.cn\u002Fchallenge\u002F1?utm_source=web_nav",is_show:g},plugin_top:{title:n,activity_id:o,start_time:p,end_time:q,status:g,image:j,close_image:j,url:"https:\u002F\u002Fjuejin.cn\u002Fchallenge\u002F1?utm_source=extension_nav",is_show:g},search_top:{title:"我的2021年度报告",activity_id:y,start_time:z,end_time:1642348799,status:u,image:A,close_image:B,url:"https:\u002F\u002Fjuejin.cn\u002Freport2021\u002Fmobile?utm_campaign=report_2021&utm_medium=app_search&share_title=2021%E6%8E%98%E5%8F%8B%E5%B9%B4%E5%BA%A6%E6%8A%A5%E5%91%8A&share_desc=%E8%A7%A3%E9%94%81%E5%B9%B4%E5%BA%A6%E6%8A%A5%E5%91%8A%EF%BC%8C%E9%A2%86%E5%8F%96%E4%B8%93%E5%B1%9E%E5%BE%BD%E7%AB%A0&share_image=https%3A%2F%2Fp9-juejin.byteimg.com%2Ftos-cn-i-k3u1fbpfcp%2F26a9012785e643a6a520ed63b513c57e~tplv-k3u1fbpfcp-image.image",is_show:d},web_search:{title:"字节内部课会员免费学",activity_id:y,start_time:z,end_time:1664121599,status:u,image:A,close_image:B,url:"https:\u002F\u002Fjuejin.cn\u002Fpost\u002F7143435263472041998?utm_source=search&utm_medium=OM&utm_campaign=vip_activity_kxj",is_show:d},jcode_top:{title:n,activity_id:o,start_time:p,end_time:q,status:g,image:j,close_image:j,url:"https:\u002F\u002Fjuejin.cn\u002Fchallenge\u002F1?utm_source=code_nav",is_show:g},offer:{title:e,activity_id:"2020",start_time:1617638400,end_time:1618934400,status:u,image:"https:\u002F\u002Fp9-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F2879410508de459c91ae8b7509ca75f8~tplv-k3u1fbpfcp-zoom-1.image",close_image:"https:\u002F\u002Fp9-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fa38d640009e14c87a7d29cd95dee27dd~tplv-k3u1fbpfcp-zoom-1.image",url:"https:\u002F\u002Fjuejin-activity.bytedance.net\u002Frank",is_show:d}}}},header:{leadStep:d,isPopupZlink:a},tcc:{tccConfig:c},route:{name:"column",path:v,hash:e,query:{},params:{id:w},fullPath:v,meta:{},from:{name:c,path:C,hash:e,query:{},params:{},fullPath:C,meta:{}}}},serverRendered:b,routePath:v,config:{API_HOST:"api.juejin.cn",CAPTCHA_HOST:"verify.snssdk.com",PLATFORM_APPID:{wechat:1277,weibo:1276,github:1045,wechatApp:1070},http:{}},globalRefs:{}}}(false,true,null,0,"","0",1,20,"topic","https:\u002F\u002Fp6-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F759e2aa805c0461b840e0f0f09ed05fa~tplv-k3u1fbpfcp-zoom-1.image?","recommended","hot","newest","1024 码上掘金编程挑战赛","2022",1666540800,1669823999,"following","popular",{},2,"\u002Fpost\u002F6991689670027542564","6991689670027542564",100,"2021",1641780000,"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fa06289e83d9640c4b8504d2626cfbbee~tplv-k3u1fbpfcp-image.image","https:\u002F\u002Fp9-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fe5199830276c4a85bc7c8cb8edecd54d~tplv-k3u1fbpfcp-image.image","\u002F"));</script><script src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/c264b05.js.download" defer=""></script><script src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/c9e6c98.js.download" defer=""></script><script src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/54d646a.js.download" defer=""></script><script src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/f40002f.js.download" defer=""></script><script src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/f968a2f.js.download" defer=""></script><script src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/729499a.js.download" defer=""></script><script src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/32aaed6.js.download" defer=""></script>
  

<link href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/51.68eb1f9.css" rel="stylesheet" type="text/css"><div></div><link href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/default.2050f18.css" rel="stylesheet" type="text/css"><div data-transfer="true" class="collection-list-modal byte-modal v-transfer-dom" data-v-190ec4f0="" data-v-b7c4e7d2=""><div class="byte-modal__mask" style="z-index: 1000; display: none;"></div><div class="byte-modal__wrapper" style="z-index: 1000; display: none;"><div class="byte-modal__content" style="width:520px;"><!----><div class="byte-modal__body"></div><!----></div></div></div><div data-v-190ec4f0="" data-v-4fa94e66="" data-transfer="true" class="collection-list-modal byte-modal v-transfer-dom"><div class="byte-modal__mask" style="z-index: 1001; display: none;"></div><div class="byte-modal__wrapper" style="z-index: 1001; display: none;"><div class="byte-modal__content" style="width: 520px;"><!----><div class="byte-modal__body"></div><!----></div></div></div><link href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/134.092fb39.css" rel="stylesheet" type="text/css"><link href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/176.290e99d.css" rel="stylesheet" type="text/css"><link href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/22.f94fff0.css" rel="stylesheet" type="text/css"><div data-v-41eefe39="" data-transfer="true" class="lead byte-modal v-transfer-dom"><div class="byte-modal__mask" style="z-index: 1002; display: none;"></div><div class="byte-modal__wrapper" style="z-index: 1002; display: none;"><div class="byte-modal__content" style="width: 500px;"><div class="byte-modal__header"><img data-v-41eefe39="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/MaskGroup.13dfc4f.png" alt="" loading="lazy" class="header-bgc"> <span data-v-41eefe39="" class="header-title">选择你感兴趣的技术方向</span><span aria-label="Close" class="byte-modal__headerbtn"><i class="byte-icon byte-icon--close"><svg t="1561638608887" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="441911" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M512 448l288-288c6.4-6.4 19.2-6.4 32 0l25.6 32c6.4 6.4 6.4 19.2 0 32L569.6 505.6l288 288c6.4 6.4 6.4 19.2 0 32l-32 32c-6.4 6.4-19.2 6.4-32 0L512 569.6l-288 288c-6.4 6.4-19.2 6.4-32 0l-32-32c-6.4-6.4-6.4-19.2 0-32L448 505.6 160 224c-6.4-12.8-6.4-25.6 0-32l32-32c6.4-6.4 19.2-6.4 32 0L512 448z" p-id="441912"></path><path d="M512 448l288-288c6.4-6.4 19.2-6.4 32 0l25.6 32c6.4 6.4 6.4 19.2 0 32L569.6 505.6l288 288c6.4 6.4 6.4 19.2 0 32l-32 32c-6.4 6.4-19.2 6.4-32 0L512 569.6l-288 288c-6.4 6.4-19.2 6.4-32 0l-32-32c-6.4-6.4-6.4-19.2 0-32L448 505.6 160 224c-6.4-12.8-6.4-25.6 0-32l32-32c6.4-6.4 19.2-6.4 32 0L512 448z" p-id="441913"></path></svg></i></span></div><div class="byte-modal__body"> <div data-v-41eefe39="" class="classify-box"><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M2 2.5C1.44772 2.5 1 2.94772 1 3.5V11.5C1 12.0523 1.44772 12.5 2 12.5H14C14.5523 12.5 15 12.0523 15 11.5V3.5C15 2.94772 14.5523 2.5 14 2.5H2ZM4.5 7.5C4.22386 7.5 4 7.72386 4 8V10C4 10.2761 4.22386 10.5 4.5 10.5H5C5.27614 10.5 5.5 10.2761 5.5 10V8C5.5 7.72386 5.27614 7.5 5 7.5H4.5ZM7 5.5C7 5.22386 7.22386 5 7.5 5H8C8.27614 5 8.5 5.22386 8.5 5.5V10C8.5 10.2761 8.27614 10.5 8 10.5H7.5C7.22386 10.5 7 10.2761 7 10V5.5ZM10.5 6.5C10.2239 6.5 10 6.72386 10 7V10C10 10.2761 10.2239 10.5 10.5 10.5H11C11.2761 10.5 11.5 10.2761 11.5 10V7C11.5 6.72386 11.2761 6.5 11 6.5H10.5Z" fill="#86909C"></path><rect data-v-41eefe39="" id="Rectangle 282" x="3" y="13.5" width="10" height="1.3" rx="0.5" fill="#86909C"></rect></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              后端
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M2 2.5C1.44772 2.5 1 2.94772 1 3.5V6.5H15V3.5C15 2.94772 14.5523 2.5 14 2.5H2ZM15 7.8H1V13.5C1 14.0523 1.44772 14.5 2 14.5H14C14.5523 14.5 15 14.0523 15 13.5V7.8ZM8.65811 8.52566C8.92009 8.61298 9.06167 8.89614 8.97434 9.15811L7.97434 12.1581C7.88702 12.4201 7.60386 12.5617 7.34189 12.4743C7.07991 12.387 6.93833 12.1039 7.02566 11.8419L8.02566 8.84189C8.11298 8.57991 8.39614 8.43833 8.65811 8.52566ZM3.5 5.5C3.77614 5.5 4 5.27614 4 5C4 4.72386 3.77614 4.5 3.5 4.5C3.22386 4.5 3 4.72386 3 5C3 5.27614 3.22386 5.5 3.5 5.5ZM5.5 5C5.5 5.27614 5.27614 5.5 5 5.5C4.72386 5.5 4.5 5.27614 4.5 5C4.5 4.72386 4.72386 4.5 5 4.5C5.27614 4.5 5.5 4.72386 5.5 5ZM6.5 5.5C6.77614 5.5 7 5.27614 7 5C7 4.72386 6.77614 4.5 6.5 4.5C6.22386 4.5 6 4.72386 6 5C6 5.27614 6.22386 5.5 6.5 5.5ZM6.44721 9.27639C6.57071 9.52338 6.4706 9.82372 6.22361 9.94721L5.11803 10.5L6.22361 11.0528C6.4706 11.1763 6.57071 11.4766 6.44721 11.7236C6.32372 11.9706 6.02338 12.0707 5.77639 11.9472L3.77639 10.9472C3.607 10.8625 3.5 10.6894 3.5 10.5C3.5 10.3106 3.607 10.1375 3.77639 10.0528L5.77639 9.05279C6.02338 8.92929 6.32372 9.0294 6.44721 9.27639ZM9.77639 9.94721C9.5294 9.82372 9.42929 9.52338 9.55279 9.27639C9.67628 9.0294 9.97662 8.92929 10.2236 9.05279L12.2236 10.0528C12.393 10.1375 12.5 10.3106 12.5 10.5C12.5 10.6894 12.393 10.8625 12.2236 10.9472L10.2236 11.9472C9.97662 12.0707 9.67628 11.9706 9.55279 11.7236C9.42929 11.4766 9.5294 11.1763 9.77639 11.0528L10.882 10.5L9.77639 9.94721Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              前端
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><rect data-v-41eefe39="" id="Rectangle 287" x="5.7002" y="12.5" width="1.3" height="3" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 289" x="1" y="6.5" width="1.3" height="6" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 290" x="13.7002" y="6.5" width="1.3" height="6" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 288" x="9" y="12.5" width="1.3" height="3" rx="0.5" fill="#86909C"></rect><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M13 5.86364V12.5C13 13.0523 12.5523 13.5 12 13.5H4C3.44772 13.5 3 13.0523 3 12.5V5.86364V5.77273C3 5.74067 3.00151 5.70897 3.00446 5.67768C3.11608 3.35397 5.30996 1.5 8 1.5C10.69 1.5 12.8839 3.35397 12.9955 5.67768C12.9985 5.70897 13 5.74067 13 5.77273V5.86364ZM7 6.25C7 6.66421 6.66421 7 6.25 7C5.83579 7 5.5 6.66421 5.5 6.25C5.5 5.83579 5.83579 5.5 6.25 5.5C6.66421 5.5 7 5.83579 7 6.25ZM9.75 7C10.1642 7 10.5 6.66421 10.5 6.25C10.5 5.83579 10.1642 5.5 9.75 5.5C9.33579 5.5 9 5.83579 9 6.25C9 6.66421 9.33579 7 9.75 7Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              Android
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39=""><g data-v-41eefe39="" id="pingguo-2 1"><path data-v-41eefe39="" id="Vector" d="M11.821 8.9388C11.8035 7.16562 13.267 6.31556 13.3322 6.27312C12.5097 5.06956 11.2287 4.90506 10.7724 4.88581C9.6821 4.77556 8.64523 5.52763 8.09179 5.52763C7.5401 5.52763 6.6861 4.902 5.78179 4.91863C4.59354 4.93613 3.49761 5.60944 2.88598 6.67387C1.65136 8.8163 2.56967 11.9899 3.77323 13.7277C4.36123 14.5782 5.06254 15.5332 5.98304 15.4991C6.86942 15.4637 7.20498 14.9255 8.27642 14.9255C9.34785 14.9255 9.64929 15.4991 10.5877 15.4816C11.5415 15.4637 12.1461 14.6149 12.7302 13.7618C13.4052 12.7752 13.6835 11.8197 13.6997 11.7707C13.6787 11.7611 11.8394 11.0567 11.821 8.9388ZM10.0584 3.73563C10.547 3.14281 10.8769 2.32031 10.7868 1.5C10.0829 1.52888 9.22973 1.969 8.72485 2.56006C8.2716 3.08463 7.87523 3.922 7.98154 4.72613C8.76729 4.78737 9.56923 4.32669 10.0584 3.73563Z" fill="#86909C"></path></g></g><defs data-v-41eefe39=""></defs></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              iOS
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><rect data-v-41eefe39="" id="Rectangle 289" x="1" y="8.5" width="1.3" height="5" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 292" x="14" y="8.5" width="1.3" height="5" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 293" x="7.5" y="4.5" width="1" height="3" rx="0.5" fill="#86909C"></rect><circle data-v-41eefe39="" id="Ellipse 25" cx="8" cy="2.5" r="1" fill="#86909C"></circle><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M3 7.5C3 6.94772 3.44772 6.5 4 6.5H12C12.5523 6.5 13 6.94772 13 7.5V14.5C13 15.0523 12.5523 15.5 12 15.5H4C3.44772 15.5 3 15.0523 3 14.5V7.5ZM7 11.25C7 11.6642 6.66421 12 6.25 12C5.83579 12 5.5 11.6642 5.5 11.25C5.5 10.8358 5.83579 10.5 6.25 10.5C6.66421 10.5 7 10.8358 7 11.25ZM9.75 12C10.1642 12 10.5 11.6642 10.5 11.25C10.5 10.8358 10.1642 10.5 9.75 10.5C9.33579 10.5 9 10.8358 9 11.25C9 11.6642 9.33579 12 9.75 12Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              人工智能
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><g data-v-41eefe39="" id="kaifagongjuicon-hui 1"><path data-v-41eefe39="" id="Vector" d="M14.212 5.04986L13.497 5.76886C13.3158 5.95088 13.1005 6.09531 12.8633 6.19386C12.6261 6.29242 12.3718 6.34315 12.115 6.34315C11.8582 6.34315 11.6039 6.29242 11.3667 6.19386C11.1295 6.09531 10.9142 5.95088 10.733 5.76886C10.3664 5.39915 10.1606 4.89955 10.1606 4.37886C10.1606 3.85817 10.3664 3.35857 10.733 2.98886L11.448 2.26986C11.843 1.87286 11.579 1.40486 10.868 1.51686C10.028 1.64786 9.262 2.07586 8.709 2.72286C8.005 3.41786 7.682 4.66486 7.922 5.81786L1.927 11.8469C1.56096 12.2165 1.35562 12.7157 1.35562 13.2359C1.35562 13.7561 1.56096 14.2552 1.927 14.6249C2.10804 14.807 2.32329 14.9515 2.56038 15.0501C2.79747 15.1487 3.05172 15.1995 3.3085 15.1995C3.56528 15.1995 3.81953 15.1487 4.05662 15.0501C4.29371 14.9515 4.50896 14.807 4.69 14.6249L10.686 8.59486C11.2693 8.7189 11.8745 8.69473 12.446 8.52459C13.0176 8.35444 13.5375 8.04373 13.958 7.62086C14.5581 7.01861 14.9243 6.22244 14.991 5.37486C15.071 4.91886 14.607 4.65286 14.212 5.04986ZM3.768 13.6979C3.67659 13.7885 3.56041 13.85 3.4341 13.8747C3.30779 13.8994 3.17699 13.8861 3.05819 13.8366C2.93939 13.7871 2.8379 13.7036 2.76651 13.5965C2.69511 13.4894 2.65701 13.3636 2.657 13.2349C2.65647 13.0618 2.72462 12.8957 2.84649 12.7729C2.96836 12.6501 3.13399 12.5807 3.307 12.5799C3.487 12.5799 3.651 12.6529 3.768 12.7719C3.888 12.8889 3.96 13.0539 3.96 13.2349C3.9604 13.3209 3.94363 13.4062 3.91066 13.4857C3.87769 13.5652 3.82919 13.6373 3.768 13.6979ZM3.118 5.16786L5.377 7.43986L6.297 6.51286L4.04 4.24286L3.535 3.27086L1.92 2.11186L1 3.03986L2.151 4.66086L3.118 5.16786ZM10.672 9.98586C10.642 9.95526 10.6062 9.93095 10.5667 9.91436C10.5272 9.89776 10.4848 9.88921 10.442 9.88921C10.3992 9.88921 10.3568 9.89776 10.3173 9.91436C10.2778 9.93095 10.242 9.95526 10.212 9.98586L8.83 11.3759C8.79955 11.4062 8.7754 11.4423 8.75891 11.482C8.74243 11.5218 8.73395 11.5644 8.73395 11.6074C8.73395 11.6504 8.74243 11.693 8.75891 11.7327C8.7754 11.7724 8.79955 11.8085 8.83 11.8389L12.09 15.1169C12.2106 15.2383 12.3541 15.3348 12.5122 15.4006C12.6703 15.4663 12.8398 15.5002 13.011 15.5002C13.1822 15.5002 13.3517 15.4663 13.5098 15.4006C13.6679 15.3348 13.8114 15.2383 13.932 15.1169C14.442 14.6049 14.442 13.7769 13.932 13.2639L10.672 9.98586Z" fill="#86909C"></path></g></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              开发工具
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M1 2.5C1 1.94772 1.44772 1.5 2 1.5H14C14.5523 1.5 15 1.94772 15 2.5V14.5C15 15.0523 14.5523 15.5 14 15.5H2C1.44772 15.5 1 15.0523 1 14.5V2.5ZM3 5C3 4.72386 3.22386 4.5 3.5 4.5H12.5C12.7761 4.5 13 4.72386 13 5V5.3C13 5.57614 12.7761 5.8 12.5 5.8H3.5C3.22386 5.8 3 5.57614 3 5.3V5ZM3.5 7.5C3.22386 7.5 3 7.72386 3 8V8.3C3 8.57614 3.22386 8.8 3.5 8.8H4.5C4.77614 8.8 5 8.57614 5 8.3V8C5 7.72386 4.77614 7.5 4.5 7.5H3.5ZM7 8C7 7.72386 7.22386 7.5 7.5 7.5H8.5C8.77614 7.5 9 7.72386 9 8V8.3C9 8.57614 8.77614 8.8 8.5 8.8H7.5C7.22386 8.8 7 8.57614 7 8.3V8ZM11.5 7.5C11.2239 7.5 11 7.72386 11 8V8.3C11 8.57614 11.2239 8.8 11.5 8.8H12.5C12.7761 8.8 13 8.57614 13 8.3V8C13 7.72386 12.7761 7.5 12.5 7.5H11.5ZM3 11C3 10.7239 3.22386 10.5 3.5 10.5H7.5C7.77614 10.5 8 10.7239 8 11V11.3C8 11.5761 7.77614 11.8 7.5 11.8H3.5C3.22386 11.8 3 11.5761 3 11.3V11ZM10.5 10.5C10.2239 10.5 10 10.7239 10 11V11.3C10 11.5761 10.2239 11.8 10.5 11.8H12.5C12.7761 11.8 13 11.5761 13 11.3V11C13 10.7239 12.7761 10.5 12.5 10.5H10.5Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              代码人生
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M14.9187 7.03385C15.0999 7.26744 14.9466 7.7 14.651 7.7H6.32905V4.5H5.02905V7.7H3.6C2.16406 7.7 1 6.53594 1 5.1C1 3.66406 2.16406 2.5 3.6 2.5H14.651C14.9466 2.5 15.0999 2.93257 14.9188 3.16616C14.5064 3.69779 14.2602 4.36959 14.2602 5.10001C14.2602 5.83043 14.5064 6.50222 14.9187 7.03385Z" fill="#86909C"></path><path data-v-41eefe39="" id="Subtract_2" fill-rule="evenodd" clip-rule="evenodd" d="M1.34902 14.5008C1.0534 14.5008 0.900077 14.0682 1.08126 13.8346C1.49363 13.303 1.7398 12.6312 1.7398 11.9008C1.7398 11.1704 1.49362 10.4986 1.08125 9.96694C0.900064 9.73335 1.05339 9.30078 1.34901 9.30078H12.4C13.8359 9.30078 15 10.4648 15 11.9008C15 13.3367 13.8359 14.5008 12.4 14.5008H1.34902Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              阅读
            </span></div></div></div></div> <!----></div><div class="byte-modal__footer"><div data-v-41eefe39="" class="left">跳过</div> <div data-v-41eefe39="" class="mid" style="display: none;">上一步</div> <div data-v-41eefe39="" class="right">
      至少选择1个分类
    </div></div></div></div></div><div data-v-8bb78912="" data-transfer="true" class="upgrade-new-modal byte-modal v-transfer-dom"><div class="byte-modal__mask" style="z-index: 1003; display: none;"></div><div class="byte-modal__wrapper" style="z-index: 1003; display: none;"><div class="byte-modal__content" style="width: 311px;"><div class="byte-modal__header"><span class="byte-modal__title"></span><!----></div><div class="byte-modal__body"> <!----> <div data-v-8bb78912="" class="close-icon"><img data-v-8bb78912="" src="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/8867e249c23a7c0ea596c139befc04d7.svg" alt=""></div></div><!----></div></div></div><link href="./如何优化 node 项目的 docker 镜像（像老板压榨员工一样压榨镜像） - 掘金_files/36.5774bd0.css" rel="stylesheet" type="text/css"><div id="otherside-root"><div><div id="windows"><div><div style="all: unset;"></div></div></div><div class="css-34tvdx e1gj4xli0"></div></div></div><div id="hyperwrite-login-notification" style="display: none;"></div></body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>