/*! "1.177.0-20221021-162043-ca76be1" */!function(){var e={948:function(e,t){!function(e){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window||"undefined"!=typeof window?window:"undefined"!=typeof self?self:{};function n(e){var t={exports:{}};return e(t,t.exports),t.exports}var o,r,i=function(e){return e&&e.Math==Math&&e},a=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof t&&t)||function(){return this}()||Function("return this")(),c=function(e){try{return!!e()}catch(e){return!0}},s=!c((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),u=function(e){return"object"==typeof e?null!==e:"function"==typeof e},d=a.document,l=u(d)&&u(d.createElement),f=function(e){return l?d.createElement(e):{}},p=!s&&!c((function(){return 7!=Object.defineProperty(f("div"),"a",{get:function(){return 7}}).a})),m=function(e){if(!u(e))throw TypeError(String(e)+" is not an object");return e},w=function(e,t){if(!u(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!u(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!u(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!u(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")},h=Object.defineProperty,g={f:s?h:function(e,t,n){if(m(e),t=w(t,!0),m(n),p)try{return h(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},v=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},y=s?function(e,t,n){return g.f(e,t,v(1,n))}:function(e,t,n){return e[t]=n,e},b=function(e,t){try{y(a,e,t)}catch(n){a[e]=t}return t},E="__core-js_shared__",x=a[E]||b(E,{}),I=n((function(e){(e.exports=function(e,t){return x[e]||(x[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.9.1",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),T={}.hasOwnProperty,S=function(e,t){return T.call(e,t)},_=0,A=Math.random(),C=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++_+A).toString(36)},P={}.toString,O=function(e){return P.call(e).slice(8,-1)},j="process"==O(a.process),k=a,R=function(e){return"function"==typeof e?e:void 0},L=function(e,t){return arguments.length<2?R(k[e])||R(a[e]):k[e]&&k[e][t]||a[e]&&a[e][t]},D=L("navigator","userAgent")||"",N=a.process,$=N&&N.versions,F=$&&$.v8;F?r=(o=F.split("."))[0]+o[1]:D&&(!(o=D.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=D.match(/Chrome\/(\d+)/))&&(r=o[1]);var U=r&&+r,z=!!Object.getOwnPropertySymbols&&!c((function(){return!Symbol.sham&&(j?38===U:U>37&&U<41)})),M=z&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,q=I("wks"),G=a.Symbol,H=M?G:G&&G.withoutSetter||C,B=function(e){return S(q,e)&&(z||"string"==typeof q[e])||(q[e]=z&&S(G,e)?G[e]:H("Symbol."+e)),q[e]},Z={};Z[B("toStringTag")]="z";var V="[object z]"===String(Z),X=Function.toString;"function"!=typeof x.inspectSource&&(x.inspectSource=function(e){return X.call(e)});var K,Y,W,J=x.inspectSource,Q=a.WeakMap,ee="function"==typeof Q&&/native code/.test(J(Q)),te=I("keys"),ne=function(e){return te[e]||(te[e]=C(e))},oe={};if(ee){var re=x.state||(x.state=new(0,a.WeakMap)),ie=re.get,ae=re.has,ce=re.set;K=function(e,t){return t.facade=e,ce.call(re,e,t),t},Y=function(e){return ie.call(re,e)||{}},W=function(e){return ae.call(re,e)}}else{var se=ne("state");oe[se]=!0,K=function(e,t){return t.facade=e,y(e,se,t),t},Y=function(e){return S(e,se)?e[se]:{}},W=function(e){return S(e,se)}}var ue={set:K,get:Y,has:W,enforce:function(e){return W(e)?Y(e):K(e,{})},getterFor:function(e){return function(t){var n;if(!u(t)||(n=Y(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},de=n((function(e){var t=ue.get,n=ue.enforce,o=String(String).split("String");(e.exports=function(e,t,r,i){var c,s=!!i&&!!i.unsafe,u=!!i&&!!i.enumerable,d=!!i&&!!i.noTargetGet;"function"==typeof r&&("string"!=typeof t||S(r,"name")||y(r,"name",t),(c=n(r)).source||(c.source=o.join("string"==typeof t?t:""))),e!==a?(s?!d&&e[t]&&(u=!0):delete e[t],u?e[t]=r:y(e,t,r)):u?e[t]=r:b(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||J(this)}))})),le=B("toStringTag"),fe="Arguments"==O(function(){return arguments}()),pe=V?O:function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),le))?n:fe?O(t):"Object"==(o=O(t))&&"function"==typeof t.callee?"Arguments":o};V||de(Object.prototype,"toString",V?{}.toString:function(){return"[object "+pe(this)+"]"},{unsafe:!0});var me={}.propertyIsEnumerable,we=Object.getOwnPropertyDescriptor,he={f:we&&!me.call({1:2},1)?function(e){var t=we(this,e);return!!t&&t.enumerable}:me},ge="".split,ve=c((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==O(e)?ge.call(e,""):Object(e)}:Object,ye=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},be=function(e){return ve(ye(e))},Ee=Object.getOwnPropertyDescriptor,xe={f:s?Ee:function(e,t){if(e=be(e),t=w(t,!0),p)try{return Ee(e,t)}catch(e){}if(S(e,t))return v(!he.f.call(e,t),e[t])}},Ie=Math.ceil,Te=Math.floor,Se=function(e){return isNaN(e=+e)?0:(e>0?Te:Ie)(e)},_e=Math.min,Ae=function(e){return e>0?_e(Se(e),9007199254740991):0},Ce=Math.max,Pe=Math.min,Oe=function(e,t){var n=Se(e);return n<0?Ce(n+t,0):Pe(n,t)},je=function(e){return function(t,n,o){var r,i=be(t),a=Ae(i.length),c=Oe(o,a);if(e&&n!=n){for(;a>c;)if((r=i[c++])!=r)return!0}else for(;a>c;c++)if((e||c in i)&&i[c]===n)return e||c||0;return!e&&-1}},ke={includes:je(!0),indexOf:je(!1)},Re=ke.indexOf,Le=function(e,t){var n,o=be(e),r=0,i=[];for(n in o)!S(oe,n)&&S(o,n)&&i.push(n);for(;t.length>r;)S(o,n=t[r++])&&(~Re(i,n)||i.push(n));return i},De=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ne=De.concat("length","prototype"),$e={f:Object.getOwnPropertyNames||function(e){return Le(e,Ne)}},Fe={f:Object.getOwnPropertySymbols},Ue=L("Reflect","ownKeys")||function(e){var t=$e.f(m(e)),n=Fe.f;return n?t.concat(n(e)):t},ze=function(e,t){for(var n=Ue(t),o=g.f,r=xe.f,i=0;i<n.length;i++){var a=n[i];S(e,a)||o(e,a,r(t,a))}},Me=/#|\.prototype\./,qe=function(e,t){var n=He[Ge(e)];return n==Ze||n!=Be&&("function"==typeof t?c(t):!!t)},Ge=qe.normalize=function(e){return String(e).replace(Me,".").toLowerCase()},He=qe.data={},Be=qe.NATIVE="N",Ze=qe.POLYFILL="P",Ve=qe,Xe=xe.f,Ke=function(e,t){var n,o,r,i,c,s=e.target,u=e.global,d=e.stat;if(n=u?a:d?a[s]||b(s,{}):(a[s]||{}).prototype)for(o in t){if(i=t[o],r=e.noTargetGet?(c=Xe(n,o))&&c.value:n[o],!Ve(u?o:s+(d?".":"#")+o,e.forced)&&void 0!==r){if(typeof i==typeof r)continue;ze(i,r)}(e.sham||r&&r.sham)&&y(i,"sham",!0),de(n,o,i,e)}},Ye=a.Promise,We=g.f,Je=B("toStringTag"),Qe=function(e,t,n){e&&!S(e=n?e:e.prototype,Je)&&We(e,Je,{configurable:!0,value:t})},et=B("species"),tt=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},nt={},ot=B("iterator"),rt=Array.prototype,it=function(e){return void 0!==e&&(nt.Array===e||rt[ot]===e)},at=function(e,t,n){if(tt(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,r){return e.call(t,n,o,r)}}return function(){return e.apply(t,arguments)}},ct=B("iterator"),st=function(e){if(null!=e)return e[ct]||e["@@iterator"]||nt[pe(e)]},ut=function(e){var t=e.return;if(void 0!==t)return m(t.call(e)).value},dt=function(e,t){this.stopped=e,this.result=t},lt=function(e,t,n){var o,r,i,a,c,s,u,d=!(!n||!n.AS_ENTRIES),l=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),p=at(t,n&&n.that,1+d+f),w=function(e){return o&&ut(o),new dt(!0,e)},h=function(e){return d?(m(e),f?p(e[0],e[1],w):p(e[0],e[1])):f?p(e,w):p(e)};if(l)o=e;else{if("function"!=typeof(r=st(e)))throw TypeError("Target is not iterable");if(it(r)){for(i=0,a=Ae(e.length);a>i;i++)if((c=h(e[i]))&&c instanceof dt)return c;return new dt(!1)}o=r.call(e)}for(s=o.next;!(u=s.call(o)).done;){try{c=h(u.value)}catch(e){throw ut(o),e}if("object"==typeof c&&c&&c instanceof dt)return c}return new dt(!1)},ft=B("iterator"),pt=!1;try{var mt=0,wt={next:function(){return{done:!!mt++}},return:function(){pt=!0}};wt[ft]=function(){return this},Array.from(wt,(function(){throw 2}))}catch(e){}var ht,gt,vt,yt=function(e,t){if(!t&&!pt)return!1;var n=!1;try{var o={};o[ft]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n},bt=B("species"),Et=function(e,t){var n,o=m(e).constructor;return void 0===o||null==(n=m(o)[bt])?t:tt(n)},xt=L("document","documentElement"),It=/(iphone|ipod|ipad).*applewebkit/i.test(D),Tt=a.location,St=a.setImmediate,_t=a.clearImmediate,At=a.process,Ct=a.MessageChannel,Pt=a.Dispatch,Ot=0,jt={},kt=function(e){if(jt.hasOwnProperty(e)){var t=jt[e];delete jt[e],t()}},Rt=function(e){return function(){kt(e)}},Lt=function(e){kt(e.data)},Dt=function(e){a.postMessage(e+"",Tt.protocol+"//"+Tt.host)};St&&_t||(St=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return jt[++Ot]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},ht(Ot),Ot},_t=function(e){delete jt[e]},j?ht=function(e){At.nextTick(Rt(e))}:Pt&&Pt.now?ht=function(e){Pt.now(Rt(e))}:Ct&&!It?(vt=(gt=new Ct).port2,gt.port1.onmessage=Lt,ht=at(vt.postMessage,vt,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&Tt&&"file:"!==Tt.protocol&&!c(Dt)?(ht=Dt,a.addEventListener("message",Lt,!1)):ht="onreadystatechange"in f("script")?function(e){xt.appendChild(f("script")).onreadystatechange=function(){xt.removeChild(this),kt(e)}}:function(e){setTimeout(Rt(e),0)});var Nt,$t,Ft,Ut,zt,Mt,qt,Gt,Ht={set:St,clear:_t},Bt=/web0s(?!.*chrome)/i.test(D),Zt=Ht.set,Vt=a.MutationObserver||a.WebKitMutationObserver,Xt=a.document,Kt=a.process,Yt=a.Promise,Wt=(0,xe.f)(a,"queueMicrotask"),Jt=Wt&&Wt.value;Jt||(Nt=function(){var e,t;for(j&&(e=Kt.domain)&&e.exit();$t;){t=$t.fn,$t=$t.next;try{t()}catch(e){throw $t?Ut():Ft=void 0,e}}Ft=void 0,e&&e.enter()},It||j||Bt||!Vt||!Xt?Yt&&Yt.resolve?(qt=Yt.resolve(void 0),Gt=qt.then,Ut=function(){Gt.call(qt,Nt)}):Ut=j?function(){Kt.nextTick(Nt)}:function(){Zt.call(a,Nt)}:(zt=!0,Mt=Xt.createTextNode(""),new Vt(Nt).observe(Mt,{characterData:!0}),Ut=function(){Mt.data=zt=!zt}));var Qt,en,tn,nn,on,rn=Jt||function(e){var t={fn:e,next:void 0};Ft&&(Ft.next=t),$t||($t=t,Ut()),Ft=t},an=function(e){var t,n;this.promise=new e((function(e,o){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=o})),this.resolve=tt(t),this.reject=tt(n)},cn={f:function(e){return new an(e)}},sn=function(e,t){if(m(e),u(t)&&t.constructor===e)return t;var n=cn.f(e);return(0,n.resolve)(t),n.promise},un=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},dn=Ht.set,ln=B("species"),fn="Promise",pn=ue.get,mn=ue.set,wn=ue.getterFor(fn),hn=Ye,gn=a.TypeError,vn=a.document,yn=a.process,bn=L("fetch"),En=cn.f,xn=En,In=!!(vn&&vn.createEvent&&a.dispatchEvent),Tn="function"==typeof PromiseRejectionEvent,Sn="unhandledrejection",_n=Ve(fn,(function(){if(J(hn)===String(hn)){if(66===U)return!0;if(!j&&!Tn)return!0}if(U>=51&&/native code/.test(hn))return!1;var e=hn.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[ln]=t,!(e.then((function(){}))instanceof t)})),An=_n||!yt((function(e){hn.all(e).catch((function(){}))})),Cn=function(e){var t;return!(!u(e)||"function"!=typeof(t=e.then))&&t},Pn=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;rn((function(){for(var o=e.value,r=1==e.state,i=0;n.length>i;){var a,c,s,u=n[i++],d=r?u.ok:u.fail,l=u.resolve,f=u.reject,p=u.domain;try{d?(r||(2===e.rejection&&Rn(e),e.rejection=1),!0===d?a=o:(p&&p.enter(),a=d(o),p&&(p.exit(),s=!0)),a===u.promise?f(gn("Promise-chain cycle")):(c=Cn(a))?c.call(a,l,f):l(a)):f(o)}catch(e){p&&!s&&p.exit(),f(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&jn(e)}))}},On=function(e,t,n){var o,r;In?((o=vn.createEvent("Event")).promise=t,o.reason=n,o.initEvent(e,!1,!0),a.dispatchEvent(o)):o={promise:t,reason:n},!Tn&&(r=a["on"+e])?r(o):e===Sn&&function(e,t){var n=a.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},jn=function(e){dn.call(a,(function(){var t,n=e.facade,o=e.value;if(kn(e)&&(t=un((function(){j?yn.emit("unhandledRejection",o,n):On(Sn,n,o)})),e.rejection=j||kn(e)?2:1,t.error))throw t.value}))},kn=function(e){return 1!==e.rejection&&!e.parent},Rn=function(e){dn.call(a,(function(){var t=e.facade;j?yn.emit("rejectionHandled",t):On("rejectionhandled",t,e.value)}))},Ln=function(e,t,n){return function(o){e(t,o,n)}},Dn=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Pn(e,!0))},Nn=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw gn("Promise can't be resolved itself");var o=Cn(t);o?rn((function(){var n={done:!1};try{o.call(t,Ln(Nn,n,e),Ln(Dn,n,e))}catch(t){Dn(n,t,e)}})):(e.value=t,e.state=1,Pn(e,!1))}catch(t){Dn({done:!1},t,e)}}};function $n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Fn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}_n&&(hn=function(e){!function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect Promise invocation")}(this,hn),tt(e),Qt.call(this);var t=pn(this);try{e(Ln(Nn,t),Ln(Dn,t))}catch(e){Dn(t,e)}},(Qt=function(e){mn(this,{type:fn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(e,t,n){for(var o in t)de(e,o,t[o],void 0);return e}(hn.prototype,{then:function(e,t){var n=wn(this),o=En(Et(this,hn));return o.ok="function"!=typeof e||e,o.fail="function"==typeof t&&t,o.domain=j?yn.domain:void 0,n.parent=!0,n.reactions.push(o),0!=n.state&&Pn(n,!1),o.promise},catch:function(e){return this.then(void 0,e)}}),en=function(){var e=new Qt,t=pn(e);this.promise=e,this.resolve=Ln(Nn,t),this.reject=Ln(Dn,t)},cn.f=En=function(e){return e===hn||e===tn?new en(e):xn(e)},"function"==typeof Ye&&(nn=Ye.prototype.then,de(Ye.prototype,"then",(function(e,t){var n=this;return new hn((function(e,t){nn.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof bn&&Ke({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return sn(hn,bn.apply(a,arguments))}}))),Ke({global:!0,wrap:!0,forced:_n},{Promise:hn}),Qe(hn,fn,!1),on=L(fn),s&&on&&!on[et]&&(0,g.f)(on,et,{configurable:!0,get:function(){return this}}),tn=L(fn),Ke({target:fn,stat:!0,forced:_n},{reject:function(e){var t=En(this);return t.reject.call(void 0,e),t.promise}}),Ke({target:fn,stat:!0,forced:_n},{resolve:function(e){return sn(this,e)}}),Ke({target:fn,stat:!0,forced:An},{all:function(e){var t=this,n=En(t),o=n.resolve,r=n.reject,i=un((function(){var n=tt(t.resolve),i=[],a=0,c=1;lt(e,(function(e){var s=a++,u=!1;i.push(void 0),c++,n.call(t,e).then((function(e){u||(u=!0,i[s]=e,--c||o(i))}),r)})),--c||o(i)}));return i.error&&r(i.value),n.promise},race:function(e){var t=this,n=En(t),o=n.reject,r=un((function(){var r=tt(t.resolve);lt(e,(function(e){r.call(t,e).then(n.resolve,o)}))}));return r.error&&o(r.value),n.promise}});var Un=function(e){return Object(ye(e))},zn=Array.isArray||function(e){return"Array"==O(e)},Mn=B("species"),qn=function(e,t){var n;return zn(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!zn(n.prototype)?u(n)&&null===(n=n[Mn])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},Gn=[].push,Hn=function(e){var t=1==e,n=2==e,o=3==e,r=4==e,i=6==e,a=7==e,c=5==e||i;return function(s,u,d,l){for(var f,p,m=Un(s),w=ve(m),h=at(u,d,3),g=Ae(w.length),v=0,y=l||qn,b=t?y(s,g):n||a?y(s,0):void 0;g>v;v++)if((c||v in w)&&(p=h(f=w[v],v,m),e))if(t)b[v]=p;else if(p)switch(e){case 3:return!0;case 5:return f;case 6:return v;case 2:Gn.call(b,f)}else switch(e){case 4:return!1;case 7:Gn.call(b,f)}return i?-1:o||r?r:b}},Bn={forEach:Hn(0),map:Hn(1),filter:Hn(2),some:Hn(3),every:Hn(4),find:Hn(5),findIndex:Hn(6),filterOut:Hn(7)},Zn=B("species"),Vn=function(e){return U>=51||!c((function(){var t=[];return(t.constructor={})[Zn]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Xn=Bn.map;Ke({target:"Array",proto:!0,forced:!Vn("map")},{map:function(e){return Xn(this,e,arguments.length>1?arguments[1]:void 0)}});var Kn=Object.keys||function(e){return Le(e,De)},Yn=Object.assign,Wn=Object.defineProperty,Jn=!Yn||c((function(){if(s&&1!==Yn({b:1},Yn(Wn({},"a",{enumerable:!0,get:function(){Wn(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),o="abcdefghijklmnopqrst";return e[n]=7,o.split("").forEach((function(e){t[e]=e})),7!=Yn({},e)[n]||Kn(Yn({},t)).join("")!=o}))?function(e,t){for(var n=Un(e),o=arguments.length,r=1,i=Fe.f,a=he.f;o>r;)for(var c,u=ve(arguments[r++]),d=i?Kn(u).concat(i(u)):Kn(u),l=d.length,f=0;l>f;)c=d[f++],s&&!a.call(u,c)||(n[c]=u[c]);return n}:Yn;Ke({target:"Object",stat:!0,forced:Object.assign!==Jn},{assign:Jn});var Qn=function(){var e=m(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function eo(e,t){return RegExp(e,t)}var to,no,oo={UNSUPPORTED_Y:c((function(){var e=eo("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),BROKEN_CARET:c((function(){var e=eo("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ro=RegExp.prototype.exec,io=String.prototype.replace,ao=ro,co=(no=/b*/g,ro.call(to=/a/,"a"),ro.call(no,"a"),0!==to.lastIndex||0!==no.lastIndex),so=oo.UNSUPPORTED_Y||oo.BROKEN_CARET,uo=void 0!==/()??/.exec("")[1];(co||uo||so)&&(ao=function(e){var t,n,o,r,i=this,a=so&&i.sticky,c=Qn.call(i),s=i.source,u=0,d=e;return a&&(-1===(c=c.replace("y","")).indexOf("g")&&(c+="g"),d=String(e).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==e[i.lastIndex-1])&&(s="(?: "+s+")",d=" "+d,u++),n=new RegExp("^(?:"+s+")",c)),uo&&(n=new RegExp("^"+s+"$(?!\\s)",c)),co&&(t=i.lastIndex),o=ro.call(a?n:i,d),a?o?(o.input=o.input.slice(u),o[0]=o[0].slice(u),o.index=i.lastIndex,i.lastIndex+=o[0].length):i.lastIndex=0:co&&o&&(i.lastIndex=i.global?o.index+o[0].length:t),uo&&o&&o.length>1&&io.call(o[0],n,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(o[r]=void 0)})),o});var lo=ao;Ke({target:"RegExp",proto:!0,forced:/./.exec!==lo},{exec:lo});var fo=B("species"),po=!c((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),mo="$0"==="a".replace(/./,"$0"),wo=B("replace"),ho=!!/./[wo]&&""===/./[wo]("a","$0"),go=!c((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),vo=function(e,t,n,o){var r=B(e),i=!c((function(){var t={};return t[r]=function(){return 7},7!=""[e](t)})),a=i&&!c((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[fo]=function(){return n},n.flags="",n[r]=/./[r]),n.exec=function(){return t=!0,null},n[r](""),!t}));if(!i||!a||"replace"===e&&(!po||!mo||ho)||"split"===e&&!go){var s=/./[r],u=n(r,""[e],(function(e,t,n,o,r){return t.exec===lo?i&&!r?{done:!0,value:s.call(t,n,o)}:{done:!0,value:e.call(n,t,o)}:{done:!1}}),{REPLACE_KEEPS_$0:mo,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:ho}),d=u[1];de(String.prototype,e,u[0]),de(RegExp.prototype,r,2==t?function(e,t){return d.call(e,this,t)}:function(e){return d.call(e,this)})}o&&y(RegExp.prototype[r],"sham",!0)},yo=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},bo=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==O(e))throw TypeError("RegExp#exec called on incompatible receiver");return lo.call(e,t)};vo("search",1,(function(e,t,n){return[function(t){var n=ye(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,n):new RegExp(t)[e](String(n))},function(e){var o=n(t,e,this);if(o.done)return o.value;var r=m(e),i=String(this),a=r.lastIndex;yo(a,0)||(r.lastIndex=0);var c=bo(r,i);return yo(r.lastIndex,a)||(r.lastIndex=a),null===c?-1:c.index}]}));var Eo=he.f,xo=function(e){return function(t){for(var n,o=be(t),r=Kn(o),i=r.length,a=0,c=[];i>a;)n=r[a++],s&&!Eo.call(o,n)||c.push(e?[n,o[n]]:o[n]);return c}},Io=[xo(!0),xo(!1)][0];Ke({target:"Object",stat:!0},{entries:function(e){return Io(e)}});var To=Bn.filter;Ke({target:"Array",proto:!0,forced:!Vn("filter")},{filter:function(e){return To(this,e,arguments.length>1?arguments[1]:void 0)}}),self.fetch||(self.fetch=function(e,t){return t=t||{},new Promise((function(n,o){var r=new XMLHttpRequest,i=[],a=[],c={},s=function(){return{ok:2==(r.status/100|0),statusText:r.statusText,status:r.status,url:r.responseURL,text:function(){return Promise.resolve(r.responseText)},json:function(){return Promise.resolve(r.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([r.response]))},clone:s,headers:{keys:function(){return i},entries:function(){return a},get:function(e){return c[e.toLowerCase()]},has:function(e){return e.toLowerCase()in c}}}};for(var u in r.open(t.method||"get",e,!0),r.onload=function(){r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,n){i.push(t=t.toLowerCase()),a.push([t,n]),c[t]=c[t]?c[t]+","+n:n})),n(s())},r.onerror=o,r.withCredentials="include"==t.credentials,t.headers)r.setRequestHeader(u,t.headers[u]);r.send(t.body||null)}))});var So,_o=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,o){return m(n),function(e){if(!u(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(o),t?e.call(n,o):n.__proto__=o,n}}():void 0),Ao=function(e,t,n){var o,r;return _o&&"function"==typeof(o=t.constructor)&&o!==n&&u(r=o.prototype)&&r!==n.prototype&&_o(e,r),e},Co=s?Object.defineProperties:function(e,t){m(e);for(var n,o=Kn(t),r=o.length,i=0;r>i;)g.f(e,n=o[i++],t[n]);return e},Po=ne("IE_PROTO"),Oo=function(){},jo=function(e){return"<script>"+e+"<\/script>"},ko=function(){try{So=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;ko=So?function(e){e.write(jo("")),e.close();var t=e.parentWindow.Object;return e=null,t}(So):((t=f("iframe")).style.display="none",xt.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(jo("document.F=Object")),e.close(),e.F);for(var n=De.length;n--;)delete ko.prototype[De[n]];return ko()};oe[Po]=!0;var Ro=Object.create||function(e,t){var n;return null!==e?(Oo.prototype=m(e),n=new Oo,Oo.prototype=null,n[Po]=e):n=ko(),void 0===t?n:Co(n,t)},Lo="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",Do="["+Lo+"]",No=RegExp("^"+Do+Do+"*"),$o=RegExp(Do+Do+"*$"),Fo=function(e){return function(t){var n=String(ye(t));return 1&e&&(n=n.replace(No,"")),2&e&&(n=n.replace($o,"")),n}},Uo={start:Fo(1),end:Fo(2),trim:Fo(3)},zo=$e.f,Mo=xe.f,qo=g.f,Go=Uo.trim,Ho="Number",Bo=a.Number,Zo=Bo.prototype,Vo=O(Ro(Zo))==Ho,Xo=function(e){var t,n,o,r,i,a,c,s,u=w(e,!1);if("string"==typeof u&&u.length>2)if(43===(t=(u=Go(u)).charCodeAt(0))||45===t){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:o=2,r=49;break;case 79:case 111:o=8,r=55;break;default:return+u}for(a=(i=u.slice(2)).length,c=0;c<a;c++)if((s=i.charCodeAt(c))<48||s>r)return NaN;return parseInt(i,o)}return+u};if(Ve(Ho,!Bo(" 0o1")||!Bo("0b1")||Bo("+0x1"))){for(var Ko,Yo=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof Yo&&(Vo?c((function(){Zo.valueOf.call(n)})):O(n)!=Ho)?Ao(new Bo(Xo(t)),n,Yo):Xo(t)},Wo=s?zo(Bo):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),Jo=0;Wo.length>Jo;Jo++)S(Bo,Ko=Wo[Jo])&&!S(Yo,Ko)&&qo(Yo,Ko,Mo(Bo,Ko));Yo.prototype=Zo,Zo.constructor=Yo,de(a,Ho,Yo)}var Qo=Uo.trim;Ke({target:"String",proto:!0,forced:c((function(){return!!Lo.trim()||"âÂá "!="âÂá ".trim()||"trim"!==Lo.trim.name}))},{trim:function(){return Qo(this)}});var er=function(e,t,n,o,r,i,a,c){for(var s,u=r,d=0,l=!!a&&at(a,c,3);d<o;){if(d in n){if(s=l?l(n[d],d,t):n[d],i>0&&zn(s))u=er(e,t,s,Ae(s.length),u,i-1)-1;else{if(u>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[u]=s}u++}d++}return u},tr=er;Ke({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=Un(this),n=Ae(t.length),o=qn(t,0);return o.length=tr(o,t,t,n,0,void 0===e?1:Se(e)),o}});var nr=B("unscopables"),or=Array.prototype;null==or[nr]&&g.f(or,nr,{configurable:!0,value:Ro(null)});var rr=function(e){or[nr][e]=!0};rr("flat");var ir={transform:{concat:function(e){return e.map((function(e){return cr(e)}))},form:function(e){return{type:"Form",formId:e}},paymentForm:function(e){return{type:"PaymentForm",formId:e}},resource:function(e){return{type:"UIComponent",componentId:e}},parameterisedResource:function(e){return{type:"UIComponent",componentId:e}},url:function(e){return{type:"HostedUIComponent",url:e}},componentTemplate:function(e){return{type:"ComponentTemplate",componentId:e}},parameterisedComponentTemplate:function(e){return{type:"ComponentTemplate",componentId:e}},truncate:function(e){return{type:"Truncate",truncateLength:Number(e),style:"nostyle"}},truncateWithStyle:function(e,t){return{type:"Truncate",truncateLength:Number(e),style:t}},outcomeTracker:function(e,t,n,o){return{type:"OutcomeTracker",featureId:e,featureLabel:t,outcomeId:n,outcomeLabel:o}},remove:function(){return{type:"Remove"}}}},ar={type:"LeavePristine"},cr=function(e){var t=e.trim().length?e:"blaize.transform.remove()";return new Function("blaize,leave_pristine",'"use strict";return ('+t+");")(ir,ar)},sr=function(e){return[cr(e)].flat()},ur=B("match"),dr=function(e){var t;return u(e)&&(void 0!==(t=e[ur])?!!t:"RegExp"==O(e))},lr=function(e){return function(t,n){var o,r,i=String(ye(t)),a=Se(n),c=i.length;return a<0||a>=c?e?"":void 0:(o=i.charCodeAt(a))<55296||o>56319||a+1===c||(r=i.charCodeAt(a+1))<56320||r>57343?e?i.charAt(a):o:e?i.slice(a,a+2):r-56320+(o-55296<<10)+65536}},fr={codeAt:lr(!1),charAt:lr(!0)},pr=fr.charAt,mr=function(e,t,n){return t+(n?pr(e,t).length:1)},wr=[].push,hr=Math.min,gr=4294967295,vr=!c((function(){return!RegExp(gr,"y")}));vo("split",2,(function(e,t,n){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var o=String(ye(this)),r=void 0===n?gr:n>>>0;if(0===r)return[];if(void 0===e)return[o];if(!dr(e))return t.call(o,e,r);for(var i,a,c,s=[],u=0,d=new RegExp(e.source,(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"")+"g");(i=lo.call(d,o))&&!((a=d.lastIndex)>u&&(s.push(o.slice(u,i.index)),i.length>1&&i.index<o.length&&wr.apply(s,i.slice(1)),c=i[0].length,u=a,s.length>=r));)d.lastIndex===i.index&&d.lastIndex++;return u===o.length?!c&&d.test("")||s.push(""):s.push(o.slice(u)),s.length>r?s.slice(0,r):s}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=ye(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,r,n):o.call(String(r),t,n)},function(e,r){var i=n(o,e,this,r,o!==t);if(i.done)return i.value;var a=m(e),c=String(this),s=Et(a,RegExp),u=a.unicode,d=new s(vr?a:"^(?:"+a.source+")",(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(vr?"y":"g")),l=void 0===r?gr:r>>>0;if(0===l)return[];if(0===c.length)return null===bo(d,c)?[c]:[];for(var f=0,p=0,w=[];p<c.length;){d.lastIndex=vr?p:0;var h,g=bo(d,vr?c:c.slice(p));if(null===g||(h=hr(Ae(d.lastIndex+(vr?0:p)),c.length))===f)p=mr(c,p,u);else{if(w.push(c.slice(f,p)),w.length===l)return w;for(var v=1;v<=g.length-1;v++)if(w.push(g[v]),w.length===l)return w;p=f=h}}return w.push(c.slice(f)),w}]}),!vr);var yr=function(e,t,n){var o=w(t);o in e?g.f(e,o,v(0,n)):e[o]=n},br=Vn("slice"),Er=B("species"),xr=[].slice,Ir=Math.max;Ke({target:"Array",proto:!0,forced:!br},{slice:function(e,t){var n,o,r,i=be(this),a=Ae(i.length),c=Oe(e,a),s=Oe(void 0===t?a:t,a);if(zn(i)&&("function"!=typeof(n=i.constructor)||n!==Array&&!zn(n.prototype)?u(n)&&null===(n=n[Er])&&(n=void 0):n=void 0,n===Array||void 0===n))return xr.call(i,c,s);for(o=new(void 0===n?Array:n)(Ir(s-c,0)),r=0;c<s;c++,r++)c in i&&yr(o,r,i[c]);return o.length=r,o}});var Tr=ke.includes;Ke({target:"Array",proto:!0},{includes:function(e){return Tr(this,e,arguments.length>1?arguments[1]:void 0)}}),rr("includes");var Sr=function(e){if(dr(e))throw TypeError("The method doesn't accept regular expressions");return e},_r=B("match");Ke({target:"String",proto:!0,forced:!function(e){var t=/./;try{"/./".includes(t)}catch(e){try{return t[_r]=!1,"/./".includes(t)}catch(e){}}return!1}()},{includes:function(e){return!!~String(ye(this)).indexOf(Sr(e),arguments.length>1?arguments[1]:void 0)}});var Ar=B("isConcatSpreadable"),Cr=9007199254740991,Pr="Maximum allowed index exceeded",Or=U>=51||!c((function(){var e=[];return e[Ar]=!1,e.concat()[0]!==e})),jr=Vn("concat"),kr=function(e){if(!u(e))return!1;var t=e[Ar];return void 0!==t?!!t:zn(e)};Ke({target:"Array",proto:!0,forced:!Or||!jr},{concat:function(e){var t,n,o,r,i,a=Un(this),c=qn(a,0),s=0;for(t=-1,o=arguments.length;t<o;t++)if(kr(i=-1===t?a:arguments[t])){if(s+(r=Ae(i.length))>Cr)throw TypeError(Pr);for(n=0;n<r;n++,s++)n in i&&yr(c,s,i[n])}else{if(s>=Cr)throw TypeError(Pr);yr(c,s++,i)}return c.length=s,c}});var Rr=function(e,t,n,o){try{return o?t(m(n)[0],n[1]):t(n)}catch(t){throw ut(e),t}};Ke({target:"Array",stat:!0,forced:!yt((function(e){Array.from(e)}))},{from:function(e){var t,n,o,r,i,a,c=Un(e),s="function"==typeof this?this:Array,u=arguments.length,d=u>1?arguments[1]:void 0,l=void 0!==d,f=st(c),p=0;if(l&&(d=at(d,u>2?arguments[2]:void 0,2)),null==f||s==Array&&it(f))for(n=new s(t=Ae(c.length));t>p;p++)a=l?d(c[p],p):c[p],yr(n,p,a);else for(i=(r=f.call(c)).next,n=new s;!(o=i.call(r)).done;p++)a=l?Rr(r,d,[o.value,p],!0):o.value,yr(n,p,a);return n.length=p,n}});var Lr,Dr,Nr,$r=!c((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Fr=ne("IE_PROTO"),Ur=Object.prototype,zr=$r?Object.getPrototypeOf:function(e){return e=Un(e),S(e,Fr)?e[Fr]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Ur:null},Mr=B("iterator"),qr=!1;[].keys&&("next"in(Nr=[].keys())?(Dr=zr(zr(Nr)))!==Object.prototype&&(Lr=Dr):qr=!0);var Gr=null==Lr||c((function(){var e={};return Lr[Mr].call(e)!==e}));Gr&&(Lr={}),S(Lr,Mr)||y(Lr,Mr,(function(){return this}));var Hr={IteratorPrototype:Lr,BUGGY_SAFARI_ITERATORS:qr},Br=Hr.IteratorPrototype,Zr=function(){return this},Vr=Hr.IteratorPrototype,Xr=Hr.BUGGY_SAFARI_ITERATORS,Kr=B("iterator"),Yr=function(){return this},Wr=fr.charAt,Jr="String Iterator",Qr=ue.set,ei=ue.getterFor(Jr);!function(e,t,n,o,r,i,a){!function(e,t,n){var o="String Iterator";e.prototype=Ro(Br,{next:v(1,(function(){var e,t=ei(this),n=t.string,o=t.index;return o>=n.length?{value:void 0,done:!0}:(e=Wr(n,o),t.index+=e.length,{value:e,done:!1})}))}),Qe(e,o,!1),nt[o]=Zr}(n);var c,s,u=e.prototype,d=u[Kr]||u["@@iterator"]||r,l=!Xr&&d||(s=r,l||(!Xr&&s in u?u[s]:function(){return new n(this)}));d&&(c=zr(d.call(new e)),Vr!==Object.prototype&&c.next&&(zr(c)!==Vr&&(_o?_o(c,Vr):"function"!=typeof c[Kr]&&y(c,Kr,Yr)),Qe(c,"String Iterator",!0))),u[Kr]!==l&&y(u,Kr,l),nt.String=l}(String,0,(function(e){Qr(this,{type:Jr,string:String(e),index:0})}));var ti=function(e,t){var n=[][e];return!!n&&c((function(){n.call(null,t||function(){throw 1},1)}))},ni=Bn.forEach,oi=ti("forEach")?[].forEach:function(e){return ni(this,e,arguments.length>1?arguments[1]:void 0)};for(var ri in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var ii=a[ri],ai=ii&&ii.prototype;if(ai&&ai.forEach!==oi)try{y(ai,"forEach",oi)}catch(e){ai.forEach=oi}}var ci=ke.indexOf,si=[].indexOf,ui=!!si&&1/[1].indexOf(1,-0)<0,di=ti("indexOf");Ke({target:"Array",proto:!0,forced:ui||!di},{indexOf:function(e){return ui?si.apply(this,arguments)||0:ci(this,e,arguments.length>1?arguments[1]:void 0)}});var li=function(e){var t=(new DOMParser).parseFromString(e,"text/html"),n=[].concat(Array.from(t.head.children),Array.from(t.body.children));if(!n.length)return document.createTextNode(e);var o=document.createDocumentFragment();return n.forEach((function(e){return o.appendChild(e)})),fi(o),o},fi=function(e){var t=e.querySelectorAll("script");t.length&&Array.from(t).map((function(e){var t=document.createElement("script");Array.from(e.attributes).forEach((function(e){t.setAttribute(e.name,e.value)})),t.innerHTML=e.innerHTML,e.parentNode.appendChild(t),e.parentNode.removeChild(e)}))},pi=function(e,t,n){void 0===n&&(n={}),e.forEach((function(e){var o=e.parentNode,r=Array.from(o.children).indexOf(e),i=o.removeChild(e),a=t.map((function(e){return function(e,t,n){switch(t.type){case"LeavePristine":return e;case"Truncate":return function(e,t){var n=2*t.truncateLength,o=e.outerHTML.trim().split(/\s+/);if(t.truncateLength>=o.length)return e;for(var r,i=!1,a=0,c=0,s=Fn(o);!(r=s()).done;){var u=r.value;if(c++,u.includes("<")&&(i=!0),u.includes(">")&&(i=!1),!i&&(++a>=t.truncateLength&&u.includes(".")||a==n))break}var d=o.slice(0,c).join(" ");a===n&&(d+="...\n");var l,f=(new DOMParser).parseFromString(d,"text/html").body.children[0];switch(t.style){case"fadeout":var p=document.createElement("div");p.style.position="absolute",p.style.height="100%",p.style.width="100%",p.style.bottom=0,p.style.backgroundImage="linear-gradient(0deg, #fff 0%, rgba(255, 255, 255, 0) 100%)",f.appendChild(p),(l=document.createElement("div")).style.position="relative",l.appendChild(f);break;case"linebreak":var m=document.createElement("hr");m.style.border="1px solid #ebebeb",f.appendChild(m),l=f;break;default:l=f}return l}(e,t);case"OutcomeTracker":!function(e){window.Zephr||(window.Zephr={}),window.Zephr.outcomes||(window.Zephr.outcomes={}),window.Zephr.outcomes[e.featureId]={featureLabel:e.featureLabel,outcomeId:e.outcomeId,outcomeLabel:e.outcomeLabel}}(t);break;case"Form":return function(e,t){if(t.forms&&t.forms[e.formId])return li(t.forms[e.formId]);console.error("Form not found.")}(t,n);case"PaymentForm":return function(e,t){if(t.paymentForms&&t.paymentForms[e.formId])return li(t.paymentForms[e.formId]);console.error("Payment form not found.")}(t,n);case"UIComponent":return function(e,t){if(t.uiComponents&&t.uiComponents[e.componentId])return li(t.uiComponents[e.componentId]);console.error("UI component not found.")}(t,n);case"HostedUIComponent":return function(e,t){if(t.hostedUiComponents&&t.hostedUiComponents[e.url])return li(t.hostedUiComponents[e.url]);console.error("Hosted UI component not found.")}(t,n);case"ComponentTemplate":return function(e,t){if(t.componentTemplates&&t.componentTemplates[e.componentId])return li(t.componentTemplates[e.componentId]);console.error("Component template not found.")}(t,n);case"Remove":break;default:console.error("No matching outcome type "+t.type)}}(i,e,n)})).filter(Boolean),c=document.createDocumentFragment();a.forEach((function(e){return c.appendChild(e)})),r<o.children.length?o.insertBefore(c,o.children[r]):o.appendChild(c)}))};Ke({target:"Object",stat:!0,forced:c((function(){Kn(1)}))},{keys:function(e){return Kn(Un(e))}});var mi=function(e){var t;return"function"==typeof Event?t=new Event(e):(t=document.createEvent("Event")).initEvent(e,!0,!0),t};function wi(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}var hi=function(){function e(e){this.cdnApi=e||""}var t=e.prototype;return t.fetchLiveFeatures=function(){try{var e=this;return Promise.resolve(wi((function(){return Promise.resolve(fetch(e.cdnApi+"/zephr/features").then((function(e){return e.json()})))}),(function(){return Promise.reject(new Error("Live features endpoint failed."))})))}catch(e){return Promise.reject(e)}},t.fetchDecisions=function(e,t){var n=void 0===t?{customData:{}}:t,o=n.jwt,r=n.customData,i=void 0===r?{}:r;try{var a=this,c=e.map((function(e){return e.id}));return Promise.resolve(wi((function(){return Promise.resolve(fetch(a.cdnApi+"/zephr/feature-decisions",{method:"POST",credentials:"include",headers:Object.assign({"Content-Type":"application/json",Accept:"application/json"},o&&{Authorization:"Bearer "+o}),body:JSON.stringify({path:document.location.pathname+document.location.search+document.location.hash,referer:document.referrer,featureIds:c,customData:i})}).then((function(e){return e.json()})))}),(function(){return Promise.reject(new Error("Feature decisions endpoint failed."))})))}catch(e){return Promise.reject(e)}},t.executeDecisions=function(e,t,n){for(var o,r=Fn(e);!(o=r()).done;){var i=o.value,a=(t.featureResults||{})[i.id];if(a){var c=sr(a),s=this.selectFeatureNodes(i);pi(s,c,t.resources||{})}}t.accessDetails&&(window.Zephr||(window.Zephr={}),window.Zephr.accessDetails?window.Zephr.accessDetails=this._mergeAccessDetails(window.Zephr.accessDetails,t.accessDetails):window.Zephr.accessDetails=t.accessDetails),n&&function(e){var t=e.datalayerName;t in window||(window[t]=[]);var n={},o=[];e.includeOutcomes&&window.Zephr.outcomes&&(n.zephrOutcomes=window.Zephr.outcomes,e.outcomesAsEvents&&Object.keys(window.Zephr.outcomes||[]).forEach((function(e){var t={event:"zephr-outcome-"+e,featureId:e,featureLabel:window.Zephr.outcomes[e].featureLabel,outcomeId:window.Zephr.outcomes[e].outcomeId,outcomeLabel:window.Zephr.outcomes[e].outcomeLabel};o.push(t)}))),window.Zephr&&window.Zephr.accessDetails&&(Object.keys(window.Zephr.accessDetails.trials||{}).forEach((function(t){var o=window.Zephr.accessDetails.trials[t];if(o.reportInDataLayer){var r=o.totalCredits-o.remainingCredits;e.groupFields&&!n.zephrTrials&&(n.zephrTrials={});var i=e.groupFields?n.zephrTrials:n;o.dataLayerCreditsUsedKey&&(i[o.dataLayerCreditsUsedKey]=r),o.dataLayerCreditsRemainingKey&&(i[o.dataLayerCreditsRemainingKey]=o.remainingCredits)}})),(window.Zephr.accessDetails.trialTrackingDetails||[]).forEach((function(t){var o=(window.Zephr.accessDetails["credits"===t.entitlementType?"credits":"meters"]||{})[t.entitlementId];o&&(e.groupFields&&!n.zephrTrials&&(n.zephrTrials={}),t.creditsRemainingKey&&(e.groupFields?n.zephrTrials[t.creditsRemainingKey]=o.remainingCredits:n[t.creditsRemainingKey]=o.remainingCredits),t.creditsUsedKey&&(e.groupFields?n.zephrTrials[t.creditsUsedKey]=o.totalCredits-o.remainingCredits:n[t.creditsUsedKey]=o.totalCredits-o.remainingCredits))}))),Object.keys(n).length&&(n.event="zephr-pageview",o.unshift(n)),o.length&&(o.forEach((function(e){window[t].push(e)})),document.dispatchEvent(mi("zephr.dataLayerReady")))}(n)},t._mergeAccessDetails=function(e,t){var n,o;return Object.assign({},e,t,{authenticated:t.authenticated,accessDecisions:Object.assign({},e.accessDecisions,t.accessDecisions),entitlements:this._mergeCreditData(e.entitlements,t.entitlements),credits:this._mergeCreditData(e.credits,t.credits),meters:this._mergeCreditData(e.meters,t.meters),trials:this._mergeCreditData(null!=(n=e.trials)?n:{},null!=(o=t.trials)?o:{})})},t._mergeCreditData=function(e,t){for(var n=Object.assign({},e,t),o=0,r=Object.entries(e);o<r.length;o++){var i=r[o],a=i[0],c=i[1],s=t[a];if(s){var u=n[a];this._eitherHasProperty(c,s,"decrementedInDecision")&&(u.decrementedInDecision=!(!c.decrementedInDecision&&!s.decrementedInDecision)),this._eitherHasProperty(c,s,"usedInDecision")&&(u.usedInDecision=!(!c.usedInDecision&&!s.usedInDecision)),this._eitherHasProperty(c,s,"remainingCredits")&&(u.remainingCredits=this._minOrNumber(c.remainingCredits,s.remainingCredits)),this._eitherHasProperty(c,s,"totalCredits")&&(u.totalCredits=this._minOrNumber(c.totalCredits,s.totalCredits))}}return n},t._eitherHasProperty=function(e,t,n){return e&&e.hasOwnProperty(n)||t&&t.hasOwnProperty(n)},t._minOrNumber=function(e,t){var n="number"==typeof e,o="number"==typeof t;return n&&o?Math.min(e,t):n?e:o?t:void 0},t.findFeatures=function(e){return Array.isArray(e)&&e.length?e.filter((function(e){return"COMMENT_TAG"!==e.targetType&&null!==document.querySelector(e.cssSelector)})):[]},t.selectFeatureNodes=function(e){return document.querySelectorAll(e.cssSelector)},e}(),gi=function(e){return new hi(e)};e.createInstance=gi,e.run=function(e){try{var t="",n={};"string"==typeof e?t=e:"object"==typeof e&&(n=e,t=e.cdnApi||"");var o=gi(t);return Promise.resolve(o.fetchLiveFeatures()).then((function(e){function t(){return document.dispatchEvent(mi("zephr.browserDecisionsFinished")),o}var r,i;Array.isArray(e)?r=e:(r=e.features,i=e.datalayerOutcomesConfig),console.log("Live Features:",r);var a=o.findFeatures(r),c=function(){if(a.length)return console.log("Features on page:",a),Promise.resolve(o.fetchDecisions(a,n)).then((function(e){console.log("Decisions:",e),o.executeDecisions(a,e,i)}));console.log("No features found on page.")}();return c&&c.then?c.then(t):t()}))}catch(e){return Promise.reject(e)}}}(t)}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}!function(){"use strict";const e=e=>{if("undefined"==typeof document||!e)return"";const t=`; ${document.cookie}`.split(`; ${encodeURIComponent(e)}=`);let n="";return 2===t.length&&(n=decodeURIComponent(t.pop().split(";").shift())),n},t=(e,t,n)=>{if("undefined"==typeof document||!e)return;const o=new Date(Date.now()+864e5*n);document.cookie=`${encodeURIComponent(e)}=${encodeURIComponent(t)}; expires=${o.toGMTString()}; domain=.bbc.com; path=/`},o=e=>{window.dotcom.consent=e},r=(e,t)=>{"object"==typeof window.dotcom.vendorConsent&&null!==window.dotcom.vendorConsent&&void 0!==e&&(window.dotcom.vendorConsent[e]=t)},i=["AT","AX","BE","BG","BL","CY","CZ","DE","DK","EE","ES","EU","FI","FR","GB","GF","GG","GI","GP","GR","HR","HU","IE","IM","IS","IT","JE","LI","LT","LU","LV","MF","MT","MQ","NL","NO","PL","PM","PT","RE","RO","SE","SI","SK","YT"],a=()=>"undefined"!=typeof window&&/[?|&]ads-debug/.test(window.location.href),c=()=>"undefined"!=typeof live&&"test"===live||-1!==window.location.href.indexOf("test.api.bbc.co.uk")||/(localhost|sandbox|int|test)(.dev)*.bbc.co*/.test(window.location.href),s=()=>!0===window.dotcom.userinfo.notUkIp&&!0===window.dotcom.userinfo.ads,u=()=>a()||s()&&window.dotcom.flags.state>0&&window.dotcom.flags.adverts,d=e=>{var t;window.dotcom.userinfo.country=e["X-Country"],window.dotcom.userinfo.notUkIp="no"===e["X-Ip_is_uk_combined"],window.dotcom.userinfo.ads="yes"===e["X-Ip_is_advertise_combined"],!0===window.dotcom.userinfo.notUkIp&&(window.dotcom.userinfo.eea=!!(t=window.dotcom.userinfo.country)&&-1!==i.indexOf(t.toUpperCase()))},l=(e,t)=>{t||(delete e.adverts,delete e.analytics),Object.keys(e).forEach((t=>{let n=e[t];n="true"===n||n,n="false"!==n&&n,window.dotcom.flags[t]=n})),"www.bbc.com"!==window.location.hostname||"/news/uk/the_queen"!==window.location.pathname&&"/news/live/uk-62902778"!==window.location.pathname||(window.dotcom.flags.adverts=!1)},f=async(e,t)=>fetch(e).then((e=>{if(e.ok)return e.json();throw new Error(t)})),p=async()=>{const e="Error fetching flags",t=await f(c()?"https://gn-flagpoles.test.api.bbci.co.uk/ngas":"https://gn-flagpoles.api.bbci.co.uk/ngas",e).catch((()=>{throw window.dotcom.flags.state=-2,new Error(e)}));l(t,!1),window.dotcom.flags.state=2};let m=[];const w={isAdsDebug:a,isTestEnv:c,isStageEnv:()=>/stage.bbc.co*/.test(window.location.href),isSignedIn:()=>e("ckns_id"),isDotcomAllowed:s,syncAdsEnabled:()=>u(),isAdsEnabled:()=>new Promise((e=>{window.dotcom.userinfo.state<0||window.dotcom.flags.state<0?e(u()):0===window.dotcom.userinfo.state||0===window.dotcom.flags.state?m.push(e):e(u())})),checkCookies(){o(1);const n=e("ckns_policy");(a()||n&&"1"===n.charAt(2))&&o(2),n||window.dotcom.userinfo.eea||(o(2),t("ckns_policy","111",365),t("ckns_explicit","0",365))},async init(){try{a()?(window.dotcom.userinfo.notUkIp=!0,window.dotcom.userinfo.ads=!0,window.dotcom.flags.adverts=!0,window.dotcom.flags.analytics=!0,window.dotcom.userinfo.state=1,await p()):(await(async()=>{const e="Error fetching userinfo",{userinfo:t={}}=window.dotcom.config;if(t["X-Country"]&&t["X-Ip_is_uk_combined"]&&t["X-Ip_is_advertise_combined"])return d(t),void(window.dotcom.userinfo.state=2);const n=await f("https://www.bbc.com/userinfo",e).catch((()=>{throw window.dotcom.userinfo.state=-1,new Error(e)}));d(n),window.dotcom.userinfo.state=1})(),s()?window.dotcom.config.opsFlags?(l(window.dotcom.config.opsFlags,!0),l(window.dotcom.config.ngasFlags,!1),window.dotcom.flags.state=2):(await(async()=>{const e="Error fetching gnlops flags",t=await f(c()?"https://gn-flagpoles.test.api.bbci.co.uk/gnlops":"https://gn-flagpoles.api.bbci.co.uk/gnlops",e).catch((()=>{throw window.dotcom.flags.state=-1,new Error(e)}));l(t,!0),window.dotcom.flags.state=1})(),!0!==window.dotcom.flags.adverts&&!0!==window.dotcom.flags.analytics||await p()):window.dotcom.flags.state=-3)}finally{m&&m.length>0&&(m.forEach((e=>e(u()))),m=[])}},reset(){m=[]}},h={name:"cmp",url:()=>"https://gn-web-assets.api.bbc.com/ngas/vendor/fundingchoices/cmp.js",preLoad:()=>{window.googlefc=window.googlefc||{},window.googlefc.callbackQueue=window.googlefc.callbackQueue||[]},meetsRequirements:()=>!(!window.dotcom.userinfo.eea&&!document.cookie.split(";").some((e=>e.trim().startsWith("FCCDCF="))))&&(("www.test.bbc.com"===window.location.host||"www.bbc.com"===window.location.host)&&window.location===window.parent.location)},g=()=>window.dotcom.data,v=new RegExp("^(/)?(afaanoromoo|afrique|amharic|arabic|azeri|bengali|burmese|gahuza|gujarati|hausa|hindi|igbo|indonesia|korean|kyrgyz|japanese|marathi|mundo|naidheachdan|nepali|pashto|persian|pidgin|portuguese|punjabi|russian|serbian|sinhala|somali|swahili|tajik|tamil|telugu|thai|tigrinya|turkce|ukchina|ukrainian|urdu|uzbek|vietnamese|yoruba|zhongwen)"),y=new RegExp("^/ws/av-embeds/"),b=()=>{const e=g().channel;return"future"===e||"worklife"===e||"travel"===e||"culture"===e},E=e=>{const t=e||window.location.pathname;return v.test(t)||y.test(t)},x=b,I={name:"ozone",url:()=>"https://prebid.the-ozone-project.com/hw2/OZONEBBC4784/8890582654/current/ozpb.min.js",meetsRequirements:e=>void 0!==e.ozone&&e.ozone&&!E(),id:"adunits_loader"},T="log",S="error",_={enabled:!1};("undefined"!=typeof window&&/[?|&]ads-debug/.test(window.location.href)||"undefined"!=typeof document&&-1!==document.cookie.indexOf("ads-debug="))&&(_.enabled=!0);const A=function(e){return(t,n=T)=>{_.enabled&&console[n](`dotcom:${e} ${t}`)}},C=A("loader");window.dotcom=window.dotcom||{},window.dotcom.loader=window.dotcom.loader||{loading:[],loaded:[],failed:[],waiting:[]};const P=(e,t,n,o,r,i)=>{const a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=e,a.onload=t,a.onerror=n,r?(a.defer=!0,a.nomodule=!0):o&&(a.type="module"),i&&a.setAttribute("id",i),document.head.appendChild(a)},O=(e,t,n)=>{const o=new Image(1,1);o.onload=t,o.onerror=n,o.src=e},j=(e,t)=>{window.dotcom.loader.waiting[e].forEach((({resolve:n,reject:o})=>{t?n(`${e} has loaded`):o(new Error(`${e} failed to load`))}))},k=({name:e,url:t,urlParams:n,preLoad:o,onLoad:r,isImage:i,id:a},c,s)=>{C(`loading ${e}`),window.dotcom.loader.loading.push(e),window.dotcom.loader.waiting[e]=[],"function"==typeof o&&o();const u="function"==typeof n?n():"";(i?O:P)(t(u),(()=>{const t=`load success > ${e}`;C(t),window.dotcom.loader.loaded.push(e),"function"==typeof r&&r(),c&&c(t),j(e,!0)}),(()=>{const t=`load fail > ${e}`;C(t),window.dotcom.loader.failed.push(e),s&&s(new Error(t)),j(e,!1)}),!1,!1,a)},R=({name:e,url:t,urlParams:n,meetsRequirements:o,preLoad:r,onLoad:i,image:a=!1,id:c=null})=>{!window.dotcom.loader.loading.includes(e)&&o(window.dotcom.flags)&&k({name:e,url:t,urlParams:n,preLoad:r,onLoad:i,image:a,id:c})},L=({name:e,url:t,urlParams:n,meetsRequirements:o,preLoad:r,onLoad:i,image:a=!1,id:c=null})=>new Promise(((s,u)=>{window.dotcom.loader.loaded.includes(e)?s(`${e} was already loaded`):window.dotcom.loader.failed.includes(e)?u(new Error(`${e} failed to load`)):window.dotcom.loader.loading.includes(e)?window.dotcom.loader.waiting[e].push({resolve:s,reject:u}):o(window.dotcom.flags)?k({name:e,url:t,urlParams:n,preLoad:r,onLoad:i,image:a,id:c},s,u):u(new Error(`${e} doesn't meet requirements`))})),D=(e,t)=>L({name:e,url:()=>t,urlParams:null,meetsRequirements:()=>!0,preLoad:null,onLoad:null}),N=e=>{e.forEach((e=>{R(e)}))},$=e=>{e.forEach((e=>{const t=document.createElement("link");t.href=e,t.rel="dns-prefetch",document.head.appendChild(t)}))},F=(e,t)=>{P(e,(()=>{}),(()=>{}),!0,t)},U=e=>{const t=e?e.replace(/(_|-|\/)[0-9]{7,8}$/,""):"";let n=t.indexOf("/")>-1?t.split("/"):[t];return n=n.filter((e=>""!==e)),{path:t,sectionsArr:n}},z=e=>{const{pathname:t,hostname:n,search:o}=window.location,r=(e=>{const t={AV:"media_asset",INDEX:"index",FIX:"index",STY:"story"};let n;const o=window?.SIMORGH_DATA?.pageData?.metadata?.type;return void 0===n&&o&&(n=t[o]),void 0===n&&(n=/[0-9]{7,8}$/.test(e)?"story":"index",(e.includes("/articles/")||e.includes("/article/"))&&(n="story")),/\/(sport|news)\/live\//.test(e)&&(n="live_event"),n})(t),{adCampaign:i,topics:a=[]}=window.dotcom.config,c=(e=>{const t=e.split("/");return"wwhp"===t[1]?"homepage":t[1]||"homepage"})(t),s=(e=>{let t=/[0-9]{7,8}$/.test(e)?"content":"index";return(e.includes("/articles/")||e.includes("/article/"))&&(t="content"),t})(t),u=(()=>{let e="nonbbc";const t=document.referrer.split("https://www.bbc.com/");return 2===t.length&&(e=encodeURIComponent(t[1].replace(/-|\/|_/g,"")),e.length>64&&(e="")),e})(),d=(e=>{const{path:t,sectionsArr:n}=U(e);return t===e&&1===n.length?"homepage":n[1]?n[1]:""})(t),l=(e=>{const{sectionsArr:t}=U(e);return t[2]?t[2]:""})(t),f=(e=>{let t;if(e){const n=e.split("/");4===n.length&&"article"===n[2]?t=n[3]:(/([0-9]{7,8})$/.test(e)&&(t=RegExp.$1),/(\/articles\/)(c[0-9a-hj-np-z]{10,}o$)/.test(e)&&(t=RegExp.$2))}return t})(t),p=((e,t)=>{if("worldservice"!==t)return"";let n;return n=e.split("/").pop().split("_"),n.shift(),n=n.join("_"),n})(t,c),m=(e=>{const{top:t,self:n}=window,o=t!==n?t.location.search:e;return new URLSearchParams(o)})(o);window.dotcom.data={adUnit:"",channel:c,section:d,subsection:l,asset_type:r,adCampaign:i,topics:a,story_id:f??"",urlParams:m,keyValues:{asset_type:r,channel:c,ctype:s,sectn:d,...l&&{subsect:l},domain:n,referrer:u,...f&&{story_id:f},...p&&{title:p}}},e&&Object.keys(e).forEach((t=>{"tags"===t&&(e[t]=encodeURIComponent(e[t])),window.dotcom.data.keyValues[t]=e[t]}))},M=()=>window.dotcom.data,q=A("piano");let G=!0;let H,B=!1,Z="",V="",X="";const K=()=>{X="NEWS_GNL";const t=`${window.location.href.replace(/\?.*$/,"")}?piano-REPLACETYPE`,n=encodeURIComponent(t);return fetch(`https://idcta.api.bbc.com/idcta/config?ptrt=${n}&userOrigin=${X}`,{credentials:"include"}).then((e=>e.json())).then((t=>(e(t.identity.idSignedInCookieName)&&(B=!0),Z=t.signin_url,V=t.register_url,"GREEN"===t["id-availability"]?Promise.resolve(!0):Promise.reject(new Error("piano_idcta_flagpole_fail")))))},Y=()=>D("piano","//cdn.tinypass.com/api/tinypass.min.js").catch((()=>Promise.reject(new Error("piano_load_fail")))),W=e=>{const{tp:t}=window;t.push(["addHandler","checkoutClose",e=>{"close"===e.state&&H.userActionEvent("sign-in prompt","dismiss",{container:"Piano Register Phase 1",personalisation:["EDN=Piano Register Phase 1"],metadata:["EXP=modal"],source:window.location.href},{},{},!0)}]),t.push(["addHandler","showTemplate",e=>{let t;if(""===e.containerSelector)t="modal";else{t=e.containerSelector.split("-")[1]}let n="EDN=Piano Register Phase 1";e.templateVariantId&&(n=`${n}~EXP=${e.templateVariantId}`),H.userActionEvent("display","sign-in prompt",{container:"Piano Register Phase 1",personalisation:[n],metadata:[`EXP=${t}`],source:window.location.href})}]),t.push(["addHandler","checkoutCustomEvent",t=>{let n="EDN=Piano Register Phase 1";if(t.params.variantid&&(n=`${n}~EXP=${t.params.variantid}`),e.includes(t.eventName)){const e=t.eventName.split("-");H.userActionEvent("display",e[0],{container:"Piano Register Phase 1",personalisation:[n],metadata:[`EXP=${e[1]}`],source:window.location.href},{},{},!0)}}])},J=()=>{const{tp:e}=window,{asset_type:t,channel:n,section:o}=M();(w.isAdsDebug()||G)&&e.push(["setDebug",!0]),e.push(["setAid",G?"YRhBqilb8R":"tYOkq7qlAI"]),e.push(["setSandbox",!!G]),e.push(["setUseTinypassAccounts",!1]);const r=[t],i=n;i&&r.push(i),e.push(["setTags",r]),o&&e.push(["setContentSection",o]),e.push(["setCustomVariable","signedinuser",B]);const a=["register-inline1","signin-modal","register-modal","register-inlinenobutton","register-header","register-sidebar","register-adblock","signin-adblock","register-footer"];(e=>{H=window.Reverb,H?W(e):window.__reverb.__reverbLoadedPromise.then((t=>{H=t,W(e)}))})(a),e.push(["addHandler","checkoutCustomEvent",e=>{if(a.includes(e.eventName)){const t=e.eventName.split("-");switch(t[0]){case"register":window.location.assign(V.replace("REPLACETYPE",t[1]));break;case"signin":window.location.assign(Z.replace("REPLACETYPE",t[1]))}}}]),e.push(["init",function(){e.experience.init()}])},Q=()=>!0===window.dotcom.flags.piano&&"news"===M().channel&&2===window.dotcom.consent||-1!==window.location.search.indexOf("piano-debug")&&w.isAdsDebug(),ee=()=>{G=-1!==window.location.search.indexOf("piano-debug"),D("piano-ad-block","//www.npttech.com/advertising.js").catch((()=>{const e=new Date;return e.setTime(e.getTime()+3e5),document.cookie=`__adblocker=true; expires=${e.toUTCString()}; path=/`,Promise.resolve(!0)})).then(K).then(Y).then((()=>{J()})).catch((e=>{q(e,S)}))};var te=n(948);const ne="tkn-exp";let oe,re,ie;window.dotcom=window.dotcom||{},window.dotcom.idcta=window.dotcom.idcta||{};const ae=A("xpel"),ce=((e=window.location.href)=>w.isTestEnv(e)?"https://xproxy.test.api.bbc.com":w.isStageEnv(e)?"https://xproxy.stage.api.bbc.com":"https://xproxy.api.bbc.com")(),se=()=>{const t=e("blaize_jwt"),n=window.dotcom.idcta?.signedIn||!1,o=M().keyValues||{};o.topics=window.dotcom.config?.topics?.toString(),o.country=window.dotcom.userinfo.country,o.under16=e("ckns_under16"),o.marketing=e("ckns_marketing"),o.signin_url=window.dotcom.idcta?.signin_url,o.register_url=window.dotcom.idcta?.register_url,o.signedIn=n,window.dotcom.flags.zephr&&(window.zephrBrowser=te,window.zephrBrowser.run({cdnApi:ce,jwt:t,customData:o}).catch((e=>{ae(e,S)})))},ue=()=>{const t=e("blaize_jwt"),n=e("ckns_marketing"),o={credentials:"include",method:"POST"};if(window.dotcom.flags.xproxy&&window.dotcom.flags.idcta&&window.dotcom.idcta.signedIn){if(n)o.body=JSON.stringify({marketingOptIn:n});else if(t)return void se();fetch(`${ce}/zephr-token`,o).then((()=>{var e;ae("fetch xproxy success"),n&&(e="ckns_marketing","undefined"!=typeof document&&e&&(document.cookie=`${encodeURIComponent(e)}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; domain=.bbc.com; path=/`)),se()})).catch((()=>{ae("fetch xproxy fail"),se()}))}},de=()=>{window.dotcom.flags.idcta&&window.dotcom.idcta.signedIn&&(async e=>{const{[ne]:t}=ie,n=new Date(t-6e5);if(Date.now()<n&&!e)return"ensureTokens success - token still valid";const o=await fetch(oe.signin_url,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new Error(`ensureTokens fail - ${oe.signin_url} returned ${o.status}`);return"ensureTokens success - token refreshed!"})(!0).then((e=>{ae(e),ue(),window.dotcom.xpel={callProxy:ue}})).catch((e=>{ae(e)}))},le=()=>{window.dotcom.flags.zephr&&(window.dotcom.flags.piano=!1,(()=>{const e=e=>{const t=document.createElement("div");t.setAttribute("class",e),document.body.appendChild(t)};e(`zephr_${M().asset_type}`),e("zephr_meter")})()),w.isSignedIn()||(window.dotcom.flags.xproxy=!1),window.dotcom.flags.xproxy?de():window.dotcom.flags.zephr&&se()},fe=(e,t,n,o,r)=>{if(!t){t=t||{},window.permutive=t,t.q=[],t.config=r||{},t.config.projectId=n,t.config.apiKey=o,t.config.environment=t.config.environment||"production";for(var i=["addon","identify","track","trigger","query","segment","segments","ready","on","once","user","consent"],a=0;a<i.length;a++){var c=i[a];t[c]=function(e){return function(){var n=Array.prototype.slice.call(arguments,0);t.q.push({functionName:e,arguments:n})}}(c)}}},pe="e488cdb0-e7cb-4d91-9648-60d437d8e491",me={name:"permutive",url:()=>`https://cdn.permutive.com/${pe}-web.js`,preLoad:()=>{fe(document,window.permutive,pe,"1bb84885-9325-4fef-adda-a208032b2715",{consentRequired:!0})},meetsRequirements:e=>!E()&&(void 0!==e.permutive&&e.permutive||-1!==window.location.search.indexOf("permutive"))},we={name:"grapeshot",urlParams:()=>({pageUrl:window.location.href.split("?")[0]}),url:e=>{let t=e.pageUrl;return t.indexOf("/ws/av-embeds/cps/")>0&&(t=`${t.split("ws/av-embeds/cps/")[0]}${t.split("/ws/av-embeds/cps/")[1].split("/").splice(0,2).join("/")}`),t=encodeURIComponent(t),`https://bbc.gscontxt.net/?url=${t}`},meetsRequirements:e=>void 0!==e.grapeshot&&e.grapeshot},he={name:"ias",url:()=>"https://cdn.adsafeprotected.com/iasPET.1.js",preLoad:()=>{window.__iasPET=window.__iasPET||{},window.__iasPET.queue=window.__iasPET.queue||[],window.__iasPET.pubId="9708"},meetsRequirements:e=>!E()&&(-1!==window.location.search.indexOf("ias_publisher")||void 0!==e.ias_publisher&&e.ias_publisher)},ge={name:"gpt",url:()=>"https://securepubads.g.doubleclick.net/tag/js/gpt.js",meetsRequirements:e=>void 0!==e.adverts&&e.adverts&&window.dotcom.config.pageAds},ve="https://gn-web-assets.api.bbc.com/ngas";let ye="";ye="latest/";let be="";const Ee=`${ve}/${ye}dotcom-ads.js`,xe=`${ve}/${ye}dotcom-analytics.js`,Ie=`${ve}/${ye}dotcom-preroll.js`,Te=()=>!0===window.dotcom.flags.adverts&&!0===window.dotcom.config.allowAdvertising;window.dotcom=window.dotcom||{},window.dotcom.cmd=window.dotcom.cmd||[],window.dotcom.userinfo={state:0,eea:!0,country:"gb",ads:!1,notUkIp:!1,...window.dotcom.userinfo},window.dotcom.flags={state:0,adverts:!1,idcta:!1,...window.dotcom.flags},window.dotcom.vendorConsent={};const Se=Object.freeze({pageAds:!0,playerAds:!0,lang:"en",adCampaign:"",topics:[],allowAdvertising:!0,opsFlags:"",ngasFlags:"",userinfo:""});window.dotcom.config={...Se,...window.dotcom.config};const _e=(e,t)=>{if(null===t)return;const n=(e=>Object.keys(Se).find((t=>t.toLowerCase()===e.toLowerCase())))(e);void 0!==n?window.dotcom.config[n]=t:w.isAdsDebug()&&console.log(`dotcom invalid config key: ${e}`)};window.dotcom.setConfig=_e;let Ae=[],Ce=[];if(window.dotcom.ads&&window.dotcom.ads.resolves){const{resolves:e}=window.dotcom.ads;e&&(e.getAdTag&&(Ae=e.getAdTag.slice()),e.enabled&&(Ce=e.enabled.slice()),delete window.dotcom.ads.resolves)}const Pe=(e,t)=>{window.googletag.cmd.push((()=>{window.googletag.pubads().setTargeting(e,t)}))};window.dotcom.ads={instances:{},resetAds:()=>{},destroySlot:()=>{},registerSlot:(e,t,n,o)=>{Te()&&window.dotcom.cmd.push((()=>{window.dotcom.ads.registerSlot(e,t,n,o)}))},enabled:w.isAdsEnabled,setTargeting:(e,t)=>{window.googletag?Pe(e,t):window.dotcom.cmd.push((()=>{Pe(e,t)}))},getAdTag:()=>new Promise((e=>{var t;void 0!==window.dotcom.ads.adTag?(t=[we,he],new Promise((e=>{let n=0,o=[];t.forEach((r=>{L(r).then((e=>{o=[...o,e]})).catch((e=>{o=[...o,e]})).then((()=>{n+=1,n===t.length&&e(o)}))}))}))).then((()=>window.dotcom.ads.adTag())).then((t=>{e(t)})):Te()&&window.dotcom.config.playerAds?Ae.push(e):e("")}))};const Oe={};if(window.bbcdotcom){const e=window.bbcdotcom;e.pubsub.on=(e,t)=>{Oe[e]||(Oe[e]=[]),Oe[e].push(t)},e.pubsub.off=(e,t)=>{if(Oe[e]){const n=Oe[e].indexOf(t);-1!==n&&Oe[e].splice(n,1)}},e.pubsub.trigger=(e,t)=>{Oe[e]&&Oe[e].forEach((e=>e(t)))}}const je=(e=!0)=>{Ae.length>0&&(Ae.forEach((t=>t(e?window.dotcom.ads.getAdTag():""))),Ae=[])},ke=()=>{Te()?(F(Ee,be),window.dotcom.config.playerAds?((e,t)=>new Promise(((n,o)=>{P(e,n,o,!0,t)})))(Ie,be).then(je):je(!1)):(je(!1),(()=>{let e;if(window.bbcdotcom&&(window.bbcdotcom.pubsub.trigger("ad:close","leaderboard"),document.body.classList.remove("bbccom_leaderboard")),window.dotcomConfig.bbcdotcom){if("news"===M().channel){const e=document.getElementsByClassName("nw-c-leaderboard-ad");e.length&&(e[0].style.height="0px")}"sport"===M().channel&&(e=document.getElementById("bbccom_leaderboard_1_2_3_4"),e&&(e.style.height="0px",e.style.paddingBottom="0px"))}else e=document.getElementById("dotcom-leaderboard"),e&&(e.style.height="0px")})()),Q()&&ee(),!0===window.dotcom.flags.analytics&&F(xe,be)},Re=()=>{Te()&&N([me,he]),ke()},Le=()=>{if(!0===window.dotcom.userinfo.notUkIp&&!0===window.dotcom.userinfo.ads)if(w.checkCookies(),z(),((e=window.location.href)=>{const t=new URL(e),n=t.searchParams.get("zephr");n&&("on"===n&&window.localStorage.setItem("zephr","on"),"off"===n&&window.localStorage.removeItem("zephr")),window.localStorage.getItem("zephr")&&(window.dotcom.flags.zephr="on"===window.localStorage.getItem("zephr")),"on"===t.searchParams.get("xproxy")&&(window.dotcom.flags.xproxy=!0),window.dotcom.flags.zephr&&(window.dotcom.flags.piano=!1)})(),(window.dotcom.flags.zephr||window.dotcom.flags.xproxy)&&(async()=>{let t="https://idcta.api.bbc.com/idcta/config";w.isTestEnv(window.location.href)&&(t="https://idcta.test.api.bbc.com/idcta/config"),w.isStageEnv(window.location.href)&&(t="https://idcta.stage.api.bbc.com/idcta/config");const n=`${window.location.href.split("?")[0]}?zephr-REPLACETYPE`,o=`${t}?userOrigin=NEWS_GNL&ptrt=${encodeURIComponent(n)}`,r=await fetch(o,{cache:"no-store"});if(!r.ok)throw new Error(`ID CTA Config Endpoint returned ${r.status}`);if(oe=await r.json(),window.dotcom.idcta.signout=()=>{window.dotcom.idcta.signedIn&&(window.dotcom.idcta.signedIn=!1,window.location.href=`${oe.signout_url}?ptrt=${window.location.href}`)},re=e(oe.identity.idSignedInCookieName),re){window.dotcom.idcta.signedIn=!0;const e=window.atob(re);ie=JSON.parse(e)}return window.dotcom.idcta.signin_url=oe.signin_url,window.dotcom.idcta.register_url=oe.register_url,window.dotcom.idcta.signout_url=oe.signout_url,"GREEN"===oe["id-availability"]})().then((e=>{window.dotcom.flags.idcta=e,e?le():(window.dotcom.flags.zephr=!1,window.dotcom.flags.xproxy=!1)})).catch((()=>{console.log("Fail to initiate idcta"),window.dotcom.flags.zephr=!1,window.dotcom.flags.xproxy=!1})),Te()&&N([I,we,ge]),h.meetsRequirements()){if(h.preLoad(),E()){const e=document.body.querySelector("header");e&&e.style.setProperty("z-index","2147483643")}new Promise((e=>{window.googlefc.callbackQueue.push({CONSENT_DATA_READY:()=>{window.__tcfapi("getTCData",2,((t,n)=>{n&&(t.gdprApplies&&(window.dotcom.gdprApplies=!0,r("comscore",t.vendor.consents[77]),r("permutive",t.vendor.consents[360]&&t.vendor.consents[361]),r("nielsen",t.vendor.consents[373]&&t.vendor.consents[812]),e(!0)),e(!0)),e(!0)}),[77,164,360,361,373,812])}})})).then((()=>{Re()})),R(h)}else Re()},De=()=>{w.isDotcomAllowed()&&(Te()&&$(["//www.googletagservices.com/","//bbc.gscontxt.net/","//tags.crwdcntrl.net/","//ad.crwdcntrl.net/"]),!0===window.dotcom.flags.analytics&&$(["//secure-us.imrworldwide.com/","//ssc.api.bbc.com/"])),window.dotcom.userinfo.state>0&&window.dotcom.flags.state>0?Le():window.dotcom.userinfo.state<0||window.dotcom.flags.state};var Ne;window.dotcom.featuresInited=!1,window.dotcom.locationChange=e=>{var t;w.syncAdsEnabled()&&(x()&&window.dotcom.featuresInited&&(M().keyValues.pageType!==e.keyValues.pageType&&window.dotcom.ads.destroySlots(),M().channel!==e.keyValues.channel&&window.dotcom.ads.destroySlots()),t=e?e.keyValues:null,delete window.dotcom.data,z(t),x()||(window.dotcom.ads.resetAds(),window.dotcom.reinitAds()))},Ne=window.dotcomConfig||{},Object.keys(Ne).forEach((e=>{_e(e,Ne[e])})),_e("lang",document.documentElement.lang||window.dotcom.config.lang||Se.lang),(async()=>{await w.init().catch((e=>{console.log(e)})),De(),Ce.length&&Ce.forEach((e=>{w.isAdsEnabled().then((t=>{e(t)}))}))})()}()}();