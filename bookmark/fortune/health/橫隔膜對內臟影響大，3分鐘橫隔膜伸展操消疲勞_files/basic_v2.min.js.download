var staticmain="https://www.edh.tw/";jQuery.postjson=function(a,b,c){$.ajax({type:"post",url:a,data:b,dataType:"json",success:function(a){c(JSON.parse(a))},error:function(a){console.debug(a),c("err")}})},jQuery.postwithcredentials=function(a,b,c){$.ajax({type:"POST",url:a,data:b,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0,success:function(a){c(JSON.parse(a))},error:function(){c("err")}})},Lobibox.base.DEFAULTS=$.extend({},Lobibox.base.DEFAULTS,{iconSource:"fontAwesome"});function setCollectArticleList(a,b,c,d){var e=a,f=b,g=c;"\u6536\u85CF"==g||"\u6536"==g?$.postjson("https://www.edh.tw/collect.do","artId="+e+"&atype="+f,function(a){"err"!=a.msg&&d("rc")}):$.postjson("https://www.edh.tw/delcollect.do","artId="+e+"&atype="+f,function(a){"err"!=a.msg&&d("dc")})}function getCollectLink(b){var d=b.id.split("_")[1],e=b,f=e.getAttribute("atype"),g=e.title;setCollectArticleList(d,f,g,function(g){var h=$("#"+e.id).find("span").text(),i=b.id.split("_")[0];if("rc"!=g){if(Lobibox.confirm({title:!1,msg:"\u53D6\u6D88\u5B8C\u6210",icon:!1,width:300,height:170,iconClass:!1,buttons:{ok:{text:"\u78BA\u8A8D",class:"lobibtn btn-green"}},callback:function(a,b){("ok"===b&&"am"===i||"ok"===b&&"amm"===i)&&location.replace("https://www.edh.tw/memberCenter/collect/1")}}),e.title="\u6536\u85CF",$(".collect_article #"+e.id+" span").addClass("collect_icon"),$(".collect_article #"+e.id+" span").removeClass("collect_icon_done"),$(".member-collect #"+e.id+" span").addClass("collect_icon"),$(".member-collect #"+e.id+" span").removeClass("collect_icon_done"),h=h.replace("\u5DF2\u6536","\u6536\u85CF"),2<h.length){var j=h.replace(/[^\d.]/g,""),k=-1<h.lastIndexOf("K")?j:parseInt(j)-1;h=h.replace(j,k)}$("#"+e.id).find("span").text(h),"hc"===i&&("a"==f?$("#s"+d).remove():$("#ms"+d).remove())}else{if(Lobibox.confirm({title:!1,msg:"\u606D\u559C<br>\u6536\u85CF\u6210\u529F",width:300,height:190,iconClass:!1,buttons:{ok:{text:"\u78BA\u5B9A",class:"lobibtn btn-green"},cancel:{class:"member-clap",text:""}}}),e.title="\u5DF2\u6536",$(".collect_article #"+e.id+" span").addClass("collect_icon_done"),$(".collect_article #"+e.id+" span").removeClass("collect_icon"),$(".member-collect #"+e.id+" span").addClass("collect_icon_done"),$(".member-collect #"+e.id+" span").removeClass("collect_icon"),h=h.replace("\u6536\u85CF","\u5DF2\u6536"),2<h.length){var j=h.replace(/[^\d.]/g,""),k=-1<h.lastIndexOf("K")?j:parseInt(j)+1;h=h.replace(j,k)}$("#"+e.id).find("span").text(h)}})}function changepassword(a){var b="";$pwds=$("#password").val(),$pwd1=$("#am_password").val(),$pwd2=$("#am_password2").val(),usurl="m"==a?"https://www.edh.tw/checkp.do":"https://www.edh.tw/checkp.do",""===$pwds.trim()?b+="\n\u8ACB\u8F38\u5165\u820A\u5BC6\u78BC":""==$pwd1.trim()||""==$pwd2.trim()?b+="\n\u8ACB\u78BA\u8A8D\u662F\u5426\u6709\u8F38\u5165\u65B0\u5BC6\u78BC":8>$pwd1.length?b+="\n\u5BC6\u78BC\u6700\u5C11\u97008\u500B\u5B57\u5143!":$pwd1===$pwd2?$.postjson(usurl,"pwd="+$pwds+"&ampwd="+$pwd1,function(a){alert(a.msg),!0==a.exist&&($("#password").val(""),$("#am_password").val(""),$("#am_password2").val(""))}):b+="\n\u5BC6\u78BC\u4E0D\u76F8\u540C\uFF0C\u8ACB\u518D\u78BA\u8A8D!!",""!=b&&alert(b)}function gotoLogin(a){var b=a.id.split("_")[1],c=a.getAttribute("atype");Lobibox.confirm({width:300,height:180,title:!1,iconClass:!1,msg:"\u767B\u5165\u65E9\u5B89\u5065\u5EB7\u6703\u54E1<br>\u5373\u53EF\u6536\u85CF\u6587\u7AE0\u5594\uFF01",buttons:{ok:{text:"\u8A3B\u518A",class:"lobibtn btn-lobiblack",closeOnClick:!1},no:{class:"lobibtn btn-green",text:"\u767B\u5165",closeOnClick:!0}},buttonsAlign:"center",callback:function(a,d){("ok"===d||"no"===d)&&(document.cookie="aid="+escape(b)+"_"+c+";path=/",OpenLinkLogin("#login_layer"))}})}function gotoLogin_limit(a){var b=a.id.split("_")[1],c=a.getAttribute("atype");document.cookie="aid="+escape(b)+"_"+c+";path=/",OpenLinkLogin("#login_layer")}function draw(a){d3.select("#ctag").append("svg").attr("width",665).attr("height",150).append("g").attr("transform","translate(330,80)").selectAll("text").data(a).enter().append("text").style("font-size",function(a){return a.size+"px"}).style("font-family","\u5FAE\u8EDF\u6B63\u9ED1\u9AD4").style("fill",function(a,b){return fill(b)}).style("cursor","pointer").attr("text-anchor","middle").attr("transform",function(a){return"translate("+[a.x,a.y]+")rotate("+a.rotate+")"}).text(function(a){return a.text}).on("mouseover",function(){d3.select(this).transition().duration(200).style("text-decoration","underline")}).on("mouseout",function(){d3.select(this).transition().duration(200).style("text-decoration","none")}).on("click",function(a){window.open(a.url,"_blank")})}function doSearch1(){let a=document.querySelector("#word1"),b=document.querySelector("#msearch"),c=""==b.value?a:b,d=c.value,e=localStorage.getItem("searchHistory");var f=[];d=d.toString().replace("%","\uFF05").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;"),null==e||e.includes(d)?f=[d]:(f=JSON.parse(e),f.push(d)),localStorage.setItem("searchHistory",JSON.stringify(f)),""!=d&&(location.href="https://www.edh.tw/tag/"+encodeURIComponent(d)+"/1")}function doSearch(){let a=document.querySelector("#word_inpage"),b=a.value;b=b.toString().replace("%","\uFF05").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;"),""!=b&&(location.href="https://www.edh.tw/tag/"+b+"/1")}(function(a,b){var c="",d=staticmain;null!=a.cookie.match("everydayhealth_member_id")&&$.postwithcredentials(d+"amy.do?_="+new Date().getTime(),"",function(a){if(("sus"===a.msg||"empty"===a.msg)&&""!=a.result){if(c="<a title=\"\u6703\u54E1\u4E2D\u5FC3\" rel=\"noopener\" class=\"icon icon-member\" href=\""+d+"memberCenter/home\">\u6703\u54E1\u4E2D\u5FC3</a> <div class=\"member-area\"><a href=\"javascript:;\" class=\"member-text\">\u60A8\u597D /&nbsp;</a><a href=\"javascript:;\" onclick=\"logout()\" class=\"member-text\">\u767B\u51FA</a><br><a title=\"\u6703\u54E1\u5C08\u5340\" href=\""+d+"memberCenter/home\" class=\"member-menu\">\u6703\u54E1\u5C08\u5340<i class=\"fas fa-chevron-down\"></i></a><ul class=\"member-menu-list\"><li><a href=\""+d+"memberCenter/home\">\u6703\u54E1\u4E2D\u5FC3</a></li><li><a href=\""+d+"memberCenter/collect/1\">\u6211\u7684\u6536\u85CF</a></li><li><a href=\""+d+"newsletter\">\u8A02\u95B1\u96FB\u5B50\u5831</a></li><li><a href=\""+d+"memberCenter/magazines\">\u6703\u54E1\u5C08\u520A</a></li><li><a href=\""+d+"article/26178\">\u6703\u54E1\u6B0A\u76CA</a></li></ul></div>",$(".member-info").html(c),dataLayer.push({UserID:a.s+":"+a.k}),$(".top-tooltip.logind").length&&$(".tooltip-target.logind").length){let a=$(".tooltip-target").after().position();$(".top-tooltip").css({top:a.top+30+"px",right:a.top+187+"px"})}$(".member-info").find(".small_picture").length&&$(".top-tooltip").css("top","2.25em")}});let e=a.querySelector(".article-detail .trail span a.ellipsis");if(null!==e){let b=a.querySelectorAll(".article-detail .trail span a"),c=630-(b[0].clientWidth+b[1].clientWidth+b[2].clientWidth+b[3].clientWidth+40);e.style.width=c+"px"}var f=a.createElement(b),g=a.getElementsByTagName(b)[0];f.src="https://www.youtube.com/iframe_api",g.parentNode.insertBefore(f,g)})(document,"script");function onYouTubeIframeAPIReady(){let a=document.querySelector("#MainVideoPlayer"),b=document.querySelector("#MainVideoPlayer2");if(null!=a){let b=a.getAttribute("data-type"),c=a.getAttribute("data-vid"),d=a.getAttribute("data-count");new YT.Player("MainVideoPlayer",{width:300,height:225,playerVars:{autoplay:1,controls:1,showinfo:1,modestbranding:0,loop:1,fs:1,cc_load_policy:0,iv_load_policy:3,autohide:0},events:{onReady:function(a){"playlist"===b?(a.target.mute(),a.target.loadPlaylist({listType:"playlist",list:c,index:0,suggestedQuality:"medium"})):(a.target.mute(),a.target.loadVideoById({videoId:c,suggestedQuality:"medium"}))}}})}if(null!=b){let a=b.getAttribute("data-type"),c=b.getAttribute("data-vid"),d=b.getAttribute("data-count");new YT.Player("MainVideoPlayer2",{videoId:c,width:300,height:225,playerVars:{autoplay:1,controls:1,showinfo:1,modestbranding:0,loop:1,fs:1,cc_load_policy:0,iv_load_policy:3,autohide:0},events:{onReady:function(b){"playlist"===a?(b.target.mute(),b.target.loadPlaylist({listType:"playlist",list:c,index:0,suggestedQuality:"medium"})):(b.target.mute(),b.target.loadVideoById({videoId:c,suggestedQuality:"medium"}))}}})}}if($("body").on("click",".top-tooltip",function(a){a.stopPropagation(),$(".top-tooltip").hide(),$(".tooltip-target").removeClass("tooltip-target"),$(".m-tooltip-target").removeClass("m-tooltip-target"),$(".icon-member, .icon-header-member").removeClass("notify");var b=new Date,c=b.getTime();b.setTime(c+432000000),document.cookie=null==document.cookie.match("everydayhealth_member_id")?"closeTooltip=1;expires="+b.toUTCString()+";path=/":"logindTooltip=1;expires="+b.toUTCString()+";path=/"}),$(".tooltip-target").length){let a=$(".tooltip-target").after().position();$(".top-tooltip").css({top:a.top+35+"px",right:a.top+148+"px"})}var tooltipCookie="closeTooltip";null!=document.cookie.match("everydayhealth_member_id")&&(tooltipCookie="logindTooltip"),null==document.cookie.match(tooltipCookie)?($(".icon-member[data-toggle=\"1\"]").addClass("tooltip-target notify"),$(".icon-header-member[data-toggle=\"1\"]").addClass("m-tooltip-target notify"),$(".top-tooltip").show()):($(".icon-member[data-toggle=\"1\"]").removeClass("tooltip-target notify"),$(".icon-header-member[data-toggle=\"1\"]").removeClass("m-tooltip-target notify"),$(".top-tooltip").hide()),window.onresize=function(){768<window.innerWidth?($(".tooltip-target").show(),$(".m-tooltip-target").hide()):($(".tooltip-target").hide(),$(".m-tooltip-target").show())};function getParameterByName(a,b){b||(b=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null}function getCookie(a){for(var b,d=a+"=",e=decodeURIComponent(document.cookie),f=e.split(";"),g=0;g<f.length;g++){for(b=f[g];" "==b.charAt(0);)b=b.substring(1);if(0==b.indexOf(d))return b.substring(d.length,b.length)}return""}const main_domain="https://www.edh.tw/";function subscribeMail(a){if(""==a.trim()&&!getParameterByName("mail"))return alert("\u8ACB\u8F38\u5165\u60A8\u7684 Email"),!1;if(!a.match(/^[0-9a-zA-Z]([-._]*[0-9a-zA-Z])*@[0-9a-zA-Z]([-._]*[0-9a-zA-Z])*\.+[a-zA-Z]+$/))return alert("\u8ACB\u8F38\u5165\u6B63\u78BA\u7684 Email"),!1;var b=getCookie("subscribe_edm"),c=768<window.innerWidth?"68px":"24px";(""==b||2>JSON.parse(b).length||JSON.parse(b)[0]!=a)&&$.postjson("https://www.edh.tw/getEpaperTopic.do","epmail="+a,function(b){if(b.data){var c=JSON.parse(b.data);c.unshift(a.trim()),document.cookie="subscribe_edm="+JSON.stringify(c)+";path=/;",resetEdm()}else $(".newsletter-topic :checkbox").prop("checked",!1)}),$(".progress-steps li.progress").css("width","calc(50% - "+c+")"),setTimeout(()=>{$(".progress-steps li:not(.progress):eq(1)").addClass("active")},400),$(".subscribe-topic input:hidden").val(a),$(".subscribe-form").hide(),$(".subscribe-topic").show()}function edmGoBack(){resetEdm(),$(".progress-steps li:not(.progress):eq(1)").removeClass("active"),$(".progress-steps li.progress").css("width","0"),$(".subscribe-topic").hide(),$(".subscribe-form").show()}function subscribeEDM(){var a=[],b=[],c=!1,d=!1,e=document.cookie.match("everydayhealth_member_id");$(".newsletter input[name=topic]").each(function(){$(this).is(":checked")&&(a.push($(this).attr("id").split("_")[1]),0<$(this).data("name").indexOf("\u9031\u5831")&&(c=!0),0>$(this).data("name").indexOf("\u9031\u5831")&&(d=!0),b.push($(this).data("name")))});var f=$(".newsletter input[name=mail]").val(),g=0<location.href.indexOf("newsletter")?"newsletterpage":"popup",h=768<window.innerWidth?"135px":"70px",i={EmailAddress:f,CustomFields:[{Key:"\u8A02\u95B1",Value:b.toString()}],Resubscribe:!0,ConsentToTrack:"Unchanged"};console.log(i),a.length?(console.log(a),$.postjson("https://www.edh.tw/epaper.do","epmail="+f+"&epsource="+g+"&eptopic="+JSON.stringify(a)+"&epdata="+JSON.stringify(i)+"&mainlist="+c+"&topiclist="+d,function(b){if(b.isOK)if(a.unshift(f),document.cookie="subscribe_edm="+JSON.stringify(a)+";path=/;",!$(".newsletter-box").length)$(".progress-steps li.progress").css("width","calc(100% - "+h+")"),setTimeout(()=>{$(".progress-steps li:not(.progress):eq(2)").addClass("active")},400),$(".subscribe-topic").hide(),$(".subscribe-progress .title").text("\u606D\u559C\uFF01\u5DF2\u5B8C\u6210\u66F4\u65B0"),$(".subscribe-progress p:eq(1)").text("\u6240\u6709\u8B8A\u66F4\u5C07\u65BC1\u5468\u5167\u751F\u6548").addClass("subtitle"),$(".subscribe-finish").show();else{var c=`<h1 class="title">感謝您的訂閱</h1>
										<h3 class="subtitle">早安健康與您一起探索健康世界</h3>
											
										<p class="content">不漏接最新健康訊息</p>
										<a href="https://lihi1.com/tsjBY" class="join-line">立即加入LINE好友</a>
					${null==e?`<a href="${main_domain}join?registertab=&utm_source=EDH&utm_medium=%E9%9B%BB%E5%AD%90%E5%A0%B1%E8%93%8B%E7%89%88" class="join-member">立即加入早安健康會員</a>
					`:``}<a href="${main_domain}latest/1?utm_source=EDH&utm_medium=%E9%9B%BB%E5%AD%90%E5%A0%B1%E8%93%8B%E7%89%88" class="latestnews">今日健康新聞</a>`;$(".newsletter-box section").html(c),$(".newsletter-box .newsletter").addClass("after-subscribe"),$(".newsletter-box .lobibox-body").prepend("<span class=\"close\"></span>")}})):Lobibox.confirm({width:340,height:200,title:!1,iconClass:!1,msg:"\u78BA\u8A8D\u53D6\u6D88\u6240\u6709\u8A02\u95B1\uFF1F<br><span class=\"small\">\u60A8\u5C1A\u672A\u8A02\u95B1\u4EFB\u4F55\u5831\u7A2E\uFF0C\u53D6\u6D88\u8A02\u95B1\u5C07\u932F\u904E\u6700\u65B0\u5065\u5EB7\u8CC7\u8A0A</span>",buttons:{ok:{text:"\u53D6\u6D88\u8A02\u95B1",class:"lobibtn btn-lobiblack",closeOnClick:!1},no:{class:"lobibtn btn-green",text:"\u73FE\u5728\u4E0D\u8981",closeOnClick:!0}},buttonsAlign:"center",onShow:function(a){a.$el.addClass("unsubscribe")},callback:function(b,c){if("ok"===c){$.postjson("https://www.edh.tw/cancelepaper.do","epmail="+f+"&epdata="+JSON.stringify({EmailAddress:f}),function(c){if(c.isOK)if(b.destroy(),document.cookie="subscribe_edm="+JSON.stringify(a)+";path=/;",!$(".newsletter-box").length)console.log("cancel!!"),$(".progress-steps li.progress").css("width","calc(100% - "+h+")"),setTimeout(()=>{$(".progress-steps li:not(.progress):eq(2)").addClass("active")},400),$(".subscribe-topic").hide(),$(".subscribe-progress .title").text("\u606D\u559C\uFF01\u5DF2\u5B8C\u6210\u66F4\u65B0"),$(".subscribe-progress p:eq(1)").text("\u6240\u6709\u8B8A\u66F4\u5C07\u65BC1\u5468\u5167\u751F\u6548").addClass("subtitle"),$(".subscribe-finish").show();else{$(".subscribe-topic").hide(),$(".subscribe-progress .title").text("\u606D\u559C\uFF01\u5DF2\u5B8C\u6210\u66F4\u65B0"),$(".subscribe-progress p:eq(1)").text("\u6240\u6709\u8B8A\u66F4\u5C07\u65BC1\u5468\u5167\u751F\u6548").addClass("subtitle"),$(".subscribe-finish").show();var d=`
				<div class="subscribe-progress">
					<p class="title">恭喜！已完成更新</p>
					<p class="subtitle">所有變更將於1周內生效</p>
					
				</div>
									<h3 class="subtitle">早安健康與您一起探索健康世界</h3>
									
									<p class="content">不漏接最新健康訊息</p>
									<a href="javascript:;" class="join-line">立即加入LINE好友</a>
									${null==e?`<a href="${main_domain}join?registertab" class="join-member">立即加入早安健康會員</a>
									`:``}<a href="${main_domain}latest/1?utm_source=EDH&utm_medium=%E9%9B%BB%E5%AD%90%E5%A0%B1%E8%93%8B%E7%89%88" class="latestnews">今日健康新聞</a>`;$(".newsletter section").html(d),$(".newsletter-box .newsletter").addClass("after-subscribe")}})}}})}function sidebarEDM(){var a=$("#side_edminput").val().trim(),b=[],c=[],d=!1,e=!1;if(""==a)return alert("\u8ACB\u8F38\u5165\u60A8\u7684 Email"),!1;if(!a.match(/^[0-9a-zA-Z]([-._]*[0-9a-zA-Z])*@[0-9a-zA-Z]([-._]*[0-9a-zA-Z])*\.+[a-zA-Z]+$/))return alert("\u8ACB\u8F38\u5165\u6B63\u78BA\u7684 Email"),!1;$("#right_epaper input[name=topic]").each(function(){$(this).is(":checked")&&(b.push($(this).attr("id").split("_")[1]),0<$(this).data("name").indexOf("\u9031\u5831")&&(d=!0),0>$(this).data("name").indexOf("\u9031\u5831")&&(e=!0),c.push($(this).data("name")))});var f={EmailAddress:a,CustomFields:[{Key:"\u8A02\u95B1",Value:c.toString()}],Resubscribe:!0,ConsentToTrack:"Unchanged"};b.length?$.postjson("https://www.edh.tw/epaper.do","epmail="+a+"&epsource=sidebar&eptopic="+JSON.stringify(b)+"&epdata="+JSON.stringify(f)+"&mainlist="+d+"&topiclist="+e,function(c){b.unshift(a),document.cookie="subscribe_edm="+JSON.stringify(b)+";path=/;",alert(c.msg)}):Lobibox.confirm({width:340,height:200,title:!1,iconClass:!1,msg:"\u78BA\u8A8D\u53D6\u6D88\u6240\u6709\u8A02\u95B1\uFF1F<br><span class=\"small\">\u60A8\u5C1A\u672A\u8A02\u95B1\u4EFB\u4F55\u5831\u7A2E\uFF0C\u53D6\u6D88\u8A02\u95B1\u5C07\u932F\u904E\u6700\u65B0\u5065\u5EB7\u8CC7\u8A0A</span>",buttons:{ok:{text:"\u53D6\u6D88\u8A02\u95B1",class:"lobibtn btn-lobiblack",closeOnClick:!1},no:{class:"lobibtn btn-green",text:"\u73FE\u5728\u4E0D\u8981",closeOnClick:!0}},buttonsAlign:"center",onShow:function(a){a.$el.addClass("unsubscribe")},callback:function(c,d){if("ok"===d){$.postjson("https://www.edh.tw/cancelepaper.do","epmail="+tx+"&epdata="+JSON.stringify({EmailAddress:a}),function(a){c.destroy(),a.isOK&&(document.cookie="subscribe_edm="+JSON.stringify(b)+";path=/;",alert("\u53D6\u6D88\u8A02\u95B1\u6210\u529F"))})}}})}